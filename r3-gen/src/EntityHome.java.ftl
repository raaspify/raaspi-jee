<#include "../view/assigns/PositionLength.properties" >
<#if (pojo.shortName?length > eL)>
<#assign messagingCandidate = "N">  
<#assign mailingCandidate = "N"> 
<#assign userHomeCandidate = "N"> 
<#assign transactionCandidate ="N" >
<#assign menuAttributes = pojo.shortName?substring(0,eL)?upper_case>
<#assign menuAttributesp2 = menuAttributes?substring(efS,efE)>

<#if (menuAttributes?contains("M") || menuAttributes?contains("J") ) >
 <#assign mailingCandidate ="Y" >
</#if>
<#if (menuAttributes?contains("P") ) >
 <#assign messagingCandidate ="Y" >
</#if>
<#include "../view/assigns/mergedassigns.properties" >

<#if (pojo.shortName?contains("${userEntityName?cap_first}") ) >
 <#assign userHomeCandidate ="Y" >
</#if>
<#if (menuAttributes?contains("T") ) >
 <#assign transactionCandidate ="Y" >
</#if>

/** Generated By EntityHome.java.ftl on ${.now}
*Entity Home
*parameters passed: action.package and model.package
*/

package ${actionPackage};
<#if pojo.packageName != "">
import ${pojo.packageName}.*;
</#if>
import org.apache.deltaspike.data.api.AbstractEntityRepository;
import org.apache.deltaspike.data.api.Repository;
import org.picketlink.Identity;
import org.picketlink.credential.DefaultLoginCredentials;
import org.picketlink.idm.IdentityManagementException;
import org.picketlink.authentication.AuthenticationException;
import org.picketlink.common.exceptions.PicketLinkException;

import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.Date;
import java.util.Calendar;
import java.util.Locale;
import java.util.Currency;
import java.util.Collection;
import java.lang.String;
import java.lang.StringBuilder;
import java.text.SimpleDateFormat;
import java.text.NumberFormat;
import javax.faces.application.FacesMessage;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;
import javax.faces.model.SelectItemGroup;
import javax.annotation.PostConstruct;
import javax.faces.view.ViewScoped;
import javax.inject.Inject;
import javax.transaction.Transactional;
import javax.faces.event.ActionEvent;
import javax.inject.Named;
import javax.enterprise.inject.Instance;
import java.util.Iterator;
import java.util.List;
import java.util.ArrayList;
import java.util.Arrays;
import javax.persistence.*;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.faces.component.UIComponent;
import javax.faces.validator.ValidatorException;
import java.io.IOException;
import java.io.OutputStream;
 import java.io.StringReader;
 import java.io.InputStreamReader;

import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.Serializable;
import java.io.Writer;

import java.nio.charset.StandardCharsets;
import java.nio.file.Paths;
import java.nio.file.Files;
import java.nio.file.Path;


import java.util.logging.Logger;
import java.util.ResourceBundle;



//move these under genCandidate
//import java.io.File; model already has File class, use qualified java.io.File instead of import
import java.io.StringWriter;
import org.apache.tools.ant.Project;
import org.apache.commons.beanutils.BeanUtils;
import org.apache.commons.text.StringEscapeUtils;
import org.apache.tools.ant.ProjectHelper;
import javax.servlet.Servlet;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.util.HashMap;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.servlet.http.Part;


<#if (messagingCandidate = "Y")>    
import javax.jms.ConnectionFactory;
import javax.jms.Destination;
import javax.jms.Connection;
import javax.jms.Session;
import javax.jms.MessageProducer;
import javax.jms.MessageConsumer;
import javax.jms.TextMessage;
import javax.jms.QueueSender;
import javax.jms.QueueReceiver;
import javax.jms.QueueSession;
import javax.naming.InitialContext;
import org.custommonkey.xmlunit.DetailedDiff;
import org.custommonkey.xmlunit.Diff;
import org.custommonkey.xmlunit.Difference;
import org.xml.sax.SAXException;
</#if>


<#if (userHomeCandidate = "Y")>   
 import java.security.MessageDigest;
 import   org.apache.commons.codec.binary.Hex;
import com.sendgrid.smtpapi.SMTPAPI;
import javax.mail.BodyPart;
import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;
import javax.mail.internet.MimeUtility;
import com.outjected.email.api.ContentDisposition;
import com.outjected.email.api.EmailMessage;
import com.outjected.email.api.MailMessage;
import com.rcomputer.genapp.action.SessionConfig;
import com.outjected.email.api.MessagePriority;
import com.outjected.email.api.SendFailedException;
import com.rcomputer.genapp.action.MailMessageImpl;
import com.rcomputer.genapp.action.SimpleMailConfig;
import com.outjected.email.impl.attachments.URLAttachment;
import com.outjected.email.impl.templating.freemarker.FreeMarkerTemplate;
import com.outjected.email.impl.util.EmailAttachmentUtil;
import com.outjected.email.impl.util.MailTestUtil;
import com.outjected.email.impl.util.MessageConverter;
import com.google.common.io.Resources;


</#if>

 import java.awt.image.BufferedImage;
 import java.awt.Graphics2D;
 import java.io.ByteArrayInputStream;
 import java.io.ByteArrayOutputStream;
 import javax.imageio.ImageIO;
 import net.coobird.thumbnailator.*;
 import org.jsoup.Jsoup;
 //put conditional import
 import org.jsoup.nodes.Document;
 import org.jsoup.nodes.Element;
 import org.jsoup.select.Elements;
 import org.jsoup.safety.Whitelist;
 import org.jsoup.nodes.TextNode;
 import org.jsoup.nodes.Attributes; 
 import org.jsoup.nodes.Attribute; 
 import java.net.URL;
 import java.io.InputStream;
 import java.io.OutputStream;

<#if menuAttributesp2 == "5B" || menuAttributesp2 == "1A" || menuAttributesp2 == "1M" ||menuAttributesp2 == "1N" >
 import com.opencsv.CSVParser;
 import com.opencsv.CSVParserBuilder;
 import com.opencsv.CSVReader;
 import com.opencsv.CSVReaderBuilder;
 import com.opencsv.CSVWriter;
 import com.opencsv.bean.ColumnPositionMappingStrategy;
 import com.opencsv.bean.HeaderColumnNameTranslateMappingStrategy;
 import com.opencsv.bean.HeaderColumnNameMappingStrategy;
 import com.opencsv.bean.CsvToBean;
 import com.opencsv.bean.CsvToBeanBuilder;
 import com.opencsv.bean.StatefulBeanToCsv; 
 import com.opencsv.bean.StatefulBeanToCsvBuilder; 
 import java.io.FileOutputStream;
</#if>

<#if menuAttributesp2 == "1M" || menuAttributesp2 == "1N" >
import java.io.FileOutputStream;
import java.util.Base64;

</#if>
<#if menuAttributesp2 == "1A" >
import java.util.Base64;
</#if>

     <#assign copyFrom = "Xoxxuq2b4xwwqqhxxxxxcuodetails">
     <#assign lineField = "B1xxzo11bvlxxxxxxxxxline">
 
<#assign blobdataentityDataFieldName="b1xxuzbxbvxxxxxxxxxxdata">
<#assign clobdataentityDataFieldName="b1xxuzaxbvxxxxxxxxxxdata">
<#assign clientImailaddr = "d4xxhxxrbv24xxxxxxxximailaddr">
<#assign itemKeyField="a0xxukixbxxxxxxxxxxxmatcode">
<#assign idsType ="xxxxxxxxx">
<#assign ids ="notdefinedxxxxxxxxx">
<#assign classbody>
<#assign entityName = pojo.shortName>
<#assign componentName = util.lower(entityName)>
<#assign homeName = componentName + "Home">
<#assign listName = componentName + "List">
  <#assign firstTime="Y"> 
  <#assign addressEntityAddressFieldName="a0xxukbxbxxxxxxxxxxxaddrescode">
  <#assign itemEntityItemFieldName="a0xxukixbxxxxxxxxxxxmatcode">
  <#assign itemPriceField="b8fbzpxxbvxxxxxxxxxxselprice">
  <#assign itemCostField="b6fbzicxbvxxxxxxxxxxcost">
  <#assign itemQtyField="b0xxziqxlvxxsaxxxxxxquantity">
  <#assign employeeinvoiceEtcItemDetailsEntityName="xoxxuq454xwwqqhxxxxxemplodetails">
  <#assign employeeEntityEmployeeFieldName="a0xxuktxbvxxxxxxxxxxemployee">
  <#assign emplodetailsID1FieldName="a0xxucdxbvxxxxxxxxxxemplono">
  <#assign emplodetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign emplodetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign emplodetailsTax1FieldName="zdxxzxz1avxxxxxxxxxxtax1amt">
  <#assign emplodetailsTax2FieldName="zexxzxz2avxxxxxxxxxxtax2amt">
  <#assign emplodetailsTax3FieldName="zfxxzxz3avxxxxxxxxxxtax3amt">
  <#assign emplodetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign emplodetailsDeliveryFieldName="zbxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign emplodetailsMiscelleneousFieldName="zcxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign emplodetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign emplodetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign employeeInvoiceEtcItemDetailsLineTotalFieldName="zgxxzlpxxvxxxxxxxxxxlinetotl">
  <#assign customerEntityCustomerFieldName="a0xxukxxbvxxxxxxxxxxcustomer">
  <#assign customerEntityIntegrationSetFieldName="f2xxuwmxbv40xxxxxxxxintegrset">
  <#assign cuinvoiceEtcItemDetailsEntityName="xoxxuq24xxxxxxxxcuqodetails">
  <#assign cuinvoiceEtcItemDetailsID1FieldName="a0xxucdxbvxxxxxxxxxxcuqno">
  <#assign cuinvoiceEtcItemDetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign cuinvoiceEtcItemDetailsPriceFieldName="zpxravxxxxxxxxxxordprice">
  <#assign cuinvoiceEtcItemDetailsTax1FieldName="zxz1avxxxxxxxxxxtax1amt">
  <#assign cuinvoiceEtcItemDetailsTax2FieldName="zxz2avxxxxxxxxxxtax2amt">
  <#assign cuinvoiceEtcItemDetailsTax3FieldName="zxz3avxxxxxxxxxxtax3amt">
  <#assign cuinvoiceEtcItemDetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign cuinvoiceEtcItemDetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign cuinvoiceEtcItemDetailsDeliveryFieldName="zlxxavxxxxxxxxxxdelivchrg">
  <#assign cuinvoiceEtcItemDetailsMiscelleneousFieldName="zmxxavxxxxxxxxxxmiscchrg">
  <#assign cuinvoiceEtcItemDetailsQtyFieldName="zqxxbvnxxxxxxxxxqtyordrd">
  <#assign cuinvoiceEtcItemDetailsLineTotalFieldName="zgxxzlpxxvxxxxxxxxxxlinetotl">
  <#assign ccontactEntityContactFieldName="a0xxukxxbvxxxxxxxxxxcontact">
  <#assign cuqdetailsID1FieldName="a0xxucdxbvxxxxxxxxxxcuqno">
  <#assign cuqdetailsID2FieldName="z1xxzo11bvlxxxxxxxxxline">
  <#assign cuqdetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign cuqdetailsTax1FieldName="zdxxzxz1avxxxxxxxxxxtax1amt">
  <#assign cuqdetailsTax2FieldName="zexxzxz2avxxxxxxxxxxtax2amt">
  <#assign cuqdetailsTax3FieldName="zfxxzxz3avxxxxxxxxxxtax3amt">
  <#assign cuqdetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign cuqdetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign cuqdetailsDeliveryFieldName="zbxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign cuqdetailsMiscelleneousFieldName="zcxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign cuqdetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign cuodetailsID1FieldName="a0xxucdxbvxxxxxxxxxxcuono">
  <#assign cuodetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign cuodetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign cuodetailsTax1FieldName="zdxxzxz1avxxxxxxxxxxtax1amt">
  <#assign cuodetailsTax2FieldName="zexxzxz2avxxxxxxxxxxtax2amt">
  <#assign cuodetailsTax3FieldName="zfxxzxz3avxxxxxxxxxxtax3amt">
  <#assign cuodetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign cuodetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign cuodetailsDeliveryFieldName="zbxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign cuodetailsMiscelleneousFieldName="zcxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign cuodetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign cuidetailsID1FieldName="a0xxucdxbvxxxxxxxxxxcuino">
  <#assign cuidetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign cuidetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign cuidetailsTax1FieldName="zdxxzxz1avxxxxxxxxxxtax1amt">
  <#assign cuidetailsTax2FieldName="zexxzxz2avxxxxxxxxxxtax2amt">
  <#assign cuidetailsTax3FieldName="zfxxzxz3avxxxxxxxxxxtax3amt">
  <#assign cuidetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign cuidetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign cuidetailsDeliveryFieldName="zbxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign cuidetailsMiscelleneousFieldName="zcxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign cuidetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
<#-- invoice is equivalent to item in case of payment -->
  <#assign cupdetailsID1FieldName="a0xxucdxbvxxxxxxxxxxcupno">
  <#assign cupdetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign cupdetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign cupdetailsTax1FieldName="zbxxzxz1avxxxxxxxxxxtax1amt">
  <#assign cupdetailsTax2FieldName="zcxxzxz2avxxxxxxxxxxtax2amt">
  <#assign cupdetailsTax3FieldName="zdxxzxz3avxxxxxxxxxxtax3amt">
  <#assign cupdetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign cupdetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign cupdetailsDeliveryFieldName="z9xxzlxxavxxxxxxxxxxdelivchrg">
  <#assign cupdetailsMiscelleneousFieldName="zaxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign cupdetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign cushdetailsEntityName=shipmentdetailsEntityName>
  <#assign cushdetailsID1FieldName="a0xxusdxbvxxxxxxxxxxshipcode">
  <#assign cushdetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign cushdetailsPriceFieldName="z5xxzpxravxxxxxxxxxxshippingprice">
  <#assign cushdetailsBaseAmountFieldName="z8xxztprlxxxxxxxxxxxamount">
  <#assign cushdetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyshipped">
  <#assign divisionDivcode="a0xxukoxbvxxxxxxxxxxdivcode">
  <#assign departmentDepcode="a0xxukexbvxxxxxxxxxxdepcode">
  <#assign companyCompanycode="a0xxukcxbvxxxxxxxxxxcompanycode">
  <#assign membersgroupGroupid="a0xxukxxbvxxxxxxxxxxgroupid">
  <#assign groupmembersEntityaParentidFieldName="a0xxuhggbvxxxxxxxxxxparentid">
  <#assign accountAccount="a0xxukwxbvxxxxxxxxxxaccount">
  <#assign accountDivcode="y6xxugoxavxxxxxxxxxxdivcode">
  <#assign accountDepcode="y7xxugexavxxxxxxxxxxdepcode">
  <#assign accountCompanycode="y6xxugcxbvxxxxxxxxxxcompanycode">
  <#assign gentableTablename="a0xxukxxbvxxxxxxxxxxtablename">
  <#assign vendorVendor="a0xxukxxbvxxxxxxxxxxvendor">
  <#assign vendorIntegrationset="o1xxuwmrbv40xxxxxxxxintegrset">
  <#assign vcontactEntityContactFieldName="a0xxukxxbvxxxxxxxxxxcontact">
  <#assign vendorInvoiceEntityName=vinvoiceEntityName> 
  <#assign vendorInvoiceEtcItemDetailsEntityName="xoxxuq3c4xwwqqhxxxxxvendidetails">
  <#assign vendorInvoiceEtcItemDetailsID1FieldName="a0xxuvdxbvxxxxxxxxxxvendqno">
  <#assign vendorInvoiceEtcItemDetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign vendorInvoiceEtcItemDetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign vendorInvoiceEtcItemDetailsTax1FieldName="zxz1avxxxxxxxxxxtax1amt">
  <#assign vendorInvoiceEtcItemDetailsTax2FieldName="zxz2avxxxxxxxxxxtax2amt">
  <#assign vendorInvoiceEtcItemDetailsTax3FieldName="zxz3avxxxxxxxxxxtax3amt">
  <#assign vendorInvoiceEtcItemDetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign vendorInvoiceEtcItemDetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign vendorInvoiceEtcItemDetailsDeliveryFieldName="zlxxavxxxxxxxxxxdelivchrg">
  <#assign vendorInvoiceEtcItemDetailsMiscelleneousFieldName="zmxxavxxxxxxxxxxmiscchrg">
  <#assign vendorInvoiceEtcItemDetailsQtyFieldName="zqxxbvnxxxxxxxxxqtyordrd">
  <#assign vendqdetailsID1FieldName="a0xxuvdxbvxxxxxxxxxxvendqno">
  <#assign vendqdetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign vendqdetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign vendqdetailsTax1FieldName="zcxxzxz1avxxxxxxxxxxtax1amt">
  <#assign vendqdetailsTax2FieldName="zdxxzxz2avxxxxxxxxxxtax2amt">
  <#assign vendqdetailsTax3FieldName="zexxzxz3avxxxxxxxxxxtax3amt">
  <#assign vendqdetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign vendqdetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign vendqdetailsDeliveryFieldName="zaxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign vendqdetailsMiscelleneousFieldName="zbxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign vendqdetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign vendorInvoiceEtcItemDetailsLineTotalFieldName="zfxxzlpxxvxxxxxxxxxxlinetotl">
  <#assign vendorOrderItemDetailsEntityName=vendodetailsEntityName>
  <#assign vendorOrderItemDetailsID1FieldName="a0xxuvdxbvxxxxxxxxxxvendono">
  <#assign vendorOrderItemDetailsID2FieldName="a1xxzo11bvlxxxxxxxxxline">
  <#assign vendorOrderItemDetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign vendorOrderItemDetailsTax1FieldName="zcxxzxz1avxxxxxxxxxxtax1amt">
  <#assign vendorOrderItemDetailsTax2FieldName="zdxxzxz2avxxxxxxxxxxtax2amt">
  <#assign vendorOrderItemDetailsTax3FieldName="zexxzxz3avxxxxxxxxxxtax3amt">
  <#assign vendorOrderItemDetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign vendodetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign vendorOrderItemDetailsDeliveryFieldName="zaxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign vendorOrderItemDetailsMiscelleneousFieldName="zbxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign vendorOrderItemDetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign vendidetailsEntityName=vendidetailsEntityName>
  <#assign vendidetailsID1FieldName="a0xxuvdxbvxxxxxxxxxxvendino">
  <#assign vendidetailsID2FieldName="a1xxzo11bvlxxxxxxxxxline">
  <#assign vendidetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign vendidetailsTax1FieldName="zcxxzxz1avxxxxxxxxxxtax1amt">
  <#assign vendidetailsTax2FieldName="zdxxzxz2avxxxxxxxxxxtax2amt">
  <#assign vendidetailsTax3FieldName="zexxzxz3avxxxxxxxxxxtax3amt">
  <#assign vendidetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign vendidetailsDeliveryFieldName="zaxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign vendidetailsMiscelleneousFieldName="zbxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign vendidetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign vendpdetailsID1FieldName="a0xxuvdxbvxxxxxxxxxxvendpno">
  <#assign vendpdetailsID2FieldName="a1xxzo11bvlxxxxxxxxxline">
  <#assign vendpdetailsPriceFieldName="z5xxzpxravxxxxxxxxxxordprice">
  <#assign vendpdetailsTax1FieldName="zcxxzxz1avxxxxxxxxxxtax1amt">
  <#assign vendpdetailsTax2FieldName="zdxxzxz2avxxxxxxxxxxtax2amt">
  <#assign vendpdetailsTax3FieldName="zexxzxz3avxxxxxxxxxxtax3amt">
  <#assign vendpdetailsUnitFieldName="z4xxuuxxbv19xxxxxxxxordunit">
  <#assign vendpdetailsBaseAmountFieldName="zbxxzbxxavxxxxxxxxxxbaseamount">
  <#assign vendpdetailsDeliveryFieldName="zaxxzlxxavxxxxxxxxxxdelivchrg">
  <#assign vendpdetailsMiscelleneousFieldName="zbxxzmxxavxxxxxxxxxxmiscchrg">
  <#assign vendpdetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyordrd">
  <#assign vendshdetailsEntityName=vshipmendetailsEntityName>
  <#assign vendshdetailsID1FieldName="a0xxusdxbvxxxxxxxxxxshipcode">
  <#assign vendshdetailsID2FieldName="b1xxzo11bvlxxxxxxxxxline">
  <#assign vendshdetailsPriceFieldName="z5xxzpxravxxxxxxxxxxshippingprice">
  <#assign vendshdetailsBaseAmountFieldName="z8xxztprlxxxxxxxxxxxamount">
  <#assign vendshdetailsQtyFieldName="z3xxeqxxbvnxxxxxxxxxqtyshipped">

  <#assign clientEnterprisecompcode="d8xxuzxdbvxxxxxxxxxxenterprisecompcode">
  <#assign miscchrgField="">
  <#assign deliveryField="">
  <#assign priceField="">
  <#assign qtyField="">
  <#assign qtyOutStandingField="">
  <#assign amtField="">
  <#assign amtOutStandingField="">
  <#assign costField="">
  <#assign tax1Field="">
  <#assign tax2Field="">
  <#assign tax3Field="">
  <#assign amountTotalField="">
  <#assign unitField="">
  <#assign scanField="">
  <#assign addressField="">
  <#assign departmentField="">
  <#assign divisionField="">
  <#assign companyField="">
  <#assign customerField="">
  <#assign vendorField="">
  <#assign employeeField="">
  <#assign componentKeyClass="">
  <#assign currentClientClass="">
  <#assign currentUserClass="">
  <#assign employeeqnField="">
  <#assign customerqnField="">
  <#assign vendorqnField="">
  <#assign vendoronField="">
  <#assign employeeonField="">
  <#assign customeronField="">
  <#assign vendorinField="">
  <#assign employeeinField="">
  <#assign customerinField="">
  <#assign vendorpnField="">
  <#assign vendorcnField="">
  <#assign employeepnField="">
  <#assign customerpnField="">
  <#assign shipmentnField="">
  <#assign allocateJobnField="">
  <#assign glentriesnField="">
  <#assign clientVendorinvoicen="s6xxuxvibvxxxxxxxxxxvendorinvoicen">
  <#assign clientClientversion="a0xxukxxbvxxxxxxxxxxclientversion">
  <#assign userKeyField="a0xxukuxbvxxxxxxxxxxid">
  <#assign clientCustomerqnField="q9xxuxcqbvxxxxxxxxxxcustomerquoten">
  <#assign clientVendorqnField="t3xxuxvqbvxxxxxxxxxxvendorquoten">
  <#assign clientEmployeeqnField="">
  <#assign clientCustomeronField="r3xxuxcobvxxxxxxxxxxcustomerordern">
  <#assign clientVendoronField="r6xxuxvobvxxxxxxxxxxvendorordern">
  <#assign clientEmployeeonField="r9xxuxvobvxxxxxxxxxxemployeeordern">
  <#assign clientCustomerinField="s3xxuxcibvxxxxxxxxxxcustomerinvoicen">
  <#assign clientEmployeeinField="">
  <#assign clientCustomerpnField="sbxxuxcpbvxxxxxxxxxxcustomerpaymntn">
  <#assign clientVendorpnField="t3xxuxvpbvxxxxxxxxxxvendorpaymntn">
  <#assign clientVendorcnField="t6xxuxvpbvxxxxxxxxxxvendorchqn">
  <#assign clientEmployeepnField="">
  <#assign clientShipmentnField="s9xxuxcrbvxxxxxxxxxxcustomerpickn">
  <#assign clientAllocateJobnField="r9xxuxjobvxxxxxxxxxxjobn">
  <#assign clientDepartmentnField="m8xxuexxbvxxxxxxxxxxndepcode">
  <#assign clientDivisionnField="m7xxuoxxbvxxxxxxxxxxndivcode">
  <#assign clientCompanynField="d8xxuzxdbvxxxxxxxxxxenterprisecompcode">
  <#assign clientGlSeqnField="u3xxzwplbvxxxxxxxxxxglseq">
  <#assign clientArSeqnField="t6xxzwprbvxxxxxxxxxxarseq">
  <#assign clientGlentriesnField="u3xxzwplbvxxxxxxxxxxglseq">
  <#assign entityFunction="">
  <#assign keyedKeyName="">
  <#assign keyAutoGen="Y">
  <#assign autoGenKeyName="">
  <#assign keyNaturalToSetString="">
  <#assign lobkey="">
  <#assign nonKeyedKeyName="">
  <#assign centityName="">
  <#assign centityFieldName= "xxxxxxxxxxxxNot Initialized">
  <#assign centityKeyFieldName="">
  <#assign entityKeyFieldName="">
  <#assign keyMaxLength=19>
  <#assign descrMaxLength=19>
  <#assign keyfromclient = "N">
  <#assign wireCalled = "N">
  <#assign bycalled = "N">
  <#assign bycalled1 = "N">
  <#assign bycalled2 = "N">
  <#assign bycalled3 = "N">
  <#assign itemSelected = "N">
  <#assign keyfromsubkeys = "N">
  <#assign parentKeyName = "not-assigned-yet-xxxxxxxxxxx">
  <#assign parentKeyName2 = "not-assigned-yet-xxxxxxxxxxx">
  <#assign parentKeyName3 = "not-assigned-yet-xxxxxxxxxxx">
  <#assign parentKeyName4 = "not-assigned-yet-xxxxxxxxxxx">
/* The following may not be needed, use generic fiedname from above like deliveryField
  <#assign qtyTotalField = "">
  <#assign qtyTotalOutStandingField = "">
  <#assign amtTotalField = "">
  <#assign amtTotalOutStandingField = "">
  <#assign tax1TotalField = "">
  <#assign tax2TotalField = "">
  <#assign tax3TotalField = "">
  <#assign deliveryTotalField = "">
  <#assign miscelleneousTotalField = "">
  <#assign columnName ="  ">
  <#assign centity1Name="">
  <#assign centity2Name="">
  <#assign centity3Name="">
  <#assign centity4Name="">
  <#assign centity5Name="">
  <#assign centity6Name="">
  <#assign centity7Name="">
  <#assign centity8Name="">
  <#assign key1="">
  <#assign key2="">
  <#assign key3="">
  <#assign key4="">
  <#assign key5="">
  <#assign key6="">
  <#assign key7="">
  <#assign key8="">
  <#assign acperiodClass="Y">
  <#assign acperiodKeyField="a0xxukwpbv47xxxxxxxxrowid">
  <#assign acperiodCurrentPeriodField="a1xxuxwpbv47xxxxxxxxcurrperiod">
  <#assign acperiodCurrentBusDateField="b2xxdwerbvxxxxxxxxxxcurrbusdate">
  <#assign acperiodCurrentCalDateField="b3xxdwerbvxxxxxxxxxxcurrcaldate">
  <#assign acperiodCurrentLocalDateField="b4xxdwerbvxxxxxxxxxxcurrlocaldate">
  <#assign pzcodeField="">
  <#assign documentField="">
  <#assign statusFlagField="">
  <#assign statusFlagDField="">
  <#assign typeField="">
  <#assign clobDataClass="">
  <#assign blobDataClass="">
  <#assign itemBomClass="">
  <#assign itemBomDetailsEntityName=itembomdetailsEntityName>
  <#assign itemBomDetailsEntityBomcodeFieldName="a0xxhibxbvxxxxxxxxxxbomcode">
  <#assign itemBomDetailsEntityMatcodeFieldName="b1xxhimxbvxxxxxxxxxxmatcode">
  <#assign itemBomEntityBomcodeFieldName="a0xxukxxbvxxxxxxxxxxbomcode">
  <#assign scheduleClass="">
  <#assign scheduleStartDateField="">
  <#assign scheduleEndDateField="">
  <#assign scheduleStartDateStringField="">
  <#assign bt="",b1="",b2="",b3="",b4="",b5="",b6="",b7="",b8="",b9="",ba="",bb="",bc="">
  <#assign at="",a1="zz",a2="ss",a3="",a4="",a5="",a6="",a7="",a8="",a9="",aa="",ab="",ac="",ad="">
  <#assign ownerField="">
  <#assign owner2Field="">
  <#assign descriptField = "" >
*/
//jay0 ${cuodetailsQtyFieldName}
<#if menuAttributesp2 == "23" || menuAttributesp2 == "24" || menuAttributesp2 == "25" || menuAttributesp2 == "26" || menuAttributesp2 == "27">
 <#if menuAttributesp2 == "23">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuqdetailsEntityName>
  <#assign cuinvoiceEtcItemDetailsID1FieldName=cuqdetailsID1FieldName>
  <#assign cuinvoiceEtcItemDetailsID2FieldName=cuqdetailsID2FieldName>
  <#assign cuinvoiceEtcItemDetailsPriceFieldName=cuqdetailsPriceFieldName>
  <#assign cuinvoiceEtcItemDetailsTax1FieldName=cuqdetailsTax1FieldName>
  <#assign cuinvoiceEtcItemDetailsTax2FieldName=cuqdetailsTax2FieldName>
  <#assign cuinvoiceEtcItemDetailsTax3FieldName=cuqdetailsTax3FieldName>
  <#assign cuinvoiceEtcItemDetailsUnitFieldName=cuqdetailsUnitFieldName>
  <#assign cuinvoiceEtcItemDetailsDeliveryFieldName=cuqdetailsDeliveryFieldName>
  <#assign cuinvoiceEtcItemDetailsMiscelleneousFieldName=cuqdetailsMiscelleneousFieldName>
  <#assign cuinvoiceEtcItemDetailsQtyFieldName=cuqdetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "24">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuodetailsEntityName>
  <#assign cuinvoiceEtcItemDetailsID1FieldName=cuodetailsID1FieldName>
  <#assign cuinvoiceEtcItemDetailsID2FieldName=cuodetailsID2FieldName>
  <#assign cuinvoiceEtcItemDetailsPriceFieldName=cuodetailsPriceFieldName>
  <#assign cuinvoiceEtcItemDetailsTax1FieldName=cuodetailsTax1FieldName>
  <#assign cuinvoiceEtcItemDetailsTax2FieldName=cuodetailsTax2FieldName>
  <#assign cuinvoiceEtcItemDetailsTax3FieldName=cuodetailsTax3FieldName>
  <#assign cuinvoiceEtcItemDetailsUnitFieldName=cuodetailsUnitFieldName>
  <#assign cuinvoiceEtcItemDetailsDeliveryFieldName=cuodetailsDeliveryFieldName>
  <#assign cuinvoiceEtcItemDetailsMiscelleneousFieldName=cuodetailsMiscelleneousFieldName>
  <#assign cuinvoiceEtcItemDetailsQtyFieldName=cuodetailsQtyFieldName>
  //jay1 ${cuinvoiceEtcItemDetailsQtyFieldName}
 </#if>
 <#if menuAttributesp2 == "26">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuidetailsEntityName>
  <#assign cuinvoiceEtcItemDetailsID1FieldName=cuidetailsID1FieldName>
  <#assign cuinvoiceEtcItemDetailsID2FieldName=cuidetailsID2FieldName>
  <#assign cuinvoiceEtcItemDetailsPriceFieldName=cuidetailsPriceFieldName>
  <#assign cuinvoiceEtcItemDetailsTax1FieldName=cuidetailsTax1FieldName>
  <#assign cuinvoiceEtcItemDetailsTax2FieldName=cuidetailsTax2FieldName>
  <#assign cuinvoiceEtcItemDetailsTax3FieldName=cuidetailsTax3FieldName>
  <#assign cuinvoiceEtcItemDetailsUnitFieldName=cuidetailsUnitFieldName>
  <#assign cuinvoiceEtcItemDetailsDeliveryFieldName=cuidetailsDeliveryFieldName>
  <#assign cuinvoiceEtcItemDetailsMiscelleneousFieldName=cuidetailsMiscelleneousFieldName>
  <#assign cuinvoiceEtcItemDetailsQtyFieldName=cuidetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "27">
  <#assign cuinvoiceEtcItemDetailsEntityName=cupdetailsEntityName>
  <#assign cuinvoiceEtcItemDetailsID1FieldName=cupdetailsID1FieldName>
  <#assign cuinvoiceEtcItemDetailsID2FieldName=cupdetailsID2FieldName>
  <#assign cuinvoiceEtcItemDetailsPriceFieldName=cupdetailsPriceFieldName>
  <#assign cuinvoiceEtcItemDetailsTax1FieldName=cupdetailsTax1FieldName>
  <#assign cuinvoiceEtcItemDetailsTax2FieldName=cupdetailsTax2FieldName>
  <#assign cuinvoiceEtcItemDetailsTax3FieldName=cupdetailsTax3FieldName>
  <#assign cuinvoiceEtcItemDetailsUnitFieldName=cupdetailsUnitFieldName>
  <#assign cuinvoiceEtcItemDetailsDeliveryFieldName=cupdetailsDeliveryFieldName>
  <#assign cuinvoiceEtcItemDetailsMiscelleneousFieldName=cupdetailsMiscelleneousFieldName>
  <#assign cuinvoiceEtcItemDetailsQtyFieldName=cupdetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "25">
  <#assign cuinvoiceEtcItemDetailsEntityName=cushdetailsEntityName>
  <#assign cuinvoiceEtcItemDetailsID1FieldName=cushdetailsID1FieldName>
  <#assign cuinvoiceEtcItemDetailsID2FieldName=cushdetailsID2FieldName>
  <#assign cuinvoiceEtcItemDetailsPriceFieldName=cushdetailsPriceFieldName>
  <#assign cuinvoiceEtcItemDetailsQtyFieldName=cushdetailsQtyFieldName>
 </#if>
    <#if menuAttributesp2 == "23">
     <#assign copyFrom = "Xoxxuq2c4xwwqqhxxxxxcuqdetails">
     <#assign lineField = "z1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "24">
     <#assign copyFrom = "Xoxxuq2b4xwwqqhxxxxxcuodetails">
     <#assign lineField = "B1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "25">
     <#assign copyFrom = "Xoxxuq2a4xwwqqhxxxxxcuidetails">
     <#assign lineField = "b1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "26">
     <#assign copyFrom = "Xoxxuq295xwwqqhxxxxxshipmentdetails">
     <#assign lineField = "b1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "27">
     <#assign copyFrom = "Xoxxuq284xwwqqhxxxxxcupdetails">
     <#assign lineField = "b1xxzo11bvlxxxxxxxxxline">
    </#if> 


</#if>

<#if menuAttributesp2 == "33" || menuAttributesp2 == "34" || menuAttributesp2 == "3A" || menuAttributesp2 == "38" 
   || menuAttributesp2 == "37">
 <#if menuAttributesp2 == "33">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendqdetailsEntityName>
  <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendqdetailsID1FieldName>
  <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendqdetailsID2FieldName>
  <#assign vendorInvoiceEtcItemDetailsPriceFieldName=vendqdetailsPriceFieldName>
  <#assign vendorInvoiceEtcItemDetailsTax1FieldName=vendqdetailsTax1FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax2FieldName=vendqdetailsTax2FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax3FieldName=vendqdetailsTax3FieldName>
  <#assign vendorInvoiceEtcItemDetailsUnitFieldName=vendqdetailsUnitFieldName>
  <#assign vendorInvoiceEtcItemDetailsDeliveryFieldName=vendqdetailsDeliveryFieldName>
  <#assign vendorInvoiceEtcItemDetailsMiscelleneousFieldName=vendqdetailsMiscelleneousFieldName>
  <#assign vendorInvoiceEtcItemDetailsQtyFieldName=vendqdetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "34">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendorOrderItemDetailsEntityName>
  <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendorOrderItemDetailsID1FieldName>
  <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendorOrderItemDetailsID2FieldName>
  <#assign vendorInvoiceEtcItemDetailsPriceFieldName=vendorOrderItemDetailsPriceFieldName>
  <#assign vendorInvoiceEtcItemDetailsTax1FieldName=vendorOrderItemDetailsTax1FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax2FieldName=vendorOrderItemDetailsTax2FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax3FieldName=vendorOrderItemDetailsTax3FieldName>
  <#assign vendorInvoiceEtcItemDetailsUnitFieldName=vendorOrderItemDetailsUnitFieldName>
  <#assign vendorInvoiceEtcItemDetailsDeliveryFieldName=vendorOrderItemDetailsDeliveryFieldName>
  <#assign vendorInvoiceEtcItemDetailsMiscelleneousFieldName=vendorOrderItemDetailsMiscelleneousFieldName>
  <#assign vendorInvoiceEtcItemDetailsQtyFieldName=vendorOrderItemDetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "3A">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendidetailsEntityName>
  <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendidetailsID1FieldName>
  <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendidetailsID2FieldName>
  <#assign vendorInvoiceEtcItemDetailsPriceFieldName=vendidetailsPriceFieldName>
  <#assign vendorInvoiceEtcItemDetailsTax1FieldName=vendidetailsTax1FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax2FieldName=vendidetailsTax2FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax3FieldName=vendidetailsTax3FieldName>
  <#assign vendorInvoiceEtcItemDetailsUnitFieldName=vendidetailsUnitFieldName>
  <#assign vendorInvoiceEtcItemDetailsDeliveryFieldName=vendidetailsDeliveryFieldName>
  <#assign vendorInvoiceEtcItemDetailsMiscelleneousFieldName=vendidetailsMiscelleneousFieldName>
  <#assign vendorInvoiceEtcItemDetailsQtyFieldName=vendidetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "38">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendpdetailsEntityName>
  <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendpdetailsID1FieldName>
  <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendpdetailsID2FieldName>
  <#assign vendorInvoiceEtcItemDetailsPriceFieldName=vendpdetailsPriceFieldName>
  <#assign vendorInvoiceEtcItemDetailsTax1FieldName=vendpdetailsTax1FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax2FieldName=vendpdetailsTax2FieldName>
  <#assign vendorInvoiceEtcItemDetailsTax3FieldName=vendpdetailsTax3FieldName>
  <#assign vendorInvoiceEtcItemDetailsUnitFieldName=vendpdetailsUnitFieldName>
  <#assign vendorInvoiceEtcItemDetailsDeliveryFieldName=vendpdetailsDeliveryFieldName>
  <#assign vendorInvoiceEtcItemDetailsMiscelleneousFieldName=vendpdetailsMiscelleneousFieldName>
  <#assign vendorInvoiceEtcItemDetailsQtyFieldName=vendpdetailsQtyFieldName>
 </#if>
 <#if menuAttributesp2 == "37">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendshdetailsEntityName>
  <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendshdetailsID1FieldName>
  <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendshdetailsID2FieldName>
  <#assign vendorInvoiceEtcItemDetailsPriceFieldName=vendshdetailsPriceFieldName>
  <#assign vendorInvoiceEtcItemDetailsQtyFieldName=vendshdetailsQtyFieldName>
 </#if>
    <#if menuAttributesp2 == "33">
     <#assign copyFrom = "Xoxxuq3e4xwwqqhxxxxxvendqdetails">
     <#assign lineField = "b1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "34">
     <#assign copyFrom = "Xoxxuq3d4xwwqqhxxxxxvendodetails">
     <#assign lineField = "a1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "3A">
     <#assign copyFrom = "Xoxxuq3c4xwwqqhxxxxxvendidetails">
     <#assign lineField = "a1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "38">
     <#assign copyFrom = "Xoxxuq399xvwwqqhxxxxvshipmendetails">
     <#assign lineField = "a1xxzo11bvlxxxxxxxxxline">
    <#elseif menuAttributesp2 == "37">
     <#assign copyFrom = "Xoxxuq3b4xwwqqhxxxxxvendpdetails">
     <#assign lineField = "b1xxzo11bvlxxxxxxxxxline">
    <#elseif entityFunction=="44">
     <#assign copyFrom = "Xoxxuq454xwwqqhxxxxxemplodetails">
     <#assign lineField = "b1xxzo11bvlxxxxxxxxxline">
    </#if>
</#if>

<#if menuAttributesp2 == "44">
  <#assign employeeInvoiceEtcItemDetailsEntityName=emplodetailsEntityName>
  <#assign employeeInvoiceEtcItemDetailsID1FieldName=emplodetailsID1FieldName>
  <#assign employeeInvoiceEtcItemDetailsID2FieldName=emplodetailsID2FieldName>
  <#assign employeeInvoiceEtcItemDetailsPriceFieldName=emplodetailsPriceFieldName>
  <#assign employeeInvoiceEtcItemDetailsTax1FieldName=emplodetailsTax1FieldName>
  <#assign employeeInvoiceEtcItemDetailsTax2FieldName=emplodetailsTax2FieldName>
  <#assign employeeInvoiceEtcItemDetailsTax3FieldName=emplodetailsTax3FieldName>
  <#assign employeeInvoiceEtcItemDetailsUnitFieldName=emplodetailsUnitFieldName>
  <#assign employeeInvoiceEtcItemDetailsDeliveryFieldName=emplodetailsDeliveryFieldName>
  <#assign employeeInvoiceEtcItemDetailsMiscelleneousFieldName=emplodetailsMiscelleneousFieldName>
  <#assign employeeInvoiceEtcItemDetailsQtyFieldName=emplodetailsQtyFieldName>
  <#assign employeeInvoiceEtcItemDetailsBaseAmountFieldName=emplodetailsBaseAmountFieldName>
</#if>
  //jay2 ${cuinvoiceEtcItemDetailsQtyFieldName}
/*
 pojo ie entity has component properties for all composite key fields and entity proprties for all other fields.
 If an entity property is a foreign key then the property name will show the foreign entity not the actual field name.
 Use a filter like c2h.isManyToOne(property) and  column = property.columnIterator.next() to get the actual column name.
 or use parentPojo.identifierProperty.name to get the key field property name or use
 jay5 if !c2h.isCollection(property) && !isToOne(property)
  if c2j.isComponent(property)
   foreach componentProperty in property.value.propertyIterator in list.java.ftl
 
 If a persistence class has a foreign key more than once then the property name has the foreign entity plus Byxxxx to qualify
 The component properties have the identifierProperty iterator holding each key. 
 In case the key is non composite ie a single field then it will not be part of any component and will be part of properties
 Component properties seem to be tied to xxxId.java whereas non component properties are tied to xxx.java
 composite key fields declared via  Primary Key columns will appear only in component/xxId/java. If key field is a foreign 
 field then it is also declared via Foreign Key and will appear in entity properties/xxx.java. However in xxx.java
 the column name will not be shown, instead foreign Pojo class will be shown. Column iterator can be used to get
 the column name. If there are more than one fields pointing to same pojo then it will show as xxxByzz
 For those key fields which are foreign fields we need to generate validateandselect method. Currently generation 
 is hard coded by checking function of the pojo, it can be automated by xchecking component property columnname against entity ptoperty column name
 and if match the entity property name will be the pojo which needs to be validated and selected.
 The same logic can be used in editproperty.ftl to automate puting validateandSelect method call  
*/
/* 
in case of composite keys
*/ 
<#if keyAutoGen == "Y" >
  /*
  In case of composite keys and key auto generated

  */

<#foreach property in pojo.allPropertiesIterator>
<#if (property.name?length > eL)>
 <#if !c2h.isCollection(property) && !c2h.isManyToOne(property) && (property.name?length > 10)>
  <#if property.name?substring(pkS,pkE)=="k">
    <#assign entityKeyFieldName=property.name>
    <#assign column = property.columnIterator.next()>
    <#assign keyMaxLength=column.length>
  </#if>
  <#--//${keyMaxLength} ${entityKeyFieldName}-->
  <#if property.name?substring(pkS,pkE)=="k" || property.name?substring(pkS,pkE)=="n"  >
   <#assign ids=property.name>
   <#assign idsType=property.value.typeName>
    <#--// ids ${ids} idsType ${idsType}-->
     <#assign lobkey=lobkey+"this.instance.get"+ids?cap_first>
     <#assign lobkey=lobkey+"()">
      <#if ids?substring(6,8)=="cq">
          <#assign customerqnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="co">
          <#assign customeronField =property.name >
      </#if>
      <#if ids?substring(6,8)=="ci">
          <#assign customerinField =property.name >
      </#if>
      <#if ids?substring(6,8)=="cp">
          <#assign customerpnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vq">
          <#assign vendorqnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vo">
          <#assign vendoronField =property.name >
      </#if>
      <#if ids?substring(6,8)=="eo">
          <#assign employeeonField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vi">
          <#assign vendorinField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vp">
          <#assign vendorpnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="va">
          <#assign vendorcnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="ij">
          <#assign allocateJobnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="sh">
          <#assign shipmentnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="sv">
          <#assign shipmentnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="gj">
          <#assign glentriesnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="cd">
          <#assign clobDataClass ="Y" >
      </#if>
      <#if ids?substring(6,8)=="bd">
          <#assign blobDataClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="ib">
          <#assign itemBomClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="im">
          <#assign itemClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="xs">
         <#assign scheduleStartDateStringField=ids>
          <#assign scheduleClass ="Y" >
      </#if>
  <#else>
   <#-- not foreign to others or a foreign property but not k or n property name ${property.name} -->
  </#if>
      <#if property.name?substring(pefS,pefE)=="zs"> 
       <#assign descriptField=property.name>
       <#assign column = property.columnIterator.next()>
       <#assign descrMaxlength=column.length>
       <#--// ${descriptField} ${descrMaxlength}-->
      </#if>
 <#else>
   <#-- collection(foreign to others) or manytoone(foreign)  property name ${property.name} -->
 </#if>
</#if>
</#foreach>
<#else>
<#-- below not default, wont be generated keyAutoGen == 'N'-->
 <#if pojo.isComponent(pojo.identifierProperty)>
  /*
  In case of composite key but key not auto generated

  */
    <#assign plus="">
    <#foreach property in pojo.identifierProperty.value.propertyIterator>
    <#if (property.name?length > eL)>
     <#assign idName = entityName + util.upper(pojo.identifierProperty.name)>
     // set propertyclass as Y so that validateandSelect method will be generated 
     // component property ${property}
     <#if c2h.isManyToOne(property)>
      // parent ${c2j.getPOJOClass(cfg.getClassMapping(property.value.referencedEntityName))}
     </#if>
     <#assign ids = pojo.getGetterSignature(property)?substring(3)>
     <#assign lobkey=lobkey+plus+"get"+idName+"().get"+ids?cap_first+"()">
     <#assign plus="+">
      /*
      ids = pojo.getGetterSignature(property)?substring(3) >>> ${ids}
      */
      <#if (ids?length < 8) >
        /*
        ${ids}
        */
        <#assign ids="jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj">
      </#if>  
      <#if ids?substring(6,8)=="cq">
          <#assign customerqnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="co">
          <#assign customeronField =property.name >
      </#if>
      <#if ids?substring(6,8)=="ci">
          <#assign customerinField =property.name >
      </#if>
      <#if ids?substring(6,8)=="cp">
          <#assign customerpnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vq">
          <#assign vendorqnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vo">
          <#assign vendoronField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vi">
          <#assign vendorinField =property.name >
      </#if>
      <#if ids?substring(6,8)=="vp">
          <#assign vendorpnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="ij">
          <#assign allocateJobnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="sh">
          <#assign shipmentnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="sv">
          <#assign shipmentnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="gj">
          <#assign glentriesnField =property.name >
      </#if>
      <#if ids?substring(6,8)=="cd">
          <#assign clobDataClass ="Y" >
      </#if>
      <#if ids?substring(6,8)=="bd">
          <#assign blobDataClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="ib">
          <#assign itemBomClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="im">
          <#assign itemClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="xs">
         <#assign scheduleStartDateStringField=ids>
          <#assign scheduleClass ="Y" >
      </#if>
    </#if>
    </#foreach>
 <#else>
 /*
 In case of non composite ie Single Field Key or other non key properties

 */
     <#assign ids = pojo.identifierProperty.name>
     <#if (ids?length > pL)> 
      /*
      ids = pojo.identifierProperty.name >>> ${ids}
      */
      <#if (ids?length < 8) >
        /*
        ${ids}
        */
        <#assign ids="jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj">
      </#if>  
      <#assign lobkey=lobkey+"this.instance.get"+ids?cap_first>
      <#assign lobkey=lobkey+"()">

      <#if ids?substring(6,8)=="cq">
          <#assign customerqnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="co">
          <#assign customeronField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="ci">
          <#assign customerinField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="cp">
          <#assign customerpnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="vq">
          <#assign vendorqnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="vo">
          <#assign vendoronField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="vi">
          <#assign vendorinField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="vp">
          <#assign vendorpnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="ij">
          <#assign allocateJobnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="sh">
          <#assign shipmentnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="sv">
          <#assign shipmentnField =pojo.identifierProperty.name >
      </#if>
      <#if ids?substring(6,8)=="cd">
          <#assign clobDataClass ="Y" >
      </#if>
      <#if ids?substring(6,8)=="bd">
          <#assign blobDataClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="ib">
          <#assign itemBomClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="im">
          <#assign itemClass ="Y" >
      </#if>
      <#if ids?substring(5,7)=="xs">
         <#assign scheduleStartDateStringField=ids>
          <#assign scheduleClass ="Y" >
      </#if>
     </#if>
 </#if>
</#if>
/**
* This is Action Home class 
* @author 3r Computer Systems  
* @version 2.0
*/

@Named("${homeName}")
@ViewScoped
@Transactional
public  class ${entityName}Home implements Serializable
{
   @Inject File file;
   @Inject R3RestClient r3RestClient;

   @Inject SqlAdminSupport sqlAdminSupport;
   @Inject SkinBean skinBean;
    @Inject CustomIdentity customIdentity; 
        @Inject
        private Identity identity;
	@Inject
	${editlogEntityName?cap_first}Home ${editlogEntityName}Home;
	private ${editlogEntityName?cap_first} ${editlogEntityName};

  <#if menuAttributesp2 == "52" >
	@Inject
	Fpxxfq1a5xwwqqhxxxxxitemList fpxxfq1a5xwwqqhxxxxxitemList;
	@Inject
	${rate1fEntityName?cap_first}List ${rate1fEntityName}List;

  </#if>

  <#if (menuAttributes?contains("T") ) >
        @Inject
        ${clientEntityName?cap_first} client;

  </#if>
  <#if menuAttributesp2 == "1M" || menuAttributesp2 == "1N">
	@Inject
	${itemEntityName?cap_first}Home ${itemEntityName}Home;
	private ${itemEntityName?cap_first} ${itemEntityName};
	@Inject
	${itemEntityName?cap_first}List ${itemEntityName}List;
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
	@Inject
        ${clientEntityName?cap_first}Home ${clientEntityName}Home;
        ${clientEntityName?cap_first} ${clientEntityName};

  </#if>
  <#if menuAttributesp2 == "1I" >
     @Inject
     Fpxxfq1a5xwwqqhxxxxxitemHome fpxxfq1a5xwwqqhxxxxxitemHome;
     private Fpxxfq1a5xwwqqhxxxxxitem fpxxfq1a5xwwqqhxxxxxitem;
     @Inject
     Fpxxfq1a5xwwqqhxxxxxitemList fpxxfq1a5xwwqqhxxxxxitemList;
     @Inject
     Fxxxuq1ffxwwqqhefxxxserialnumbersHome fxxxuq1ffxwwqqhefxxxserialnumbersHome;
     @Inject
     Fxxxuq1ffxwwqqhefxxxserialnumbersList fxxxuq1ffxwwqqhefxxxserialnumbersList;


  </#if>
   


  <#if menuAttributesp2 == "1A" >
        @Inject ShoppingCartBean r3Cart; 
	@Inject
	Fxxxuq111xwwqqhxxxxxaddressList fxxxuq111xwwqqhxxxxxaddressList;

	@Inject
	${userEntityName?cap_first}List ${userEntityName}List;
	@Inject
	${cuinvoiceEntityName?cap_first}Home ${cuinvoiceEntityName}Home;
	private ${cuinvoiceEntityName?cap_first} ${cuinvoiceEntityName};
	@Inject
	${cuinvoiceEntityName?cap_first}List ${cuinvoiceEntityName}List;
	@Inject
	${cuidetailsEntityName?cap_first}Home ${cuidetailsEntityName}Home;

	@Inject
	${cpaymentEntityName?cap_first}Home ${cpaymentEntityName}Home;
	private ${cpaymentEntityName?cap_first} ${cpaymentEntityName};

	@Inject
	${serialnumbersEntityName?cap_first}Home ${serialnumbersEntityName}Home;
	@Inject
	${serialnumbersEntityName?cap_first}List ${serialnumbersEntityName}List;
	@Inject
	${customerEntityName?cap_first}List ${customerEntityName}List;
	@Inject
	${usagebyperiodsEntityName?cap_first}Home ${usagebyperiodsEntityName}Home;
	private ${usagebyperiodsEntityName?cap_first} ${usagebyperiodsEntityName};
	@Inject
	${cuquoteEntityName?cap_first}List ${cuquoteEntityName}List;
	@Inject
	${cuquoteEntityName?cap_first}Home ${cuquoteEntityName}Home;
	private ${cuquoteEntityName?cap_first} ${cuquoteEntityName};
	@Inject
	${cuqdetailsEntityName?cap_first}Home ${cuqdetailsEntityName}Home;
        @Inject
        SqlSupport sqlSupport;
        @Inject
        Xlrxuq1iixwwqqhexxxxscandateList xlrxuq1iixwwqqhexxxxscandateList;

  </#if>
   @Inject 
   DefaultLoginCredentials credentials;
   //@Inject Authenticator authenticator; not sure what problem injecting may be due to @picketlink
   private boolean nextShow = false;
   boolean mailRelayOff=true; 
   Boolean smtpError=false;
    private FacesContext facesContext=null;
    private ServletContext context=null;
    private HttpServletRequest req=null;
    private HttpServletResponse resp=null;
    private String userAgentStrO=null;
    private String userAgentStr=null;
    private String userIP=null;
    private String urlName=null;
    private int urlPort=0;
    private ExternalContext externalContext=null;
    private HttpSession session=null;
    private String skinCode=null;
    private String replyToMatCode = null;
    private String replyToMatSidS = null;
    private String descriptionValue =null;
    private String startValue = null;
    private ResourceBundle bundle=null;
    int count = 0;
    int countD=0;
    int countB=0;
    private int excpCount=0;
    Boolean currConv=false;
    int importdone=0;
    String linesA[]=null;
	private final int limit_max_size = 10240000;
	private final String limit_type_file = "gif|jpg|png|jpeg|txt|csv|jpeg";
	private String path_to = "resources" + java.io.File.separator + "uploads";

    private int uploadsAvailable = 3;
    private int uploadsDoneCount = 0;
    private boolean autoUpload = false;
    private boolean useFlash = false;
    private Boolean show;
    private Part fileU;



    <#if menuAttributesp2 == "52">
    ExternalContext extCtxt = null;
    HttpServletRequest httpreq = null;
    </#if>


    <#if menuAttributesp2 == "1M">
     private String themeFunction;
     private String themeFunctionSub;
     private String homeTopTxt;
     private String homeTopTxtT;
     private String homeTopTxtTF;
     private String homeTopTxtL;
     private String homeTopTxtH;
     private String homeTopTxtHM;
     private String homeMidTxt;
     private String homeFooterTxt;
     private String homeOthersTxt;
     private String contentTheme="";
     private String contentVendor="";
     private String fromPageP="";
     private String fromPageN="";
     private String fromPageA="";
     private String fromPageC="";
     private String fromPageI="";
     private String toPageP="";
     private String toPageN="";
     private String toPageA="";
     private String toPageC="";
     private String toPageI="";
    </#if>
    <#if entityFunction =="va"  > 
     private boolean preprintedchqno = true;
    </#if>
    <#if menuAttributesp2 == "1N">
     private List<File> files = new ArrayList<File>(); // multiple uploaded files
    </#if>
    @PostConstruct
    public void initialize() {
    try{
      facesContext = FacesContext.getCurrentInstance(); 
      // bypass if came from servlet
     if(facesContext !=null){
      bundle = facesContext.getApplication().getResourceBundle(facesContext, "messages");
      ///SEVERITY_INFO, "any string in quotes"+e.getMessage+bundle.getString("id_password_not_matching")
      externalContext = facesContext.getExternalContext(); 
      <#if menuAttributesp2 == "52" >
       skinCode = externalContext.getRequestParameterMap().get("skin");
      </#if>
      <#if menuAttributesp2 == "1A" >
       replyToMatCode = externalContext.getRequestParameterMap().get("replyToMatCode");
       replyToMatSidS = externalContext.getRequestParameterMap().get("replyToMatSid");
      </#if>

      <#if menuAttributesp2 == "89" >
       descriptionValue = externalContext.getRequestParameterMap().get("descriptionValue");
       startValue = externalContext.getRequestParameterMap().get("startValue");
      </#if>
      context = (ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext(); 
      <#if menuAttributesp2 == "56">
       hostingAt=externalContext.getInitParameter("hostingAt");
       if(hostingAt==null || hostingAt.isEmpty()){
        log.severe("Error hostingAt from web.xml context: "+ hostingAt);
        hostingAt="lo";
       }
      </#if>
      req = (HttpServletRequest) externalContext.getRequest(); 
      session = req.getSession();
      urlName=((javax.servlet.http.HttpServletRequest) externalContext.getRequest()).getServerName();
      urlPort=((javax.servlet.http.HttpServletRequest) externalContext.getRequest()).getServerPort();
      resp = (HttpServletResponse) externalContext.getResponse(); 
      userAgentStrO = req.getHeader("user-agent");  
      userAgentStr = userAgentStrO;  
      userIP = req.getHeader("X-FORWARDED-FOR");  //get from req header
      if (userIP == null) {  
       userIP = req.getRemoteAddr();  //get from socket connection
      }
          urlIndex=urlName.lastIndexOf(".");
          if (urlIndex == -1){
            urlIndex=urlName.length();
          }       
          if (urlName.contains("www.")){
           owner2Code=urlName.substring(4,urlIndex);
          }else{
           owner2Code=urlName.substring(0,urlIndex);
          }
          //extract subdomain if used. if subdomain, masterSiteCode will have a value
         if(!customIdentity.getMasterSiteCode().isEmpty()){
          owner2Code=owner2Code.replace("."+customIdentity.getMasterSiteCode(),"");
         }
      if (userIP == null) {  
       userIP = req.getRemoteAddr();  
       if (userIP == null) {  
        userIP = "noIP";  
       }      
      }
      masterSiteCode=customIdentity.getMasterSiteCode();
      masterSiteUrl=customIdentity.getMasterSiteUrl();

      Arrays.fill(checkMapI, Boolean.FALSE);
      Arrays.fill(checkMapT, Boolean.FALSE);
     
     }
      ownerCode=customIdentity.getOwner();
      ownerCddCode=ownerCode.substring(ownerCode.length()-3,ownerCode.length() );
      productCode=customIdentity.getProduct();
      subProductCode=customIdentity.getSubProduct();

      if (customIdentity.getMobileView().length() > 0){
       userAgentStr=customIdentity.getMobileView();
      }
      <#if menuAttributesp2 == "1M">
       if(this.instance !=null){
        this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-LEFT-C");
       }
      </#if>
      <#if menuAttributesp2 == "1N">
       if(this.instance !=null){
       this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-LEFT-C");
       }
      </#if>
     }catch(Exception e){
      //log error
      excpCount=excpCount+1;
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,e.getMessage(),""));
    }


    }
   private Logger log = Logger.getLogger(${entityName}.class.getCanonicalName());
   //facesMessages being injected so  //FacesMessages.add can be used instead of  //FacesMessages.instance().add
   // using seam facesmessages allow using el expressions , java facesmessage does not allow EL expression
   @PersistenceContext(unitName = "genappcdi")
   private EntityManager entityManager;
   private Integer id=null;
   private String cartPoStatus="x";
   String timeStamp="";
   private boolean changeDone=false;
   private boolean skipValidation=false;
     private Boolean[] checkMapI=new Boolean[6];
     private Boolean[] checkMapT=new Boolean[6];
      private byte[] mailingBytes1 = null;
      private byte[] mailingBytes2 = null;
      private byte[] mailingBytes3 = null;
      private byte[] mailingBytes4 = null;
      private byte[] mailingBytes5 = null;
      private byte[] mailingBytes = null;
      private String mailingText = null;
      private String mailingText1 = null;
      private String mailingText2 = null;
      private String mailingText3 = null;
      private String mailingText4 = null;
      private String mailingText5 = null;
      private String mailingBytes1TypeMime = null;
      private String mailingBytes2TypeMime = null;
      private String mailingBytes3TypeMime = null;
      private String mailingBytes4TypeMime = null;
      private String mailingBytes5TypeMime = null;
      private String ownerCode="sss";
      private String subProductCode="";
      private String ownerCddCode="";
      private String productCode="";
      FacesMessage msg =new FacesMessage("");





   // cartpostatus =e comes from method extended_persist ie copynsave
   // cartPostatus also comes from cposts in method cartpersist
     // cartPostatus=cposts is o if add and currentCount holds last line #, u if remove, c if change for existing and for both c & u 
     // currentCount holds first time call or not to decide on initializing order totals to zeroes if first time
     // currentDetailline will be used to hold the value to pass to showrun()

	@Inject
	${componentName?cap_first}List ${componentName}List;
        private ${componentName?cap_first} ${componentName}li;
	@Inject
	${rate1fEntityName?cap_first}Home ${rate1fEntityName}Home;
	private ${rate1fEntityName?cap_first} ${rate1fEntityName};
	@Inject
	${userproflEntityName?cap_first}Home ${userproflEntityName}Home;
	private ${userproflEntityName?cap_first} ${userproflEntityName};


<#if (transactionCandidate = "Y")>
	@Inject
	${optionsEntityName?cap_first}List ${optionsEntityName}List;
	private ${optionsEntityName?cap_first} ${optionsEntityName};
	@Inject
	${itemEntityName?cap_first}List ${itemEntityName}List;

</#if>
<#if menuAttributesp2 == "23" >
	@Inject
	${usagebyperiodsEntityName?cap_first}List ${usagebyperiodsEntityName}List;

</#if>
<#if menuAttributesp2 == "24" >
	@Inject
	${cuquoteEntityName?cap_first}List ${cuquoteEntityName}List;
	@Inject
	${usagebyperiodsEntityName?cap_first}List ${usagebyperiodsEntityName}List;
	@Inject
	${rate1fEntityName?cap_first}List ${rate1fEntityName}List;


</#if>
<#if menuAttributesp2 == "25" >
	@Inject
	${cuinvoiceEntityName?cap_first}List ${cuinvoiceEntityName}List;
	@Inject
	${cuordersEntityName?cap_first}List ${cuordersEntityName}List;
	@Inject
	${cpaymentEntityName?cap_first}Home ${cpaymentEntityName}Home;
	${cpaymentEntityName?cap_first} ${cpaymentEntityName};
        @Inject ShoppingCartBean r3Cart; 
</#if>
<#if menuAttributesp2 == "26" >
	@Inject
	${cuordersEntityName?cap_first}List ${cuordersEntityName}List;
	${cuodetailsEntityName?cap_first} ${cuodetailsEntityName};
	@Inject
	${customerEntityName?cap_first}List ${customerEntityName}List;
	@Inject
	${shipmentEntityName?cap_first}List ${shipmentEntityName}List;
	@Inject
	${shipmentEntityName?cap_first}Home ${shipmentEntityName}Home;
	private ${shipmentEntityName?cap_first} ${shipmentEntityName};



</#if>
<#if menuAttributesp2 == "27" >
	@Inject
	${cuordersEntityName?cap_first}Home ${cuordersEntityName}Home;
	${cuordersEntityName?cap_first} ${cuordersEntityName};
	@Inject
	${cuodetailsEntityName?cap_first}Home ${cuodetailsEntityName}Home;
	${cuodetailsEntityName?cap_first} ${cuodetailsEntityName};
	@Inject
	${cuordersEntityName?cap_first}List ${cuordersEntityName}List;
	@Inject
	${userEntityName?cap_first}List ${userEntityName}List;
	@Inject
	${cuidetailsEntityName?cap_first}Home ${cuidetailsEntityName}Home;
        @Inject ShoppingCartBean r3Cart; 



</#if>
<#if menuAttributesp2 == "1B" >
	@Inject
	${cuordersEntityName?cap_first}List ${cuordersEntityName}List;
	private ${cuordersEntityName?cap_first} ${cuordersEntityName};
	@Inject
	${cuquoteEntityName?cap_first}List ${cuquoteEntityName}List;
	private ${cuquoteEntityName?cap_first} ${cuquoteEntityName};

	@Inject
	${employeeEntityName?cap_first}Home ${employeeEntityName}Home;
     private 	${employeeEntityName?cap_first} ${employeeEntityName};
</#if>

<#if menuAttributesp2 == "27" >
	@Inject
	${cuinvoiceEntityName?cap_first}List ${cuinvoiceEntityName}List;
	@Inject
	${customerEntityName?cap_first}List ${customerEntityName}List;
</#if>
<#if menuAttributesp2 == "34" >
	@Inject
	${venquoteEntityName?cap_first}List ${venquoteEntityName}List;
	@Inject
	${vendorEntityName?cap_first}List ${vendorEntityName}List;

</#if>
<#if menuAttributesp2 == "36" >
	@Inject
	${vpaymentEntityName?cap_first}Home ${vpaymentEntityName}Home;
	private ${vpaymentEntityName?cap_first} ${vpaymentEntityName};
	@Inject
	${vpaymentEntityName?cap_first}List ${vpaymentEntityName}List;
	private ${vpaymentEntityName?cap_first} ${vpaymentEntityName}li;
</#if>
<#if menuAttributesp2 == "37" >
	@Inject
	${vendordersEntityName?cap_first}List ${vendordersEntityName}List;
</#if>
<#if menuAttributesp2 == "38" >
	@Inject
	${vinvoiceEntityName?cap_first}List ${vinvoiceEntityName}List;
	private ${vinvoiceEntityName?cap_first} ${vinvoiceEntityName}li;
</#if>
<#if menuAttributesp2 == "1G" >
	@Inject
	${groupmembersEntityName?cap_first}Home ${groupmembersEntityName}Home;
	${groupmembersEntityName?cap_first} ${groupmembersEntityName};

</#if>

<#if menuAttributesp2 == "3A" >
	@Inject
	${vendordersEntityName?cap_first}List ${vendordersEntityName}List;
	${vendodetailsEntityName?cap_first} ${vendodetailsEntityName};

</#if>
<#if menuAttributesp2 == "65" >
	@Inject
	${gentriesDetailsEntityName?cap_first}List ${gentriesDetailsEntityName}List;
	private ${gentriesDetailsEntityName?cap_first} ${gentriesDetailsEntityName};
	@Inject
	${gentriesDetailsEntityName?cap_first}Home ${gentriesDetailsEntityName}Home;
</#if>
<#if menuAttributesp2 == "89" >
	@Inject
	${scheduleDetailsEntityName?cap_first}List ${scheduleDetailsEntityName}List;
	private ${scheduleDetailsEntityName?cap_first} ${scheduleDetailsEntityName};
	@Inject
	${scheduleDetailsEntityName?cap_first}Home ${scheduleDetailsEntityName}Home;
</#if>
<#if menuAttributesp2 == "9A" && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
	@Inject
	${jobassignmentdetailsEntityName?cap_first}List ${jobassignmentdetailsEntityName}List;
	private ${jobassignmentdetailsEntityName?cap_first} ${jobassignmentdetailsEntityName};
	@Inject
	${jobassignmentdetailsEntityName?cap_first}Home ${jobassignmentdetailsEntityName}Home;
</#if>
<#if menuAttributesp2 == "92" && jobassignmentdetailsEntityName?? >
	@Inject
	${jobassignmentEntityName?cap_first}Home ${jobassignmentEntityName}Home;
</#if>
<#if menuAttributesp2 == "54" >
	@Inject
	${customerEntityName?cap_first}List ${customerEntityName}List;
</#if>

<#if menuAttributesp2 == "56" >
	@Inject
	${cuordersEntityName?cap_first}Home ${cuordersEntityName}Home;
	private ${cuordersEntityName?cap_first} ${cuordersEntityName};
	@Inject
	${cuodetailsEntityName?cap_first}Home ${cuodetailsEntityName}Home;
	@Inject
	${itemEntityName?cap_first}List ${itemEntityName}List;
	private ${itemEntityName?cap_first} ${itemEntityName};
	@Inject
	${resource_bundleEntityName?cap_first}Home ${resource_bundleEntityName}Home;
	private ${resource_bundleEntityName?cap_first} ${resource_bundleEntityName};
	@Inject
	${resourceEntityName?cap_first}Home ${resourceEntityName}Home;
	private ${resourceEntityName?cap_first} ${resourceEntityName}li;
	@Inject
	${clientEntityName?cap_first}List ${clientEntityName}List;
	@Inject
	${rate1fEntityName?cap_first}List ${rate1fEntityName}List;

	@Inject
	${itemEntityName?cap_first}Home ${itemEntityName}Home;
	@Inject
	${addressEntityName?cap_first}List ${addressEntityName}List;
	@Inject
	${employeeEntityName?cap_first}List ${employeeEntityName}List;
	@Inject
	${customerEntityName?cap_first}List ${customerEntityName}List;


</#if>
<#if menuAttributesp2 == "60" >
	@Inject
	${perioddatesEntityName?cap_first}Home ${perioddatesEntityName}Home;
	private ${perioddatesEntityName?cap_first} ${perioddatesEntityName};
	@Inject
	${perioddatesEntityName?cap_first}List ${perioddatesEntityName}List;

	@Inject
	${customerEntityName?cap_first}Home ${customerEntityName}Home;
                 private ${customerEntityName?cap_first} ${customerEntityName};
	@Inject
	${customerEntityName?cap_first}List ${customerEntityName}List;

	@Inject
	${vendorEntityName?cap_first}Home ${vendorEntityName}Home;
                  private 	${vendorEntityName?cap_first} ${vendorEntityName};
	@Inject
	${vendorEntityName?cap_first}List ${vendorEntityName}List;

	@Inject
	${itemEntityName?cap_first}Home ${itemEntityName}Home;
                  private 	${itemEntityName?cap_first} ${itemEntityName};
	@Inject
	${itemEntityName?cap_first}List ${itemEntityName}List;
   
        <#if (activityEntityName?? && activityEntityName?length > eL)>   
	@Inject
	${activityEntityName?cap_first}Home ${activityEntityName}Home;
                  private 	${activityEntityName?cap_first} ${activityEntityName};
	@Inject
	${activityEntityName?cap_first}List ${activityEntityName}List;
        </#if>

	@Inject
	${employeeEntityName?cap_first}Home ${employeeEntityName}Home;
                  private 	${employeeEntityName?cap_first} ${employeeEntityName};
	@Inject
	${employeeEntityName?cap_first}List ${employeeEntityName}List;
	@Inject
	${journalEntityName?cap_first}List ${journalEntityName}List;
	private ${journalEntityName?cap_first} ${journalEntityName};
	@Inject
	${glentriesEntityName?cap_first}List ${glentriesEntityName}List;
	private ${glentriesEntityName?cap_first} ${glentriesEntityName};
	@Inject
	${glentriesEntityName?cap_first}Home ${glentriesEntityName}Home;
	@Inject
	${gentriesDetailsEntityName?cap_first}Home ${gentriesDetailsEntityName}Home;
	private ${gentriesDetailsEntityName?cap_first} ${gentriesDetailsEntityName};
	@Inject
	${gentriesDetailsEntityName?cap_first}List ${gentriesDetailsEntityName}List;
        private String categoryO=""; 
        @Inject
        ${clientEntityName?cap_first}Home ${clientEntityName}Home;
        ${clientEntityName?cap_first} ${clientEntityName};




</#if>
<#if menuAttributesp2 == "1R" >
	@Inject
	${resource_bundleEntityName?cap_first}List ${resource_bundleEntityName}List;
</#if>
<#if menuAttributesp2 == "20" || menuAttributesp2 == "30" >
      @Inject 
      Jxxxbh400xwwqqhxxxxxemployeeHome jxxxbh400xwwqqhxxxxxemployeeHome;
</#if>
<#if menuAttributesp2 == "9C"  && processattributesEntityName??>
	@Inject
	${processattributesEntityName?cap_first}Home ${processattributesEntityName}Home;
	private ${processattributesEntityName?cap_first} ${processattributesEntityName};
</#if>



<#if (userHomeCandidate = "Y")>   
    //@Inject
    //private StatusMessages statusMessages;
	//@Inject
	//private Renderer renderer;
        ///debug@Inject Authenticator authenticator;
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
	private ${userEntityName?cap_first} user;
	@Inject
	${accountEntityName?cap_first}Home ${accountEntityName}Home;
	private ${accountEntityName?cap_first} ${accountEntityName};
	@Inject
	${optionsEntityName?cap_first}Home ${optionsEntityName}Home;
	private ${optionsEntityName?cap_first} ${optionsEntityName};
	@Inject
	${acperiodEntityName?cap_first}Home ${acperiodEntityName}Home;
	private ${acperiodEntityName?cap_first} ${acperiodEntityName};
	@Inject
	${perioddatesEntityName?cap_first}Home ${perioddatesEntityName}Home;
	private ${perioddatesEntityName?cap_first} ${perioddatesEntityName};
	@Inject
	${acintegrEntityName?cap_first}Home ${acintegrEntityName}Home;
	private ${acintegrEntityName?cap_first} ${acintegrEntityName};
	@Inject
	${addressEntityName?cap_first}Home ${addressEntityName}Home;
	private ${addressEntityName?cap_first} ${addressEntityName};
	@Inject
	${truefalseEntityName?cap_first}Home ${truefalseEntityName}Home;
	private ${truefalseEntityName?cap_first} ${truefalseEntityName};
	@Inject
	${usagebyperiodsEntityName?cap_first}Home ${usagebyperiodsEntityName}Home;
	private ${usagebyperiodsEntityName?cap_first} ${usagebyperiodsEntityName};


    private String lostPasswordUserId;
    private String lostPasswordEmail;
    private String loginUserId;
    private String recoveredPasswordEmail;
    private String resetPassword;
    private boolean agreedToTermsOfUse = false;
    private String a0xxukuxbvxxxxxxxxxxid2;
    private boolean agreedToTermsOfUsefb = false;
    private String c4xxuxupivxxxxxxxxxxcurrpw2;
    private String signupas ="C";

    private String registrationScreenName;
    private String clientEmail;
    private String clientName;
    private String companyName;
    private String clientApplicationFunction;
    private String clientApplicationSubFunction="";
    private String clientApplicationSize;
    private String clientApplicationName="";
    private String clientUrlName=".raaspi.com";
    private String clientFullUrlName="";
    private String clientSerialNum;
    private Integer clientExpiryDays;
    private String  newUserLink;
    private String  newUserLink2;
    private boolean inRegistrationAndCreateUser=false;
    private boolean inSignupAndCreateUser=false;
    private boolean inDemoSignupAndCreateUser=false;
    private boolean inChangePassword=false;
    private boolean inRecoverPassword=false;
    private boolean inCreateUser=true;
    private String verify;

    private boolean changed;
    private Integer sid=0;
    private String enterprisecompcode="";
    private SimpleDateFormat s = new SimpleDateFormat("yyyy-MM-dd");

     private String headers ="";






</#if>
<#if (componentName=="nxxxiha2rgendb")>   
	@Inject
	Nxxxiha4rgenfieldsList nxxxiha4rgenfieldsList;
	private Nxxxiha4rgenfields nxxxiha4rgenfieldsli;
</#if>
<#if menuAttributesp2 == "23" || menuAttributesp2 == "24" || menuAttributesp2 == "25" || menuAttributesp2 == "26" >
	@Inject
	${clientEntityName?cap_first}List ${clientEntityName}List;

        </#if>

<#if menuAttributesp2 == "1A" || menuAttributesp2 == "19" >
     private String  currentCartedPO="";
     private Integer currentCartedPOSID;

	@Inject
	${cuodetailsEntityName?cap_first}List ${cuodetailsEntityName}List;
	private ${cuodetailsEntityName?cap_first} ${cuodetailsEntityName};
	@Inject
	${cuodetailsEntityName?cap_first}Home ${cuodetailsEntityName}Home;
	@Inject
	${cuordersEntityName?cap_first}List ${cuordersEntityName}List;
	private ${cuordersEntityName?cap_first} ${cuordersEntityName};
	@Inject
	${cuordersEntityName?cap_first}Home ${cuordersEntityName}Home;
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
	private ${userEntityName?cap_first} ${userEntityName};
        <#if menuAttributesp2 == "1A" >
	@Inject
	${customerEntityName?cap_first}Home ${customerEntityName}Home;
	private ${customerEntityName?cap_first} ${customerEntityName};
	@Inject
	${addressEntityName?cap_first}Home ${addressEntityName}Home;
	private ${addressEntityName?cap_first} ${addressEntityName};
	@Inject
	${clientEntityName?cap_first}List ${clientEntityName}List;
	@Inject
	Jxxxbh400xwwqqhxxxxxemployeeList jxxxbh400xwwqqhxxxxxemployeeList;
	@Inject
	${rate1fEntityName?cap_first}List ${rate1fEntityName}List;

        </#if>
</#if>
      <#if menuAttributesp2 == "1A" >
       private String addrL1;
       private String addrL2;
       private String city;
       private String provstate;
       private String pzcode;
       private String country;
       private String imailaddr;
       private String imailaddrAlt;
       private String sortByValue="bm";
       BigDecimal reducedQty=new BigDecimal("0.0");
       private String unitLength=" ";
       private String unitWidth=" ";
       private String unitHeight=" ";
       private String unitWeight=" ";
       private BigDecimal valueLength=new BigDecimal("0.0");
       private BigDecimal valueWidth=new BigDecimal("0.0");
       private BigDecimal valueHeight=new BigDecimal("0.0");
       private BigDecimal valueWeight=new BigDecimal("0.0");
       private String itemVariantSize="";
       private String itemVariantColour="";
       private String itemVariantMaterial="";
       private String itemVariantBrand="";
       private String itemVariantSizeL="";
       private String itemVariantColourL="";
       private String itemVariantMaterialL="";
       private String itemVariantBrandL="";
       String couponCode ="";
       BigDecimal couponValue=BigDecimal.ZERO;
       BigDecimal saleValue=BigDecimal.ZERO;
       BigDecimal discountValue=BigDecimal.ZERO;
       String newfilename ="";
       String fileSavePath ="";
       java.io.File fileToCreate=null;
       java.io.File folder = null;
       CSVWriter csvWriter = null;
       CSVWriter csvWriter2 = null;


    
      </#if> 
      <#if menuAttributesp2 == "56" >
       String product="";//make it public to share among methods
       int trialPeriod=14;//days
       String themeName="";
       String stepN=""; //appsumo
      </#if> 


      //CustomIdentity customIdentity = (CustomIdentity)Component.getInstance(CustomIdentity.class); 
      //SkinBean skinBean = (SkinBean)Component.getInstance(SkinBean.class); 
      //ShoppingCartBean r3Cart = (ShoppingCartBean)Component.getInstance(ShoppingCartBean.class); 
      private boolean doRollUp=true;
      private String owner2Code="";
      private String masterSiteCode="";
      private String masterSiteUrl="";
      private String owner2CodeS="";
      private int urlIndex=0;
      int duplDropped=0;
      int importAdded=0;

     private BigDecimal keyedQuantity = new BigDecimal("1.0");
     private BigDecimal detailbaseamt = new BigDecimal("0.0");
     private BigDecimal detailbaseamtO = new BigDecimal("0.0");
     private BigDecimal totalbaseamt = new BigDecimal("0.0");
     private BigDecimal totaloutstanding = new BigDecimal("0.0");
     private BigDecimal totalamountin = new BigDecimal("0.0");
     private BigDecimal postingAmount = new BigDecimal("0.0");
     private BigDecimal chqAmount = new BigDecimal("0.0");
     private BigDecimal amountIn = new BigDecimal("0.0");
     private String chqVerbose="";
     private String tax1Cert="";
     private String tax2Cert="";
     private String tax3Cert="";
                BigDecimal cdisc=BigDecimal.ZERO;
                BigDecimal cselp=BigDecimal.ZERO;
                BigDecimal newOrdPrice=BigDecimal.ZERO;
        private BigDecimal change=BigDecimal.ZERO;//nov29 2919
	private BigDecimal totalmis = BigDecimal.ZERO;
	private BigDecimal totaldel = BigDecimal.ZERO;
	private BigDecimal totalqty = BigDecimal.ZERO;//totalxxxx,amountTotal means parent and includes all details
	private BigDecimal totaltax1 = BigDecimal.ZERO;
	private BigDecimal totaltax2 = BigDecimal.ZERO;
	private BigDecimal totaltax3 = BigDecimal.ZERO;
	private BigDecimal qtyOrdPrev = BigDecimal.ZERO;//
	private BigDecimal amountTotal = BigDecimal.ZERO;//amountTotal is sum of detaillt 
	private BigDecimal qtyTotal = BigDecimal.ZERO;//same as qtytotal or detailqty  then get rid of it
	private BigDecimal qtyTotalNew = BigDecimal.ZERO;
        private BigDecimal tax1RateValue=new BigDecimal("0.0");
        private BigDecimal tax2RateValue=new BigDecimal("0.0");
        private BigDecimal tax3RateValue=new BigDecimal("0.0");
        private BigDecimal tax1RateValueS=new BigDecimal("0.0");
        private BigDecimal tax2RateValueS=new BigDecimal("0.0");
        private BigDecimal tax3RateValueS=new BigDecimal("0.0");
        private BigDecimal tax1RateValueH=new BigDecimal("0.0");
        private BigDecimal tax2RateValueH=new BigDecimal("0.0");
        private BigDecimal tax3RateValueH=new BigDecimal("0.0");
        private BigDecimal detailLt = new BigDecimal("0.0");//is it same as amountTotal
        private BigDecimal detailLtO = new BigDecimal("0.0");
	private BigDecimal detailMis = BigDecimal.ZERO;
	private BigDecimal detailDel = BigDecimal.ZERO;
	private BigDecimal detailQty = BigDecimal.ZERO;
	private BigDecimal detailTax1 = BigDecimal.ZERO;
	private BigDecimal detailTax2 = BigDecimal.ZERO;
	private BigDecimal detailTax3 = BigDecimal.ZERO;
	private BigDecimal detailMisO = BigDecimal.ZERO;
	private BigDecimal detailDelO = BigDecimal.ZERO;
	private BigDecimal detailTax1O = BigDecimal.ZERO;
	private BigDecimal detailTax2O = BigDecimal.ZERO;
	private BigDecimal detailTax3O = BigDecimal.ZERO;
        BigDecimal qtyOrdO=BigDecimal.ZERO;
        String iShipCode="";//size of item
        String tShipCode="";//shipment mode for item


     	private boolean applyTax1 = false;
	private boolean applyTax2 = false;
	private boolean applyTax3 = false;

      String integrationAccountSet="";
      private BigDecimal temp = new BigDecimal("0.0");
      private String key="";
      private String subKey="";
      private String subKeyFirst="";
      private String slobkeyhash="";
      private String keysv="";
      // make it session variable later
      private int currentPeriod=1;
      private String divcode="";
      private String depcode="";
      private String accountn="";
      private String companycode="";
      private Calendar calendar = Calendar.getInstance();
      private Calendar calendare = Calendar.getInstance();
      private Calendar calendarly = Calendar.getInstance();
      private Date currbusdate = calendar.getTime();
      private Date dobSave = calendar.getTime();
      private int mnsorder=0;
      private int arSeqn=0;
      private int apSeqn=0;
      private int icSeqn=0;
      private int paSeqn=0;
      private int joSeqn=0;
      private int glSeqn=0;
     private int subarSeqn = 0;
      private int subapSeqn=0;
      private int subicSeqn=0;
      private int subpaSeqn=0;
      private int subjoSeqn=0;
      private int subglSeqn=0;

      private int mprinted=512;
      private int mdel=256;
      private int mmark=128;
      private int munmark=1023;
      private int mconsign=64;
      private int minvoiced=64;
      private int mnoMail=64;
      //  can be used for other status, use it for 1st entry in group,account or to mark a row as editable etc 
      //               where line field is not there 
      // mconsign should apply to item type not status ?? also means order invoiced
      private int mpartial=32;
      private int mshipped=32;
      private int mreceived=32;
      private int mpaid=16;
      // in case of venartha vpayment goes 16(paid)->8(closed by chq) but venartha itself becomes 16(paid by chq)
      private int mclosed=8;
      private int mreturn=4;//return,investigation,dispute,  
      private int mcopy=2;//copied or Picked from PicklList not customer picked
      private int mtoPay=2;//online order toPay status but items can be added at backOffice
      // copy means record was copied from another 
      //open becomes active ie some activity happened against the open record , mutually exclusive

      private int mactive=1;
      private int mordered=1;
      private int mopen=0;
      private int mquoted=0;
      // open means record created
      // use setXx(getXx()| mcopy)) to set copy flag leaving other bits as is 
      // use setXx(getXx()& _mcopy)) to clear copy flag leaving other bits as is 
      // the following shows which bit counting 0 as the right most bit 
      // used as if bitset(status,_matcive)
      // or as iif(bitset(status,_mmark),.t.,.f.)
      //_mactive=0  && 0th bit from right starting at 0 bit, value 1
      /***
      *transaction flow and status (in brackets) changes
      *Ecommerce:sales checkout by customer 
      *customer: checkout to order active(1)to and paypal payment/authorize toinvoice(64) and system changes order invoiced(64)
      *system:created order and invoice, got order shipment information from paypal and puts a hold payment or takes payment and creates payment record
      *agent:  convert invoice to shipping notclosed(8) invoiceto to shipment active(1) to Add B/O and and inform invoice dept and wait or set as shipped(32)
      *agent: if needed, process invoicing:invoice (64) and shipment B/O? investigate. Add B/O to invoice, inform shipment, wait. 
      *agent: convert invoice to payment:invoice (64) and its ordertoshipment ahipped(32) invoicetopayment(16?). Capture or capture with credit.
      *system: paymenttoorder,shipment,invoice,payment itself closed(8)  
      * 
      *Ecommerce:invoice payment by customer
      * order,invoices created by agent on phone order etc
      * option of payment online given to customer
      *customer: enters email,invoice amount and invoice number. If matches   
      *system: process the payment and creates payment record or puts a hold payment but no payment record?
      *agent: rest ie shipping, payment same as manual or Ecommerce sales check out
      *
      *Ecommerce:POS checkout by agent for customer (item entries can be by customer)
      *
      *Manual: Done by agent request over phone/email/case request folder
      *sales:  create quote active(1)
      *sales:  create order(1) from quote or manually create order active(1) 
      *shipping: notclosed(8) orderto to shipment active(1) to Add B/O and inform order and wait or shipped(32)
      *invoicing: invoice (64) and shipment B/O? investigate. Add B/O to invoice, inform shipment, wait. 
      *Payment:invoice (64) and its order to shipment shipped(32) invoice to payment(16?).Take payment and with credit.
      *payment: make order,shipment,invoice,payment itself closed(8)   

      *Ecommerce invoice payment
      *invoice can be from ecommerce or manually done 
      *customer: invoice (64) and invoice number and amount matches, then system creates payment(16?)
      *payment: make order,shipment,invoice,payment itself closed(8) ???  
      */


      private int _mopen=0;
      //0th bit ,numeric value 0
      private int _mactive=0;
      // && 0th bit ,numeric value 1
      private int _mcopy=1;
      //   && 1th bit ,numeric value 2
      private int _mreturn=2;
      // && 2nd bit                4 
      private int _mclosed=3;
      // && 3rd                    8 
      private int _mpaid=4;
      //   && 4th                   16
      private int _mpartial=5;
      private int _mshipped=5;
      // && 5th                   32 
      private int _mconsign=6;
      private int _minvoiced=6;
      private int _mnoMail=6;
      // && 6th                   64
      private int _mmark=7;
      //    && 7th                   128
      private int _mdel=8;
      //     && 8th                    256 
      private int _mprinted=9;
      // && 9th                   512 
     private boolean fromJsf =true;

     private boolean buttonPressed =false;
     private String buttonPressedLabel ="+ Upload";
     private String upLoadPurpose ="ad";
     private String discountType ="pe";
     private int useSeq=-1;

     private boolean hideChosen =false;
     private String lobDataType=" ";
     private String temps=" ";
     private Integer sidValue=0;
     private boolean entityUpdated =false;
     private boolean entityDeleted =false;
     private String eMailingAddress="";
     private String targetVendor="";
     private boolean mergedPayment=false;
     private String position="";
     private String overRideValue="";
     private String overRideValueS="";
     private String notesToPass="";
     private BigDecimal priceOverRide = new BigDecimal("0.0");
     private String ${componentName}From="";
     private String prefix=" ";
     private Integer tempCount=0;
     SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
     private boolean importChosen =false;
     private ${entityName} instance=null;
     private String hostingAt = "lo";//op for openshift, aw for amazon aws, hero for heroku, lo for Local 
     //web.xml context param to define hosting env and use getServletContext().getInitParameter(hostingAt) 
     //
     

/*
 If same field from a foreign table is used more than once, it can cause duplicate entries for @Inject
 By is used to supress the duplicate
*/
<#foreach property in pojo.allPropertiesIterator>
<#if (property.name?length > eL)>
 <#if !c2h.isManyToOne(property)>
  <#if c2j.isComponent(property)>
   <#foreach componentProperty in property.value.propertyIterator>
   </#foreach>
  </#if>
 </#if>
 <#if c2h.isManyToOne(property)>
  <#assign parentPojo = c2j.getPOJOClass(cfg.getClassMapping(property.value.referencedEntityName))>
  <#assign parentHomeName = util.lower(parentPojo.shortName) + "Home">
    <#-- foreign field multi occurrence checking ,add logic for itemprof which has foreign fld as key but needs lob key
  <#-- all manytoone(foreign entities) will have a validatorandselect to initialize the field in the pojo instance --> 
  <#if property.name?contains("By")>
    <#if bycalled1 = "N"  >
     @Inject
     ${parentPojo.shortName}Home ${parentHomeName};
     <#assign bycalled1 = property.name>
    </#if>
    <#if !property.name?contains(bycalled1?substring(0,eL)) && bycalled2 = "N"  >
     @Inject
     ${parentPojo.shortName}Home ${parentHomeName};
     <#assign bycalled2 = property.name>
    </#if>
    <#if !property.name?contains(bycalled1?substring(0,eL)) && !property.name?contains(bycalled2?substring(0,eL)) && bycalled3 = "N"  >
     @Inject
     ${parentPojo.shortName}Home ${parentHomeName};
     <#assign bycalled3 = property.name>
    </#if>
     ${parentPojo.shortName} ${property.name};
  <#else>
     @Inject
    ${parentPojo.shortName}Home ${parentHomeName};
    private ${parentPojo.shortName} ${util.lower(parentPojo.shortName)};
  </#if>
 </#if> 
 <#if (property.name?length > pL) >
      <#if property.name?substring(6,8)=="sd"> 
       <#assign scheduleStartDateField=property.name>
      </#if>    
 </#if>
</#if>
</#foreach>
//page parameters start here from not used, existing xxxxFrom used, delete below later -->
        private String from="";
	public void setFrom(String from) {
		this.from = from;
	}

	public String getFrom() {
           
		return from;
	}

<#assign idName = entityName + util.upper(pojo.identifierProperty.name)>
<#if c2j.isComponent(pojo.identifierProperty)>
 <#assign idType = entityName + "Id">
<#else>
 <#assign idType = pojo.importType(pojo.identifierProperty.type.returnedClass.name)>
</#if>
//rest goes here
    public void set${idName}(${idType} id)
    {
      // setId will fetch the record and Instance will point to it
      setId(id);
      if(getInstance() !=null && !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals(owner2Code)){
       try{
        //different owner other than SYSTEM, dont let it go through, to do why exception not caught
        setId(0);
       } catch (Exception e) {
        log.severe("Error passing bad sid "+ e.getMessage());
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+ bundle.getString("get")+" "+bundle.getString("record")+" "+e.getMessage(),""));


       }
      }
    }

    public ${idType} get${idName}()
    {
          <#if keyAutoGen == "Y" >

        return (${idType}) getId();
          <#else>
        return (${idType}) getId();
          </#if> 
    }

<#if pojo.isComponent(pojo.identifierProperty)>
    public ${entityName}Home()
    {
        set${idName}( new ${entityName}Id() );
    }
    
    @Override
    public boolean isIdDefined()
    {
    <#foreach property in pojo.identifierProperty.value.propertyIterator>
    <#if (property.name?length > pL) >
     <#assign getter = pojo.getGetterSignature(property)>
     <#assign ids = pojo.getGetterSignature(property)?substring(3)>
     <#assign idsType=property.value.typeName>
     // idsType ${idsType}
     <#if !c2j.isPrimitive( pojo.getJavaTypeName(property, true) )>
       <#if idsType == "java.util.Date" >
        if ( ${pojo.importType("org.jboss.seam.util.Strings")}.isEmpty( get${idName}().${getter}().toString() ) ) return false;
       <#else>
        if ( ${pojo.importType("org.jboss.seam.util.Strings")}.isEmpty( get${idName}().${getter}() ) ) return false;
       </#if>
        <#if ids?substring(pkS,pkE)=="k">
          <#assign keyedKeyName="get${idName}().${getter}()">
          <#assign keyNaturalToSetString = "this.instance.get${idName}.${setter}" >
          /*
           keyedKeyName -> ${keyedKeyName}   natural ${keyNaturalToSetString}
          */
        </#if>
     <#else>
          <#assign nonKeyedKeyName="get${idName}().${getter}()">
          /*
           nonKeyedKeyName -> ${nonKeyedKeyName}
          */
        if ( get${idName}().${getter}()==0 ) return false;
     </#if>
    </#if>
    </#foreach>
        return true;
    // key 1,2,3 -> ${key1} - ${key2} - ${key3}
    }

<#else>
   /**
    * Returns true if the id of the object managed is known.
    */
   public boolean isIdDefined()
   {
      return getId()!=null && !"".equals( getId() );
   }
</#if>
     public boolean isFromJsf() {
         return fromJsf;//default true
     }

     public void setFromJsf(boolean fromJsf){
      this.fromJsf=fromJsf;
     }


    public boolean isChangeDone(){
     return changeDone;
    } 

    public void setChangeDone(boolean changeDone){
      this.changeDone=changeDone;
    } 


  protected ${entityName} createInstance()

  {
      // jay add logic to check client flag for debug mode and bypass below if debug
      //setCreatedMessage(createValueExpression(""));
      //setDeletedMessage(createValueExpression(""));
      //setUpdatedMessage(createValueExpression(""));

       //${entityName} ${componentName} = new ${entityName}();
       //scope for this method only
       ${entityName} ${componentName}=null;
       if (instance == null) {
            try {
                instance = new ${entityName}();
                ${componentName}=instance;

            }
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                return null;
            }
       }else{
       //came to createInstance, but it may exists for some existing error conditions, so ignore and continue
            try {
                instance = new ${entityName}();
                ${componentName}=instance;

            }
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                return null;
            }
       

       }


  <#if pojo.isComponent(pojo.identifierProperty)>
        ${componentName}.setId( new ${entityName}Id() );
  </#if>
   /*
   This is the place to preinitialize the entity variables to display in jsf pages
   */
      <#if menuAttributes?contains("T")  && !(menuAttributesp2 == "27" || menuAttributesp2 == "36" || menuAttributesp2 == "38" || menuAttributesp2 == "93") >
       if(this.instance !=null && this.instance.get${itemEntityName?cap_first}() == null ){
        ${itemEntityName}=${itemEntityName}Home.getInstance();
        if ( ${itemEntityName} !=null ){
         this.instance.set${itemEntityName?cap_first}(${itemEntityName});
         this.instance.get${itemEntityName?cap_first}().setTempQuantity(new BigDecimal("1.0"));
        }
       }
      </#if>


  <#foreach property in pojo.allPropertiesIterator>
  <#if (property.name?length > eL)>
   <#if c2j.isComponent(property)>
    <#foreach componentProperty in property.value.propertyIterator>
    <#if (componentPproperty.name?length > eL)>
     /*
      If Primary key is composite then all the properties forming the composite are component since they refer to components
      as opposed to individual field
      ComponentProperty ${componentProperty}
     */
     <#assign setter2 = "set" + pojo.getPropertyName(property)>
     <#if componentProperty.value.type.name?contains("nteger") >
      <#assign getter = pojo.getGetterSignature(componentProperty)>
      <#if (componentProperty.name?substring(4,5) =="e") >
 			get${idName}().set${getter?substring(3)}(1);
      <#else>
 			get${idName}().set${getter?substring(3)}(0);
      </#if>
     <#elseif componentProperty.value.type.name?contains("timestamp" )>
       /* ${componentProperty} jay ${componentProperty.value.type.name} */
       <#assign getter = pojo.getGetterSignature(componentProperty)>
       <#if (componentProperty.name?substring(4,5) =="n") >
            calendar.add(Calendar.DAY_OF_YEAR,1);
		get${idName}().set${getter?substring(3)}(calendar.getTime());
       <#else>
                <#if menuAttributesp2 == "89" >
                calendar.getTime();
		calendar.set(Calendar.HOUR, 9);
  		calendar.set(Calendar.MINUTE, 0);
                </#if>    
		get${idName}().set${getter?substring(3)}(calendar.getTime());
          
       </#if>
     <#else> 
      <#if (componentProperty.name?length > pL) && componentProperty.name?substring(pkS,pkE)=="n">
       <#assign getter = pojo.getGetterSignature(componentProperty)>
             <#if keyAutoGen == "Y" >
  		      this.instance.set${getter?substring(3)}("AUTO GENERATE");
             <#else>
  		      get${idName}().set${getter?substring(3)}("AUTO GENERATE");
             </#if>
      </#if>
      //jay change below to get owner2 value from user table at login time or read it 
      <#if (componentProperty.name?length > pL) && componentProperty.name?substring(pfS,pfE)=="2o">
       <#assign getter = pojo.getGetterSignature(componentProperty)>
             <#if keyAutoGen == "Y" >
                // ?? use setter , no instance created yet
  		      this.instance.set${getter?substring(3)}(owner2Code);
             <#else>
  		      get${idName}().set${getter?substring(3)}(owner2Code);
             </#if>
      </#if>
      <#if (componentProperty.name?length > pL) && componentProperty.name?substring(pkS,pkE)=="o" || componentProperty.name?substring(5,7)=="do" || componentProperty.name?substring(5,7)=="fo"  || componentProperty.name?substring(5,7)=="go" >
       <#assign divisionField=componentProperty.name>
       <#assign currentClientClass = "Y">
       <#assign getter = pojo.getGetterSignature(componentProperty)>
       //jay add checking return value of getCurrent...
  	 get${idName}().set${getter?substring(3)}(getCurrentClientFieldValue("o"));
       wire();
      </#if>
      <#if (componentProperty.name?length > pL) && componentProperty.name?substring(5,7)=="dc" || componentProperty.name?substring(5,7)=="fc"  || componentProperty.name?substring(5,7)=="gc" >
       <#assign companyField=componentProperty.name>
       <#assign currentClientClass = "Y">
       <#assign getter = pojo.getGetterSignature(componentProperty)>
       //jay add checking return value of getCurrent...
  	 get${idName}().set${getter?substring(3)}(getCurrentClientFieldValue("c"));
       wire();
      </#if>
      <#if (componentProperty.name?length > pL) && componentProperty.name?substring(pkS,pkE)=="e" || componentProperty.name?substring(5,7)=="de"  || componentProperty.name?substring(5,7)=="fe"  || componentProperty.name?substring(5,7)=="ge" >
       <#assign departmentField=componentProperty.name>
       <#assign currentClientClass = "Y">
       <#assign getter = pojo.getGetterSignature(componentProperty)>
  	 get${idName}().set${getter?substring(3)}(getCurrentClientFieldValue("e"));
       wire();
      </#if>
      <#if componentProperty.name?substring(pkS,pkE)=="t" || componentProperty.name?substring(5,7)=="dt" || componentProperty.name?substring(5,7)=="ft"  || componentProperty.name?substring(5,7)=="gt" >
       <#assign employeeField=componentProperty.name>
       <#assign currentUserClass = "Y">
       <#assign getter = pojo.getGetterSignature(componentProperty)>
       //jay add checking return value of getCurrent...
  	 get${idName}().set${getter?substring(3)}(getCurrentUserFieldValue("e"));
       wire();
      </#if>
      <#if componentProperty.name?substring(5,7)=="xs" >
       get${idName}().set${scheduleStartDateStringField}(calendar.getTime().toString()); 
       wire();
      </#if>
     </#if>
    </#if>
    </#foreach>
    // set it on the entity instance tied to JSF page to show on screen
    ${componentName}.setId(get${componentName?cap_first}Id());  
   <#else>
    <#if c2h.isCollection(property) >
     <#--
      Non Component CollectionProperty ${property}
     -->
    </#if>
    <#if c2h.isManyToOne(property) >
         <#--
      Non Component ManyToOneProperty ${property}. It will show foreign table name
      Use columniterator to get the actual field of the foreign key
      -->
    </#if>
    <#if c2h.isOneToMany(property) >
         <#--
      Non Component OneToManyProperty ${property}
      
     -->
    </#if>

    <#if !c2h.isCollection(property) && !c2h.isManyToOne(property)>
     <#--
      Non Component & Non collection & Non Manytoone Property Name ${property.name}
      Foreign fields wont show here type is  ${property.value.type.name}
     -->
     <#assign setter2 = "set" + pojo.getPropertyName(property)>
     <#if (property.name?substring(pefS,pefE) =="ln")>
          // to avoid validation failure for magictray , remove if alternate is found 
		${componentName}.${setter2}("*");
     </#if>
     <#if property.value.type.name == "big_decimal" >
      <#if  property.name?substring(4,5)=="e" >
		${componentName}.${setter2}(new BigDecimal("1.0"));
      <#else>
		${componentName}.${setter2}(new BigDecimal("0.0"));
      </#if> 
     </#if>
     <#if property.name?substring(pkS,pkE)=="m" ||  property.name?substring(5,7)=="mt" >
      <#assign miscchrgField=property.name>
     </#if>
     <#if property.name?substring(pkS,pkE)=="l" ||  property.name?substring(5,7)=="lt" >
     <#assign deliveryField=property.name>
     </#if>
     <#if property.name?substring(pfS,pfE)=="bt" >
      <#assign priceField=property.name>
     </#if>
     <#if property.name?substring(5,7)=="yp" >
      <#assign priceOutStandingField=property.name>
     </#if>
     <#if property.name?substring(pfS,pfS2)=="q" ||  property.name?substring(5,7)=="tq" >
      <#assign qtyField=property.name>
     </#if>
     <#if property.name?substring(5,7)=="qp" >
      <#assign qtyOutStandingField=property.name>
     </#if>
     <#if property.name?substring(pfS,pfS2)=="c">
      <#assign costField=property.name>
     </#if>
     <#if property.name?substring(pefS,pefE)=="z1">
      <#assign tax1Field=property.name>
     </#if>
     <#if property.name?substring(pefS,pefE)=="z2" && property.name?substring(pfS,pfE)!="2o" >
      <#assign tax2Field=property.name>
     </#if>
     <#if property.name?substring(pefS,pefE)=="z3">
      <#assign tax3Field=property.name>
     </#if>
     <#if property.name?substring(5,7)=="tp">
      <#assign amountTotalField=property.name>
     </#if>
     <#if property.name?substring(pfS,pfS2)=="u">
      <#assign unitField=property.name>
     </#if>
     <#if property.name?substring(pfS,pfS2)=="s">
      
     </#if>
     <#if property.name?substring(pfS,pfS2)=="v" || property.name?substring(5,7)=="dv" ||  property.name?substring(5,7)=="fv">
      <#assign vendorField=property.name>
     </#if>
     <#if  property.name?substring(5,7)=="ft" || property.name?substring(5,7)=="dt">
      <#assign employeeField=property.name>
     </#if>
     <#if property.name?substring(pfS,pfS2)=="r" || property.name?substring(5,7)=="dr"  || property.name?substring(5,7)=="fr">
      <#assign customerField=property.name>
     </#if>  
  
     <#if property.name?substring(6,8)=="az"> 
      <#assign pzcodeField=property.name>
     </#if>    
     <#if property.name?substring(5,7)=="zd" || property.name?substring(5,7)=="zb" || property.name?substring(5,7)=="za"  > 
      <#assign documentField=property.name>
     </#if>   
     <#-- warning -- below picks up current enity status field not others, currently hard code but should use entityNameStatusField??-->
     <#if property.name?substring(5,7)=="zf"> 
      <#assign statusFlagField=property.name>
     </#if>   
     <#if property.name?substring(5,7)=="zt"> 
      <#assign statusFlagDField=property.name>
     </#if>   
     <#if property.name?substring(5,7)=="to"> 
      <#assign ownerField=property.name>
     </#if>   
     <#if property.name?substring(pfS,pfE)=="2o"> 
      <#assign owner2Field=property.name>
     </#if>   
     <#if property.name?substring(10,12)=="16">
      <#assign typeField=property.name>
     </#if> 
     <#if property.name?substring(6,8)=="ed"> 
      <#assign scheduleEndDateField=property.name>
     </#if>    
     <#if property.name?substring(6,8)=="sd"> 
      <#assign scheduleStartDateField=property.name>
     </#if> 
     <#if menuAttributesp2 == "1B" >
      <#if property.name?substring(5,7)=="bt"> 
       <#assign bt=property.name>
      </#if>
      <#if property.name?substring(5,7)=="at"> 
       <#assign at=property.name>
      </#if>
  
      <#if property.name?substring(5,7)=="b1"> 
      <#assign b1=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a1"> 
      <#assign a1=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b2"> 
      <#assign b2=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a2"> 
      <#assign a2=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b3"> 
      <#assign b3=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a3"> 
      <#assign a3=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b4"> 
      <#assign b4=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a4"> 
      <#assign a4=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b5"> 
      <#assign b5=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a5"> 
      <#assign a5=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b6"> 
      <#assign b6=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a6"> 
      <#assign a6=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b7"> 
      <#assign b7=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a7"> 
      <#assign a7=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b8"> 
      <#assign b8=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a8"> 
      <#assign a8=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="b9"> 
      <#assign b9=property.name>
      </#if>
      <#if property.name?substring(5,7)=="a9"> 
      <#assign a9=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="ba"> 
      <#assign ba=property.name>
      </#if>
      <#if property.name?substring(5,7)=="aa"> 
      <#assign aa=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="bb"> 
      <#assign bb=property.name>
      </#if>
      <#if property.name?substring(5,7)=="ab"> 
      <#assign ab=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="bc"> 
      <#assign bc=property.name>
      </#if>
      <#if property.name?substring(5,7)=="ac"> 
      <#assign ac=property.name>
      </#if> 
      <#if property.name?substring(5,7)=="bd"> 
      <#assign bc=property.name>
      </#if>
      <#if property.name?substring(5,7)=="ad"> 
      <#assign ad=property.name>
      </#if> 
     </#if>
     <#if property.value.type.name == "timestamp" >
      <#if (property.name?substring(4,5) =="n") >
          calendar.add(Calendar.DAY_OF_YEAR,1);
		${componentName}.${setter2}(calendar.getTime());
           calendar=Calendar.getInstance();
      <#elseif (property.name?substring(5,7) =="ee") >
         calendare.set(Calendar.HOUR, 10); 
	    ${componentName}.${setter2}(calendare.getTime());
      <#elseif (property.name?substring(pefS,pefE) =="td") >
         //calendar.add(Calendar.YEAR,-40);
	    ${componentName}.${setter2}(null);
         // save and compare at persist time 
         //dobSave.setTime(calendar.getTime());
         //reset 
         //calendar=Calendar.getInstance();
      <#else>
		${componentName}.${setter2}(calendar.getTime());
      </#if>
     </#if>
     <#if property.value.type.name?contains("nteger") && property.name?substring(pfS,pfS2)!="o"  >
      <#if (property.name?substring(4,5) =="p") >
		${componentName}.${setter2}(Integer.parseInt(getAcperiodFieldValue("cp")));
      <#elseif (property.name?substring(6,8) == "sh") >
		${componentName}.${setter2}(9);
      <#elseif (property.name?substring(4,5) =="e") >
		${componentName}.${setter2}(1);
      <#else>
		${componentName}.${setter2}(0);
      </#if> 
     </#if>
     <#if property.value.type.name?contains("oolean") || property.value.type.name == "yes_no" || property.value.type.name == "true_false" >
      <#if (property.name?substring(4,5) =="t" || property.name?substring(4,5) =="y") >
		${componentName}.${setter2}(true);
      <#else>
		${componentName}.${setter2}(false);
      </#if>
     </#if>
     <#if property.name?substring(pL) == "owner" >
		${componentName}.${setter2}(ownerCode);
     </#if>
     <#if property.name?substring(6,8)=="l1">
          ${componentName}.${setter2}("January");
     </#if>
     <#if property.name?substring(6,8)=="l2">
          ${componentName}.${setter2}("Feb");
     </#if>
     <#if menuAttributesp2 == "56" >
     <#if property.name?substring(6,8)=="up">
          ${componentName}.${setter2}("xxxx");
     </#if>
     </#if>
     <#if menuAttributesp2 == "1A" >
      <#if property.name?substring(pefS,pefE)=="zs">
         // if not reply ie adding issue do not prefill descript
         if (replyToMatCode != null && (replyToMatCode.trim().length() > 0) ){
         		${componentName}.${setter2}("Reply by "+ownerCode.substring(0,ownerCode.length()-3)+" on "+calendar.getTime().toString());
         }else{
          replyToMatCode=null;
         }
      </#if>
     </#if>
     <#if menuAttributesp2 == "89" >
      <#if property.name?substring(pefS,pefE)=="zs">
         // if not from fullCalendar  ie if direct add schedule then do not prefill descript
         if (descriptionValue != null && (descriptionValue.trim().length() > 0) ){
         		${componentName}.${setter2}(descriptionValue);
         }else{
          descriptionValue=null;
         }
      </#if>
      <#if property.name?substring(pefS,pefE)=="sd">
         // if not from fullCalendar  ie if direct add schedule then do not prefill descript
         if (startValue != null && (startValue.trim().length() > 0) ){
                try{
                 //formatting (date -> text), parsing (text -> date)
         		 ${componentName}.${setter2}(sdf.parse(startValue));
                } catch (Exception e) {
			 log.severe("Error parsing string to date"+ e);
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("date")+" "+ bundle.getString("conversion")+" "+bundle.getString("failed")+" "+e.getMessage(),""));
                }
         }else{
          startValue=null;
                calendar.getTime();
		calendar.set(Calendar.HOUR, 9);
  		calendar.set(Calendar.MINUTE, 0);
		${componentName}.${setter2}(calendar.getTime());
         }
      </#if>
     </#if>
     <#if property.name?substring(10,12)=="16">
       if (productCode.equals("s")){          
		${componentName}.${setter2}("SI-D");
       }else{
        if (productCode.equals("f")){ 
              if(subProductCode.equals("b")){        
		${componentName}.${setter2}("IB");
              }
              if(subProductCode.equals("s")){        
		${componentName}.${setter2}("SI-D");
              }
        }else{
         if (productCode.equals("e")){  
              if(subProductCode.equals("f")){        
		${componentName}.${setter2}("IX");
              }
              if(subProductCode.equals("e")){        
		${componentName}.${setter2}("SI-D");
              }
              if(subProductCode.equals("l")){        
		${componentName}.${setter2}("LT-D");
              }
         }else{
           if (productCode.equals("o")){          
	    ${componentName}.${setter2}("SI-D");
           }else{
		${componentName}.${setter2}("IX");
           }
         }
        }
       }
     </#if>
      <#if property.name?substring(pfS,pfE)=="2o">
		${componentName}.${setter2}(owner2Code);
     </#if>
      <#if property.name?substring(pfS,pfE)=="sc">
		${componentName}.${setter2}("SS");
     </#if>
     <#if menuAttributesp2 == "1N">
      <#if property.name?contains("fromtable")>
		${componentName}.${setter2}("blobdata");
      <#elseif property.name?contains("qualifier")>
		${componentName}.${setter2}("PIC");
      </#if>
     </#if>
     <#if menuAttributesp2 == "1M">
      <#if property.name?contains("fromtable")>
		${componentName}.${setter2}("clobdata");
      <#elseif property.name?contains("qualifier")>
		${componentName}.${setter2}("TXT");// most of the time TXT

      </#if>
     </#if>
     <#if property.name?substring(10,12) == "48" >
		${componentName}.${setter2}("H"); // Hours as default 
     </#if>
     <#if (property.name?substring(pkS,pkE)=="n") && (property.name?substring(6,8)=="cq" || property.name?substring(6,8)=="co" || property.name?substring(6,8)=="ci"  )  > 
         getCurrentUserToEmployeeValue("e");
     </#if>
     <#if (property.name?substring(pkS,pkE)=="n") && (property.name?substring(6,8)=="vq" || property.name?substring(6,8)=="vo" || property.name?substring(6,8)=="vi" )  > 
         getCurrentUserToEmployeeValue("e");
     </#if>
    </#if>
   </#if>
  </#if>
  </#foreach>
   return ${componentName};
  }
<#if (messagingCandidate = "Y" || (clobDataClass =="Y" || blobDataClass =="Y") || documentField !="") >    

	@Inject
	${clobdataEntityName?cap_first}Home ${clobdataEntityName}Home;
	private ${clobdataEntityName?cap_first} ${clobdataEntityName};
	private ${clobdataEntityName?cap_first} ${clobdataEntityName}2;
     <#if clobDataClass !="Y">
	@Inject
	${clobdataEntityName?cap_first}List ${clobdataEntityName}List;

     </#if>

	@Inject
	${blobdataEntityName?cap_first}Home ${blobdataEntityName}Home;
	private ${blobdataEntityName?cap_first} ${blobdataEntityName};
     <#if blobDataClass !="Y">
	@Inject
	${blobdataEntityName?cap_first}List ${blobdataEntityName}List;
     </#if>



      String msgb = "";
      byte[] bmsg = null;
      byte[] bmsgb = null;
     private String  startk1  = "";
     private String  endk1  = "";
     private String  startk2  = "";
     private String  endk2  = "";
     private String  startk3  = "";
     private String  endk3  = "";
	private Boolean dataIsClob = false;
	private Boolean dataIsBlob = false;



</#if>

/**
* method pre-initializes entities and gets invoked via jsf f:viewAction  
*/    
    public void wire()
    {
// ManyToOne will capture the Foreign Key Fields and the foreign Entity Name
// 
<#foreach property in pojo.allPropertiesIterator>
<#if (property.name?length > eL)>
<#if c2h.isManyToOne(property)>
 <#if c2j.isComponent(property)>
   <#foreach componentProperty in property.value.propertyIterator>
    <#if isString(componentProperty)>
        if ( ${property.name}.${componentProperty.name}!=null ){
           getInstance().${setter}(${componentName}.${property.name}${property.name});
        }
    </#if>
    <#break>
   </#foreach>
 <#else>
  <#assign parentPojo = c2j.getPOJOClass(cfg.getClassMapping(property.value.referencedEntityName))>
  <#if parentPojo.shortName ==pojo.shortName || parentPojo.shortName!=pojo.shortName>
   <#assign parentHomeName = util.lower(parentPojo.shortName) + "Home">
   <#assign setter = "set" + pojo.getPropertyName(property)>
   // if keyfield then populate lastxxxentity so that dropdown will show it if coming from list for update 
   //${parentPojo.shortName} ${property.name}=${parentHomeName}.getDefinedInstance(); use private variable
   <#foreach parentProperty in parentPojo.allPropertiesIterator>
   <#if (parentProperty.name?length > eL)>
    <#if (parentProperty.name?length > pL) >
     <#if parentProperty.name.substring(pkS,pkE)= "k" || parentProperty.name.substring(pkS,pkE)= "n">
          <#assign parentKeyName =  parentProperty.name >
     </#if>
    </#if>
   </#if>
   </#foreach>
   <#if property.name?contains("By")>
    if (this.instance != null && this.instance.get${property.name?cap_first}() !=null){
     ${parentHomeName}.setLast${parentPojo.shortName?lower_case}P(this.instance.get${property.name?cap_first}().get${parentKeyName?cap_first}());
    }
   <#elseif idsType?contains("tring")>
    if (this.instance != null && this.instance.get${parentPojo.shortName}() !=null){
     ${parentHomeName}.setLast${parentPojo.shortName?lower_case}P(this.instance.get${parentPojo.shortName}().get${parentKeyName?cap_first}());
    }
   <#else>
   </#if>  
   <#if menuAttributesp2 == "60">
    if(this.instance !=null && this.instance.getB1xxuwgxbv01xxxxxxxxcategory()!=null){
     categoryO=this.instance.getB1xxuwgxbv01xxxxxxxxcategory();
    }
   </#if>

   // logic changed to get parent instance not instance itself if entity is item because parent and entity is same
   <#if menuAttributesp2 == "1A">
    if (this.instance != null && this.instance.getFpxxfq1a5xwwqqhxxxxxitem() !=null){
     ${property.name}=${parentHomeName}.getDefinedInstance();
     if ( ${property.name}!=null ){
      getInstance().${setter}(${property.name});
     }
    }
   <#else>
     ${property.name}=${parentHomeName}.getDefinedInstance();
     if ( ${property.name}!=null ){
      getInstance().${setter}(${property.name});
     }
   </#if>
  <#else>
   //xxx
  </#if>
 </#if>
</#if>
</#if>
</#foreach>
<#if ((clobDataClass =="Y" || blobDataClass =="Y") && documentField !="") >    
     if(this.instance !=null && (this.instance.get${documentField?cap_first}()!=null || ${homeName}.isManaged())){
      this.upLoadPurpose="re"; 
     }
</#if>


<#if menuAttributesp2 == "1R">
      String type = externalContext.getRequestParameterMap().get("type");
      if(type != null && type.equals("_M")){
       this.instance.setA0xxukrdbvxxxxxxxxxxkey(this.instance.getA0xxukrdbvxxxxxxxxxxkey()+type);
      }
</#if>
<#if menuAttributesp2 == "1A">

 // initialize temp properties using persisted data to avoid losing existing values
 if(this.instance != null && this.instance.getG2xxuxn3bvxxxxxxxxxxsubcodesn3() != null){
  String itemVariantsL=this.instance.getG2xxuxn3bvxxxxxxxxxxsubcodesn3();
  if(itemVariantsL.length()>9){
   itemVariantSizeL=itemVariantsL.substring(0,9);
  }
  if(itemVariantsL.length()>18){
   itemVariantColourL=itemVariantsL.substring(9,18);
  }
  if(itemVariantsL.length()>27){
   itemVariantMaterialL=itemVariantsL.substring(18,27);
  }
  if(itemVariantsL.length()>35){
   itemVariantBrandL=itemVariantsL.substring(27,35);
  }

 }
 if(this.instance != null && this.instance.getG2xxuxn2bvxxxxxxxxxxsubcodesn2() != null){
  String itemVariants=this.instance.getG2xxuxn2bvxxxxxxxxxxsubcodesn2();

  if(itemVariants.length()>7){
   itemVariantSize=itemVariants.substring(0,8);
  }
  if(itemVariants.length()>15){
   itemVariantColour=itemVariants.substring(8,16);
  }
  if(itemVariants.length()>23){
   itemVariantMaterial=itemVariants.substring(16,24);
  }
  if(itemVariants.length()>31){
   itemVariantBrand=itemVariants.substring(24,32);
  }
 }

 if(this.instance != null && this.instance.getC3fbuxscbvxxxxxxxxxxshipcode() != null){
  String checkedDataAndSize=this.instance.getC3fbuxscbvxxxxxxxxxxshipcode();
  String[] checkedData=new String[4];//will allow selectmanycheckbox upto 4
  int j=0;
  int jj=checkedDataAndSize.trim().length();
  for(int i=0; i<4; i=i+1){
   if(i<jj){
    checkedData[j]=checkedDataAndSize.substring(i,i+1).toUpperCase(); 
   }else{
    checkedData[j]="X"; 
   } 
   j=j+1;
  }
   this.instance.setCheckedData(checkedData);//copy to instance temp field
   if(checkedDataAndSize.length()>4){
    this.instance.setCheckedSize(checkedDataAndSize.substring(4,5));
   }

  //25chrs are defined as follows
  //hhhh s    u    wwww   u    llll   u    wwww  u    hhhh
  //ship size unit weight unit length unit width unit height
  //SEPA SMLX gklt n.nn   cmif n.nn   cmif nnnn  gklt nn.n
  //     Y
  //added suport for weight as 3rd pair ie D1 if .1 or 77 if 77 lb/kg selection in client
  // also added color (shirt) as 4th pair. Note: item ship code allows 2ch each to allow as many choice in 25 ch
  // but actual order will have one ch each ie S(standard ship)L(Large Size)?Weight so rate table has 2ch
 }  
</#if>
<#if menuAttributesp2 == "25">
 if(this.instance == null || this.instance.getC2xxuxxrbv51xxxxxxxxtype()==null){
  return;
 }
</#if>
<#if menuAttributesp2 == "26">
 if(trexuq244xwwqqhxxxxxcuorders != null && trexuq244xwwqqhxxxxxcuorders.getC2xxcxxxbv09xxxxxxxxterms() !=null && trexuq244xwwqqhxxxxxcuorders.getC2xxcxxxbv09xxxxxxxxterms().contains("Pickup")){ 
  this.instance.setC2xxuxxrbv51xxxxxxxxshiptype("PM");
 }
</#if>
    }
    
    public boolean isWired()
    {
    <#foreach property in pojo.allPropertiesIterator>
     <#if (c2h.isManyToOne(property) && !property.optional)>
     /*
     There is CheckEntityxx() in persist to replace this
     Otherwise Save will never be eanbled for pre initialized key fields
     <#assign getter = pojo.getGetterSignature(property)>
     if ( getInstance().${getter}()==null ) return false;
     */
     </#if>
    </#foreach>
     return true;
}

    
    public ${entityName} getDefinedInstance()
    {
        if(isIdDefined()){
         if(getInstance() == null || getInstance().getA0xxuobxbxxxxxxxxxxxsid()==null){
          return null;///need to check when this happens, it seems can happen if the entity already exists and again calls getdefine
         }
         if(getInstance().getA0xxuobxbxxxxxxxxxxxsid().equals(getId())){
          return getInstance();
         }else{
          return ${componentName}List.getSidToEntity(getId());
         }
        }else{
         return null;
        }
    }

       private Map<Integer, Boolean> checked = new HashMap<Integer, Boolean>();

public Map<Integer, Boolean> getChecked() {  
return checked;  
}  

/**
* method is used to check the numeric status field value and return a descriptive value
* @param status
* int value
* @return a String value 
*/    

    public String describeStatus(int status){
    if (status==0){
     return "open";
    }
    
    if (status==1){
     return "active";
    }
    if (status==32){
     return "shipped";
    }
    if (status==64){
     return "invoiced";
    }
    if (status==8){
     return "closed";
    }
    if (status==16){
     return "paid";
    }



    return ""+status; 
   }

    public String markCompleted() {
       <#if statusFlagDField !=""  >
           this.instance.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
       </#if>
       <#if statusFlagField !=""  >
           // add logic to check elligble to close
           this.instance.set${statusFlagField?cap_first}( mclosed );
       </#if>
     return "completed";
    }
    public String markCompletedAll() {
       <#if statusFlagDField !=""  >
           // add logic put a series of query to get related records and mark them closed
           this.instance.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
       </#if>
       <#if statusFlagField !=""  >
           // add logic to check elligble to close
           this.instance.set${statusFlagField?cap_first}(mclosed );
       </#if>
     return "completedAll";
    }


	public String getEMailingAddress() {
              if (eMailingAddress ==null || eMailingAddress.isEmpty()){  
                //prefill if empty
                <#if menuAttributesp2 == "23" || menuAttributesp2 == "24" || menuAttributesp2 == "26" || menuAttributesp2 == "27" || menuAttributesp2 == "25">
                 if (${customerEntityName} != null){
                 eMailingAddress=${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr();
                 }
                </#if>
                <#if menuAttributesp2 == "33" || menuAttributesp2 == "34" || menuAttributesp2 == "3A" || menuAttributesp2 == "38" || menuAttributesp2 == "37">
                 if (${vendorEntityName} != null){
                 eMailingAddress=${vendorEntityName}.getN4xxhxxrbv24xxxxxxxximailaddr();
                 }
                </#if>
                <#if menuAttributesp2 == "44" >
                 if (${employeeEntityName}ByEmployee != null){
                 eMailingAddress=${employeeEntityName}ByEmployee.getN4xxhxxrbv24xxxxxxxximailaddr();
                 }
                </#if>
              }
		return eMailingAddress;
	}
     
	public void setEMailingAddress(String eMailingAddress) {
		this.eMailingAddress = eMailingAddress;
	}

	public String getShowPosition() {
	  return position;
	}
     
	public void setShowPosition(String position) {
		this.position = position;
	}


	public String getValueOverRide() {
	  return overRideValue;
	}
     
	public void setValueOverRide(String overRideValue) {
		this.overRideValue = overRideValue;
	}


	public String getValueOverRideS() {
	  return overRideValueS;
	}
     
	public void setValueOverRideS(String overRideValueS) {
		this.overRideValueS = overRideValueS;
	}


	public BigDecimal getPriceOverRide() {
	  return priceOverRide;
	}
	public void setPriceOverRide(BigDecimal priceOverRide) {
		this.priceOverRide = priceOverRide;
	}

     

	public String getNotesToPass() {
		return notesToPass;
	}
     
	public void setNotesToPass(String notesToPass) {
		this.notesToPass = notesToPass;
	}



	public String get${componentName?cap_first}From() {
		return ${componentName}From;
	}
     
	public void set${componentName?cap_first}From(String entityFrom) {
		this.${componentName}From = entityFrom;
	}



     public String getPrefix() {
      return prefix;
    }

   public void setPrefix(String prefix) {
     this.prefix=prefix;
   }
   public Boolean[] getCheckMapI() {
    return this.checkMapI;
   }
   public void setCheckMapI(Boolean[] checkMapI){
                this.checkMapI=checkMapI;
   }
   public Boolean[] getCheckMapT() {
    return this.checkMapT;
   }
        public void setCheckMapT(Boolean[] checkMapT){
                this.checkMapT=checkMapT;
        }
	public void setMailingImage1(byte[] mailingBytes) {
		this.mailingBytes1 = mailingBytes;
	}

	public byte[] getMailingImage2() {
           
		return mailingBytes2;
	}

	public void setMailingImage2(byte[] mailingBytes) {
		this.mailingBytes2 = mailingBytes;
	}
	public byte[] getMailingImage3() {
           
		return mailingBytes3;
	}

	public void setMailingImage3(byte[] mailingBytes) {
		this.mailingBytes3 = mailingBytes;
	}
	public byte[] getMailingImage4() {
           
		return mailingBytes4;
	}

	public void setMailingImage4(byte[] mailingBytes) {
		this.mailingBytes4 = mailingBytes;
	}

	public byte[] getMailingImage5() {
           
		return mailingBytes5;
	}

	public void setMailingImage5(byte[] mailingBytes) {
		this.mailingBytes5 = mailingBytes;
	}

	public void setMailingText(String mailingText) {
		this.mailingText = mailingText;
	}

	public String getMailingText1() {
           
		return mailingText1;
	}

	public void setMailingText1(String mailingText) {
		this.mailingText1 = mailingText;
	}

	public String getMailingText2() {
           
		return mailingText2;
	}

	public void setMailingText2(String mailingText) {
		this.mailingText2 = mailingText;
	}
	public String getMailingText3() {
           
		return mailingText3;
	}

	public void setMailingText3(String mailingText) {
		this.mailingText3 = mailingText;
	}
	public String getMailingText4() {
           
		return mailingText4;
	}
	public void setMailingText4(String mailingText) {
		this.mailingText4 = mailingText;
	}



	public String getMailingText5() {
           
		return mailingText5;
	}
	public void setMailingText5(String mailingText) {
		this.mailingText5 = mailingText;
	}

	public String getMailingImage1TypeMime() {
           
		return mailingBytes1TypeMime;
	}

	public void setMailingImage1TypeMime(String mailingTypeMime ) {
		this.mailingBytes1TypeMime = mailingTypeMime;
	}

	public String getMailingImage2TypeMime() {
           
		return mailingBytes2TypeMime;
	}

	public void setMailingImage2TypeMime(String mailingTypeMime ) {
		this.mailingBytes2TypeMime = mailingTypeMime;
	}
	public String getMailingImage3TypeMime() {
           
		return mailingBytes3TypeMime;
	}

	public void setMailingImage3TypeMime(String mailingTypeMime ) {
		this.mailingBytes3TypeMime = mailingTypeMime;
	}

	public String getMailingImage4TypeMime() {
           
		return mailingBytes4TypeMime;
	}

	public void setMailingImage4TypeMime(String mailingTypeMime ) {
		this.mailingBytes4TypeMime = mailingTypeMime;
	}

	public String getMailingImage5TypeMime() {
           
		return mailingBytes5TypeMime;
	}

	public void setMailingImage5TypeMime(String mailingTypeMime ) {
		this.mailingBytes5TypeMime = mailingTypeMime;
	}


    /**
    * The following method is proxy for file.fileUpload to allow using 
    * requestScoped for raaspi file class
    * @see "file class"
    * 
    */

    public String callFileUpload(String purpose){
     file.fileUpload(purpose);
     return "";
    }



    /**
    * The following method used r3restclient.xhtml to ???
    * @param args none bur flag restentity is set to true
    * @return String set by persist
    * @exception None 
    * @see "persist()"
    * 
    */

    public String persistRest() {
     restEntity=true;
     return persist();
    }



    public String persist(String owner2Code) {
     // override owner2Code temporarily and will get reset in next invocation of the bean
     owner2CodeS = this.owner2Code;
     this.owner2Code=owner2Code;
     // no need to rollup because all values are zero also avoids owner2Code issue for SYSTEM records
     doRollUp=false;
     return persist();
    }

/***
* creates key unless already exists as in from rest like shopify, or order created via cart or skip key validation
* key could be created from subkeys or auto generated based on reveng.xml
* based on entity needs fill up with entered values. Item will have type, taxable or not. 
* if txn then call showrunt > createcdetails and showrunt (updates parent instance values)
* persistrunt (puts values to totals for persist) , updatecustomer or vendor,
* common part begins
* set clob/blob pointer to the instance
* if child item then superupdate parent
* persist any new clob/blob, update existing clob/blob
* persist current instance and then details 
* seq starts from 0 and xxList.getNextSeqAvailable is used for next one. 
* seq -1 used  for storing removed image to allow undo
* or in case 3R-TOP-BKGR -1 means use color instead of any image
* qualifier 1 if shopping items. Non shopping or not related to items can have qualifier PIC etc.
*@param none, values passed through variables
*@see "extended_persist"
*/
    public String persist() {

     <#if menuAttributesp2 == "5A">
      //5A truefalse,  may not come from print,check if table name empty
      //get tableName from list classname, qualifier from list.selectedQualifier.check if null
      int tOffset=27+20;
      if (this.instance.getA0xxukrdbvxxxxxxxxxxtablename() == null || this.instance.getA0xxukrdbvxxxxxxxxxxtablename().isEmpty()){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("table")+" "+ bundle.getString("name")+" "+bundle.getString("empty")+", "+bundle.getString("assumed")+" "+bundle.getString("as")+" "+bundle.getString("address"),""));
       this.instance.setA0xxukrdbvxxxxxxxxxxtablename("address");  
      } 
      String tableName=yxxxch5a1xhhxxhxxxxxtruefalseList.getSelectedClass().substring(tOffset);//based on raaspi classname structure
      if(this.instance.getA0xxukrdbvxxxxxxxxxxtablename()==null || this.instance.getA0xxukrdbvxxxxxxxxxxtablename().isEmpty()){
       this.instance.setA0xxukrdbvxxxxxxxxxxtablename(tableName);
      } 
      String qualifier=yxxxch5a1xhhxxhxxxxxtruefalseList.getSelectedQualifier();
      if(this.instance.getA1xxuxxxbvxxxxxxxxxxqualifier()==null || this.instance.getA1xxuxxxbvxxxxxxxxxxqualifier().isEmpty()){
       this.instance.setA1xxuxxxbvxxxxxxxxxxqualifier(qualifier);
      } 
    </#if>
    <#if menuAttributesp2 == "23" || menuAttributesp2=="24" || menuAttributesp2=="26"   || menuAttributesp2=="25" || menuAttributesp2=="33" || menuAttributesp2=="34" || menuAttributesp2=="3A"   || menuAttributesp2=="37" || menuAttributesp2=="44" > 
      if (this.instance.get${itemEntityName?cap_first}() == null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
       bcontinue = false;
      }
    </#if>
    <#if menuAttributesp2 == "1S" >
      if (this.instance.get${locationEntityName?cap_first}() == null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("location")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
       bcontinue = false;
      }
    </#if>
    <#if menuAttributesp2 == "59" >
       //if rate1f incentive can be null if comes from create site
       if(this.instance.getH3xxuxxrbvxxxxxxxxxxincentive() !=null 
          && this.instance.getH3xxuxxrbvxxxxxxxxxxincentive().contains("#random")){
        int howMany;
        String prefix;
        String[] str = this.instance.getH3xxuxxrbvxxxxxxxxxxincentive().split("#random");
        prefix=str[0];
        howMany=this.instance.getB3xxzxxrbvxxxxxxxxxxstep();
        if(howMany >= 5000){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Continuing")+" "+bundle.getString("with")+" "+bundle.getString("maximum")+", "+bundle.getString("allowed")+" "+ bundle.getString("5000")+", "+bundle.getString("repeat")+" "+bundle.getString("as")+" "+bundle.getString("needed"),""));
          howMany=4999;
        }
        generateCoupons(howMany, prefix);// will be a loop but returns here if end or too many errors
        return ""; 
       }

                //stepname in rate table can be upto 32 ch, can come here from jsf or from copydefaults.        
                if (this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("DC")
                     || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("DC%")
                      || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")
                       || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("PC")){
                 if (this.getValueOverRide() != null && !this.getValueOverRide().isEmpty() ){
                   if(this.getValueOverRide().length() >32){
                    this.instance.setB2xxuxxrbv51xxxxxxxxstepname(this.getValueOverRide().substring(0,32));
                   }else{
                    this.instance.setB2xxuxxrbv51xxxxxxxxstepname(this.getValueOverRide());//takes care of Coupon ANY or Product
                   }
                   //DC and PC stepName will have SIDs
                   if (this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")
                       || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("PC")){
                    try{//coupons type SC means stepName is item sid ie numeric
                     int sid=Integer.parseInt(this.getValueOverRide());
                    }catch (Exception exc){
                     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_ERROR,bundle.getString("Type")+ " "+"SC/PC"+", "+bundle.getString("stepName")+" "+this.getValueOverRide()+" "+bundle.getString("not")+" "+bundle.getString("numeric"),""));
                     return null;
                    }
                   }
                 }
                }     
  
    </#if>

      


       // we need to check whether validation has set bcontinue has false, if so clear it and return
       if (!bcontinue){
             bcontinue=true;
             return null;
       }


     <#-- At the highest level two kinds of keys can be used ie optional surrogate hidden key and non optional and non hidden 
          natural or business keys.
          Surrogate keys are AutoGen keys and if used then it will be used as the primary key for persistence.
          Natural keys will still get generated and will populate the natural key field.
          If surrogate key is not used then the natural key will be used as the primary key.
          Recommendation is to use surrogate and natural keys.
     -->  

       if(!owner2Code.equals("SYSTEM") && !owner2Code.equals(masterSiteCode) && !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals(owner2Code)){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("If")+" "+bundle.getString("non")+" "+bundle.getString("owned")+" "+bundle.getString("record")+", "+bundle.getString("edit")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));
         log.severe("persist_error_owner "+owner2Code +" / "+ getInstance().getZzxxu2oxxhxxxxxxxxxxowner2());
         bcontinue=false;
         return null;
       }
       //instance already exists with site owner2, so change it now
       if(owner2Code.equals("SYSTEM")){
        this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
       }
      <#if menuAttributesp2 == "54" >
       //auto generate memberId here, add 2 new fields to group prefix default first 2 ch of group id and seq# default val 0 
       // use next key logic of order etc and build next id here
       //String nextId="me001";
       //this.instance.setB1xxukgmbvxxxxxxxxxxmemberid(nextId);
       if(this.instance.get${membersgroupEntityName?cap_first}().getB2xxfxxxbvxxxxxxxxxxmode()){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("restricted")+" "+ bundle.getString("or")+" "+bundle.getString("closed"),""));
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("add")+" "+bundle.getString("not")+" "+bundle.getString("allowed"),""));


       }
      </#if>

      <#assign keyfromclient = "N"> 
      <#assign keyAutoGen = "N"> 
      <#assign subKeys ="">
      <#assign plus="">
      <#assign ic=0>
      slobkeyhash=" ";

      <#foreach property in pojo.allPropertiesIterator>
      <#if (property.name?length > eL)>
       <#assign propnmcapfirst = property.name?cap_first>
       <#if (property.name?length > 6)>
        <#-- process foreign fields below to set ftl flags so that validators will be generated as needed,ie for composite keys    
        <#include "../src/entityHomePersistForignFields.java" >
         -->
        <#if c2h.isManyToOne(property) >
          <#assign column = property.columnIterator.next()>
          <#--
           /*
           Column 
           ${column}
           property name
           ${property.name}
          */
          -->
          <#--we need to use hardcoded tables below for foreign fields onle because entity properties for them do not hold the flags   --> 
          <#-- for now we have entries below for transaction components because those are the ones which need validation logic --> 
          <#-- the above may not be true see jay5 comment -->
          <#assign columnName ="  ">
          <#assign lastOfKeys= property.columnIterator.next().name>
          <#assign columnNameKey= componentName+lastOfKeys?lower_case?cap_first+"One">
          // commponentName -> ${componentName}
          // columnnamekey -> ${columnNameKey}
         <#if columnNameKey == "${vshipmenEntityName}MatcodeOne">
          <#assign columnName ="d1xxuxxrbvxxxxxxxxxxmatcode">
         <#elseif columnNameKey == "${vshipmenEntityName}VendorOne">
          <#assign columnName ="d2xxudvvbvxxxxxxxxxxvendor">
         <#elseif columnNameKey == "${vshipmenEntityName}ShipcodeOne">
          <#assign columnName ="d5xxuhbrbvxxxxxxxxxxshiptocode">
         <#elseif columnNameKey == "${vshipmenEntityName}MailtocodeOne">
          <#assign columnName ="d4xxugbrbvxxxxxxxxxxmailtocode">
         </#if> 
         <#if columnNameKey == "${venquoteEntityName}MatcodeOne">
          <#assign columnName ="b3xxudiravxxxxxxxxxxmatcode">
         <#elseif columnNameKey == "${venquoteEntityName}VendorOne">
          <#assign columnName ="b2xxudvvlxxxxxxxxxxxvendor">
         <#elseif columnNameKey == "${venquoteEntityName}DepcodeOne">
          <#assign columnName ="yaxxuxeybvxxxxxxxxxxdepcode">
         <#elseif columnNameKey == "${venquoteEntityName}DivcodeOne">
          <#assign columnName ="y9xxuxoxbvxxxxxxxxxxdivcode">
         <#elseif columnNameKey == "${venquoteEntityName}XshipcodeOne">
          <#assign columnName ="y8xxuxxrblxxxxxxxxxxxshipcode">
         <#elseif columnNameKey == "trexuq33vinvoiceAgentOne">
          <#assign columnName ="c1xxudttblxxxxxxxxxxxagent">
         </#if> 
         <#if columnNameKey == "${cuquoteEntityName}MatcodeOne">
          <#assign columnName ="b4xxudiravxxxxxxxxxxmatcode">
         <#elseif columnNameKey == "${cuquoteEntityName}CustomerOne">
         <#assign columnName ="b3xxudrravnxxxxxxxxxcustomer">
         <#elseif columnNameKey == "${cuquoteEntityName}ContactcOne">
         <#assign columnName ="y2xxugrcavxxxxxxxxxxcontactc">
         <#elseif columnNameKey == "${cuquoteEntityName}DepcodeOne">
         <#assign columnName ="ydxxuxeybvxxxxxxxxxxdepcode">
         <#elseif columnNameKey == "${cuquoteEntityName}DivcodeOne">
         <#assign columnName ="ycxxuxoybvxxxxxxxxxxdivcode">
         <#elseif columnNameKey == "${cuquoteEntityName}XshipcodeOne">
          <#assign columnName ="y8xxuxxrblxxxxxxxxxxxshipcode">
         <#elseif columnNameKey == "${cuquoteEntityName}AgentOne">
         <#assign columnName ="c1xxugttavxxxxxxxxxxagent">
         </#if> 
        <#if columnNameKey == "${cuinvoiceEntityName}MatcodeOne">
        <#assign columnName ="b2xxudiravxxxxxxxxxxmatcode">
        <#elseif columnNameKey == "${cuinvoiceEntityName}CustomerOne">
        <#assign columnName ="b1xxudrravnxxxxxxxxxcustomer">
        <#elseif columnNameKey == "${cuinvoiceEntityName}ContactcOne">
        <#assign columnName ="y1xxudrcavxxxxxxxxxxcontactc">
        <#elseif columnNameKey == "${cuinvoiceEntityName}DepcodeOne">
        <#assign columnName ="y9xxuxexbvxxxxxxxxxxdepcode">
        <#elseif columnNameKey == "${cuinvoiceEntityName}DivcodeOne">
        <#assign columnName ="y8xxuxoxbvxxxxxxxxxxdivcode">
        <#elseif columnNameKey == "${cuinvoiceEntityName}XshipcodeOne">
        <#assign columnName ="y5xxuxxrblxxxxxxxxxxxshipcode">
        <#elseif columnNameKey == "${cuinvoiceEntityName}AgentOne">
        <#assign columnName ="d1xxugttavxxxxxxxxxxagent">
        </#if> 
     <#if columnNameKey == "${cpaymentEntityName}MatcodeOne">
       <#assign columnName ="b4xxudiravxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${cpaymentEntityName}CustomerOne">
       <#assign columnName ="b1xxudrravnxxxxxxxxxcustomer">
     <#elseif columnNameKey == "${cpaymentEntityName}ContactcOne">
       <#assign columnName ="y2xxugrcavxxxxxxxxxxcontactc">
     <#elseif columnNameKey == "${cpaymentEntityName}DepcodeOne">
       <#assign columnName ="ydxxuxeybvxxxxxxxxxxdepcode">
     <#elseif columnNameKey == "${cpaymentEntityName}DivcodeOne">
       <#assign columnName ="ycxxuxoybvxxxxxxxxxxdivcode">
     <#elseif columnNameKey == "${cpaymentEntityName}XshipcodeOne">
       <#assign columnName ="y8xxuxxrblxxxxxxxxxxxshipcode">
     <#elseif columnNameKey == "${cpaymentEntityName}AgentOne">
       <#assign columnName ="c1xxugttavxxxxxxxxxxagent">
     </#if> 
     <#if columnNameKey == "${cuordersEntityName}MatcodeOne">
       <#assign columnName ="b4xxudiravxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${cuordersEntityName}CustomerOne">
       <#assign columnName ="b1xxudrravnxxxxxxxxxcustomer">
     <#elseif columnNameKey == "${cuordersEntityName}ContactcOne">
       <#assign columnName ="y2xxugrcavxxxxxxxxxxcontactc">
     <#elseif columnNameKey == "${cuordersEntityName}DepcodeOne">
       <#assign columnName ="ydxxuxeybvxxxxxxxxxxdepcode">
     <#elseif columnNameKey == "${cuordersEntityName}DivcodeOne">
       <#assign columnName ="ycxxuxoybvxxxxxxxxxxdivcode">
     <#elseif columnNameKey == "${cuordersEntityName}XshipcodeOne">
       <#assign columnName ="y8xxuxxrblxxxxxxxxxxxshipcode">
     <#elseif columnNameKey == "${cuordersEntityName}AgentOne">
       <#assign columnName ="c1xxugttavxxxxxxxxxxagent">
     </#if> 
     <#if columnNameKey == "${shipmentEntityName}MatcodeOne">
       <#assign columnName ="b1xxudiravxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${shipmentEntityName}CustomerOne">
       <#assign columnName ="d1xxudrrbvxxxxxxxxxxcustomer">
     <#elseif columnNameKey == "${shipmentEntityName}ShipcodeOne">
       <#assign columnName ="d3xxuhbrbvxxxxxxxxxxshiptocode">
     <#elseif columnNameKey == "${shipmentEntityName}MailtocodeOne">
       <#assign columnName ="d4xxugbrbvxxxxxxxxxxmailtocode">
     </#if> 
     <#if (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
     <#if columnNameKey == "${jobassignmentEntityName}MatcodeOne">
       <#assign columnName ="b5xxuxxrbvxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${jobassignmentEntityName}CustomerOne">
       <#assign columnName ="baxxuxxrbvxxxxxxxxxxcustomer">
     <#elseif columnNameKey == "${jobassignmentEntityName}VendorOne">
       <#assign columnName ="b8xxudvvbvxxxxxxxxxxvendor">
     <#elseif columnNameKey == "${jobassignmentEntityName}PrevjobOne">
       <#assign columnName ="z1xxuxxrbvxxxxxxxxxxprevjob">
     <#elseif columnNameKey == "${jobassignmentEntityName}NextjobOne">
       <#assign columnName ="z2xxuxxrbvxxxxxxxxxxnextjob">
     <#elseif columnNameKey == "${jobassignmentEntityName}Jobno">
       <#assign columnName ="b4xxuxxrbvxxxxxxxxxxjobno">
     <#elseif columnNameKey == "${jobassignmentEntityName}Machine">
       <#assign columnName ="a0xxukxxbvxxxxxxxxxxmachine">
     </#if> 
     </#if>
     <#if columnNameKey == "${vendordersEntityName}MatcodeOne">
       <#assign columnName ="b3xxudiravxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${vendordersEntityName}VendorOne">
       <#assign columnName ="b2xxudvvlxxxxxxxxxxxvendor">
     <#elseif columnNameKey == "${vendordersEntityName}ContactcOne">
       <#assign columnName ="y2xxugrcavxxxxxxxxxxcontactc">
     <#elseif columnNameKey == "${vendordersEntityName}DepcodeOne">
       <#assign columnName ="ydxxuxeybvxxxxxxxxxxdepcode">
     <#elseif columnNameKey == "${vendordersEntityName}DivcodeOne">
       <#assign columnName ="ycxxuxoybvxxxxxxxxxxdivcode">
     <#elseif columnNameKey == "${vendordersEntityName}XshipcodeOne">
       <#assign columnName ="y8xxuxxrblxxxxxxxxxxxshipcode">
     <#elseif columnNameKey == "${vendordersEntityName}AgentOne">
       <#assign columnName ="c1xxugttavxxxxxxxxxxagent">
     </#if> 
     <#if columnNameKey == "${vinvoiceEntityName}MatcodeOne">
       <#assign columnName ="b2xxudiravxxxxxxxxxxmatcodematcode">
     <#elseif columnNameKey == "${vinvoiceEntityName}VendorOne">
       <#assign columnName ="b1xxudvvlxxxxxxxxxxxvendor">
     <#elseif columnNameKey == "${vinvoiceEntityName}DepcodeOne">
       <#assign columnName ="ybxxuxeybvxxxxxxxxxxdepcode">
     <#elseif columnNameKey == "${vinvoiceEntityName}DivcodeOne">
       <#assign columnName ="yaxxuxoybvxxxxxxxxxxdivcode">
     <#elseif columnNameKey == "${vinvoiceEntityName}XshipcodeOne">
       <#assign columnName ="y8xxuxxrblxxxxxxxxxxxshipcode">
     <#elseif columnNameKey == "${vinvoiceEntityName}AgentOne">
       <#assign columnName ="d1xxudttavxxxxxxxxxxagent">
     </#if> 
     <#if columnNameKey == "${vpaymentEntityName}MatcodeOne">
       <#assign columnName ="b2xxudiravxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${vpaymentEntityName}VendorOne">
       <#assign columnName ="b1xxudvvbvxxxxxxxxxxvendor">
     </#if> 
     <#if columnNameKey == "${emplordersEntityName}MatcodeOne">
       <#assign columnName ="b3xxudiravxxxxxxxxxxmatcode">
     <#elseif columnNameKey == "${emplordersEntityName}EmployeeOne">
       <#assign columnName ="b2xxudttlxxxxxxxxxxxemployee">
     </#if> 
          <#if (columnName?length > pL) >
           <#if columnName?lower_case?substring(pfS,pfS2)=="d" || columnName?lower_case?substring(pfS,pfS2)=="g" || columnName?lower_case?substring(4,5)=="h" >
            <#if columnName?lower_case?substring(6,7)=="b"  > 
             <#if columnName?lower_case?substring(pfS,pfS2)!="i" >
                  <#assign centityFieldName= addressEntityAddressFieldName>
                  <#assign addressFiled=columnName?lower_case>
             </#if>
            </#if> 
            <#if columnName?lower_case?substring(6,7)=="t"> 
                  <#assign employeeFiled=columnName?lower_case>
            </#if>
           </#if> 
          <#else>
           // ${columnName}+" jay 1"
          </#if>
        </#if>
        <#-- end of foreign fields to set validation flags  now process key fields  ie keyed or built from sub keys or seq number from client table -->   
        <#-- jay does it assume for an entity only one keyed in and/or only one subkey field    -->   
        <#-- Note that composite key properties appear as property name id here and component iterator will show them individually   -->   
        <#if (property.name?length > pL) >
         <#-- Hibernate will put identity if key generator class is used (removed because it comes as undefined) otherwise need to use "o" flag -->
         <#if property.name?substring(pkS,pkE)=="o"  >
          <#assign keyAutoGen="Y">
          <#assign autoGenKeyName="this.instance.get${property.name?cap_first}()">
         </#if>
         <#-- if autogen detected then primary key will be SID, however natural key values detected by checking flags like
              k,s,n etc are still used and the detected column values are saved but not as primary key. Those values are
              shown to user not the autogen surrogate key. If no autogen then natural key is also primary key.
              below are non foreign fields ${property.name} being checked for natural key autogen is ${keyAutoGen}
         --> 
         <#if property.name?substring(pkS,pkE)=="k" >
          <#assign column = property.columnIterator.next()>
          <#assign keyMaxLength=column.length>
          <#assign keyedKeyName="this.instance.get${property.name?cap_first}()">
          <#assign keyNaturalToSetString = "this.instance.set${property.name?cap_first}" >
          <#assign entityFunction = property.name?substring(6,8)>
          <#assign componentKeyClass="Y">
          /* If AutoGen is yes all natural keys will get caught here.
           The following comment if not autogen
           non composite key , composite keys will not get detected here because the property name will show as id 
           The logic further below this will probe  the pojo.identifier to dig out the column values for flag k,n 
           ${keyedKeyName}  ${keyNaturalToSetString}
           ${column}
           ${columnName?length}
          */
           <#if  keyAutoGen="Y" && property.value.type.name?contains("tring")>
            if (${keyedKeyName}!=null){
             // check and disallow or warn if duplicate keyed key via validate, no need to check here again
             // except special cases where validation was not done like csv data
             ${keyNaturalToSetString}(${keyedKeyName});
            }
           </#if>
         </#if>
         <#if property.name?substring(pfS,pfE)=="zs">
          if (!restEntity && !cartPoPicked){
           <#-- do not assign value to subKeys, zs means descript field remove below logic after all descripts are defined by 7-8 pos -->
           if (this.instance.get${propnmcapfirst}() != null ){
            if (this.instance.get${propnmcapfirst}().length() > 2){
             subKey=subKey+this.instance.get${propnmcapfirst}().substring(0,2);
            }else{
             subKey=subKey+this.instance.get${propnmcapfirst}();
            }
           } 
          }
          if(subKey == null){// glentry
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("subkey")+" "+bundle.getString("like")+" "+bundle.getString("description")+" "+bundle.getString("missing"),""));
               bcontinue=false;
               return null;
          }
         </#if>
         <#if menuAttributesp2 == "1L" && property.name?contains("language")>
          // name (keyField) need to include locale if user entered, SYSTEM entries are generated by program
          // and can have m,men,mfr etc or menUS,menCa etc or menUSfb(mlangCountryVariant) where fb is prodcode IssuesBug
          // User entries are en,bn etc are made into menUSo2,mbnUSo2(o2 owner2,oc owner+country,ov o+variant) etc ie mlangCountryVariant 
          if (!this.instance.getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")){
           if(this.instance.getA1xxuxxxbvxxxxxxxxxxlanguage() == null || this.instance.getA1xxuxxxbvxxxxxxxxxxlanguage().isEmpty()){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,"${resource_bundleEntityName?cap_first}"+" "+this.instance.getA0xxukrdbvxxxxxxxxxxname()+" "+bundle.getString("language") +" "+bundle.getString("not") +" "+bundle.getString("selected"),""));
            return null;
           }
          }// no dupl check done if SYSTEM
          if (!this.instance.getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")){
           this.instance.setA1xxuxxxbvxxxxxxxxxxcountry("US");//allways US 
           this.instance.setA1xxuxxxbvxxxxxxxxxxvariant("o2");//o2 owner2, oc owner2+country,ov owner2+country
           subKey="m"+this.instance.getA1xxuxxxbvxxxxxxxxxxlanguage().trim()+this.instance.getA1xxuxxxbvxxxxxxxxxxcountry().trim()+"o2";
           this.instance.setA0xxukrdbvxxxxxxxxxxname(subKey);
           if (subKey.length() > 7 && keyExists(subKey.toLowerCase())){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("key") +" "+subKey+" "+bundle.getString("exists") ,""));
            return null;
           }
          }
         </#if>
         <#if menuAttributesp2 == "9A" && machineEntityName?? && property.name?contains("${machineEntityName}")  >
           <#assign subKeys="subKeys">
           if (this.instance.get${propnmcapfirst}() == null && this.instance.get${customerEntityName?cap_first}() ==null){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("machine") +" "+bundle.getString("and") +" "+bundle.getString("messages")+" "+bundle.getString("both")+" "+bundle.getString("are")+" "+bundle.getString("empty"),""));
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("select")+" "+bundle.getString("one")+" "+bundle.getString("or")+" "+bundle.getString("both"),""));
            return null;
           }
           if (this.instance.get${propnmcapfirst}() != null ){
            int subLM=this.instance.get${propnmcapfirst}().getA0xxukmxbvxxxxxxxxxxmachinecode().length();
            subLM=subLM>10?10:subLM;
            subKeyFirst=this.instance.get${propnmcapfirst}().getA0xxukmxbvxxxxxxxxxxmachinecode().substring(0,subLM);
            if(this.instance.get${customerEntityName?cap_first}() !=null){
             subKey=this.instance.get${customerEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxcustomer();
            }
            subKey=subKeyFirst.trim()+subKeyFirst;
           } 
         </#if>
         <#if (property.value.type.name?contains("tring") | property.value.type.name?contains("time") )  && (property.name?substring(pkS,pkE)=="s" | (property.name?substring(pkS,pkE)=="2" && property.name?substring(pfS,pfE)!="2o" ) | property.name?substring(pkS,pkE)=="3"
            | property.name?substring(pkS,pkE)=="4" | property.name?substring(pkS,pkE)=="5") >
          <#assign subKeys="subKeys">
        if (!restEntity && !cartPoPicked){
          <#if property.value.type.name == "timestamp" >//java date , if zeroes at end the length can vary  yyyy-mm-dd hh:mm:ss.fffffffff
           subKey=subKey+this.instance.get${propnmcapfirst}().toString().substring(0,10)+this.instance.get${propnmcapfirst}().toString().substring(this.instance.get${propnmcapfirst}().toString().length()-6);
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
          <#else>
           if (this.instance.get${propnmcapfirst}() != null && this.instance.get${propnmcapfirst}() !=null && this.instance.get${propnmcapfirst}().length() !=0){
           <#if property.name?substring(pkS,pkE)=="3"> 
            subKey=this.instance.get${propnmcapfirst}()+subKey;
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           <#else>
            subKey=subKey+this.instance.get${propnmcapfirst}();
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           </#if>
           }else{
            // subkey 3 is reserved as company name and if present should be first, need a random filler otherwise same subkey will be generated
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           } 
          </#if>
        }
         </#if>
         <#if property.name?substring(pkS,pkE)=="n">
            <#assign keyfromclient = "Y"> 
            //cartpersist reuses an existing active PO
            if(!restEntity && !cartPoPicked && !skipValidation){
              key=getNextp();
              if (key.length() !=0 ){   
               <#assign keysparam="key">
              //   if ( pojo.identifierProperty.name?contains("id"))> id means component ???
               <#if ( pojo.identifierProperty.name=="id" )>
                <#if (pojo.isComponent(pojo.identifierProperty) ) >
                 <#foreach property in pojo.identifierProperty.value.propertyIterator>
                 <#if (property.name?length > eL)>
                  <#assign getter = pojo.getGetterSignature(property)>
                   // set idName composite key values 
                  <#if !( getter?substring(3)?contains("owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc"))>
                   get${idName}().set${getter?substring(3)}(${keysparam});
                  </#if>  
                  <#assign keysparam= "this.getLastItemLine()">
                 </#if>
                 </#foreach>
                 //set it in the entity instance because the value was not keyed in ie not set yet and will not show on the screen either
                 // And composite key values like already set in idName like XxxxxId
                 this.instance.set${util.upper(pojo.identifierProperty.name)}(get${idName}());
                <#else>
                 //jay check value ${pojo.identifierProperty.name}
                </#if>
               <#else>
                <#if keyAutoGen == "Y" >
                 this.instance.set${util.upper(property.name)}(${keysparam});
                <#else>
                 this.instance.set${util.upper(pojo.identifierProperty.name)}(${keysparam});
                </#if>
                 <#assign keysparam= "this.getLastItemLine()">
               </#if>
              }
            <#if menuAttributesp2 == "24">
            }else{
            // existing  co , these variables are used in showrunt
            qtyTotal=this.instance.getB5xxztqrlxxxxxxxxxxxqtytotal();///remove
            totalbaseamt=this.instance.getZ7xxzbtxavxxxxxxxxxxbaseamountt();
            totalmis=this.instance.getZ7xxzmtxavxxxxxxxxxxmiscchrgt();
            totaldel=this.instance.getZ6xxzltxavxxxxxxxxxxdelivchrgt();
            totaltax1=this.instance.getZ8xxzxz1avxxxxxxxxxxtax1amtt();
            totaltax2=this.instance.getZ9xxzxz2avxxxxxxxxxxtax2amtt();
            totaltax3=this.instance.getZaxxzxz3avxxxxxxxxxxtax3amtt();
            amountTotal=this.instance.getZ1xxztprlxxxxxxxxxxxamounttotal();
            totalqty=this.instance.getB5xxztqrlxxxxxxxxxxxqtytotal();
            </#if>
            }
            <#assign entityFunction = property.name?substring(6,8)>
            // entity function ${property.name?substring(6,8)}
         </#if>
        <#else>
         // ${property.name}+" proprty name less than 12 means error check model"
        </#if>
       </#if>
      </#if>
      </#foreach>


<#-- end of for each ,we have taken care of forign fields first, then key fields both natural and surrogate.
        The following applies in case of autoGen is No ie only natural keys and key is natural but composite 
        ie which appeared as IDs in the earlier loop   -->
       <#if keyAutoGen != "Y" && pojo.isComponent(pojo.identifierProperty)>
        <#foreach property in pojo.identifierProperty.value.propertyIterator>
        <#if (property.name?length > eL)>
         <#assign ids = pojo.getGetterSignature(property)?substring(3)>
          /*
          Id means composite key
          Id Property ${ids}   
          */
         <#assign column = property.columnIterator.next()>
          /*
           composite key
           ${column}
           ${columnName?length}
          */
         <#if (columnName?length > pL) >
          <#if columnName?substring(pkS,pkE)=="k" >
           <#assign keyMaxLength=columnName?length>
          </#if>
         <#else>
          // ${columnName}+" jay 3"
         </#if>
         <#if (ids?length < 8) >
          <#assign ids="kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk">
         </#if>
         <#if ids?substring(pkS,pkE)=="k">
                  <#assign componentKeyClass="Y">
                  <#assign centityKeyFieldName=ids>
         </#if>
         <#if ids?substring(pkS,pkE)=="n">
            <#assign keyfromclient = "Y"> 
            //if(!picked){
               key=getNextp();
            //}
              if (key.length() !=0 ){   
               <#assign keysparam="key">
               <#if ( pojo.identifierProperty.name?contains("id"))>
                <#-- should not come here ${pojo.identifierProperty} -->
                //set it in the entity instance because the value was not keyed in ie not set yet and will not show on the screen either
                // And composite key values like already set in idName like XxxxxId
                this.instance.set${util.upper(pojo.identifierProperty.name)}(get${idName}());
               <#else>
                 this.instance.set${util.upper(pojo.identifierProperty.name)}(${keysparam});
                 <#assign keysparam= "this.getLastItemLine()">
               </#if>
                //picked=true;
                if (this.getLastItemLine() > 0)
                  multipicked=true;
              }
            <#assign entityFunction = ids?substring(6,8)>
         </#if>
        </#if>
        </#foreach>
        if (!bcontinue) {
         return null;
        }
       </#if>
       <#-- end of composite keys   and take care of run totals for master/detail type transactions -->
       <#if entityFunction == "ci" || entityFunction == "cp" || entityFunction == "vi" || entityFunction == "vp"
          || entityFunction == "va" || menuAttributesp2 == "65">
        // establish currentbusperiod better not to use session attribute as it relies on cookie
        currentPeriod=Integer.parseInt(getAcperiodFieldValue("cp"));
        calendar.setTime(getAcperiodDateFieldValue("cbd"));
        currbusdate=calendar.getTime();
       </#if>
       <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || ids?substring(6,8)=="cp" || entityFunction == "vq" 
        || entityFunction == "vo" || entityFunction == "vi" || ids?substring(6,8)=="vp" || entityFunction == "sh" || entityFunction == "sv"
        || entityFunction == "eo"  >
         if (bcontinue){
           // create detail line items and recalculate totals and persist details and later persist parent order/invoice etc
	      showtemprunt();// calls createcdetails and showrunt (updates parent instance values) 
             // make them same to be consistent with extended_persist and avoid using wrong tempqty later
             <#if entityFunction == "cq">

              ${itemEntityName}.setTempQuantity(xoxxuq2c4xwwqqhxxxxxcuqdetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             <#elseif entityFunction == "co">
              ${itemEntityName}.setTempQuantity(xoxxuq2b4xwwqqhxxxxxcuodetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             <#elseif entityFunction == "ci">
              ${itemEntityName}.setTempQuantity(xoxxuq2a4xwwqqhxxxxxcuidetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             <#elseif entityFunction == "sh">
              ${itemEntityName}.setTempQuantity(xoxxuq295xwwqqhxxxxxshipmentdetails.getZ3xxeqxxbvnxxxxxxxxxqtyshipped());
             <#elseif entityFunction == "vq">
              ${itemEntityName}.setTempQuantity(xoxxuq3e4xwwqqhxxxxxvendqdetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             <#elseif entityFunction == "vo">
              ${itemEntityName}.setTempQuantity(xoxxuq3d4xwwqqhxxxxxvendodetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             <#elseif entityFunction == "vi">
              ${itemEntityName}.setTempQuantity(xoxxuq3c4xwwqqhxxxxxvendidetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             <#elseif entityFunction == "sv">
              ${itemEntityName}.setTempQuantity(xoxxuq399xvwwqqhxxxxvshipmendetails.getZ3xxeqxxbvnxxxxxxxxxqtyshipped());
             <#elseif entityFunction == "eo">
              ${itemEntityName}.setTempQuantity(xoxxuq454xwwqqhxxxxxemplodetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
             </#if>
         }
          <#if entityFunction == "co" >
            if(${itemEntityName}.get${itemUnitField?cap_first}() !=null){
             if((${itemEntityName}.get${itemUnitField?cap_first}().equals("PI")|| ${itemEntityName}.get${itemUnitField?cap_first}().equals("DM")) && !${cuodetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyordrd().toPlainString().matches("\\d+(\\.0*)?")){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("quantity")+ " "+bundle.getString("has")+" "+bundle.getString("fraction"),""));
               return null;
             }
            }
          </#if>
         if (bcontinue){
	      persistrunt();
      	      //prevamountTotal = amountTotal;
              // affects employee (Agent) record,so added .clearInstance in persistrunt() to avoid detached employee
         }
       </#if>
       <#if (userHomeCandidate = "Y")>   
        if (inSignupAndCreateUser){
          if(signupas.equals("C")){
	   createCustomerAddressSignup();
           this.instance.set${customerEntityName?cap_first}(${customerEntityName});
          }else{
           if(signupas.equals("V")){
	    createVendorAddressSignup();
            this.instance.set${vendorEntityName?cap_first}(${vendorEntityName});
           }else{
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,signupas+" "+bundle.getString("signup")+" "+bundle.getString("as")+" "+bundle.getString("invalid"),""));
                  bcontinue=false;
		  return null;
           }
          } 
        }
        else{
         if (inRegistrationAndCreateUser){
           // add logic to create (copy default) acperiod, divisiondates tables etc which are part of initializeall
           //copy default account,acintegr,acperiod,divisondates,options,artha?,control? values under owner=sss owner2=owner2 
           if(subKey.equals("admin")){
            //copyDefaultsToOwner2(); causing connection timeout, so moved to emailreadytoactivate method which is later called by SqlAdmin
            // be careful about owner2code since doregister invoked persist(owner2code) not persist()
           } 
	      createClientRegister();
         }
         else{
          if (inDemoSignupAndCreateUser){
           createEmployeeCustomerAddressSignup("demo","","","",owner2Code,"");
           //requestType (Demo,eedeem,coupon,..) ,company name/ fname,lname, email, owner2,userId  
           //fname,lname,userId gets ignored only scrambled email is used in its place

           this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
           this.instance.set${customerEntityName?cap_first}(${customerEntityName});
          }
          else{          
          /** setup encrypted password when creating new user similar to reset password or register or signup   not sure where used
          */    
            if (inCreateUser){   
             setupPassword();
            }
          } 
         }
        }
<#if menuAttributesp2 == "56"  > 
                if (this.instance.get${customerEntityName?cap_first}() == null && this.instance.get${vendorEntityName?cap_first}() == null 
                     && this.instance.get${employeeEntityName?cap_first}() == null){
                      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                       FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+bundle.getString("or")+" "+bundle.getString("vendor")+" "+bundle.getString("or")+" "+bundle.getString("employee")+" "+bundle.getString("link")+" "+bundle.getString("missing")+" "+bundle.getString("for")+" "+bundle.getString("user")+" "+this.instance.getA0xxukuxbvxxxxxxxxxxid(),""));

                      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                       FacesMessage.SEVERITY_WARN,bundle.getString("can")+" "+bundle.getString("be")+" "+bundle.getString("added")+" "+bundle.getString("later")+" "+bundle.getString("by")+" "+bundle.getString("edit"),""));
			 bcontinue = true;
                      //return null;
                }
</#if>
       </#if>
       <#if entityFunction =="ci">
         if (bcontinue){
          cuinvoicePosting();
         }
       </#if>  
       <#if entityFunction =="vi"  > 
         if (bcontinue){
		vendorInvoicePosting();
         }
       </#if>
       <#if entityFunction =="cp" > 
         if (bcontinue){
           if(this.instance.getB6xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB6xxuxxrbv10xxxxxxxxpaytype().length() == 0){
            this.instance.setB6xxuxxrbv10xxxxxxxxpaytype("Cash");
           }
	    customerPaymentPosting();
         }
       </#if>
       <#if entityFunction =="vp" > 
         if (bcontinue){
           if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().length() == 0){
            this.instance.setB5xxuxxrbv10xxxxxxxxpaytype("Cash");
           }
           // runtotal sets detailbaseamt
           postingAmount=detailbaseamt;
	   vendorPaymentPosting();
         }
       </#if>
       <#if entityFunction =="co" || entityFunction =="ci" || entityFunction =="cp" || entityFunction =="sh" > 
         if (bcontinue){
         <#if entityFunction =="sh">
            updateitemeCustomer();//uncommented  qty was not changing otherwise
         <#else>
            updateitemeCustomer();
         </#if>
         }
       </#if>
       <#if entityFunction =="vo" || entityFunction =="vp" || entityFunction =="sv"> 
         if (bcontinue){
            updateitemeVendor();
         }
       </#if>
       <#if entityFunction =="va"  > 
         // comes here for both manual chq entry and generatechq persist call  venarthaEdit comes here
         // generateChq goes to genersteChq first which puts "all" to targetVendor, loops through and for each comes here
         // extra logic which existed below moved to separate manual chq create method 
       </#if>
       <#if entityFunction =="cq" || entityFunction =="co" || entityFunction =="ci" || entityFunction =="sh" || entityFunction =="cp"  > 
         if (bcontinue){
            updateCustomer();
         }
       </#if>
       <#if entityFunction =="ci"  > 
         if (bcontinue){
            updateCustomerOrder();
         }
       </#if>
       <#if entityFunction =="vq"  || entityFunction =="vo" || entityFunction =="vi" || entityFunction =="vp"     > 
         if (bcontinue){
            updateVendor();
         }
       </#if>
       <#if entityFunction =="sh" || entityFunction =="pi" > 
         if (bcontinue){
            updateShipmentOrPickUp();
         }
       </#if>

       <#if entityFunction =="sv" > 
         if (bcontinue){
            updateShipmentOrPickUp();
         }
       </#if>
<#-- end of take care of run totals for master/detail type transactions and start misc functions before persist -->
       <#if scheduleStartDateField !="" >
                 validateAndSetseDates();
                 <#if menuAttributesp2 != "9A" && menuAttributesp2 != "9B" && (activityEntityName?? && activityEntityName?length > eL)>
                 validateTodoActivityNotnull();
                 </#if>
                 if (!bcontinue){
                  return null;
                 }
       </#if>
       if (!bcontinue){
             return null;
       }
<#--   now set the key(s) and call superdotpersist. Key via k,n,s in 2nd post or for child tables via cd or vd in 2nd & 3rd -->
// if calling method has try then calling method try will catch the exception
       try {
        // ${pojo.identifierProperty.name}
        // last in the loop centityName -> ${centityName}  centityKeyFieldName -> ${centityKeyFieldName} entityKeyFieldName -> ${entityKeyFieldName}
        if (!restEntity && !cartPoPicked){
<#-- if key from client ie no direct keyed in or from sub keys-->
             <#if ( keyfromclient == "Y" )>
              //key=key.toUpperCase();
             </#if>
<#-- if from sub keys ie no direct keyed in data  -->
             // subkey so far is companyName (!empty)+lastName||ss+firstname||ss+ss(companyName empty)+phone #s ||ss etc ss means 
             // time stamp seconds
             // first 16 characters need to be broken into parts if name involved otherwise long last name makes it hard to distinguish key values
             // because ss is used same lastname and firstname will still produce different 16 characters if any phone #s etc are missing 
             <#if subKeys != "">
              int subL=subKey.length();
              if (subL !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subL > 25){
                <#if (menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" ) >
                 <#if (menuAttributesp2 ="20")>
                  if (this.instance.getC2xxu2fnbvixxxxxxxxxfirstname() != null && this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().length() !=0){
                   String fName=this.instance.getC2xxu2fnbvixxxxxxxxxfirstname();
                   if (fName.length() > 4){
                    fName=fName.substring(0,4);
                   }
                   subKey=subKey.substring(0,7)+fName+subKey.substring(subL-5,subL)+subKeyh;
                  }else{
                    subKey=subKey.substring(0,7)+subKey.substring(subL-5,subL)+subKey.substring(subL-5,subL)+subKeyh;
                  } 
                 </#if>
                 <#if (menuAttributesp2 ="30")>
                  if (this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname() != null && this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().length() !=0){
                   String fName=this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname();
                   if (fName.length() > 4){
                    fName=fName.substring(0,4);
                   }
                   subKey=subKey.substring(0,7)+fName+subKey.substring(subL-5,subL)+subKeyh;
                  }else{
                    subKey=subKey.substring(0,7)+subKey.substring(subL-5,subL)+subKey.substring(subL-5,subL)+subKeyh;
                  } 
                 </#if>
                 <#if (menuAttributesp2 ="40")>
                  if (this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname() != null && this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().length() !=0){
                   String fName=this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname();
                   if (fName.length() > 4){
                    fName=fName.substring(0,4);
                   }
                   subKey=subKey.substring(0,7)+fName+subKey.substring(subL-5,subL)+subKeyh;
                  }else{
                    subKey=subKey.substring(0,7)+subKey.substring(subL-5,subL)+subKey.substring(subL-5,subL)+subKeyh;
                  } 
                 </#if>
                <#else>
                 subKey=subKey.substring(0,11)+subKey.substring(subL-5,subL)+subKeyh;
                </#if>
               }
               else {
                subKey=subKey+subKeyh;
               }
              }
              // below logic checks keyed key by checking whether it has any value, look into better logic by checking if no s or n
              if (${keyedKeyName}!=null && !${keyedKeyName}.isEmpty()){
                ${keyNaturalToSetString}(${keyedKeyName});
               key = ${keyedKeyName}; 
              }else{
               <#if ( (menuAttributesp2 != "63")  )>
               key=subKey; 
               </#if>
              }
              //key=key.toUpperCase();
              if (key.length() > ${keyMaxLength}){
                key=key.substring(0,${keyMaxLength});
              }
              if (key.length()==0 || key.trim().length()==0){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("${componentName?substring(eL)?cap_first}")+" "+ bundle.getString("empty"),""));
               return null;
              }
              // set it in Home first to allow setting in the instance (instance is private and accessed via Home) 
              //set it because the value was not keyed in ie not set yet and does not show on the screen
              <#if pojo.identifierProperty.name?contains("id") && pojo.isComponent(pojo.identifierProperty)>
               // set idName composite key values
               <#foreach property in pojo.identifierProperty.value.propertyIterator>
               <#if (property.name?length > eL)>
                <#assign getter = pojo.getGetterSignature(property)>
                   // getterjay ${getter} identifier proprty 2 ${property} getter ${getter}
                <#if keyAutoGen !="Y"  && getter?substring(8,9)=="k"> 
 			  get${idName}().set${getter?substring(3)}(key);
                </#if>
                  //match the column name against foreign field and then get the forign key's entity and set it to centity
                  //match the id's column name against foreign table name and then get the forign key's entity and set it to centity
                  // if no match then composite key is not a foreign field
                  <#assign foreignfound="N">
                  <#assign centityName="Not Found">
                  <#foreach property in pojo.allPropertiesIterator>
                  <#if (property.name?length > eL)>
                   // property name ${property.name}
                   <#if property.name == vendorEntityName>
                    <#assign centityName=property.name>
                    <#assign centityFieldName=vendorVendor>
                    <#assign foreignfound="Y">
                   <#elseif property.name == customerEntityName>
                    <#assign centityName=property.name>
                    <#assign centityFieldName=customerEntityCustomerFieldName>
                    <#assign foreignfound="Y">
                   <#elseif property.name == employeeEntityName>
                    <#assign centityName=property.name>
                    <#assign centityFieldName=employeeEntityEmployeeFieldName>
                    <#assign foreignfound="Y">
                   <#elseif property.name == divisionEntityName>
                    <#assign centityName=property.name>
                    <#assign centityFieldName=divisionDivcode>
                    <#assign foreignfound="Y">
                   <#elseif property.name == companyEntityName>
                    <#assign centityName=property.name>
                    <#assign centityFieldName=companyCompanycode>
                    <#assign foreignfound="Y">
                   <#elseif property.name == departmentEntityName>
                    <#assign centityName=property.name>
                    <#assign centityFieldName=departmentDepcode>
                    <#assign foreignfound="Y">
                   </#if>
                  </#if>
                  </#foreach>  
                  <#if foreignfound =="Y">  
                   //jay for sub key add extra logic to check if foreign field is composite key, if so adjust the following line to include id
                   // hardcode now add logic to check foreign entity itsel is composite or not
                   // Autogen is false here
                   <#if centityName == gentableEntityName>
 			    get${idName}().set${getter?substring(3)}(${centityName}Home.get${centityName?cap_first}Id().get${centityFieldName?cap_first}());
                   <#else> 
 			    get${idName}().set${getter?substring(3)}(${centityName}Home.get${centityName?cap_first}Id().get${centityFieldName?cap_first}());
                   </#if>
                  <#else>
                   // check if foreign but came here 
 			   get${idName}().set${getter?substring(3)}(get${idName}().get${getter?substring(3)}());
                  </#if>
               </#if>
               </#foreach>
              <#else>
                 <#if keyAutoGen ="Y" > 
                  //sub key 
                  ${keyNaturalToSetString}(key);
                 <#else>
                  this.instance.set${util.upper(pojo.identifierProperty.name)}(key);
                 </#if>
              </#if>
             </#if>
             // entityKeyFieldName -> ${entityKeyFieldName}
             // key set but return if the natural key already exists except for clob and blob where duplicates ok because
             // of non key seq is used to differentiate. So check if same seq
             // also apply initCap inside keyExists since we have access to the instance there
             <#if clobDataClass =="" && blobDataClass =="" && entityKeyFieldName !="">
             //if (key.length() > 7 && keyExists(key.substring(0,8))){
             if (key.length() > 7 && keyExists(key)){
              if(importChosen){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_WARN,bundle.getString("dropped")+" "+bundle.getString("duplicate")+" "+bundle.getString("key")+" "+key,""));
               return null;
              }else{
               if(customIdentity.getClientMsgLevel().contains("D")){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_WARN,bundle.getString("possible")+" "+bundle.getString("duplicate")+" "+bundle.getString("key")+" "+key,""));
                //return null;
               } 
              }
             }
             </#if>
<#--        not subkey and not direct keyed in key or not non keyed in composite keys     -->
             //jay subkey ${subKeys} kfrcl ${keyfromclient} kk ${keyedKeyName} 
             <#if (subKeys == "" && keyfromclient != "Y") >
              // Set keyed in value(s) to uppercase
               
              <#if pojo.identifierProperty.name?contains("id") && pojo.isComponent(pojo.identifierProperty)>
               // set idName composite key values
               <#foreach property in pojo.identifierProperty.value.propertyIterator>
               <#if (property.name?length > eL)>
                   // identifier proprty 2 ${property}
                <#assign getter = pojo.getGetterSignature(property)>
                <#if (getter?length < 12) >
                  ${getter}
                  <#assign getter="jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj" >
                </#if>
                <#if getter?substring(8,9)=="k"> 
                 key = ${keyedKeyName}; 
                 //key=key.toUpperCase();
                 if (key.length()==0 || key.trim().length()==0){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,"${componentName?substring(eL)?cap_first}"+" "+ bundle.getString("info.valueBlank"),""));
                   return null;
                 }
                 <#if keyAutoGen ="Y"  && getter?substring(8,9)=="k"> 
                  ${keyNaturalToSetString}(key);                
                 <#else>
 			  get${idName}().set${getter?substring(3)}(key);
                 </#if>
                <#else>
                  //match the id's column name against foreign table name and then get the forign key's entity and set it to centity
                  // if no match then composite key is not a foreign field
                  <#assign foreignfound="N">
                  <#assign centityName="Not Found">
                   <#foreach property in pojo.allPropertiesIterator>
                    <#if (property.name?length > 6) && (foreignfound=="N") >
                     <#if c2h.isManyToOne(property) >
                      <#assign column = property.columnIterator.next()>
                      // col nm ${column.name} versus ${getter?substring(15)}
                      <#if column.name?lower_case == getter?substring(15)>
                       <#assign centityName =property.name>
                       // centity ${centityName}
                      </#if>
                     </#if> 
                    </#if> 
                   </#foreach>
                   <#if centityName == vendorEntityName>
                    <#assign centityFieldName=vendorVendor>
                    <#assign foreignfound="Y">
                   <#elseif centityName == customerEntityName>
                    <#assign centityFieldName=customerEntityCustomerFieldName>
                    <#assign foreignfound="Y">
                   <#elseif centityName == employeeEntityName>
                    <#assign centityFieldName=employeeEntityEmployeeFieldName>
                    <#assign foreignfound="Y">
                   <#elseif centityName == divisionEntityName>
                    <#assign centityFieldName=divisionDivcode>
                    <#assign foreignfound="Y">
                   <#elseif centityName == companyEntityName>
                    <#assign centityFieldName=companyCompanycode>
                    <#assign foreignfound="Y">
                   <#elseif centityName == departmentEntityName>
                    <#assign centityFieldName=departmentDepcode>
                    <#assign foreignfound="Y">
                   <#elseif centityName == gentableEntityName>
                    <#assign centityFieldName=gentabletablename>
                    <#assign foreignfound="Y">
                   <#elseif centityName == itemEntityName>
                    <#assign centityFieldName=itemEntityItemFieldName>
                    <#assign foreignfound="Y">
                   <#elseif centityName == membersgroupEntityName>
                    <#assign centityFieldName=membersgroupGroupid>
                    <#assign foreignfound="Y">
                   <#elseif centityName == itemBomEntityName>
                    <#assign centityFieldName=itemBomEntityBomcodeFieldName>
                    <#assign foreignfound="Y">
                   </#if>
                   // foreignfound ${foreignfound}
                  <#if foreignfound =="Y">  
                   //jay non sub ie keyed etc add extra logic to check if foreign field is composite key, if so adjust the following line to include id
                   // hardcode now add logic to check foreign entity itsel is composite or not
                   <#if centityName == gentableEntityName>
                    get${idName}().set${getter?substring(3)}(${centityName}Home.get${centityName?cap_first}Id().get${centityFieldName?cap_first}());
                   <#else> 
                    get${idName}().set${getter?substring(3)}(${centityName}Home.get${centityName?cap_first}Id().get${centityFieldName?cap_first}());
                   </#if>
                  <#else>
                   //non sub but not foreign found
                   get${idName}().set${getter?substring(3)}(get${idName}().get${getter?substring(3)}());
                  </#if>
                </#if>
               </#if>
               </#foreach>
                this.instance.set${util.upper(pojo.identifierProperty.name)}(get${idName}());
              <#else>
                <#-- non composite key check keyed in or not -->
                <#if pojo.identifierProperty.name?substring(pkS,pkE)=="k"> 
                 key = ${keyedKeyName}; 
                 //key=key.toUpperCase();
                 if (key.length()==0 || key.trim().length()==0){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_WARN,"${componentName?substring(eL)?cap_first}"+" "+ bundle.getString("info.valueBlank"),""));
                   return null;
                 }
                <#else>
                 <#-- no natural key generate flag used, so use the field value as is assuming system filled up  -->
                </#if>
                <#if keyAutoGen != "Y" >
                 this.instance.set${util.upper(pojo.identifierProperty.name)}(key);
                </#if>
              </#if>
             </#if>
          } 
           <#if documentField != "" && clobDataClass =="" && blobDataClass=="">
               //Below is common to all type of keys coming from above ie Item etc except clob/blob
                byte[] bytes = null;
                Iterator<File> itr =null;
                String clobImgUrl=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance().getB1xxuzaxbvxxxxxxxxxxdata();
                if(clobImgUrl == null || clobImgUrl.isEmpty() || (clobImgUrl.indexOf("table=") == -1)){
                 clobImgUrl="";
                } 
                if(!clobImgUrl.isEmpty()){
                 // clobimg url as byte data. Need to extract and convert back img url to String as needed
                 dataIsBlob = true;// feature is used for blob only
                 bytes = null;
                 String imgUrl=null;
                 try{
                  yxxxuq1n1xwwqqqxxxxxblobdataHome.clearInstance();
                  yxxxuq1n1xwwqqqxxxxxblobdata = yxxxuq1n1xwwqqqxxxxxblobdataHome.getInstance();
                  yxxxuq1n1xwwqqqxxxxxblobdataHome.setInstance(yxxxuq1n1xwwqqqxxxxxblobdata);
                  yxxxuq1n1xwwqqqxxxxxblobdata.setA4xxexxxbvxxxxxxxxxxtype("url");
                  bytes=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance().getB1xxuzaxbvxxxxxxxxxxdata().getBytes("UTF-8");
                  yxxxuq1n1xwwqqqxxxxxblobdata.setB1xxuzbxbvxxxxxxxxxxdata(bytes);//other fields like key follow same as file load logic
                  imgUrl=new String(bytes, StandardCharsets.UTF_8);
                 } catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("clobImgUrl")+" "+ bundle.getString("error")+" "+e.getMessage(),""));
                   return null;
                 }
                }else{
                  //iterate through files to check each file mime. Needed to set master entity field docmnt for its superdotPersist()
                 // another iterator further down and needed for related clob/blob entity persist
                <#if menuAttributesp2 == "1N">
                  itr = this.getFiles().iterator();
                <#else>
                  itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                 while (itr.hasNext()) {
                  slobkeyhash=Integer.toString((${lobkey}).hashCode());
                  file = itr.next();
                      if (file.getMime().equals("text/plain") || file.getMime().equals("text/xml")
                       || file.getMime().equals("text/html")) {
                        dataIsClob = true;
                      } else {
                       dataIsBlob = true;
                      }
                 }
                 if (dataIsClob && dataIsBlob) {
                  this.instance.set${documentField?cap_first}("D"+slobkeyhash);
                 }
                 else {
                  if (dataIsBlob) {
                   this.instance.set${documentField?cap_first}("B"+slobkeyhash);
                  }
                  else {
                   this.instance.set${documentField?cap_first}("C"+slobkeyhash);
                  } 
                 }
                } 
           </#if>
           <#if menuAttributesp2 == "1A" >
              // price 0 may be valid for some use cases, so just give warning msg rather than asking for confirmation
              //give msg if type is missing from drop list (if not in options )  
              if(this.instance.getC6xxusxrbv16xxxxxxxxtype() == null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("type")+" "+bundle.getString("missing")+", "+bundle.getString("select")+" "+bundle.getString("from")+" "+bundle.getString("Type")+" "+bundle.getString("List")+" "+bundle.getString("or")+" "+bundle.getString("add")+" "+bundle.getString("in")+" "+bundle.getString("option16")+" "+bundle.getString("via")+" "+bundle.getString("setup"),""));
               return null;
              }
              if (this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("IX") && this.instance.getB8fbzpxxbvxxxxxxxxxxselprice().compareTo(new BigDecimal("0.0")) == 0) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_WARN,bundle.getString("price")+" "+bundle.getString("0.0")+", "+bundle.getString("can")+" "+bundle.getString("use")+" "+bundle.getString("update")+" "+bundle.getString("to")+" "+bundle.getString("change"),""));
              }
              // replace below with jsf validation later
        
              if (this.instance.getC6xxusxrbv16xxxxxxxxtype() == null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_WARN,bundle.getString("select")+" "+bundle.getString("type"),""));
                return null;            
              }// allow bi-D
              if(this.instance.get${itemEntityName?cap_first}() != null && this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("PI-L1") &&  (!this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-D") && !this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("BI-D")  && !this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-L*") )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Cannot")+" "+bundle.getString("add")+" "+bundle.getString("type")+" "+this.instance.getC6xxusxrbv16xxxxxxxxtype()+", "+bundle.getString("mismatch")+" "+bundle.getString("with")+" "+bundle.getString("parent")+"/"+bundle.getString("Category")+" "+bundle.getString("type"),""));
                return null;            
              }
              //si-d detail si-s drop ship si-c cod si-p pickup si-dg digital goods  added (q)
              if(this.instance.getFpxxfq1a5xwwqqhxxxxxitem() != null && this.instance.getFpxxfq1a5xwwqqhxxxxxitem().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1") && !(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")
                 || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-S") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-C")
                  || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-P") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-DG")
                   || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L*")|| this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L3")
                    || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-(q)") ) ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Cannot")+" "+bundle.getString("add")+" "+bundle.getString("type")+", "+bundle.getString("use")+" "+bundle.getString("shopping")+" "+bundle.getString("subcategory")+" "+bundle.getString("or")+" "+bundle.getString("detail")+" "+bundle.getString("type"),""));
                return null;            
              }
              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-D") && (this.instance.get${itemEntityName?cap_first}() == null || (this.instance.get${itemEntityName?cap_first}() != null && !(this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("PI-L1") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype() .equals("PI-L*"))) )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Cannot")+" "+bundle.getString("add")+" "+bundle.getString("type")+" "+this.instance.getC6xxusxrbv16xxxxxxxxtype()+" "+bundle.getString("without")+" "+bundle.getString("any")+" "+bundle.getString("value")+" "+bundle.getString("selected")+" "+bundle.getString("as")+" "+bundle.getString("parent")+"/"+bundle.getString("Category"),""));
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Create")+" "+bundle.getString("another")+" "+bundle.getString("item")+" "+bundle.getString("with")+" "+bundle.getString("type")+" "+bundle.getString("Category")+" "+bundle.getString("first")+" "+bundle.getString("or")+" "+bundle.getString("select")+" "+bundle.getString("any")+" "+bundle.getString("existing")+" "+bundle.getString("one")+" "+bundle.getString("as")+" "+bundle.getString("Parent"),""));
                return null;            
              }
              if((this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")||this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-S") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-C") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-P") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-DG")) && (this.instance.get${itemEntityName?cap_first}() == null || (this.instance.get${itemEntityName?cap_first}() != null && !(this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype() .equals("SI-L*") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype() .equals("SI-L3"))) )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Cannot")+" "+bundle.getString("add")+" "+bundle.getString("type")+" "+this.instance.getC6xxusxrbv16xxxxxxxxtype()+" "+bundle.getString("without")+" "+bundle.getString("any")+" "+bundle.getString("value")+" "+bundle.getString("selected")+" "+bundle.getString("as")+" "+bundle.getString("parent")+"/"+bundle.getString("Category"),""));
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("Create")+" "+bundle.getString("another")+" "+bundle.getString("item")+" "+bundle.getString("with")+" "+bundle.getString("type")+" "+bundle.getString("Category")+" "+bundle.getString("first")+" "+bundle.getString("or")+" "+bundle.getString("select")+" "+bundle.getString("any")+" "+bundle.getString("existing")+" "+bundle.getString("one")+" "+bundle.getString("as")+" "+bundle.getString("Parent"),""));
                return null;            
              }
              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-L1") && this.instance.get${itemEntityName?cap_first}() != null ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("parent")+" "+bundle.getString("value")+" "+bundle.getString("corrected")+" "+bundle.getString("to")+" "+bundle.getString("null"),""));
                this.instance.set${itemEntityName?cap_first}(null);
              }
              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1") && this.instance.get${itemEntityName?cap_first}() != null ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("parent")+" "+bundle.getString("value")+" "+bundle.getString("corrected")+" "+bundle.getString("to")+" "+bundle.getString("null"),""));
                this.instance.set${itemEntityName?cap_first}(null);
              }
              String checkedDataAndSize="";
              // checkedData is a temporary field and may be null based on the logic flow, multiple checkbox values return
              // string array and each value separated by comma 
              // item shipcode contains one or more checkedData+checkedSize 2ch each pair and can have space if no restriction for checkeddata
              // shipcode is used for shipping cost 
              //25chrs shipcode holds 4ch allowed shipping like standard/express/pickup + 1ch size small/medium/Large/xlarge/ylarge  1unit+4ch weight g,kg 88.9
              //1ch unit+4ch length width height 
              // check logic checkedData meant for shipping option like express, see recalship for details
              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-C")
                 ||  this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-S") ||  this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("IX") && this.instance.getCheckedData() != null  ){
               String checkedDataS="";//will allow selectmanycheckbox upto 4
               // checkedData is a temporary field and may be null based on the logic flow 
               // checkedData is initialized as {" "} so not null
                if(this.instance != null && this.instance.getCheckedData() != null){
                 int jj=this.instance.getCheckedData().length;
                 for(int i=0; i<4; i=i+1){
                  if(jj>i && this.instance.getCheckedData()[i]!=null){
                   checkedDataS=checkedDataS+this.instance.getCheckedData()[i]; 
                  }else{
                   checkedDataS=checkedDataS+"X"; 
                  } 
                 }
                }
                checkedDataAndSize=checkedDataAndSize+checkedDataS+this.instance.getCheckedSize()+this.unitLength
                 +this.valueLength+this.unitWidth+this.valueWidth+this.unitHeight+this.valueHeight+this.unitWeight+this.valueWeight;//free ship will put X, otherwise S/M/L
                if(checkedDataAndSize.length() > 25){
                 checkedDataAndSize=checkedDataAndSize.substring(0,25);
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_WARN,bundle.getString("shipcode")+" "+bundle.getString("truncated")+" "+bundle.getString("to")+" "+checkedDataAndSize+", "+bundle.getString("maximum")+" "+bundle.getString("size")+" "+bundle.getString("25"),""));
                }
                this.instance.setC3fbuxscbvxxxxxxxxxxshipcode(checkedDataAndSize);
              }else{
               this.instance.setC3fbuxscbvxxxxxxxxxxshipcode("XXXXX");// recalship checks this and skips ship cost
              }
              String itemVariants="";
              String itemVariantsL="";
              String spaces8="        "; 
              String spaces9="         "; 
              if(itemVariantSize !=null && itemVariantSize.length()<8){
               itemVariantSize=itemVariantSize+spaces8.substring(0,8-itemVariantSize.length());
              }
              if(itemVariantColour !=null && itemVariantColour.length()<8){
               itemVariantColour=itemVariantColour+spaces8.substring(0,8-itemVariantColour.length());
              }
              if(itemVariantMaterial !=null && itemVariantMaterial.length()<8){
               itemVariantMaterial=itemVariantMaterial+spaces8.substring(0,8-itemVariantMaterial.length());
              }
              if(itemVariantBrand !=null && itemVariantBrand.length()<8){
               itemVariantBrand=itemVariantBrand+spaces8.substring(0,8-itemVariantBrand.length());
              }
              //cannot add unicode "\u2714", it increases string length
              itemVariants=itemVariantSize+itemVariantColour+itemVariantMaterial+itemVariantBrand;
              if (! (this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1() !=null 
                && this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1().length() >4
                 && (this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1().substring(0,5).equals("trial")
                  || this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1().substring(0,5).equals("recur"))) ){
               this.instance.setG2xxuxn2bvxxxxxxxxxxsubcodesn2(itemVariants);
              }// skip if trial/recurring

              if(itemVariantSizeL !=null && itemVariantSizeL.length()<9){
               itemVariantSizeL=itemVariantSizeL+spaces9.substring(0,9-itemVariantSizeL.length());
              }
              if(itemVariantColourL !=null && itemVariantColourL.length()<9){
               itemVariantColourL=itemVariantColourL+spaces9.substring(0,9-itemVariantColourL.length());
              }
              if(itemVariantMaterialL !=null && itemVariantMaterialL.length()<9){
               itemVariantMaterialL=itemVariantMaterialL+spaces9.substring(0,9-itemVariantMaterialL.length());
              }
              if(itemVariantBrandL !=null && itemVariantBrandL.length()<9){
               itemVariantBrandL=itemVariantBrandL+spaces9.substring(0,9-itemVariantBrandL.length());
              }
              //cannot add unicode "\u2714", it increases string length
              itemVariantsL=itemVariantSizeL+itemVariantColourL+itemVariantMaterialL+itemVariantBrandL;
              itemVariantsL=itemVariantsL.trim();      
              if(itemVariantsL.length()>35){
               itemVariantsL=itemVariantsL.substring(0,35);
              }
              this.instance.setG2xxuxn3bvxxxxxxxxxxsubcodesn3(itemVariantsL);
              // take care of replyToMatCodeSid for replies only
              if (replyToMatSidS != null){
               Integer replyToMatSid = Integer.parseInt(replyToMatSidS);
               ${componentName}li = (${componentName?cap_first}) entityManager.createQuery("select cc from ${componentName?cap_first} cc where cc.a0xxuobxbxxxxxxxxxxxsid = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                .setParameter("keyOfEntity", replyToMatSid).setParameter("owner2", owner2Code).getSingleResult();
               if (${componentName}li != null) {
                this.instance.set${componentName?cap_first}(${componentName}li);
               }
              }
              // default SKU, if empty
              if(productCode.equals("e")){
               String sku="";
               if(this.instance.getF1xxuxxrbvxxxxxxxxxxaliascode() ==null || this.instance.getF1xxuxxrbvxxxxxxxxxxaliascode().isEmpty()) {
                if(this.instance.getFpxxfq1a5xwwqqhxxxxxitem() !=null){
                 if(this.instance.getFpxxfq1a5xwwqqhxxxxxitem().getA0xxukixbxxxxxxxxxxxmatcode() !=null){
                  sku=this.instance.getFpxxfq1a5xwwqqhxxxxxitem().getA0xxukixbxxxxxxxxxxxmatcode().substring(0,2);
                 }else{
                  sku="XX";
                 }
                }else{
                  sku="XX";
                }
                sku=sku+"-"+this.instance.getA0xxukixbxxxxxxxxxxxmatcode().substring(0,2);
                if(itemVariantSize==null || itemVariantSize.trim().isEmpty()){
                 itemVariantSize="S";
                }
                if(itemVariantColour==null || itemVariantColour.trim().isEmpty()){
                 itemVariantColour="C";
                }
                if(itemVariantMaterial==null || itemVariantMaterial.trim().isEmpty()){
                 itemVariantMaterial="M";
                }
                if(itemVariantBrand==null || itemVariantBrand.trim().isEmpty()){
                 itemVariantBrand="B";
                }
                sku=sku+"-"+itemVariantSize+"-"+itemVariantColour+"-"+itemVariantMaterial+"-"+itemVariantBrand;
                if(sku.length()>25){
                 sku=sku.substring(0,25); 
                }
                this.instance.setF1xxuxxrbvxxxxxxxxxxaliascode(sku);
                this.instance.setG2xxuxn3bvxxxxxxxxxxsubcodesn3("size    :colour  :material:brand  :");//default value
               }
              }
           </#if> 
            <#if clobDataClass =="" && blobDataClass =="">

             <#if ( keyfromclient == "Y" || keyedKeyName !=""  )>
               <#if menuAttributesp2 == "1A" >
                 //if SI-L* or SI-L3 or SI-D put keyvalue because there will be a default image in blob
                 if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L*") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L3") || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")){ 
                  slobkeyhash=Integer.toString((${lobkey}).hashCode());
                  this.instance.set${documentField?cap_first}("B"+slobkeyhash);
                 }
               </#if>
               // give persist message w key and time, but bypass non key ones like details
               if(!cartPoPicked && !skipValidation){
                try{
                    superdotpersist();//master entity
                } catch ( Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,key+" "+"save"+" "+" "+bundle.getString("failed")+",  "+e.getMessage(),""));
                   return null;
                }
                if(key != null && !key.trim().isEmpty()){
                 if(importdone <6){ 
                  if (customIdentity.isDebug()){
                   timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+key+") "+"at"+" "+timeStamp,""));
                  }
                 }
                 if(importdone == 7){ 
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("continuing")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("import"),""));
                 }
                }
               }else{
                superdotupdate();
                if (customIdentity.isDebug()){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+key+") "+"at"+" "+timeStamp,""));
                }
               }
               picked=true;
              if (this.getLastItemLine() > 0)
                  multipicked=true;
             <#else>
               //nonKeyed entity
               <#if menuAttributesp2 == "1R" >
               if(this.instance.getYxxxuq1l1xwwqqhxxxxxresource_bundle().getA1xxuxxxbvxxxxxxxxxxcountry() !=null && !this.instance.getYxxxuq1l1xwwqqhxxxxxresource_bundle().getA1xxuxxxbvxxxxxxxxxxcountry().isEmpty()){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_WARN,bundle.getString("this")+" "+bundle.getString("message")+" "+bundle.getString("will")+" "+bundle.getString("affect")+" "+bundle.getString("locale")+" "+this.instance.getYxxxuq1l1xwwqqhxxxxxresource_bundle().getA1xxuxxxbvxxxxxxxxxxcountry()+" "+bundle.getString("only"),""));
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_WARN,bundle.getString("keep")+" "+bundle.getString("language")+" "+this.instance.getYxxxuq1l1xwwqqhxxxxxresource_bundle().getA1xxuxxxbvxxxxxxxxxxlanguage()+" "+bundle.getString("and")+" "+bundle.getString("drop")+" "+bundle.getString("specific")+" "+bundle.getString("country")+" "+bundle.getString("to")+" "+bundle.getString("affect")+" "+bundle.getString("all")+" "+bundle.getString("countries"),""));
               }else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("this")+" "+bundle.getString("message")+" "+bundle.getString("for")+" "+bundle.getString("language")+" "+this.instance.getYxxxuq1l1xwwqqhxxxxxresource_bundle().getA1xxuxxxbvxxxxxxxxxxlanguage()+" "+bundle.getString("will")+" "+bundle.getString("be")+" "+bundle.getString("used")+" "+bundle.getString("for")+" "+bundle.getString("all")+" "+bundle.getString("countries"),""));
               }
               </#if>
                // superdotpersist() for current/master entity , clob/blob etc further down
                  superdotpersist();
               /* suppress too much info 
               // give persist message w key and time
                if(customIdentity.isDebug() && key != null && !key.trim().isEmpty()){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("as")+" "+key+" "+"at"+" "+timeStamp,""));
                }
               */
              <#if bt != "">
               if (bcontinue){
                recalculateTotalThis();
                if (jxxxuq53dxwwqqhxxxxxrollupgroup != null){
                 recalculateTotalDeep();
                 jxxxuq53dxwwqqhxxxxxrollupgroupHome.superdotpersist();
                }
               }
              </#if>
             </#if>
            </#if>
            <#-- persist for current entity except for clob and blob as current entity was done above, 
            now document related entity persists into clob/blob as well as details related entity persists into invoicedetails etc are done below -->
           <#if documentField != "" >
                int i=0;
            <#if clobDataClass =="" && blobDataClass=="">
                // master entity iterator to call clob/blob persist but they have their own iterator for uploaded files, so call once only
                //previous uploaded files iterator was used to set the value of the master entity xxxdocmnt field
                Integer attachment=0;
                int callClobPersist=0;
                int callBlobPersist=0;
                <#if menuAttributesp2 == "1N">
                itr = this.getFiles().iterator();
                <#else>
                itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                while (itr.hasNext()) {
                 file = itr.next();
                 dataIsClob=false;
                 dataIsBlob=false;
                 temps=file.getMime();
			 if ("image/bmp".equals(temps)) {
				lobDataType = "bmp";
			 } else if ("image/jpeg".equals(temps)) {
				lobDataType = "jpg";
			 } else if ("image/gif".equals(temps)) {
				lobDataType = "gif";
			 } else if ("image/png".equals(temps)) {
				lobDataType = "png";
			 } else if ("text/xml".equals(temps)) {
				lobDataType = "xml";
			 } else if ("application/msword".equals(temps)) {
				lobDataType = "doc";
			 } else if ("text/plain".equals(temps)) {
				lobDataType = "txt";
			  } else if ("text/html".equals(temps)) {
				lobDataType = "html";
			 } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			 } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			 } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			 } else {
				lobDataType = "unkn";
			 }
		      if (lobDataType.equals("txt") || lobDataType.equals("xml") 
                                            || lobDataType.equals("html")) {
                                            dataIsClob = true;
		      } else {
                                            dataIsBlob = true;
		      }
                       //jay itr loop here based on number of file objects in files arraylist ie arraylist size
                       attachment++;
                  if (dataIsClob) {
                   ${clobdataEntityName}Home.clearInstance();
                   ${clobdataEntityName} = ${clobdataEntityName}Home.getInstance();
                   ${clobdataEntityName}Home.setInstance(${clobdataEntityName});
                   ${clobdataEntityName}.setA0xxukcdlvxxxxxxxxxxfromtable("${entityName?upper_case}");
                   ${clobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                   ${clobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier(Integer.toString(1));
                   ${clobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(attachment-1);
                   ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(file.getName());
                   String uploadedText=file.getText();
                   String jay=uploadedText;
                   try{
                    uploadedText=this.sanitize(uploadedText);
                    uploadedText=jay;
                   } catch ( Exception e){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
                    return null;
                   }
                   ${clobdataEntityName}.set${clobdataentityDataFieldName?cap_first}(uploadedText);
                   ${clobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                   ${clobdataEntityName}Home.persist();//the clob instance gets passed but gets overwritten again depending on origin
                   callClobPersist=1;
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+file.getLength()+" "+bundle.getString("characters")+" "+bundle.getString("text")+" "+bundle.getString("data"),""));
                 }
                 else {
                  if(clobImgUrl.isEmpty()){
                   ${blobdataEntityName}Home.clearInstance();
                   ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                  ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                   ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());
                   ${blobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(file.getName());
                   if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && !${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                    ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                   }
                   if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && ${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                    //replace beyond asis with new type if any
                    ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                   }
                   if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                    ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                   }
                  }
                  ${blobdataEntityName}.setA0xxukbdlvxxxxxxxxxxfromtable("${entityName?upper_case}");
                  ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                  ${blobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier(Integer.toString(1));
                  ${blobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(attachment-1);
                  ${blobdataEntityName}Home.persist();//the blob instance gets passed but gets overwritten again depending on origin
                  callBlobPersist=1;
                  i++; 
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+file.getLength()+" "+bundle.getString("bytes")+" "+bundle.getString("binary")+" "+bundle.getString("data"),""));
                 } 
                }//itr while 
                <#if menuAttributesp2 == "1A" >
                // image iterator done, if item is shopping type and no image put a default image to be replaced
                // added checking if image already added, othewise duplicates was getting created
                  if (attachment ==0 && (this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D") || this.instance.getC6xxusxrbv16xxxxxxxxtype().startsWith("SI-L") ) && !(this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().equals("D") && this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().equals("B"))  ){
                   slobkeyhash=Integer.toString((this.instance.getA0xxukixbxxxxxxxxxxxmatcode()).hashCode());
                   ${blobdataEntityName}Home.clearInstance();
                   ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                   ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                   ${blobdataEntityName}.setA0xxukbdlvxxxxxxxxxxfromtable("${entityName?upper_case}");
                   ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                   ${blobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier(Integer.toString(1));
                   ${blobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(0);
                   ByteArrayOutputStream baos = new ByteArrayOutputStream();
                   byte[] imageInByte=null;
                   BufferedImage originalImage=null;
                   try{
                    if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")){
                     originalImage = ImageIO.read(new java.io.File(context.getRealPath("/img/default.png")));
                    }else{
                     originalImage = ImageIO.read(new java.io.File(context.getRealPath("/img/directory.png")));
                    }
                    ImageIO.write( originalImage, "png", baos );
                    baos.flush();
                    imageInByte = baos.toByteArray();
                    baos.close();
                   } catch (Exception e) {
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,"Picture xform failed: " + e.getMessage(),""));
                   }
                   try{
                   ${blobdataEntityName}.setB1xxuzbxbvxxxxxxxxxxdata(imageInByte);
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("png");
                   //${blobdataEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
                   //${blobdataEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(jowner);
                   ${blobdataEntityName}Home.persist();
                   } catch (Exception e) {
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,"Picture save failed: " + e.getMessage(),""));
                   }
                  }
                </#if>
                // to prevent same image being saved again in same request
                clearUploadData(); 
            <#elseif clobDataClass != ""> 
                // clobdata entity iterator used by clobdata persist or when called by master entity persist
                 String sFromTable="";
                 String sQualifier="";
                 String sFromKey="";
                 String sKey="";
                 Integer sSequence=0;
                //below for clobdata persist but can originate from other entities like Item
                String clobImgUrl="";// support to be added for clob/blob
                 // changed logic since now we can key in -M ib clob/blob edit plus dupl should allways be checked 
                 // using query to check db not getInstance  removed hardcoded clobdata as key  
                 //duplicateClobBlobExists method should be used here
                 List<${clobdataEntityName?cap_first}> results = entityManager
		 .createQuery(
                                       "select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:clobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier and (cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2S) order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                                        .setParameter("clobdatafromtable", this.instance.getA0xxukcdlvxxxxxxxxxxfromtable()).setParameter("clobdatafromkey", this.instance.getA1xxuxxxbv49xxxxxxxxfromkey())
                            .setParameter("owner2", owner2Code).setParameter("owner2S", "SYSTEM").setParameter("clobdatasequence",this.instance.getA3xxexnsbvxxxxxxxxxxsequence())
                             .setParameter("clobdataqualifier",this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()).getResultList();
                 //results.isEmpty() becomes size() 
                  if(!results.isEmpty()){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("saved")+", "+bundle.getString("data")+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" "+this.instance.getZzxxu2oxxhxxxxxxxxxxowner2(),""));
                   bcontinue=false;
                   return null;
                 }  
                 if(!this.instance.getA0xxukcdlvxxxxxxxxxxfromtable().equals("clobdata")){
                  superdotpersist();// sanitize was already used in master to allow uploaded sanitized text re xss attack
                  return "persisted";               
                 }
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                Integer attachment=0;
                if (itr.hasNext() ){
                 while (itr.hasNext()) {
                  file = itr.next();
                  dataIsClob=false;
                  dataIsBlob=false;
                  temps=file.getMime();
			  if ("image/bmp".equals(temps)) {
				lobDataType = "bmp";
			  } else if ("image/jpeg".equals(temps)) {
				lobDataType = "jpg";
			  } else if ("image/gif".equals(temps)) {
				lobDataType = "gif";
			  } else if ("image/png".equals(temps)) {
				lobDataType = "png";
			  } else if ("text/xml".equals(temps)) {
				lobDataType = "xml";
			  } else if ("application/msword".equals(temps)) {
				lobDataType = "doc";
			  } else if ("text/plain".equals(temps)) {
				lobDataType = "txt";
			  } else if ("text/html".equals(temps)) {
				lobDataType = "html";
			  } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			  } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			  } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			  } else {
				lobDataType = "unkn";
			  }
                  attachment++;
                  if(attachment > 0){
                   if(!this.instance.getA0xxukcdlvxxxxxxxxxxfromtable().equals("clobdata")){
                    sFromTable=this.instance.getA0xxukcdlvxxxxxxxxxxfromtable();
                    sFromKey=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();
                    sQualifier=this.instance.getA2xxuxxxbv50xxxxxxxxqualifier();
                    sSequence=this.instance.getA3xxexnsbvxxxxxxxxxxsequence();
                   }else{
                    sKey=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();// entered value
                   }
                   // if instance was originally created from Item etc then fromkey/table , qualifier,type  will be lost but need to be restored 
                   this.clearInstance();// support multiple uploads and save, avoid lazy loading
                   this.instance = this.getInstance();
                   this.setInstance(this.instance);
                   if(!sFromTable.equals("")){
                    this.instance.setA0xxukcdlvxxxxxxxxxxfromtable(sFromTable);
                    this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(sFromKey);
                    this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(sQualifier);
                    this.instance.setA3xxexnsbvxxxxxxxxxxsequence(sSequence);
                   }else{
                    this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(sKey);
                    this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                    this.instance.setA3xxexnsbvxxxxxxxxxxsequence(attachment-1);
                   }
                  }
                  String uploadedText=file.getText();
                  String jay=uploadedText;
                  try{
                   uploadedText=this.sanitize(uploadedText);
                   uploadedText=jay;
                  } catch ( Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
                   return null;
                  }
                  this.instance.set${clobdataentityDataFieldName?cap_first}(uploadedText);// may come without wire()
                  this.instance.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  superdotpersist();// sanitize is used to allow uploaded sanitized text re xss attack
                 }//end of while
                }//end of itr next
                  // jay test multi text uploads handling,if instance was originally created from Item etc then fromkey/table , qualifier,type  will be lost but need to be restored 
                  // if itr is empty it means no file upload via clob and lobDataType was already set by calling entity 
                  //  should we give msg for clob/blob , dopersist causing too many messages
                  // check impact of going back suppressing msg
     	//          superdotpersist();// sanitize is used to allow uploaded sanitized text re xss attack
                  /*
                  if((owner2Code.equals(masterSiteCode) && customIdentity.hasRole("UH")) || this.instance.getA2xxuxxxbv50xxxxxxxxqualifier().equals("csv")){
                   superdotpersist();
                  }else{
                   if(file.getLength() != 0){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,bundle.getString("only")+" "+bundle.getString("csv")+" "+bundle.getString("qualifier")+" "+bundle.getString("allowed"),""));
                    return "";
                   }else{
                    superdotpersist();//allow only via ckeditor xss attack
                   }
                  } 
                  */
               /*
                  timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("${clobdataEntityName?substring(eL)?cap_first}")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
               */
            <#elseif blobDataClass != "">   
                // blobdata entity iterator used by clobdata persist or when called by master entity persist
                 String sFromTable="";
                 String sQualifier="";
                 String sFromKey="";
                 String sKey="";
                 Integer sSequence=0;
                //below for blobdata persist but can originate from other entities like Item
                String clobImgUrl="";// support to be added for clob/blob
               // changed logic since now we can key in -M ib clob/blob edit plus dupl should allways be checked
               // if coming from non blob then, this instance was already created but not saved, so bypass
                key=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();// instance gets initielized
                subKey="";
                 List<${blobdataEntityName?cap_first}> results = entityManager
		 .createQuery(
			"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and (cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2S ) order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", this.instance.getA0xxukbdlvxxxxxxxxxxfromtable()).setParameter("blobdatafromkey", this.instance.getA1xxuxxxbv49xxxxxxxxfromkey())
                            .setParameter("owner2", owner2Code).setParameter("owner2S", "SYSTEM").setParameter("blobdatasequence",this.instance.getA3xxexnsbvxxxxxxxxxxsequence())
                             .setParameter("blobdataqualifier",this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()).getResultList();
		 if(!results.isEmpty() ){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("binary")+" "+bundle.getString("data")+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" "+this.instance.getZzxxu2oxxhxxxxxxxxxxowner2(),""));
                   bcontinue=false;
                   return null;
                 }
                 if(!this.instance.getA0xxukbdlvxxxxxxxxxxfromtable().equals("blobdata")){
                  superdotpersist();// avoid calling persist() which will cause extra persist 
                  return "persisted";                 }
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                Integer attachment=0;
                if(itr.hasNext() ){
                 while (itr.hasNext()) {
                  file = itr.next();
                  dataIsClob=false;
                  dataIsBlob=false;
                  temps=file.getMime();
			  if ("image/bmp".equals(temps)) {
				lobDataType = "bmp";
			  } else if ("image/jpeg".equals(temps)) {
				lobDataType = "jpg";
			  } else if ("image/gif".equals(temps)) {
				lobDataType = "gif";
			  } else if ("image/png".equals(temps)) {
				lobDataType = "png";
			  } else if ("text/xml".equals(temps)) {
				lobDataType = "xml";
			  } else if ("application/msword".equals(temps)) {
				lobDataType = "doc";
			  } else if ("text/plain".equals(temps)) {
				lobDataType = "txt";
			  } else if ("text/html".equals(temps)) {
				lobDataType = "html";
			  } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			  } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			  } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			  } else {
				lobDataType = "unkn";
			  }
                  attachment++;// attachment incrase 
                  if(attachment > 0){
                   if(!this.instance.getA0xxukbdlvxxxxxxxxxxfromtable().equals("blobdata")){
                    sFromTable=this.instance.getA0xxukbdlvxxxxxxxxxxfromtable();
                    sFromKey=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();
                    sQualifier=this.instance.getA2xxuxxxbv50xxxxxxxxqualifier();
                    sSequence=this.instance.getA3xxexnsbvxxxxxxxxxxsequence();
                   }else{
                    sKey=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();// entered value
                   }
                   // if instance was originally created from Item etc then fromkey/table , qualifier,type  will be lost but need to be restored 
                   this.clearInstance();// support multiple uploads and save, avoid lazy loading
                   this.instance = this.getInstance();
                   this.setInstance(this.instance);
                   if(!sFromTable.equals("")){
                    this.instance.setA0xxukbdlvxxxxxxxxxxfromtable(sFromTable);
                    this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(sFromKey);
                    this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(sQualifier);
                    this.instance.setA3xxexnsbvxxxxxxxxxxsequence(sSequence);
                   }else{
                    this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(sKey);
                    this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
                    this.instance.setA3xxexnsbvxxxxxxxxxxsequence(attachment-1);
                   }
                  }
                  this.instance.set${blobdataentityDataFieldName?cap_first}(file.getData());
                  if(this.instance.getA4xxexxxbvxxxxxxxxxxtype() !=null && !this.instance.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   this.instance.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }
                  if(this.instance.getA4xxexxxbvxxxxxxxxxxtype() !=null && this.instance.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   this.instance.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                  }
                  if(this.instance.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                   this.instance.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }
                  superdotpersist();
                 }//end of while
                }//next itr 
                  //superdotpersist();
                  i++;
               /*
                  timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("${blobdataEntityName?substring(eL)?cap_first}")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
               */
            </#if>
           </#if>
           <#if menuAttributesp2 == "60" >
             /* credit/debit rules
              *  D-E-A-D = debits increase expenses, assets, and dividends 
              * Asset A/C                    =     Liability+Equity A/Cs
              * + ie increase record by debit     +ie  Increase by credit
              * - ie decrease       by credit     - ie  decrease by debit
              * Expenxe                      =     Revenue
              * + ie increase       by debit        + increase as credit
              * -                   by credit       -          as debit 
              * Dividends 
              * + ie increase
              * - ie decrease   
              */
              /* roll up summary accounts 
               Heading (H), Detail(D),T (Total upto prev Header), B Block Header 
               ie Sub Header), S(Sub Total upto prev Block or Header) 
              */
             if (doRollUp){
              accountTotalsRollUp(this.instance.getA0xxukwxbvxxxxxxxxxxaccount());
             }
           </#if>
            // if manual entry was done instead of using options then capture it in userprofile
 	    ${userEntityName?cap_first} user = null;
            <#if menuAttributesp2 == "1A">
             if(customIdentity.getUserSid()==0){
              return null;// came from r3rest not loggedIn site create  for ItemHome only
             }
            </#if>

      <#foreach property in pojo.allPropertiesIterator>
       <#if (property.name?length > pL)>
        <#if (property.name?substring(4,5)?contains("h") && property.value.typeName?contains("tring")  ) >
        if (!importChosen && this.instance.get${property.name?cap_first}()!=null && !this.instance.get${property.name?cap_first}().isEmpty() ){
         //userprofl holds dropdown list values for address city,state etc
         try   {
          if(user ==null){
          user = (${userEntityName?cap_first}) entityManager
           .createQuery(
            "select cc from ${userEntityName?cap_first} cc where cc.a0xxuobxbxxxxxxxxxxxsid = :usersid and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
             .setParameter("usersid", customIdentity.getUserSid())
             .setParameter("owner2", owner2Code)
              .getSingleResult();
          }
List<${userproflEntityName?cap_first}> results =  entityManager
.createQuery(
"select cc from ${userproflEntityName?cap_first} cc where   cc.${userEntityName}.a0xxuobxbxxxxxxxxxxxsid=:logonid  and cc.b1xxuxxrbvxxxxxxxxxxrow=:row and cc.b1xxuxxrbvxxxxxxxxxxoption=:option and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
.setParameter("logonid", customIdentity.getUserSid())
.setParameter("row", "01")
.setParameter("option", "${property.name?substring(10,12)}")
                           .setParameter("owner2", owner2Code)
.getResultList();

                           if(!results.isEmpty()){ 
                            ${userproflEntityName}=results.get(0); 
                            ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxselectvalue(this.instance.get${property.name?cap_first}());
                            ${userproflEntityName}Home.setInstance(${userproflEntityName});
                            ${userproflEntityName}Home.update();
                           }
                           else{
                            ${userproflEntityName}Home.clearInstance();
                            ${userproflEntityName}=${userproflEntityName}Home.getInstance();
                            ${userproflEntityName}.set${userEntityName?cap_first}(user);
                            ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxrow("01");
                            ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxoption("${property.name?substring(10,12)}");
                            ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxselectvalue(this.instance.get${property.name?cap_first}());
                            ${userproflEntityName}Home.setInstance(${userproflEntityName});
                            ${userproflEntityName}Home.persist();
                           }
                           ${userproflEntityName}Home.clearInstance();
	    } catch (NoResultException ignore) {
             } catch (Exception e) {
              log.severe("Error persisting userprofl "+ e);
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,"userprofl initialize failed: " + e.getMessage(),""));
            }
           }         
        </#if>
       </#if> 
      </#foreach>



           <#if entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci" || entityFunction=="cp" || entityFunction=="sh"  > 
            <#if entityFunction=="cq">
             <#assign cuinvoiceEtcItemDetailsEntityName=cuqdetailsEntityName>
             <#assign cuinvoiceEtcItemDetailsID1FieldName=cuqdetailsID1FieldName>
             <#assign cuinvoiceEtcItemDetailsID2FieldName=cuqdetailsID2FieldName>
            </#if>
            <#if entityFunction=="co">
             <#assign cuinvoiceEtcItemDetailsEntityName=cuodetailsEntityName>
             <#assign cuinvoiceEtcItemDetailsID1FieldName=cuodetailsID1FieldName>
             <#assign cuinvoiceEtcItemDetailsID2FieldName=cuodetailsID2FieldName>
            </#if>
            <#if entityFunction=="ci">
             <#assign cuinvoiceEtcItemDetailsEntityName=cuidetailsEntityName>
             <#assign cuinvoiceEtcItemDetailsID1FieldName=cuidetailsID1FieldName>
             <#assign cuinvoiceEtcItemDetailsID2FieldName=cuidetailsID2FieldName>
            </#if>
            <#if entityFunction=="cp">
             <#assign cuinvoiceEtcItemDetailsEntityName=cupdetailsEntityName>
             // jay persist internal invoice if created     
             <#assign cuinvoiceEtcItemDetailsID1FieldName=cupdetailsID1FieldName>
             <#assign cuinvoiceEtcItemDetailsID2FieldName=cupdetailsID2FieldName>
            </#if>
            <#if entityFunction=="sh">
             <#assign cuinvoiceEtcItemDetailsEntityName=cushdetailsEntityName>
             <#assign cuinvoiceEtcItemDetailsID1FieldName=cushdetailsID1FieldName>
             <#assign cuinvoiceEtcItemDetailsID2FieldName=cushdetailsID2FieldName>
             <#assign keysparam= "this.getLastItemLine()">

            </#if>
              // The following needs key & keysparam variable
                <#if keyAutoGen == "Y" >
               //${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		    ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
                <#else>
               ${cuinvoiceEtcItemDetailsEntityName}Home.get${cuinvoiceEtcItemDetailsEntityName?cap_first}Id().set${cuinvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		    ${cuinvoiceEtcItemDetailsEntityName}Home.get${cuinvoiceEtcItemDetailsEntityName?cap_first}Id().set${cuinvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
                </#if>
             //call child persist after parent persist
             // jay if noinv exist flag then save new invoice before details save
             // clearInstance and setInstance already done in crereCdetails to avoid detached entity
	     ${cuinvoiceEtcItemDetailsEntityName}Home.persist();
             moreActive=false;
             nextShow=false;
             setChangeDone(true);
             //check client shicol and cadcol flags and send order confirmation email otherwise manually done
             // at getnextp time get flag values
            <#if entityFunction!="cp">
             if (!restEntity && ${itemEntityName}.getTempQuantity().compareTo(new BigDecimal("1.0"))  > 0 
                  && this.getLastItemLine() == 1){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("quantity")+ " "+bundle.getString("for")+" "+bundle.getString("next")+" "+bundle.getString("item")+" "+bundle.getString("remains")+" "+bundle.getString("as")+" "+${itemEntityName}.getTempQuantity()+", "+bundle.getString("change")+" "+bundle.getString("if")+" "+bundle.getString("needed"),""));
             }
            </#if>
             return "persisted";
           <#elseif entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" || entityFunction=="sv"  > 
            <#if entityFunction=="vq">
             <#assign vendorInvoiceEtcItemDetailsEntityName=vendqdetailsEntityName>
             <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendqdetailsID1FieldName>
             <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendqdetailsID2FieldName>
            </#if>
            <#if entityFunction=="vo">
             <#assign vendorInvoiceEtcItemDetailsEntityName=vendorOrderItemDetailsEntityName>
             <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendorOrderItemDetailsID1FieldName>
             <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendorOrderItemDetailsID2FieldName>
            </#if>
            <#if entityFunction=="vi">
             <#assign vendorInvoiceEtcItemDetailsEntityName=vendidetailsEntityName>
             <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendidetailsID1FieldName>
             <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendidetailsID2FieldName>
            </#if>
            <#if entityFunction=="vp">
             <#assign vendorInvoiceEtcItemDetailsEntityName=vendpdetailsEntityName>
              // jay persist internal invoice if created         
             <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendpdetailsID1FieldName>
             <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendpdetailsID2FieldName>
            </#if>
            <#if entityFunction=="sv">
             <#assign vendorInvoiceEtcItemDetailsEntityName=vendshdetailsEntityName>
             <#assign vendorInvoiceEtcItemDetailsID1FieldName=vendshdetailsID1FieldName>
             <#assign vendorInvoiceEtcItemDetailsID2FieldName=vendshdetailsID2FieldName>
             <#assign keysparam= "this.getLastItemLine()">
            </#if>
                <#if keyAutoGen == "Y" >
		     //${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		     ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
                <#else>
		     ${vendorInvoiceEtcItemDetailsEntityName}Home.get${vendorInvoiceEtcItemDetailsEntityName?cap_first}Id().set${vendorInvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		     ${vendorInvoiceEtcItemDetailsEntityName}Home.get${vendorInvoiceEtcItemDetailsEntityName?cap_first}Id().set${vendorInvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
                </#if>
             //call child persist after parent persist
             // clearInstance and setInstance already done in crereVdetails to avoid detached entity
		 ${vendorInvoiceEtcItemDetailsEntityName}Home.persist();
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
             moreActive=false;
             nextShow=false;
             setChangeDone(true);
            <#if entityFunction!="vp">
             if (${itemEntityName}.getTempQuantity().compareTo(new BigDecimal("1.0"))  > 0 ){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("quantity")+ " "+bundle.getString("for")+" "+bundle.getString("next")+" "+bundle.getString("item")+" "+bundle.getString("remains")+" "+bundle.getString("as")+" "+${itemEntityName}.getTempQuantity()+", "+bundle.getString("change")+" "+bundle.getString("if")+" "+bundle.getString("needed"),""));
             }
            </#if>
             return "persisted";
           <#elseif entityFunction=="eo" > 
            <#if entityFunction=="eo">
             <#assign employeeInvoiceEtcItemDetailsEntityName=emplodetailsEntityName>
            </#if>
             //call child persist after parent persist provided parent instance already had the child instance set
             // clearInstance and setInstance already done in crereEdetails to avoid detached entity
		 ${employeeInvoiceEtcItemDetailsEntityName}Home.persist();
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
             moreActive=false;
             setChangeDone(true);
             if (${itemEntityName}.getTempQuantity().compareTo(new BigDecimal("1.0"))  > 0 ){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("quantity")+ " "+bundle.getString("for")+" "+bundle.getString("next")+" "+bundle.getString("item")+" "+bundle.getString("remains")+" "+bundle.getString("as")+" "+${itemEntityName}.getTempQuantity()+", "+bundle.getString("change")+" "+bundle.getString("if")+" "+bundle.getString("needed"),""));
             }
             return "persisted";
           <#elseif menuAttributesp2 == "9A" > 
             //call child persist after parent persist
             //createJAdetails
             showtemprunt();
             // clear instance and setInstance done in createJAdetails to avoid detached entity
             <#if (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
	     ${jobassignmentdetailsEntityName}Home.persist();
             </#if>
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
             moreActive=false;
             setChangeDone(true);
             return "persisted";
           <#elseif menuAttributesp2 == "9C" && processattributesEntityName?? > 
             //call child persist after parent persist
             //createAdetailsetValues();
             showtemprunt();
             // clear instance done in createAdetails to avoid detached entity
	     ${processattributesEntityName}Home.persist();
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
             moreActive=false;
             setChangeDone(true);
             return "persisted";
           <#elseif menuAttributesp2 == "65" >
             //call child persist here if more children
             createGdetailsetValues();
             ///showNetValue(); mar22 should we put it back?
             // clear instance done in createGdetails to avoid detached entity
            ${gentriesDetailsEntityName}Home.persist();
             moreActive=false;
             setChangeDone(true);
             return "persisted";
           <#elseif menuAttributesp2 == "89" >
             //call child persist here if more children
             createSdetailsetValues();
             // clear instance done in createSdetials to avoid detached entity
	     ${scheduleDetailsEntityName}Home.persist();
             moreActive=false;
             setChangeDone(true);
             return "persisted";
           <#else>
            <#if (menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" ) >
             <#if (menuAttributesp2 ="20")> 
              if (dobSave.equals(this.instance.getQ7xxdxtdbvxxxxxxxxxxdob())){
               this.instance.setQ7xxdxtdbvxxxxxxxxxxdob(null);
              }
             </#if>
             if (this.getAddrL1() !=null) {
              createAddress();// validate and creates ${addressEntityName}2
              if(!bcontinue){
               return null;
              }
             // no need to clear instance because no multiple addresses are involved
             // clear instance to avoid detached entity  either use 2 or leave as original code. It seems if address is empty
             // it does not perist. If there is value it uses the home instance which points to ${addressEntityName}2
             //    ${addressEntityName}Home.clearInstance();
             //    ${addressEntityName}Home.setInstance(${addressEntityName});
             // parent say customer already persisted and did not include new address ( if existing address it was via select & validate)
             // not true also parent may have included potential clob/blob key which may not be included above as expeceted
             // so update parent, if needed for address  
	      ${addressEntityName}Home.persist();
              setChangeDone(true);
              importAdded=importAdded+1;
              this.instance.set${addressEntityName?cap_first}ByMailtocode(${addressEntityName}2);
              this.superdotupdate();//merge to update parent, no need to call superUpdate because statusfldt already updated
              return "persisted";
             }
             else{
              setChangeDone(true);
              importAdded=importAdded+1;
              return "persisted";
             }
            <#else>
             setChangeDone(true);
             importAdded=importAdded+1;
             return "persisted";
            </#if> 
           </#if>
       } catch ( Exception e){
         String context="key="+key+",subKey="+subKey;
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR," "+"${componentName?substring(eL)?cap_first}"+" "+context+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));
               bcontinue=false;
               return null;
       }

    }
     <#-- end of persist method  -->

    public String superUpdate() {
        //this is used to update statusfldate before calling superdotupdate which is the jpa merge
        //flow is (allowupdate() if needed)-update()-(sperupdate() if statusdt needs change-superdotupdate())
        // or -superdotupdate()
        //setUpdatedMessage(createValueExpression(""));
      // allow raaspi to delete SYSTEM records
      if((getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !owner2Code.equals(masterSiteCode)) || (!getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals(owner2Code))){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("If")+" "+bundle.getString("non")+" "+bundle.getString("owned")+", "+bundle.getString("update")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));

                 bcontinue=false;
                 return null;
      }


       if (!bcontinue){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("error")+", "+ bundle.getString("not")+" "+bundle.getString("continue"),""));



             return null;
       }
       <#if statusFlagDField !=""  >
           this.instance.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
       </#if>
           superdotupdate(); 
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
          /* too much info
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("selected")+" "+"${componentName?substring(eL)?cap_first}"+" "+"at"+" "+timeStamp,""));
           */

           return "superUpdated"; 

    }

    public String updateRest(String descript) {
           superdotupdate();//superdotupdate does not change any date field
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+"${componentName?substring(eL)?cap_first}"+" "+descript+" "+bundle.getString("record")+" "+bundle.getString("at")+" "+timeStamp,""));
            return "updated"; 
       }


    public String allowUpdate() {
       ////setUpdatedMessage(createValueExpression(""));
     // allowupdate is used by method calls only and not directly by jsf 
     // there are cases like item stat or customer order we need to allow non owned records to be updated
     // for this to work, make sure entityHome is cleared,use instance itself or setinstance is done with the variable holding instance values and then this is called
            superdotupdate();
            setChangeDone(true);
        /* use customIdentity.getClientMsgLev 
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("selected")+" "+"${componentName?substring(eL)?cap_first}"+" "+"at"+" "+timeStamp,""));
        */
            return "updated"; 
       }

 <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || ids?substring(6,8)=="cp" || entityFunction == "vq" 
        || entityFunction == "vo" || entityFunction == "vi" || ids?substring(6,8)=="vp" || entityFunction == "sh" || entityFunction == "sv"
        || entityFunction == "eo" || menuAttributesp2 ="9A" || menuAttributesp2 ="65" || menuAttributesp2 ="89">

   <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci"  || entityFunction == "vq" 
        || entityFunction == "vo" || entityFunction == "vi" >

    public boolean overRideOk(){
      //check override code against client record
                 if(priceOverRide != null && priceOverRide.compareTo(BigDecimal.ZERO)!=0 && (overRideValue ==null || overRideValue.isEmpty())){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("override")+" "+ bundle.getString("value")+" "+bundle.getString("not")+"  "+bundle.getString("entered"),""));
                        return false;
                 }
                 Yxxxch522xhhxxhxxxxxclient client=null;
                 try{
                 client =(Yxxxch522xhhxxhxxxxxclient) entityManager
					.createQuery(
							"select cc from Yxxxch522xhhxxhxxxxxclient cc where cc.a0xxukxxbvxxxxxxxxxxclientversion = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
		} catch (Exception ex) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+ bundle.getString("check")+" "+bundle.getString("override")+" "+bundle.getString("value")+", "+bundle.getString("no")+" "+ bundle.getString("client")+" "+bundle.getString("record")+" "+bundle.getString("for")+" "+ owner2Code,""));


                        return false;
		}
		if (client != null) {
                 if(!overRideValue.equals(client.getG4xxuxxxssxxnxxxxxxxnmateria())){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("override")+" "+ bundle.getString("value")+"  "+overRideValue+" "+bundle.getString("wrong"),""));

                        return false;

                }
               }
               return true;
     }
    </#if>

   <#if entityFunction == "cp">
    public void addWithDetailsCod(String invoiceKey,String orderKey) {
    // handles both np and cd types as opposed to prepaid pp or pd which goes to addWithDetailsPos
    // comes from checkoutInvoiced or checkoutPOS or from takeAction r3Cart , so establish context like customer,user(owner),
     if(this.instance.getZ5xxuxxrbvxxxxxxxxxxpaybyid() !=null && !this.instance.getZ5xxuxxrbvxxxxxxxxxxpaybyid().isEmpty()){
      this.instance.setB6xxuxxrbv10xxxxxxxxpaytype("cq");
     }else{
      this.instance.setB6xxuxxrbv10xxxxxxxxpaytype("cash");
     }
     if(!invoiceKey.isEmpty() && !invoiceKey.equals("r3Cart") ){
      ${cuinvoiceEntityName} = ${cuinvoiceEntityName}List.getKeyToEntity(invoiceKey);
      if(${cuinvoiceEntityName} ==null){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("invoice")+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+invoiceKey+" "+bundle.getString("site")+" "+owner2Code,""));
        return;
      }
      ${cuordersEntityName} = ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}();
      if(${cuordersEntityName} ==null){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("order")+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+bundle.getString("invoice")+" "+invoiceKey+" "+bundle.getString("site")+" "+owner2Code,""));
        return;
      }
      ${customerEntityName}Home.clearInstance();
      ${customerEntityName}Home.getInstance();
      ${customerEntityName}=${cuordersEntityName}.get${customerEntityName?cap_first}();
      this.getInstance().setJxxxuq201xwwqqhxxxxxcustomer(jxxxuq201xwwqqhxxxxxcustomer);//needed in journal
     }//invoice key checking
     if(!orderKey.isEmpty() && !orderKey.equals("r3Cart") ){
      ${cuordersEntityName} = ${cuordersEntityName}List.getKeyToEntity(orderKey);
      if(${cuordersEntityName} ==null){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("order")+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+orderKey+" "+bundle.getString("site")+" "+owner2Code,""));
        return;
      }
      //shipment and invoice will get generated in addwithdetails??????
      ${customerEntityName}Home.clearInstance();
      ${customerEntityName}Home.getInstance();
      ${customerEntityName}=${cuordersEntityName}.get${customerEntityName?cap_first}();
      this.getInstance().setJxxxuq201xwwqqhxxxxxcustomer(jxxxuq201xwwqqhxxxxxcustomer);//needed in journal
     }//order key checking
     addWithDetails();
    }
    public void addWithDetailsPos(String orderKey,String tranId, String clTranId,String oO2Code) {
    // comes from takeAction r3Cart , so establish context like customer,user(owner),
    // amount etc as if entered by backoffice payment
      if(this.instance==null){
       this.clearInstance();
       this.getInstance();
      }
      if(tranId == null || tranId.isEmpty()){
       tranId="Empty";
      }
      if(clTranId == null || clTranId.isEmpty()){
       clTranId="Empty";
      }

      this.instance.setB6xxuxxrbv10xxxxxxxxpaytype("card");
    
     this.instance.setZ5xxuxxrbvxxxxxxxxxxpaybyid(tranId.length()>20?tranId.substring(0,20):tranId);//20 ch
     String notes=this.instance.getY2xxuxznbvxxxxxxxxxxnotes();
     notes=notes+clTranId;
     this.instance.setY2xxuxznbvxxxxxxxxxxnotes(clTranId.length()>60?clTranId.substring(0,20):clTranId);//60ch
     //This method is running under raaspi, we need to get order from sending site including raaspi itself
     String oOwner2Code=oO2Code;
     Trexuq244xwwqqhxxxxxcuorders trexuq244xwwqqhxxxxxcuorders= trexuq244xwwqqhxxxxxcuordersList.getKeyToEntity(orderKey,oOwner2Code);    
     if(trexuq244xwwqqhxxxxxcuorders ==null){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("order")+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+orderKey+" "+bundle.getString("site")+" "+oOwner2Code,""));
        return;
     }
     //set owner and owner2 so that addWithDetails finds it
     ownerCode=trexuq244xwwqqhxxxxxcuorders.getZexxutoxlhxxxxxxxxxxowner();
     customIdentity.setUsername(ownerCode);
     customIdentity.setOwner(ownerCode);
     //order could be from myorg or raaspi itself but this method is running in raaspi
     //owner2Code raaspi is being changed to xxxx for the duration of this method
     // we also should paas some uid stored in po via state to verify against to prevent hacking
     owner2Code=trexuq244xwwqqhxxxxxcuorders.getZzxxu2oxxhxxxxxxxxxxowner2();//order owner2Code
     if(!owner2Code.equals(oOwner2Code)){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("order")+" "+bundle.getString("mismatch")+", "+bundle.getString("cannot")+" "+bundle.getString("continue"),""));
        log.severe("Order site mismatch "+ owner2Code+" / "+oOwner2Code);
        return;
     }
     customIdentity.setOwner2(owner2Code);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
     this.instance.setZaxxutoxlhxxxxxxxxxxowner(ownerCode);
     this.instance.setD1xxzyprlxxxxxxxxxxxamountin(trexuq244xwwqqhxxxxxcuorders.getZ1xxztprlxxxxxxxxxxxamounttotal());//assume fully paid split??
     if(${customerEntityName}==null){
      ${customerEntityName}Home.clearInstance();
      ${customerEntityName}Home.getInstance();
      ${customerEntityName}=trexuq244xwwqqhxxxxxcuorders.get${customerEntityName?cap_first}();
     }
      ${userEntityName}Home.clearInstance();
      ${userEntityName}Home.getInstance();
      String userKey=trexuq244xwwqqhxxxxxcuorders.getZexxutoxlhxxxxxxxxxxowner().substring(0,trexuq244xwwqqhxxxxxcuorders.getZexxutoxlhxxxxxxxxxxowner().length()-3);
      ${userEntityName?cap_first} user =${userEntityName}List.getKeyToEntity(userKey);
      //not sure how it gets done in checkoutPOS now but needed
      xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().setZ6xxzxxxavxxxxxxxxxxamountin(trexuq244xwwqqhxxxxxcuorders.getZ1xxztprlxxxxxxxxxxxamounttotal());
      this.showtemprunt(); //simulate liastener in amountIn changes
      this.getInstance().setJxxxuq201xwwqqhxxxxxcustomer(jxxxuq201xwwqqhxxxxxcustomer);//needed in journal
      //itemList,invoiceHome,cuodetails,accountHome owner2Code need change, ownerCode comes from customIdentity
      //cuidetailsHome,cupdetailsHome,journalHome
      ${itemEntityName}List.setOwner2Code(owner2Code);
      ${cuordersEntityName}List.setOwner2Code(owner2Code);
      ${customerEntityName}List.setOwner2Code(owner2Code);

      ${userEntityName}Home.setOwner2Code(owner2Code);
      ${accountEntityName}Home.setOwner2Code(owner2Code);
      xoxxuq284xwwqqhxxxxxcupdetailsHome.setOwner2Code(owner2Code);
      xoxxuq2a4xwwqqhxxxxxcuidetailsHome.setOwner2Code(owner2Code);
      xlrxeh685xwwqqhxxxxxjournalHome.setOwner2Code(owner2Code);

      ${cuodetailsEntityName}Home.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      ${cuinvoiceEntityName}Home.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      xlrxeh685xwwqqhxxxxxjournalHome.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      xoxxuq2a4xwwqqhxxxxxcuidetailsHome.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);

     addWithDetails();

    }
   </#if>
   
   /**
   * used by xxEdit save where details are involved
   *  calls cartpersist with option o for new/add (used for both cart order as well as for back office transactions)
   *  call persist to create the new invoice along with the current detail
   *  persist calls showtemprunt which calls createcdetals and showrunt. createcdetailssetvalue has logic to copy
   *  tempqty (ord etc qty) to detail qty
   *  after that persist calls persistrunt to add up for totals and then cuinvoiceposting for the detail
   *   persist has logic to update metrix for related entities
   *@see "addProductsToOrder used by shopping cart add and extended_persist to convert from quote ot order etc"
   */

    public void addWithDetails() {
     
     // will mimic addProductsToOrder logic, if validation fails do not continue
     //  
       if (!bcontinue){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("error")+" "+bundle.getString("condition")+", "+bundle.getString("reset")+" "+bundle.getString("done")+" "+bundle.getString("to")+" "+bundle.getString("allow")+" "+bundle.getString("retry"),""));

        bcontinue=true;
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("try")+" "+bundle.getString("again")+" "+bundle.getString("or")+" "+bundle.getString("cancel"),""));
        return;
       }
   <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci"  || entityFunction == "vq" 
        || entityFunction == "vo" || entityFunction == "vi" >

      if ((priceOverRide != null && priceOverRide.compareTo(BigDecimal.ZERO)!=0) || (overRideValue !=null && !overRideValue.isEmpty())){
       if (this.overRideOk()){
        // itemprice not changed by override, change price in detail for a order etc
        // error msg if not ok jay check why continues if error, showrunt also checks, remove if redunddant ie dup msg
       } 
     }
   </#if>
   <#if entityFunction == "sh" || entityFunction == "sv" >
     // update foreign fields, does it need validateandset method?
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("Total")+" "+bundle.getString("shiiping")+" "+bundle.getString("cost")+" "+bundle.getString("depends")+" "+bundle.getString("on")+" "+bundle.getString("packaging"),""));

     
   </#if>
   <#if entityFunction == "vq" || entityFunction == "vo" || entityFunction == "vi">
      //if cost of an item is zero, give a msg
      if(this.instance.get${itemEntityName?cap_first}().get${itemCostField?cap_first}().compareTo(new BigDecimal("0.0")) == 0){     
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("cost")+" "+bundle.getString("value")+" "+bundle.getString("is")+" "+bundle.getString("0.0!"),""));
      }
   </#if>
   <#if entityFunction == "cp">
   
    if(this.instance.getB6xxuxxrbv10xxxxxxxxpaytype()==null || this.instance.getB6xxuxxrbv10xxxxxxxxpaytype().isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_WARN,bundle.getString("Paytype")+" "+bundle.getString("value")+" "+bundle.getString("not")+" "+bundle.getString("selected"),""));
      return;
    } 
        // we need to check overpayment/underpayment before persist
        // better to use javascript/css to give alert message
        // use html5 local storage to offer offline payment
        if(this.instance.getD1xxzyprlxxxxxxxxxxxamountin()==null){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("AmountIn")+" "+ bundle.getString("not")+" "+ bundle.getString("entered"),""));
          return;
        }
        //if no cart order, it means direct payment  can be both so check more
        String type="pos";
        if(${cuinvoiceEntityName}!=null){
         type=${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().getY9xxcxxxbv10xxxxxxxxtype();
        }
        if(fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type).size() == 0){
         if(${cuinvoiceEntityName}!=null){
          change=${cuinvoiceEntityName}.getZ1xxztprlxxxxxxxxxxxamounttotal();//as if total was there
         }else{
          change=this.instance.getD1xxzyprlxxxxxxxxxxxamountin();//as if total was there
         }
        }else{
         trexuq244xwwqqhxxxxxcuorders=fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type).get(0);
         change=trexuq244xwwqqhxxxxxcuorders.getZ1xxztprlxxxxxxxxxxxamounttotal();
        } 
        change=change.subtract(this.instance.getD1xxzyprlxxxxxxxxxxxamountin());
        if(change.compareTo(new BigDecimal("0.0")) == 0){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Cash")+": "+ bundle.getString("change")+": "+change.toString(),""));
        }else{
         if(change.compareTo(new BigDecimal("0.0")) > 0){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Cash")+": "+ bundle.getString("Take")+" "+ bundle.getString("due")+": "+change.toString(),""));
          return;
         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Cash")+": "+ bundle.getString("Give")+" "+ bundle.getString("change")+": "+change.abs().toString(),""));
          //continue with payment , change amount shown why interrupt?   return; 
         }
        }

   </#if>
   <#if entityFunction == "vp">
    if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype()==null || this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_WARN,bundle.getString("Paytype")+" "+bundle.getString("value")+" "+bundle.getString("not")+" "+bundle.getString("selected"),""));
      return;
    } 
   </#if>
     <#--eo same as below, 9C ie process further dowm-->

     nextShow=true;// reset so that detail totals are calculated at least once
     Integer currentCartedPOSID;
     currentCartedPOSID=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
     cartpersist(currentCartedPOSID,"o",this.getLastItemLine(),new BigDecimal("0.0"));
     //o means new and if new then sid will be nulll  
     //simply calls persist which will call createdetails , showrunt (uses current detail and updates totals)
     // and persistrunt (which uses the the showrunt values from details and resets the parent totals 
     // and then persist entity
     //showrunt also calls setParentTotals (loops through all details and updates totals) gets bypassed
     // if sid is null recheck logic because instance still has values 
     // xxxx   and ist and only item
     // if payment,showrunt also has logic to loop through invoices and show whats outstanding/total
     <#if entityFunction == "cp">
     //original logic handled direct payment and still does ie no orders or invoices created
     //logic was added to handle POS and COD type payment for a cart order ie order>invoice>payment 
     // if from POS then we need to flag cart order as paid/16 wont show as in cart
     // bypass if no orders involved, if comes from menu cpayment no invoice/orders
     // we need to create invoices from orders and include the invoice in payment 
     //invoice is needed to track customer/item with order,invoice/payment. 
     // payment does not link to order or item directly its via invoice
     // even a no name customer (backoffice user/customer) can come back for refund or complain

     if(trexuq244xwwqqhxxxxxcuorders !=null ){
      if(trexuq266xwwqqhxxxxxcuinvoice == null){
       try{
        trexuq266xwwqqhxxxxxcuinvoice=trexuq266xwwqqhxxxxxcuinvoiceHome.cartExtended_persist(trexuq244xwwqqhxxxxxcuorders);   
        //creates new invoice with PO pointer  
        if(trexuq266xwwqqhxxxxxcuinvoice ==null){
         return;
        }
       } catch (Exception ex) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("error")+" "+ bundle.getString("creating")+" "+bundle.getString("invoice")+", "+bundle.getString("error")+" "+ex.getMessage(),""));
        return;
       }
      }
      try{
        if(fpxxfq1a5xwwqqhxxxxxitemList.getCartedList("cart") !=null){//POS wont have cartedList
         for (Xoxxuq2b4xwwqqhxxxxxcuodetails itemOrderDetail : fpxxfq1a5xwwqqhxxxxxitemList.getCartedList("cart")) {
            if (itemOrderDetail != null) { 
              itemOrderDetail.setZhxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
              xoxxuq2b4xwwqqhxxxxxcuodetailsHome.setInstance(itemOrderDetail);
               xoxxuq2b4xwwqqhxxxxxcuodetailsHome.update();
            }
         }
        }
        trexuq244xwwqqhxxxxxcuorders.setJxxxuq201xwwqqhxxxxxcustomer(this.instance.getJxxxuq201xwwqqhxxxxxcustomer());//override customer
        trexuq244xwwqqhxxxxxcuorders.setZcxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
        trexuq244xwwqqhxxxxxcuordersHome.setInstance(trexuq244xwwqqhxxxxxcuorders);
        trexuq244xwwqqhxxxxxcuordersHome.superUpdate();

       } catch (Exception ex) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+ bundle.getString("update")+" "+bundle.getString("cart")+" "+bundle.getString("orders")+" "+bundle.getString("status")+"'"+ex.getMessage(),""));
      }

      //do the same for invoice ie mark as paid, detailsdont have status
      //at very end update cpayment with invoice id
      trexuq266xwwqqhxxxxxcuinvoiceHome.clearInstance();
      trexuq266xwwqqhxxxxxcuinvoiceHome.setInstance(trexuq266xwwqqhxxxxxcuinvoice);


      trexuq266xwwqqhxxxxxcuinvoice.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mpaid);
      trexuq266xwwqqhxxxxxcuinvoice.setJxxxuq201xwwqqhxxxxxcustomer(this.instance.getJxxxuq201xwwqqhxxxxxcustomer());//override customer

      trexuq266xwwqqhxxxxxcuinvoiceHome.setInstance(trexuq266xwwqqhxxxxxcuinvoice);
      trexuq266xwwqqhxxxxxcuinvoiceHome.superUpdate();

      this.instance.setTrexuq266xwwqqhxxxxxcuinvoice(trexuq266xwwqqhxxxxxcuinvoice);//cpayment invoice
      this.superUpdate();
     }


     </#if>

    }
 </#if> 

<#if  menuAttributesp2 == "9C" >
/**
* needs logic to replace the following because processdetails/attributes do not have same model as other master/detail      
* will mimic addProductsToOrder logic, if validation fails do not continue
* comes from save and no related entities like quote/order/invoice, for which use convert button which calls      // extended_persist 
* diff versions of cartpersist method exists depending on the entity 
* calls cartpersist (used for both cart order as well as for back office transactions)  which has most of the logic
*/
    public void addWithDetails() {
       if (!bcontinue){
             bcontinue=true;
             return;
       }
     Integer currentCartedPOSID;
     currentCartedPOSID=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
     cartpersist(currentCartedPOSID,"o",this.getLastItemLine(),new BigDecimal("0.0"));

    }
 </#if> 

 <#if entityFunction == "ci">
    public String issueInvoiceCredit() {
     //adjust posting
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("make")+" "+bundle.getString("new")+" "+bundle.getString("entry")+" "+bundle.getString("using")+" "+bundle.getString("negative")+" "+bundle.getString("value")+" "+bundle.getString("as")+" "+bundle.getString("override")+" "+ bundle.getString("item")+" "+bundle.getString("price"),""));
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("if")+" "+bundle.getString("needed")+", "+bundle.getString("make")+" "+bundle.getString("another")+" "+bundle.getString("entry")+" "+bundle.getString("using")+" "+bundle.getString("minus")+" "+bundle.getString("value")+" "+bundle.getString("quantity")+" "+bundle.getString("with")+" "+bundle.getString("zero")+" "+bundle.getString("as")+" "+ bundle.getString("price")+" "+bundle.getString("to")+" "+bundle.getString("balance")+" "+bundle.getString("inventory"),""));


     return "";
    }
 </#if>
 <#if entityFunction == "co" || entityFunction == "sh" || entityFunction == "ci">

       /***
       *@param none but keyedQuantity holds b/o qty
       */
       public void makeBoEntry(){//do the same for shipment and invoice ie show but qty as 0 in addition to existing remove row
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("To")+" "+bundle.getString("handle")+" "+bundle.getString("B/O")+" / "+bundle.getString("out")+" "+bundle.getString("of")+" "+bundle.getString("stock")+" "+bundle.getString("situation")+", "+bundle.getString("need")+" "+bundle.getString("to")+" "+bundle.getString("use")+" "+bundle.getString("edit")+" "+bundle.getString("option")+". "+bundle.getString("So")+" "+bundle.getString("use")+" "+bundle.getString("List")+" "+bundle.getString("and")+" "+bundle.getString("then")+" "+bundle.getString("edit"),""));

        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Once")+" "+bundle.getString("in")+" "+bundle.getString("edit")+", "+bundle.getString("select")+" "+bundle.getString("the")+" "+bundle.getString("item")+" "+bundle.getString("from")+" "+bundle.getString("dropdown")+" "+bundle.getString("list")+" "+bundle.getString("and")+" "+bundle.getString("change")+" "+bundle.getString("quantity")+" "+bundle.getString("to")+" "+bundle.getString("minus")+" "+bundle.getString("quantity")+". ",""));

        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Confirm")+" "+ bundle.getString("next")+" "+ bundle.getString("item")+" "+bundle.getString("selected")+" "+ bundle.getString("and")+" "+ bundle.getString("save")+" "+bundle.getString("as")+" "+ bundle.getString("line")+" "+ bundle.getString("next"),""));

        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("You")+" "+bundle.getString("will")+" "+bundle.getString("now")+" "+bundle.getString("have")+" "+bundle.getString("the")+", "+bundle.getString("original")+" "+bundle.getString("entry")+" "+bundle.getString("and")+", "+bundle.getString("new")+" "+ bundle.getString("B/O")+" "+ bundle.getString("entry")+". "+bundle.getString("Stock")+" "+bundle.getString("quantity")+" "+bundle.getString("already")+" "+bundle.getString("adjusted"),""));

        <#if entityFunction == "sh" >
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("Contact")+" "+bundle.getString("or")+" "+bundle.getString("email")+" "+bundle.getString("Invoicing")+" "+bundle.getString("dept")+", "+bundle.getString("explain")+" "+bundle.getString("and")+" "+bundle.getString("when")+" "+bundle.getString("resolved")+", "+ bundle.getString("set")+" "+ bundle.getString("as")+" "+bundle.getString("shipped")+", "+bundle.getString("Send")+" "+bundle.getString("confirmation")+" "+bundle.getString("email")+" "+bundle.getString("to")+" "+bundle.getString("customer"),""));
        </#if>


        //mark order/invoice detail status as return, so that it can be reissued and credit note issued if already paid 
         //simply follow existing logic confirm next line and save as but use qty as -ve b/o qty entered 
         //item instance already exists, reuse it but change qty 
         /* not needed now may be in future
         BigDecimal boQty=keyedQuantity.negate();
         fpxxfq1a5xwwqqhxxxxxitem.setTempQuantity(boQty);// simulate keyed into tempqty

         more();//confirm next item, creates a new detail instance and reuse the customer as a new instance for it
         updateDetailsAll();// save as line xx, 
         */

      //checked row remove,issue b/o for new row w -ve qty 
      // give a message reminding creating a new case if needed for a follow up. later have a checkbox to allow automated

      }

    public String issueCartCredit() {
     return "";
    }
 </#if>

 <#if entityFunction == "cp" || entityFunction == "vp">
    public String setAsClosed() {
     this.instance.set${statusFlagField?cap_first}(mclosed );
     this.superdotupdate();
     return "";
    }
 </#if>
    <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || ids?substring(6,8)=="cp" || entityFunction == "vq" 
        || entityFunction == "vo" || entityFunction == "vi" || ids?substring(6,8)=="vp" || entityFunction == "sh" || entityFunction == "sv"
        || entityFunction == "eo"  >
 /**
 * initalizes totals and the loops through active (non -1 status) details for the parent sid and adds to get totals
 *  but unlike setParentTotalsFromDetails this method updates parent with new totals
*/

    // details for parent sid too many problems keeping up with totals, so force it from details from db
    // hard code for cuodetails , make it generic later
    // added missing logic for tax recalculate
    public String updateParentFromDetails(Integer sid){
         //tempCount=0;  moved cp,vp
         detailLt=new BigDecimal("0.0");
         detailbaseamt=new BigDecimal("0.0");
         detailMis=new BigDecimal("0.0");
         detailDel=new BigDecimal("0.0");
         detailQty=new BigDecimal("0.0");
         totalmis=new BigDecimal("0.0");
         totaldel=new BigDecimal("0.0");
         totalbaseamt=new BigDecimal("0.0");
         amountTotal=new BigDecimal("0.0");
         totalqty=new BigDecimal("0.0");
         qtyTotal= new BigDecimal("0.0");
         totaltax1= new BigDecimal("0.0");
         totaltax2= new BigDecimal("0.0");
         totaltax3= new BigDecimal("0.0");
         totaloutstanding=new BigDecimal("0.0");
         totalamountin=new BigDecimal("0.0");

     <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || entityFunction == "sh" 
           || entityFunction == "cp" >
         for (${cuinvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(sid,-1)) {
           //tempCount=tempCount+1;
           if(itemOrderDetail !=null){
           <#if entityFunction=="sh">
            totalqty=totalqty.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            //jay check why qtytotal used in persistrunt
           <#else>
            // deliv/misc can be per detail, remains 0 unless added 
            totalmis=totalmis.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            /*
            // needs more sophisticated logic re shipping, also assumes last item has deliv/misc
            totalmis=(itemOrderDetail.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=(itemOrderDetail.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            */
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            <#if entityFunction =="cp">
             totalamountin=totalamountin.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());
             amountTotal=amountTotal.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());//
            <#else>
             amountTotal=amountTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsLineTotalFieldName?cap_first}());
            </#if>
            // at end use totalbaseamt and one deliv chrg (we need a method to return net deliv
            // and handling cost per order)
            totalqty=totalqty.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}());
           </#if>
           }

         }
         
         ${componentName?cap_first} ${componentName}=null;
         ${componentName}=this.getInstance();
         <#if entityFunction=="sh">
          ${componentName}.set${amountTotalField?cap_first}(amountTotal);
          ${componentName}.set${qtyField?cap_first}(totalqty);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${qtyField?cap_first}(qtyTotal);//check qtyTotal whats the diff?? persistrunt uses it
         <#else>
          <#if entityFunction=="cp">
          <#else>
          // to allow adding extra entries directly entered for del and mis
           amountTotal=totalbaseamt.add(totaldel).add(totalmis).add(totaltax1).add(totaltax2).add(totaltax3);
          </#if>
          ${componentName}.set${amountTotalField?cap_first}(amountTotal);//
          ${componentName}.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);// was missing for multi items

          ${componentName}.set${priceField?cap_first}(totalbaseamt);
          ${componentName}.set${miscchrgField?cap_first}(totalmis);
          ${componentName}.set${deliveryField?cap_first}(totaldel);
          ${componentName}.set${qtyField?cap_first}(totalqty);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${qtyField?cap_first}(qtyTotal);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${tax1Field?cap_first}(totaltax1);
          ${componentName}.set${tax2Field?cap_first}(totaltax2);
          ${componentName}.set${tax3Field?cap_first}(totaltax3);
         </#if>
         //this.update(); calls showrunt etc which may calculate wrong
         // allways clearinstance, ge/setinstance before update to avoid no update
         this.clearInstance();
         this.setInstance(${componentName});
         superdotupdate();
         return "updatedParent";

     <#elseif entityFunction == "vq" || entityFunction == "vo" || entityFunction == "vi" || entityFunction == "sv"
           || entityFunction == "vp">
         for (${vendorInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(sid,-1)) {
           //tempCount=tempCount+1; 
           if(itemOrderDetail !=null){
           <#if entityFunction=="sv">
            totalqty=totalqty.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            //jay check why qtytotal used in persistrunt
           <#else>
            totalmis=totalmis.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            <#if entityFunction =="vp">
             totalamountin=totalamountin.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());
             amountTotal=amountTotal.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());//
            <#else>
             amountTotal=amountTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsLineTotalFieldName?cap_first}());//
            </#if>
            totalqty=totalqty.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}());
           </#if>
           }
         }
         ${componentName?cap_first} ${componentName}=null;
         ${componentName}=this.getInstance();
            <#if entityFunction =="vi">
             ${componentName}.setZ1xxzyprlxxxxxxxxxxxamountostndt(amountTotal);// was missing for multi items
             //Z2xxzyprlxxxxxxxxxxxamountostndt haapens to be same jay use amtOutStandingField field
            </#if>
         <#if entityFunction=="sv">
           ${componentName}.set${qtyField?cap_first}(totalqty);//check qtyTotal whats the diff?? persistrunt uses it
           ${componentName}.set${qtyField?cap_first}(qtyTotal);//check qtyTotal whats the diff?? persistrunt uses it
         <#else>
          <#if entityFunction !="vp">
           //apr28 to allow adding extra del and mis entered 
           amountTotal=totalbaseamt.add(totaldel).add(totalmis).add(totaltax1).add(totaltax2).add(totaltax3);
          </#if>
          ${componentName}.set${amountTotalField?cap_first}(amountTotal);//
          ${componentName}.set${priceField?cap_first}(totalbaseamt);
          ${componentName}.set${miscchrgField?cap_first}(totalmis);
          ${componentName}.set${deliveryField?cap_first}(totaldel);
          ${componentName}.set${qtyField?cap_first}(totalqty);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${qtyField?cap_first}(qtyTotal);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${tax1Field?cap_first}(totaltax1);
          ${componentName}.set${tax2Field?cap_first}(totaltax2);
          ${componentName}.set${tax3Field?cap_first}(totaltax3);
         </#if>
         //this.update(); calls showrunt etc which may calculate wrong
         // allways clearinstance, ge/setinstance before update to avoid no update
         this.clearInstance();
         this.setInstance(${componentName});
         superdotupdate();
         return "updatedParent";
     <#elseif entityFunction == "eo">
         for (${employeeInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(sid,-1)) {
           //tempCount=tempCount+1;
            /*
            totalmis=totalmis.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            */
            //needs more sophisticated logic re shipping, also assumes last item has deliv/misc
            totalmis=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());

            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            amountTotal=amountTotal.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsLineTotalFieldName?cap_first}());
            totalqty=totalqty.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax3FieldName?cap_first}());

         }
         ${componentName?cap_first} ${componentName}=null;
         ${componentName}=this.getInstance();
          //amountTotal=(itemOrderDetail.get${cuinvoiceEtcItemDetailsBaseAmountFieldName?cap_first}().add(totaldel).add(totalmis).add(totaltax1).add(totaltax2).add(totaltax3));
          ${componentName}.set${amountTotalField?cap_first}(amountTotal);
          ${componentName}.set${priceField?cap_first}(totalbaseamt);
          ${componentName}.set${miscchrgField?cap_first}(totalmis);
          ${componentName}.set${deliveryField?cap_first}(totaldel);
          ${componentName}.set${qtyField?cap_first}(totalqty);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${qtyField?cap_first}(qtyTotal);//check qtyTotal whats the diff?? persistrunt uses it
          ${componentName}.set${tax1Field?cap_first}(totaltax1);
          ${componentName}.set${tax2Field?cap_first}(totaltax2);
          ${componentName}.set${tax3Field?cap_first}(totaltax3);
         //this.update(); calls showrunt etc which may calculate wrong
         // allways clearinstance, ge/setinstance before update to avoid no update
         this.clearInstance();
         this.setInstance(${componentName});
         superdotupdate();
         return "updatedParent";
     </#if> 

    }
/**
 initalizes totals and the loops through active (non -1 status) details for the parent sid and adds to get totals
 unlike updateParentTotalsFromDetails, this method does not update parent.
 showrunt() calls this to show recalculated totals, if the instance has a sid 
*/
    public String setParentTotalsFromDetails(Integer sid){
         //tempCount=0;
         detailLt=new BigDecimal("0.0");
         detailbaseamt=new BigDecimal("0.0");
         detailMis=new BigDecimal("0.0");
         detailDel=new BigDecimal("0.0");
         detailQty=new BigDecimal("0.0");
         totalmis=new BigDecimal("0.0");
         totaldel=new BigDecimal("0.0");
         totalbaseamt=new BigDecimal("0.0");
         amountTotal=new BigDecimal("0.0");
         totalqty=new BigDecimal("0.0");
         qtyTotal= new BigDecimal("0.0");//used by edits view
         totaltax1=new BigDecimal("0.0");
         totaltax2=new BigDecimal("0.0");
         totaltax3=new BigDecimal("0.0");
         totaloutstanding=new BigDecimal("0.0");
         totalamountin=new BigDecimal("0.0");


     <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || entityFunction == "sh" 
           || entityFunction == "cp" >
        if(sid==null){
            //came from Save, use current item which is line 1 and only item
            ${cuinvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail=${cuinvoiceEtcItemDetailsEntityName};
           if(itemOrderDetail !=null){
           <#if entityFunction=="sh">
             qtyTotal=qtyTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            //jay check why qtytotal used in persistrunt
           <#else>
            totalmis=totalmis.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            <#if entityFunction =="cp">
            totalamountin=totalamountin.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());
            </#if>
            amountTotal=amountTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsLineTotalFieldName?cap_first}());
            totalqty=totalqty.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
           </#if>
           }
        }else{
         for (${cuinvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(sid,-1)) {
           //tempCount=tempCount+1;
           if(itemOrderDetail !=null){
           <#if entityFunction=="sh">
             totalqty=totalqty.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
             qtyTotal=qtyTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            //jay check why qtytotal used in persistrunt
           <#else>
             totalmis=totalmis.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
             totaldel=totaldel.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            /*
            //needs more sophisticated logic re shipping, also assumes last item has deliv/misc
            totalmis=(itemOrderDetail.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=(itemOrderDetail.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            */
            totaltax1=totaltax1.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            <#if entityFunction =="cp">
            amountTotal=amountTotal.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());
            totaltax1=totaltax1.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}());

            <#else>
             //added taxes. avoid double adding totalbaseamount
             //Total is add of totals so moved to outside loop
            </#if>
            totalqty=totalqty.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
           </#if>
           }
        }
            amountTotal=amountTotal.add(totalbaseamt).add(totaldel).add(totalmis).add(totaltax1).add(totaltax2).add(totaltax3);

       }
         return "parentTotalsSet";
     <#elseif entityFunction == "vq" || entityFunction == "vo" || entityFunction == "vi" || entityFunction == "sv"
           || entityFunction == "vp">
        if(sid==null){
            //came from Save, use current item which is line 1 and only item
            ${vendorInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail=${vendorInvoiceEtcItemDetailsEntityName};
            if(itemOrderDetail !=null){
           <#if entityFunction=="sv">
            ///totalqty=totalqty.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            //jay check why qtytotal used in persistrunt
            qtyTotal=qtyTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
           <#else>
            totalmis=totalmis.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());

            <#if entityFunction =="vp">
             totalamountin=totalamountin.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());
            </#if>
             amountTotal=amountTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsLineTotalFieldName?cap_first}());
            totalqty=totalqty.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
           </#if>
           }
        }else{
         for (${vendorInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(sid,-1)) {
           //tempCount=tempCount+1;
           if(itemOrderDetail !=null){
           <#if entityFunction=="sv">
            ///totalqty=totalqty.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            //jay check why qtytotal used in persistrunt
            qtyTotal=qtyTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
           <#else>
            totalmis=totalmis.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            <#if entityFunction =="vp">
            amountTotal=amountTotal.add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin());
            totaltax1=totaltax1.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}());
            <#else>
             //total moved to outside loop to avoid double adding
            </#if>
            totalqty=totalqty.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
           </#if>
           }
         }
            amountTotal=amountTotal.add(totalbaseamt).add(totaldel).add(totalmis).add(totaltax1).add(totaltax2).add(totaltax3);
        }
         return "parentTotalsSet";
     <#elseif entityFunction == "eo">
        if(sid==null){
            //came from Save, use current item which is line 1 and only item
            ${employeeInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail=${employeeInvoiceEtcItemDetailsEntityName};
            totalmis=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax3FieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            amountTotal=amountTotal.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsLineTotalFieldName?cap_first}());
            totalqty=totalqty.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
        }else{
         for (${employeeInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(sid,-1)) {
           //tempCount=tempCount+1;
          /* already cumulative
            totalmis=totalmis.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=totaldel.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
          */
            //needs more sophisticated logic re shipping, also assumes last item has deliv/misc
            totalmis=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}());
            totaldel=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}());
            totaltax1=totaltax1.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax1FieldName?cap_first}());
            totaltax2=totaltax2.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax2FieldName?cap_first}());
            totaltax3=totaltax3.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsTax3FieldName?cap_first}());
            totalbaseamt=totalbaseamt.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}());
            amountTotal=(itemOrderDetail.get${employeeInvoiceEtcItemDetailsLineTotalFieldName?cap_first}().add(totaldel).add(totalmis).add(totaltax1).add(totaltax2).add(totaltax3));
            totalqty=totalqty.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            qtyTotal=qtyTotal.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
        }
       }

         return "parentTotalsSet";
     </#if> 

    }

    </#if>
    /**
    * used by xxEdit.xhtml for updating multiple items for master entities which have details, example order,invoice,glentries
    * mimics ItemHome updateProductsToOrder method (used for shopping cart) logic to handle multiItems
    *@see "addWithDetails used by xxEdit to add new, or update or add detail"
    *@see "updateProductsToOrder used by shopping cart add"
    *add logic to adjust invoice, payment details and paypal etc payment due ie either credit or adjust hold
    */
    public String updateDetailsAll() {
     // before this method is called, very 1st item (common use case) was already saved as detail via addWithDetails method 
     // and flag more was set
     // flow for more items via this method, is as follows
     // first update the current detail ie 2nd or later item and persist it, initialise lastitemline back to 0 and
     // set more to false. The details now has multiple items and user may have flagged one or more to be removed
     // or qty may have changed, so rechecks by looping through details ie lineitems,
     // if checked for remove then subtract qty from item and remove from order details. 
     // call cartpersist with param u for undo or remove which
     //  since no detail value for this will stay, dont call updatecdetails but call
     //  (1) showrunt 
     //  (2) persistrunt
     //  (3) remove() detail and make it null to avoid keet as dirty 
     //  (4) update order itself 
     // if not ckecked , then call ordersHome cartpersist with currentCartedPO detail sid,c as change option 
     // and tempCount (1 means first call)
     // cartPersist for c will get the detail  and call
     //  (1) update() parent which in turn updates details 
     //  (1.1) updatecdetails which updates the order detail qty based on itemTempQty (itemDetailsBrowse view has this)
     //  (1.2) showrunt which recalculates both details and order itself based on quantity or say tax value( a cart can be idle for days)
     //  (1.3) persistrunt which resets all the values for the order itself (detail values done in showrunt) using values calculated in showrunt
     //     each showrunt for a detail will recalculate both its own value and its master but persistrunt simply copies the variable values into properties
     //  (1.4) update() detail instance  
     //  (1.5) update order
     //  (1.6) extra logic added to avoid totals getting wrong
     //   updateParentFromDetails() which loops through all details and recalculates totals and updates parent instance
     //   not sure why the detail was superupdated again     
     // coming back from cartperist
     //  (6) adjust posting if invoice/payment by calling posting with net changes for baseamount etc
     // increment tempcount and go to top of loop
     //tempCount=this.getLastItemLine()-1; 
     Integer tempRemoveCount=0;
     String  currentCartedPO="";
     Integer currentCartedPOSID;

     <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || entityFunction == "sh" >
     //jay ${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}
     try{
        //jay add logic to return if status is closed
        // moreActive if coming from not exists ie not convert, add the new detail
        if(moreActive){
            //this is 2nd or more detail persist ie next item pressed followed by save/remove pressed
            updateCdetailsetValues();//misnomer ,creates 2nd and other details instance but not persist or totals
            showrunt();//set detail totals , parent totals will be done under loop
            if(!bcontinue){
             return "";
            }
            ${cuinvoiceEtcItemDetailsEntityName}Home.persist();//detail persist no detail or parent totals
            // later for loop takes care of parent totals
            <#if entityFunction == "ci" >
            //details persist does not post, so we need to do it somehow
            cuinvoicePosting();
            </#if>
            moreActive=false;
            checked.put(${cuinvoiceEtcItemDetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        setLastItemLine(new Integer(0)); // reset to 0 since it will loop through and recalculate by adding 1 to lastitemline
        qtyTotalNew = BigDecimal.ZERO;
        <#if entityFunction == "co">
         if (this.instance == null){
          //assume coming from checkout.xhtml
          this.setInstance(${itemEntityName}List.getCurrentCartOrder("cart").get(0));
         }
        </#if>
        tempCount=0;
        Integer sid=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
        if(sid==null || sid ==0){
         if(fpxxfq1a5xwwqqhxxxxxitemList==null || fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart") == null
          || fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart").get(0) ==null){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,"cannot get current cart order record #",""));
          return "";
 
         }
         sid=fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart").get(0).getA0xxuobxbxxxxxxxxxxxsid();
        }

        for (${cuinvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid(),-1)) {
             tempCount=tempCount+1;//reduce later if removed
             ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
             ${cuinvoiceEtcItemDetailsEntityName}Home.setInstance(itemOrderDetail);
             ${cuinvoiceEtcItemDetailsEntityName} = ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance();	

             Boolean b = checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid());

            if (b != null &&  checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;//allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             if (b !=null && checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and customer order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 //remove if no item 
                 if(itemOrderDetail.get${itemEntityName?cap_first}()==null){
                 }else{
                  ${itemEntityName}Home.clearInstance();
                  ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                  <#if (entityFunction != "sh") >
                   if(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty()==null){   
                    ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(BigDecimal.ZERO);
                   }  
                   ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
                  <#else>
                   ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyshipped()));
                  </#if>
                  ${itemEntityName}Home.allowUpdate();   
                 } 
                 <#if entityFunction == "ci" >
                 detailbaseamtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailLtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailMisO=itemOrderDetail.getZcxxzmxxavxxxxxxxxxxmiscchrg(); 
                 detailDelO=itemOrderDetail.getZbxxzlxxavxxxxxxxxxxdelivchrg(); 
                 detailTax1O=itemOrderDetail.getZdxxzxz1avxxxxxxxxxxtax1amt(); 
                 detailTax2O=itemOrderDetail.getZexxzxz2avxxxxxxxxxxtax2amt(); 
                 detailTax3O=itemOrderDetail.getZfxxzxz3avxxxxxxxxxxtax3amt(); 
                 </#if>

                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 this.cartpersist(currentCartedPOSID,"u",getLastItemLine(),itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 <#if entityFunction == "ci" >
                 if(bcontinue){
                  detailbaseamt=detailbaseamtO.negate();
                  detailLt=detailLtO.negate();
                  detailMis=detailMisO.negate();
                  detailDel=detailDelO.negate();
                  detailTax1=detailTax1O.negate();
                  detailTax2=detailTax2O.negate();
                  detailTax3=detailTax3O.negate();
                   cuinvoicePosting();
                 }
                 </#if>

                 tempRemoveCount=tempRemoveCount+1;
             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 <#if entityFunction == "ci" >
                 detailbaseamtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailLtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailMisO=itemOrderDetail.getZcxxzmxxavxxxxxxxxxxmiscchrg(); 
                 detailDelO=itemOrderDetail.getZbxxzlxxavxxxxxxxxxxdelivchrg(); 
                 detailTax1O=itemOrderDetail.getZdxxzxz1avxxxxxxxxxxtax1amt(); 
                 detailTax2O=itemOrderDetail.getZexxzxz2avxxxxxxxxxxtax2amt(); 
                 detailTax3O=itemOrderDetail.getZfxxzxz3avxxxxxxxxxxtax3amt(); 
                 qtyOrdO=qtyOrdPrev;
                 </#if>

                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 qtyTotalNew=qtyTotalNew.add(itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 <#if entityFunction == "ci" >
                 if(bcontinue){
                  //if no change to qty then do not change detailxx ampunts
                  if(qtyOrdO.compareTo(xoxxuq2a4xwwqqhxxxxxcuidetails.getZ3xxeqxxbvnxxxxxxxxxqtyordrd())!=0){ 
                   detailbaseamt=detailbaseamtO.negate().add(detailbaseamt);
                   detailLt=detailLtO.negate().add(detailLt);
                   detailMis=detailMisO.negate().add(detailMis);
                   detailDel=detailDelO.negate().add(detailDel);
                   detailTax1=detailTax1O.negate().add(detailTax1);
                   detailTax2=detailTax2O.negate().add(detailTax2);
                   detailTax3=detailTax3O.negate().add(detailTax3);
                   // if there is any change on amount total then only do posting otherwise unnecessary 0 amt posting
                   cuinvoicePosting();
                  }
                 }
                 </#if>
            }
            /// for each item, cartpersist C or U is called and totals are recalculted as follows
            /// cartpersist C calls superdotupdate (remove it), updateParentFromDetails (loops through
            /// each item adds to totals and end of loop updates the instance),
            ///showrunt (also adds to totals why duplicate? remove but fix updateParent logic re tax etc recalculate
            /// as done in showrunt )), update detail 
            ///
            /// cartpersist U ie remove simply sets the line # as -1 and then calls 
            /// updateParentFromDetails (loops through
            /// each item except line as -1, adds to totals and end of loop updates the instance 
            /// refresh Totals can be called any time and it calls showtempRunt(createcdetails,showrunt)
            /// createCDetails re-creates currentIe last  details only but does not persist, showrunt also
            /// adds the current ie lastitem to cleared totals. This is wrong since Totals start with zeroes
            /// instead of calling createCDetais and showRunt, change to createCdetails to take into any 
            /// change to qty etc for current and then call setParenrFromdetails which loops through but 
            /// but at the end does not update anything but display the what if values

                 //tempCount=tempCount+1; // applicable to both "c" and "u" 

        }
        //put recalculate logic here
        checked.clear(); // If necessary.
       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update details error "+e.getMessage()+", "+"use edit to check and update null values",""));

         bcontinue=false;
       }
     <#elseif entityFunction == "cp">
     try{
        if(moreActive){
            updateCdetailsetValues();
            ${cuinvoiceEtcItemDetailsEntityName}Home.persist();
            //details persist does not post, so we need to do it somehow
            showrunt();//calls setparentTotals
            if(!bcontinue){
             return "";
            }
            customerPaymentPosting();
            moreActive=false;
            checked.put(${cuinvoiceEtcItemDetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        this.instance.setZ1xxztprlxxxxxxxxxxxamounttotal(new BigDecimal("0.0")); //below loops thru all details and will add/subtract
        tempCount=0;
        for (${cuinvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid(),-1)) {
             tempCount=tempCount+1;//reduce later if removed
             ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
             ${cuinvoiceEtcItemDetailsEntityName}Home.setInstance(itemOrderDetail);
             ${cuinvoiceEtcItemDetailsEntityName} = ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance();	

             Boolean b = checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid());

            if (b != null &&  checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;// allready added, so reduce if remove 
               //remove fron cupdetails, but leave cpayment values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             if (b !=null && checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and customer order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 this.cartpersist(currentCartedPOSID,"u",getLastItemLine(),itemOrderDetail.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 

                 tempRemoveCount=tempRemoveCount+1;
             }

            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                  //this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(this.instance.getZ4xxzyqrlxxxxxxxxxxxqtyostndt().add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin()));
                  //this.superUpdate(); was causing loss of paytype, check for U above has same update

            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }

        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update products error "+e.getMessage(),""));

       }

     <#elseif entityFunction == "vq" || entityFunction == "vo" || entityFunction == "vi" || entityFunction == "sv">
     try{
        if(moreActive){
            //this is 2nd or more detail persist ie next item pressed followed by save/remove pressed
            updateVdetailsetValues();
            showrunt();//set detail totals , parent totals will be done under loop
            if(!bcontinue){
             return "";
            }
            ${vendorInvoiceEtcItemDetailsEntityName}Home.persist();
            <#if entityFunction == "vi" >
            //details persist does not post, so we need to do it somehow
            showrunt();
            if(!bcontinue){
             return "";
            }
            vendorInvoicePosting();
            </#if>
            moreActive=false;
            checked.put(${vendorInvoiceEtcItemDetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        setLastItemLine(new Integer(0)); // reset to 0 since it will loop through and recalculate by adding 1 to lastitemline
        qtyTotalNew = BigDecimal.ZERO;
        tempCount=0;
        for (${vendorInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid(),-1)) {
             tempCount=tempCount+1;//reduce later if removed
             ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();
             ${vendorInvoiceEtcItemDetailsEntityName}Home.setInstance(itemOrderDetail);
             ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance();	

             Boolean b = checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid());

            if (b != null &&  checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;//allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             if (b !=null && checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and customer order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 <#if (entityFunction != "sv") >
                  ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
                 <#else>
                  ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyshipped()));
                 </#if>
                 ${itemEntityName}Home.allowUpdate();    
                 <#if entityFunction == "vi" >
                 detailbaseamtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailLtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailMisO=itemOrderDetail.getZbxxzmxxavxxxxxxxxxxmiscchrg(); 
                 detailDelO=itemOrderDetail.getZaxxzlxxavxxxxxxxxxxdelivchrg(); 
                 detailTax1O=itemOrderDetail.getZcxxzxz1avxxxxxxxxxxtax1amt(); 
                 detailTax2O=itemOrderDetail.getZdxxzxz2avxxxxxxxxxxtax2amt(); 
                 detailTax3O=itemOrderDetail.getZexxzxz3avxxxxxxxxxxtax3amt(); 
                 </#if>

                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 this.cartpersist(currentCartedPOSID,"u",getLastItemLine(),itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 <#if entityFunction == "vi" >
                 if(bcontinue){
                  detailbaseamt=detailbaseamtO.negate();
                  detailLt=detailLtO.negate();
                  detailMis=detailMisO.negate();
                  detailDel=detailDelO.negate();
                  detailTax1=detailTax1O.negate();
                  detailTax2=detailTax2O.negate();
                  detailTax3=detailTax3O.negate();
                   vendorInvoicePosting();
                 }
                 </#if>

                 tempRemoveCount=tempRemoveCount+1;
             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 <#if entityFunction == "vi" >
                 detailbaseamtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailLtO=itemOrderDetail.getZbxxzbxxavxxxxxxxxxxbaseamount(); 
                 detailMisO=itemOrderDetail.getZbxxzmxxavxxxxxxxxxxmiscchrg(); 
                 detailDelO=itemOrderDetail.getZaxxzlxxavxxxxxxxxxxdelivchrg(); 
                 detailTax1O=itemOrderDetail.getZcxxzxz1avxxxxxxxxxxtax1amt(); 
                 detailTax2O=itemOrderDetail.getZdxxzxz2avxxxxxxxxxxtax2amt(); 
                 detailTax3O=itemOrderDetail.getZexxzxz3avxxxxxxxxxxtax3amt(); 
                 qtyOrdO=qtyOrdPrev;
                 </#if>

                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 qtyTotalNew=qtyTotalNew.add(itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());

                 <#if (entityFunction != "sv") >
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 <#else>
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyshipped());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 </#if>
                 <#if entityFunction == "vi" >
                 if(bcontinue){
                  // if no change to qty then do not change detailxx ampunts
                  if(qtyOrdO.compareTo(${vendorInvoiceEtcItemDetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyordrd())!=0){ 
                   detailbaseamt=detailbaseamtO.negate().add(detailbaseamt);
                   detailLt=detailLtO.negate().add(detailLt);
                   detailMis=detailMisO.negate().add(detailMis);
                   detailDel=detailDelO.negate().add(detailDel);
                   detailTax1=detailTax1O.negate().add(detailTax1);
                   detailTax2=detailTax2O.negate().add(detailTax2);
                   detailTax3=detailTax3O.negate().add(detailTax3);
                   // if there is any change on amount total then only do posting otherwise unnecessary 0 amt posting
                   vendorInvoicePosting();
                  }
                 }
                 </#if>



            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }
        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update details error "+e.getMessage(),""));

       }
     <#elseif entityFunction == "vp">
     try{
        if(moreActive){
            updateVdetailsetValues();
            ${vendpdetailsEntityName}Home.persist();
            // details persist does not post, so we need to do it somehow
            showrunt();
            if(!bcontinue){
             return "";
            }
            //persistrunt(); removed was affecting journal and not used in others
            vendorPaymentPosting();
            moreActive=false;
            checked.put(${vendpdetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        this.instance.setB3xxztprlxxxxxxxxxxxamounttotal(new BigDecimal("0.0")); //below loops thru all details and will add/subtract
        tempCount=0;//
        for (${vendorInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid(),-1)) {
             tempCount=tempCount+1;// reduce later if removed
             ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();
             ${vendorInvoiceEtcItemDetailsEntityName}Home.setInstance(itemOrderDetail);
             ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance();	

             Boolean b = checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid());

            if (b != null &&  checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;// allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             if (b !=null && checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and customer order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();

                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 this.cartpersist(currentCartedPOSID,"u",getLastItemLine(),itemOrderDetail.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 

                 tempRemoveCount=tempRemoveCount+1;
             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 <#if (entityFunction != "sv") >
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 <#else>
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyshipped());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
                 </#if>
                  //oct19this.instance.setB3xxztprlxxxxxxxxxxxamounttotal(this.instance.getB3xxztprlxxxxxxxxxxxamounttotal().add(itemOrderDetail.getZ6xxzxxxavxxxxxxxxxxamountin()));

            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }

        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update products error "+e.getMessage(),""));

       }

     <#elseif entityFunction == "eo" >
     try{
        if(moreActive){
            updateEdetailsetValues();
            showrunt();//set detail totals , parent totals will be done under loop
            if(!bcontinue){
             return "";
            }
            ${employeeInvoiceEtcItemDetailsEntityName}Home.persist();
            moreActive=false;
            checked.put(${employeeInvoiceEtcItemDetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        setLastItemLine(new Integer(0)); // reset to 0 since it will loop through and recalculate by adding 1 to lastitemline
        tempCount=0;//
        qtyTotalNew = BigDecimal.ZERO;
        for (${employeeInvoiceEtcItemDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityLessStatusDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid(),-1)) {
             tempCount=tempCount+1;// reduce later if removed
             ${employeeInvoiceEtcItemDetailsEntityName}Home.clearInstance();
             ${employeeInvoiceEtcItemDetailsEntityName}Home.setInstance(itemOrderDetail);
             ${employeeInvoiceEtcItemDetailsEntityName} = ${employeeInvoiceEtcItemDetailsEntityName}Home.getInstance();	

             Boolean b = checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid());

            if (b != null &&  checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;// allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             if (b !=null && checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and customer order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 <#if (entityFunction != "sh") >
                  ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
                 <#else>
                  ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyshipped()));
                 </#if>
                 ${itemEntityName}Home.allowUpdate();    
                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 this.cartpersist(currentCartedPOSID,"u",getLastItemLine(),itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 

                 tempRemoveCount=tempRemoveCount+1;
             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 qtyTotalNew=qtyTotalNew.add(itemOrderDetail.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
                 this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 if(!bcontinue){
                  //catch error message already given
                  return "";
                 } 
            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }

        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,"update details error "+e.getMessage(),""));

       }
     //jobassign 
     <#elseif menuAttributesp2 ="9A" && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
     try{
        if(moreActive){
            //this is 2nd or more detail persist ie next item pressed followed by save/remove pressed
            updateJAdetailsetValues();
            ${jobassignmentdetailsEntityName}Home.persist();
            moreActive=false;
            checked.put(${jobassignmentdetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        setLastItemLine(new Integer(0)); // reset to 0 since it will loop through and recalculate by adding 1 to lastitemline
        tempCount=0;//
        for (${jobassignmentdetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid())) {
             tempCount=tempCount+1;// reduce later if removed
            if (checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;// allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             ${jobassignmentdetailsEntityName}Home.clearInstance();
             if (checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                ${jobassignmentdetailsEntityName}Home.setInstance(itemOrderDetail);
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and vendor order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=${componentName}.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 ${itemEntityName}Home.allowUpdate();               
                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 //this.cartpersist(currentCartedPOSID,"u",tempCount,itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 tempRemoveCount=tempRemoveCount+1;
 

             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 //this.cartpersist(currentCartedPOSID,"c",tempCount,itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }
        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update details error "+e.getMessage(),""));

       }
     //schedule 
     <#elseif menuAttributesp2 ="89" >
     try{
        if(moreActive){
            //remove this for for schedule, one schedule one detail this is 2nd or more detail persist ie next item pressed followed by save/remove pressed
            updateSLdetailsetValues();
            ${scheduleDetailsEntityName}Home.persist();
            moreActive=false;
            checked.put(${scheduleDetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        setLastItemLine(new Integer(0)); // reset to 0 since it will loop through and recalculate by adding 1 to lastitemline
        tempCount=0;//
        for (${scheduleDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid())) {
             tempCount=tempCount+1;// reduce later if removed
            if (checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;// allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             ${scheduleDetailsEntityName}Home.clearInstance();
             if (checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                ${scheduleDetailsEntityName}Home.setInstance(itemOrderDetail);
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and vendor order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=${componentName}.getA0xxuobxbxxxxxxxxxxxsid();
                 //${itemEntityName}Home.clearInstance();
                 //${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 //${itemEntityName}Home.allowUpdate();               
                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 //this.cartpersist(currentCartedPOSID,"u",tempCount,itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 tempRemoveCount=tempRemoveCount+1;
 

             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 //this.cartpersist(currentCartedPOSID,"c",getLastItemLine(),itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }
        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update details error "+e.getMessage(),""));

       }

     <#elseif menuAttributesp2 ="65" >
     //
     try{
        if(moreActive){
            //this is 2nd or more detail persist ie next item pressed followed by save/remove pressed
            updateGdetailsetValues();
            ${gentriesDetailsEntityName}Home.persist();
            moreActive=false;
            checked.put(${gentriesDetailsEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),false);
        }
        ${componentName?cap_first} ${componentName}=null;
        setLastItemLine(new Integer(0)); // reset to 0 since it will loop through and recalculate by adding 1 to lastitemline
        tempCount=0;//
        for (${gentriesDetailsEntityName?cap_first} itemOrderDetail : ${listName}.entityDetailedList(this.instance.getA0xxuobxbxxxxxxxxxxxsid())) {
             tempCount=tempCount+1;// reduce later if removed
            if (checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                tempCount=tempCount-1;// allready added, so reduce if remove 
               //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
               // wrong what if only one detail and removed ???
             ${gentriesDetailsEntityName}Home.clearInstance();
             if (checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
                ${gentriesDetailsEntityName}Home.setInstance(itemOrderDetail);
                ${gentriesDetailsEntityName}=${gentriesDetailsEntityName}Home.getInstance();
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and vendor order total need to be adjusted
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=${componentName}.getA0xxuobxbxxxxxxxxxxxsid();
/*
may need to put account update here check gUpdate
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(itemOrderDetail.get${itemEntityName?cap_first}());
                 ${itemEntityName}Home.allowUpdate();    
*/        
///copied from updategadetail
                if (${accountEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			bcontinue = false;
                        return "";
                } 
              // update account being used now in gldetails
              ${gentriesDetailsEntityName}.set${accountEntityName?cap_first}(${accountEntityName});

           if(this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt() == null ){
            this.instance.setC4xxzxxxbvxxtxxxxxxxtdebitamt(new BigDecimal("0.0"));
           }
           if(this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt() == null ){
            this.instance.setC5xxzxxxbvxxxxxxxxxxtcreditamt(new BigDecimal("0.0"));
           }
           amountTotal=this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt();
           this.instance.setC4xxzxxxbvxxtxxxxxxxtdebitamt(amountTotal.add(${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt()));
           amountTotal=this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt();
           this.instance.setC5xxzxxxbvxxxxxxxxxxtcreditamt(amountTotal.add(${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt()));
           this.instance.setB5xxcxxrlxxxxxxxxxxxpostdate(currbusdate);
           if(this.instance.get${perioddatesEntityName?cap_first}() == null &&  acperiod != null ){
            //get perioddates record for current acperiod
           
       	 try {
			${perioddatesEntityName} = (${perioddatesEntityName?cap_first}) entityManager
			.createQuery(
					"select cc from ${perioddatesEntityName?cap_first} where cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 and cc.a0xxukwpbv47xxxxxxxxperiod =:period ")
					.setParameter("period", acperiod.getA1xxuxwpbv47xxxxxxxxcurrperiod())
					.setParameter("owner2", owner2Code)
					.getSingleResult();

		 } catch (NoResultException nre) {
					// end of fiscal year or bad division dates
					bcontinue = false;
					return "";
		 }
            
            this.instance.set${perioddatesEntityName?cap_first}(${perioddatesEntityName});
           }
           if (!(${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt().compareTo(BigDecimal.ZERO)==0)){
            accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
            postingAmount=${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt();
            if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("L") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("Q") 
             || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("I")){
             postingAmount=postingAmount.negate(); // for L or Q or I debit means -ve value           
            }
		 updateAccount();
           }
           if (!(${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt().compareTo(BigDecimal.ZERO)==0)){
            accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
            postingAmount=${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt();
            if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("E")){
             postingAmount=postingAmount.negate(); // for A or E credit means -ve value   
            }       
		 updateAccount();
           }

///end of copy   
                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 tempRemoveCount=tempRemoveCount+1;
 

             }
            }else{
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${componentName}=itemOrderDetail.get${componentName?cap_first}();
                 this.setInstance(${componentName});
                 currentCartedPOSID=itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid();
                 // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 //this.cartpersist(currentCartedPOSID,"c",tempCount,itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
            }
                 //tempCount=tempCount+1; // applicable to both "c" and "u" 
        }
        /// line should not be overwritten anymore, updateparent can do this plus line value -1 is used for remove
        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"update details error "+e.getMessage(),""));

       }



     </#if>
      <#if (entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci" || entityFunction=="cp" ||  entityFunction=="sh"
       || entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" ||  entityFunction=="sv"
       || entityFunction=="eo")> 
       nextShow=false;
       lastItemLine=tempCount;// check other counters like currentdet line rtc and remove
     </#if>
       return "update";
    }



    <#if menuAttributesp2 == "1S"  &&  seatEntityName??>
        /***
        */
	public String assign(String location,String row,String seat,String status,String name,String ticket,String order) {
         //this method is called via seatList -> seatAllocateEdit or via cpaymentList or POS (tbd) ->seatAllocateEdit
         //If from seatList it knows location, seatrow but keysin seat#,seat Assign, customer,ticket and PO in seatAllocateEdit
         //if from cpaymentList it knows customer and PO but keys in location,row, seat,seat Assign,ticket in seatAllocateEdit
         String beforeSt=""; 
         ${seatEntityName?cap_first} seatI=null;
         seatI=this.getInstance();
         fxxxcq144xwwqqhxxxxxlocation=fxxxcq144xwwqqhxxxxxlocationHome.getDefinedInstance();
         if ( fxxxcq144xwwqqhxxxxxlocation!=null ){
          seatI.setFxxxcq144xwwqqhxxxxxlocation(fxxxcq144xwwqqhxxxxxlocation);
         }
         
         // look into using reflection as in importcsv logic for property names
               switch(this.getMailingText5()){
                case "001":
                 beforeSt=seatI.getB1xxxxxxbvxxxxxxxxxxseat001status();
                 seatI.setB1xxxxxxbvxxxxxxxxxxseat001status(status);
                 seatI.setB2xxxxxxbvxxxxxxxxxxname001(name);
                 seatI.setB3xxxxxxbvxxxxxxxxxxticket001(ticket);
                 seatI.setB4xxxxxxbvxxxxxxxxxxpo001(order);
                 break;
                case "002":
                 beforeSt=seatI.getB5xxxxxxbvxxxxxxxxxxseat002status();
                 seatI.setB5xxxxxxbvxxxxxxxxxxseat002status(status);
                 seatI.setB6xxxxxxbvxxxxxxxxxxname002(name);
                 seatI.setB7xxxxxxbvxxxxxxxxxxticket002(ticket);
                 seatI.setB8xxxxxxbvxxxxxxxxxxpo002(order);
                 break;
                case "003":
                 beforeSt=seatI.getB9xxxxxxbvxxxxxxxxxxseat003status();
                 seatI.setB9xxxxxxbvxxxxxxxxxxseat003status(status);
                 seatI.setBaxxxxxxbvxxxxxxxxxxname003(name);
                 seatI.setBbxxxxxxbvxxxxxxxxxxticket003(ticket);
                 seatI.setBcxxxxxxbvxxxxxxxxxxpo003(order);
                 break;
                case "004":
                 beforeSt=seatI.getBdxxxxxxbvxxxxxxxxxxseat004status();
                 seatI.setBdxxxxxxbvxxxxxxxxxxseat004status(status);
                 seatI.setBexxxxxxbvxxxxxxxxxxname004(name);
                 seatI.setBfxxxxxxbvxxxxxxxxxxticket004(ticket);
                 seatI.setBgxxxxxxbvxxxxxxxxxxpo004(order);
                 break;
                case "005":
                 beforeSt=seatI.getBhxxxxxxbvxxxxxxxxxxseat005status();
                 seatI.setBhxxxxxxbvxxxxxxxxxxseat005status(status);
                 seatI.setBixxxxxxbvxxxxxxxxxxname005(name);
                 seatI.setBjxxxxxxbvxxxxxxxxxxticket005(ticket);
                 seatI.setBkxxxxxxbvxxxxxxxxxxpo005(order);
                 break;
                case "006":
                 beforeSt=seatI.getBlxxxxxxbvxxxxxxxxxxseat006status();
                 seatI.setBlxxxxxxbvxxxxxxxxxxseat006status(status);
                 seatI.setBmxxxxxxbvxxxxxxxxxxname006(name);
                 seatI.setBnxxxxxxbvxxxxxxxxxxticket006(ticket);
                 seatI.setBoxxxxxxbvxxxxxxxxxxpo006(order);
                 break;
                case "007":
                 beforeSt=seatI.getBpxxxxxxbvxxxxxxxxxxseat007status();
                 seatI.setBpxxxxxxbvxxxxxxxxxxseat007status(status);
                 seatI.setBqxxxxxxbvxxxxxxxxxxname007(name);
                 seatI.setBrxxxxxxbvxxxxxxxxxxticket007(ticket);
                 seatI.setBsxxxxxxbvxxxxxxxxxxpo007(order);
                 break;
                case "008":
                 beforeSt=seatI.getBtxxxxxxbvxxxxxxxxxxseat008status();
                 seatI.setBtxxxxxxbvxxxxxxxxxxseat008status(status);
                 seatI.setBuxxxxxxbvxxxxxxxxxxname008(name);
                 seatI.setBvxxxxxxbvxxxxxxxxxxticket008(ticket);
                 seatI.setBwxxxxxxbvxxxxxxxxxxpo008(order);
                 break;
                case "009":
                 beforeSt=seatI.getBxxxxxxxbvxxxxxxxxxxseat009status();
                 seatI.setBxxxxxxxbvxxxxxxxxxxseat009status(status);
                 seatI.setByxxxxxxbvxxxxxxxxxxname009(name);
                 seatI.setBzxxxxxxbvxxxxxxxxxxticket009(ticket);
                 seatI.setC1xxxxxxbvxxxxxxxxxxpo009(order);
                 break;
                case "010":
                 beforeSt=seatI.getC2xxxxxxbvxxxxxxxxxxseat010status();
                 seatI.setC2xxxxxxbvxxxxxxxxxxseat010status(status);
                 seatI.setC3xxxxxxbvxxxxxxxxxxname010(name);
                 seatI.setC4xxxxxxbvxxxxxxxxxxticket010(ticket);
                 seatI.setC5xxxxxxbvxxxxxxxxxxpo010(order);
                 break;
                case "011":
                 beforeSt=seatI.getC6xxxxxxbvxxxxxxxxxxseat011status();
                 seatI.setC6xxxxxxbvxxxxxxxxxxseat011status(status);
                 seatI.setC7xxxxxxbvxxxxxxxxxxname011(name);
                 seatI.setC8xxxxxxbvxxxxxxxxxxticket011(ticket);
                 seatI.setC9xxxxxxbvxxxxxxxxxxpo011(order);
                 break;
                case "012":
                 beforeSt=seatI.getCaxxxxxxbvxxxxxxxxxxseat012status();
                 seatI.setCaxxxxxxbvxxxxxxxxxxseat012status(status);
                 seatI.setCbxxxxxxbvxxxxxxxxxxname012(name);
                 seatI.setCcxxxxxxbvxxxxxxxxxxticket012(ticket);
                 seatI.setCdxxxxxxbvxxxxxxxxxxpo012(order);
                 break;
                case "013":
                 beforeSt=seatI.getCexxxxxxbvxxxxxxxxxxseat013status();
                 seatI.setCexxxxxxbvxxxxxxxxxxseat013status(status);
                 seatI.setCfxxxxxxbvxxxxxxxxxxname013(name);
                 seatI.setCgxxxxxxbvxxxxxxxxxxticket013(ticket);
                 seatI.setChxxxxxxbvxxxxxxxxxxpo013(order);
                 break;
                case "014":
                 beforeSt=seatI.getCixxxxxxbvxxxxxxxxxxseat014status();
                 seatI.setCixxxxxxbvxxxxxxxxxxseat014status(status);
                 seatI.setCjxxxxxxbvxxxxxxxxxxname014(name);
                 seatI.setCkxxxxxxbvxxxxxxxxxxticket014(ticket);
                 seatI.setClxxxxxxbvxxxxxxxxxxpo014(order);
                 break;
                case "015":
                 beforeSt=seatI.getCmxxxxxxbvxxxxxxxxxxseat015status();
                 seatI.setCmxxxxxxbvxxxxxxxxxxseat015status(status);
                 seatI.setCnxxxxxxbvxxxxxxxxxxname015(name);
                 seatI.setCoxxxxxxbvxxxxxxxxxxticket015(ticket);
                 seatI.setCpxxxxxxbvxxxxxxxxxxpo015(order);
                 break;
                case "016":
                 beforeSt=seatI.getCqxxxxxxbvxxxxxxxxxxseat016status();
                 seatI.setCqxxxxxxbvxxxxxxxxxxseat016status(status);
                 seatI.setCrxxxxxxbvxxxxxxxxxxname016(name);
                 seatI.setCsxxxxxxbvxxxxxxxxxxticket016(ticket);
                 seatI.setCtxxxxxxbvxxxxxxxxxxpo016(order);
                 break;
                case "017":
                 beforeSt=seatI.getCuxxxxxxbvxxxxxxxxxxseat017status();
                 seatI.setCuxxxxxxbvxxxxxxxxxxseat017status(status);
                 seatI.setCvxxxxxxbvxxxxxxxxxxname017(name);
                 seatI.setCxxxxxxxbvxxxxxxxxxxticket017(ticket);
                 seatI.setCyxxxxxxbvxxxxxxxxxxpo017(order);
                 break;
                case "018":
                 beforeSt=seatI.getDaxxxxxxbvxxxxxxxxxxseat018status();
                 seatI.setDaxxxxxxbvxxxxxxxxxxseat018status(status);
                 seatI.setDbxxxxxxbvxxxxxxxxxxname018(name);
                 seatI.setDcxxxxxxbvxxxxxxxxxxticket018(ticket);
                 seatI.setDdxxxxxxbvxxxxxxxxxxpo018(order);
                 break;
                case "019":
                 beforeSt=seatI.getDexxxxxxbvxxxxxxxxxxseat019status();
                 seatI.setDexxxxxxbvxxxxxxxxxxseat019status(status);
                 seatI.setDfxxxxxxbvxxxxxxxxxxname019(name);
                 seatI.setDgxxxxxxbvxxxxxxxxxxticket019(ticket);
                 seatI.setDhxxxxxxbvxxxxxxxxxxpo019(order);
                 break;
                case "020":
                 beforeSt=seatI.getDixxxxxxbvxxxxxxxxxxseat020status();
                 seatI.setDixxxxxxbvxxxxxxxxxxseat020status(status);
                 seatI.setDjxxxxxxbvxxxxxxxxxxname020(name);
                 seatI.setDkxxxxxxbvxxxxxxxxxxticket020(ticket);
                 seatI.setDlxxxxxxbvxxxxxxxxxxpo020(order);
                 break;
                case "021":
                 beforeSt=seatI.getDmxxxxxxbvxxxxxxxxxxseat021status();
                 seatI.setDmxxxxxxbvxxxxxxxxxxseat021status(status);
                 seatI.setDnxxxxxxbvxxxxxxxxxxname021(name);
                 seatI.setDoxxxxxxbvxxxxxxxxxxticket021(ticket);
                 seatI.setDpxxxxxxbvxxxxxxxxxxpo021(order);
                 break;
                case "022":
                 beforeSt=seatI.getDqxxxxxxbvxxxxxxxxxxseat022status();
                 seatI.setDqxxxxxxbvxxxxxxxxxxseat022status(status);
                 seatI.setDrxxxxxxbvxxxxxxxxxxname022(name);
                 seatI.setDsxxxxxxbvxxxxxxxxxxticket022(ticket);
                 seatI.setDtxxxxxxbvxxxxxxxxxxpo022(order);
                 break;
                case "023":
                 beforeSt=seatI.getDuxxxxxxbvxxxxxxxxxxseat023status();
                 seatI.setDuxxxxxxbvxxxxxxxxxxseat023status(status);
                 seatI.setDvxxxxxxbvxxxxxxxxxxname023(name);
                 seatI.setDwxxxxxxbvxxxxxxxxxxticket023(ticket);
                 seatI.setDxxxxxxxbvxxxxxxxxxxpo023(order);
                 break;
                case "024":
                 beforeSt=seatI.getE1xxxxxxbvxxxxxxxxxxseat024status();
                 seatI.setE1xxxxxxbvxxxxxxxxxxseat024status(status);
                 seatI.setE2xxxxxxbvxxxxxxxxxxname024(name);
                 seatI.setE3xxxxxxbvxxxxxxxxxxticket024(ticket);
                 seatI.setE4xxxxxxbvxxxxxxxxxxpo024(order);
                 break;
                case "025":
                 beforeSt=seatI.getEaxxxxxxbvxxxxxxxxxxseat025status();
                 seatI.setEaxxxxxxbvxxxxxxxxxxseat025status(status);
                 seatI.setEbxxxxxxbvxxxxxxxxxxname025(name);
                 seatI.setEcxxxxxxbvxxxxxxxxxxticket025(ticket);
                 seatI.setEdxxxxxxbvxxxxxxxxxxpo025(order);
                 break;
                case "026":
                 beforeSt=seatI.getEfxxxxxxbvxxxxxxxxxxseat026status();
                 seatI.setEfxxxxxxbvxxxxxxxxxxseat026status(status);
                 seatI.setEgxxxxxxbvxxxxxxxxxxname026(name);
                 seatI.setEhxxxxxxbvxxxxxxxxxxticket026(ticket);
                 seatI.setEixxxxxxbvxxxxxxxxxxpo026(order);
                 break;
                case "027":
                 beforeSt=seatI.getEjxxxxxxbvxxxxxxxxxxseat027status();
                 seatI.setEjxxxxxxbvxxxxxxxxxxseat027status(status);
                 seatI.setEkxxxxxxbvxxxxxxxxxxname027(name);
                 seatI.setElxxxxxxbvxxxxxxxxxxticket027(ticket);
                 seatI.setEmxxxxxxbvxxxxxxxxxxpo027(order);
                 break;
                case "028":
                 beforeSt=seatI.getEnxxxxxxbvxxxxxxxxxxseat028status();
                 seatI.setEnxxxxxxbvxxxxxxxxxxseat028status(status);
                 seatI.setEoxxxxxxbvxxxxxxxxxxname028(name);
                 seatI.setEpxxxxxxbvxxxxxxxxxxticket028(ticket);
                 seatI.setEqxxxxxxbvxxxxxxxxxxpo028(order);
                 break;
                case "029":
                 beforeSt=seatI.getErxxxxxxbvxxxxxxxxxxseat029status();
                 seatI.setErxxxxxxbvxxxxxxxxxxseat029status(status);
                 seatI.setEsxxxxxxbvxxxxxxxxxxname029(name);
                 seatI.setEtxxxxxxbvxxxxxxxxxxticket029(ticket);
                 seatI.setEuxxxxxxbvxxxxxxxxxxpo029(order);
                 break;
                case "030":
                 beforeSt=seatI.getEvxxxxxxbvxxxxxxxxxxseat030status();
                 seatI.setEvxxxxxxbvxxxxxxxxxxseat030status(status);
                 seatI.setEwxxxxxxbvxxxxxxxxxxname030(name);
                 seatI.setExxxxxxxbvxxxxxxxxxxticket030(ticket);
                 seatI.setEyxxxxxxbvxxxxxxxxxxpo030(order);
                 break;
                case "031":
                 beforeSt=seatI.getFaxxxxxxbvxxxxxxxxxxseat031status();
                 seatI.setFaxxxxxxbvxxxxxxxxxxseat031status(status);
                 seatI.setFbxxxxxxbvxxxxxxxxxxname031(name);
                 seatI.setFcxxxxxxbvxxxxxxxxxxticket031(ticket);
                 seatI.setFdxxxxxxbvxxxxxxxxxxpo031(order);
                 break;
                case "032":
                 beforeSt=seatI.getFexxxxxxbvxxxxxxxxxxseat032status();
                 seatI.setFexxxxxxbvxxxxxxxxxxseat032status(status);
                 seatI.setFfxxxxxxbvxxxxxxxxxxname032(name);
                 seatI.setFgxxxxxxbvxxxxxxxxxxticket032(ticket);
                 seatI.setFhxxxxxxbvxxxxxxxxxxpo032(order);
                 break;
                case "033":
                 beforeSt=seatI.getFixxxxxxbvxxxxxxxxxxseat033status();
                 seatI.setFixxxxxxbvxxxxxxxxxxseat033status(status);
                 seatI.setFjxxxxxxbvxxxxxxxxxxname033(name);
                 seatI.setFkxxxxxxbvxxxxxxxxxxticket033(ticket);
                 seatI.setFlxxxxxxbvxxxxxxxxxxpo033(order);
                 break;
                case "034":
                 beforeSt=seatI.getFmxxxxxxbvxxxxxxxxxxseat034status();
                 seatI.setFmxxxxxxbvxxxxxxxxxxseat034status(status);
                 seatI.setFnxxxxxxbvxxxxxxxxxxname034(name);
                 seatI.setFoxxxxxxbvxxxxxxxxxxticket034(ticket);
                 seatI.setFpxxxxxxbvxxxxxxxxxxpo034(order);
                 break;
                case "035":
                 beforeSt=seatI.getFqxxxxxxbvxxxxxxxxxxseat035status();
                 seatI.setFqxxxxxxbvxxxxxxxxxxseat035status(status);
                 seatI.setFrxxxxxxbvxxxxxxxxxxname035(name);
                 seatI.setFsxxxxxxbvxxxxxxxxxxticket035(ticket);
                 seatI.setFtxxxxxxbvxxxxxxxxxxpo035(order);
                 break;
                case "036":
                 beforeSt=seatI.getFuxxxxxxbvxxxxxxxxxxseat036status();
                 seatI.setFuxxxxxxbvxxxxxxxxxxseat036status(status);
                 seatI.setFvxxxxxxbvxxxxxxxxxxname036(name);
                 seatI.setFwxxxxxxbvxxxxxxxxxxticket036(ticket);
                 seatI.setFxxxxxxxbvxxxxxxxxxxpo036(order);
                 break;
                case "037":
                 beforeSt=seatI.getGaxxxxxxbvxxxxxxxxxxseat037status();
                 seatI.setGaxxxxxxbvxxxxxxxxxxseat037status(status);
                 seatI.setGbxxxxxxbvxxxxxxxxxxname037(name);
                 seatI.setGcxxxxxxbvxxxxxxxxxxticket037(ticket);
                 seatI.setGdxxxxxxbvxxxxxxxxxxpo037(order);
                 break;
                case "038":
                 beforeSt=seatI.getGexxxxxxbvxxxxxxxxxxseat038status();
                 seatI.setGexxxxxxbvxxxxxxxxxxseat038status(status);
                 seatI.setGfxxxxxxbvxxxxxxxxxxname038(name);
                 seatI.setGgxxxxxxbvxxxxxxxxxxticket038(ticket);
                 seatI.setGhxxxxxxbvxxxxxxxxxxpo038(order);
                 break;
                case "039":
                 beforeSt=seatI.getGixxxxxxbvxxxxxxxxxxseat039status();
                 seatI.setGixxxxxxbvxxxxxxxxxxseat039status(status);
                 seatI.setGjxxxxxxbvxxxxxxxxxxname039(name);
                 seatI.setGkxxxxxxbvxxxxxxxxxxticket039(ticket);
                 seatI.setGlxxxxxxbvxxxxxxxxxxpo039(order);
                 break;
                case "040":
                 beforeSt=seatI.getGmxxxxxxbvxxxxxxxxxxseat040status();
                 seatI.setGmxxxxxxbvxxxxxxxxxxseat040status(status);
                 seatI.setGnxxxxxxbvxxxxxxxxxxname040(name);
                 seatI.setGoxxxxxxbvxxxxxxxxxxticket040(ticket);
                 seatI.setGpxxxxxxbvxxxxxxxxxxpo040(order);
                 break;
                case "041":
                 beforeSt=seatI.getGqxxxxxxbvxxxxxxxxxxseat041status();
                 seatI.setGqxxxxxxbvxxxxxxxxxxseat041status(status);
                 seatI.setGrxxxxxxbvxxxxxxxxxxname041(name);
                 seatI.setGsxxxxxxbvxxxxxxxxxxticket041(ticket);
                 seatI.setGtxxxxxxbvxxxxxxxxxxpo041(order);
                 break;
                case "042":
                 beforeSt=seatI.getGuxxxxxxbvxxxxxxxxxxseat042status();
                 seatI.setGuxxxxxxbvxxxxxxxxxxseat042status(status);
                 seatI.setGvxxxxxxbvxxxxxxxxxxname042(name);
                 seatI.setGwxxxxxxbvxxxxxxxxxxticket042(ticket);
                 seatI.setGxxxxxxxbvxxxxxxxxxxpo042(order);
                 break;
                case "043":
                 beforeSt=seatI.getHaxxxxxxbvxxxxxxxxxxseat043status();
                 seatI.setHaxxxxxxbvxxxxxxxxxxseat043status(status);
                 seatI.setHbxxxxxxbvxxxxxxxxxxname043(name);
                 seatI.setHcxxxxxxbvxxxxxxxxxxticket043(ticket);
                 seatI.setHdxxxxxxbvxxxxxxxxxxpo043(order);
                 break;
                case "044":
                 beforeSt=seatI.getHexxxxxxbvxxxxxxxxxxseat044status();
                 seatI.setHexxxxxxbvxxxxxxxxxxseat044status(status);
                 seatI.setHfxxxxxxbvxxxxxxxxxxname044(name);
                 seatI.setHgxxxxxxbvxxxxxxxxxxticket044(ticket);
                 seatI.setHhxxxxxxbvxxxxxxxxxxpo044(order);
                 break;
                case "045":
                 beforeSt=seatI.getHixxxxxxbvxxxxxxxxxxseat045status();
                 seatI.setHixxxxxxbvxxxxxxxxxxseat045status(status);
                 seatI.setHjxxxxxxbvxxxxxxxxxxname045(name);
                 seatI.setHkxxxxxxbvxxxxxxxxxxticket045(ticket);
                 seatI.setHlxxxxxxbvxxxxxxxxxxpo045(order);
                 break;
                case "046":
                 beforeSt=seatI.getHmxxxxxxbvxxxxxxxxxxseat046status();
                 seatI.setHmxxxxxxbvxxxxxxxxxxseat046status(status);
                 seatI.setHnxxxxxxbvxxxxxxxxxxname046(name);
                 seatI.setHoxxxxxxbvxxxxxxxxxxticket046(ticket);
                 seatI.setHpxxxxxxbvxxxxxxxxxxpo046(order);
                 break;
                case "047":
                 beforeSt=seatI.getHqxxxxxxbvxxxxxxxxxxseat047status();
                 seatI.setHqxxxxxxbvxxxxxxxxxxseat047status(status);
                 seatI.setHrxxxxxxbvxxxxxxxxxxname047(name);
                 seatI.setHsxxxxxxbvxxxxxxxxxxticket047(ticket);
                 seatI.setHtxxxxxxbvxxxxxxxxxxpo047(order);
                 break;
                case "048":
                 beforeSt=seatI.getHuxxxxxxbvxxxxxxxxxxseat048status();
                 seatI.setHuxxxxxxbvxxxxxxxxxxseat048status(status);
                 seatI.setHvxxxxxxbvxxxxxxxxxxname048(name);
                 seatI.setHwxxxxxxbvxxxxxxxxxxticket048(ticket);
                 seatI.setHxxxxxxxbvxxxxxxxxxxpo048(order);
                 break;
                case "049":
                 beforeSt=seatI.getIaxxxxxxbvxxxxxxxxxxseat049status();
                 seatI.setIaxxxxxxbvxxxxxxxxxxseat049status(status);
                 seatI.setIbxxxxxxbvxxxxxxxxxxname049(name);
                 seatI.setIcxxxxxxbvxxxxxxxxxxticket049(ticket);
                 seatI.setIdxxxxxxbvxxxxxxxxxxpo049(order);
                 break;
                case "050":
                 beforeSt=seatI.getIexxxxxxbvxxxxxxxxxxseat050status();
                 seatI.setIexxxxxxbvxxxxxxxxxxseat050status(status);
                 seatI.setIfxxxxxxbvxxxxxxxxxxname050(name);
                 seatI.setIgxxxxxxbvxxxxxxxxxxticket050(ticket);
                 seatI.setIhxxxxxxbvxxxxxxxxxxpo050(order);
                 break;
               }
               this.setInstance(seatI);
               this.superdotupdate();
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("row")+" "+row+" "+bundle.getString("seat")+" "+seat+" , "+bundle.getString("before")+" "+bundle.getString("update")+": "+beforeSt,""));
               timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("after")+" "+bundle.getString("update")+": "+status+" "+bundle.getString("at")+" "+timeStamp,""));

         
  	 return "";
	}
	public String reAssign(String location,String row,String seat,String status,String name,String ticket,String order) {
                
	 return "";
	}
    </#if>

    <#if menuAttributesp2 == "5B" >
         /**** below command will invoke method to copy clobdata into import table and return importMappingEdit.wflow
          to display import rows. first row/all rows will have edit button to select entity column name and replace
          truefalse has logic to get entity column names
         ***/
	//@Inject
	//${componentName?cap_first}Home ${componentName}Home;
        // we need to import all pojos which are candiate import, we may need to filter out classnames
	@Inject
	${clobdataEntityName?cap_first}Home ${clobdataEntityName}Home;
	private ${clobdataEntityName?cap_first} ${clobdataEntityName};
	@Inject
	${clobdataEntityName?cap_first}List ${clobdataEntityName}List;
	@Inject
	${truefalseEntityName?cap_first}List ${truefalseEntityName}List;
	@Inject
	${divisionEntityName?cap_first}Home ${divisionEntityName}Home;
	@Inject
	${customerEntityName?cap_first}Home ${customerEntityName}Home;
	@Inject
	${vendorEntityName?cap_first}Home ${vendorEntityName}Home;
	@Inject
	${employeeEntityName?cap_first}Home ${employeeEntityName}Home;

        private ${componentName?cap_first} ${componentName};
        private String propSet="N";
        private String delimeterBy="C";
        private String enclosedBy="D";
        private String lineBy="N";
        private String keyBy="N";
        private String descriptionBy="N";
        private String titleBy="N";
        private String lastfirstBy="LF";
        private String companyBy="N";
        private String ophoneBy="Y";
        private String hphoneBy="N";
        private String cphoneBy="Y";
        private String emailBy="Y";
        private String typeBy="N";
        private String skipRecordOne="N";

        public String getImportSet() {
         return propSet;
        }
        public void setImportSet(String propSet) { 
         this.propSet = propSet;
        }
        public String getDelimeterBy() {
         return delimeterBy;
        }
        public void setDelimeterBy(String delimeterBy) { 
         this.delimeterBy = delimeterBy;
        }

        public String getEnclosedBy() {
         return enclosedBy;
        }
        public void setEnclosedBy(String enclosedBy) { 
         this.enclosedBy = enclosedBy;
        }

        public String getLineBy() {
         return lineBy;
        }
        public void setLineBy(String lineBy) { 
         this.lineBy = lineBy;
        }
     
        public String getKeyBy() {
         return keyBy;
        }
        public void setKeyBy(String keyBy) { 
         this.keyBy = keyBy;
        }
        public String getDescriptionBy() {
         return descriptionBy;
        }
        public void setDescriptionBy(String descriptionBy) { 
         this.descriptionBy = descriptionBy;
        }
        public String getTitleBy() {
         return titleBy;
        }
        public void setTitleBy(String titleBy) { 
         this.titleBy = titleBy;
        }
        public String getLastfirstBy() {
         return lastfirstBy;
        }
        public void setLastfirstBy(String lastfirstBy) { 
         this.lastfirstBy = lastfirstBy;
        }
        public String getCompanyBy() {
         return companyBy;
        }
        public void setCompanyBy(String companyBy) { 
         this.companyBy = companyBy;
        }
        public String getOphoneBy() {
         return ophoneBy;
        }
        public void setOphoneBy(String ophoneBy) { 
         this.ophoneBy = ophoneBy;
        }
        public String getHphoneBy() {
         return hphoneBy;
        }
        public void setHphoneBy(String hphoneBy) { 
         this.hphoneBy = hphoneBy;
        }
        public String getCphoneBy() {
         return cphoneBy;
        }

        public void setCphoneBy(String cphoneBy) { 
         this.cphoneBy = cphoneBy;
        }
        public String getEmailBy() {
         return emailBy;
        }
        public void setEmailBy(String emailBy) { 
         this.emailBy = emailBy;
        }

        public String getTypeBy() {
         return typeBy;
        }
        public void setTypeBy(String typeBy) { 
         this.typeBy = typeBy;
        }
        public String getSkipRecordOne() {
         return skipRecordOne;
        }
        public void setSkipRecordOne(String skipRecordOne) { 
         this.skipRecordOne = skipRecordOne;
        }


	public String mapRow00ToProperty(String columnV) {
         //called by columnMappingEdit (save column mapping)
         //update importcsv row 00,999 columns. wire() method has loaded the current instance for selected tablnm 
                ${importcsvEntityName?cap_first} cc1=null;                
                try{
		 cc1 = (${importcsvEntityName?cap_first}) entityManager.createQuery("select cc from ${importcsvEntityName?cap_first} cc where cc.a2xxukcxbvxxxxxxxxxxrow = :rowN AND cc.a1xxuxhrbvoxxxxxxxxxtablenm = :tablenm AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		  .setParameter("tablenm", this.instance.getA1xxuxhrbvoxxxxxxxxxtablenm()).setParameter("rowN", "00").setParameter("owner2", owner2Code).getSingleResult();
                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Query")+" "+ bundle.getString("failed")+", "+bundle.getString("table")+" "+this.instance.getA1xxuxhrbvoxxxxxxxxxtablenm()+" "+ bundle.getString("row")+" "+"00"+" "+e.getMessage(),""));
                 return "";
                }
                String propName=null;
                try{   
                  this.setInstance(cc1);  
                  //use reflection based beanutils method getProprtyName(columnName) for dynamic setter
                  String fColNm= "column"+columnV;//fcolumnNm is lastName and propName is B2xxxxx..lastname  
                  propName=${truefalseEntityName}List.columnNmToProprtyNm("${importcsvEntityName?cap_first}",fColNm);      
                  BeanUtils.setProperty(this.instance,propName,this.mailingText2);//text2 has target bean say customer short columnName
                  this.update();

                  //now update row 99 with long propNm to be used in mapping strategy
                  cc1=null;                
		   cc1 = (${importcsvEntityName?cap_first}) entityManager.createQuery("select cc from ${importcsvEntityName?cap_first} cc where cc.a2xxukcxbvxxxxxxxxxxrow = :rowN AND cc.a1xxuxhrbvoxxxxxxxxxtablenm = :tablenm AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		   .setParameter("tablenm", this.instance.getA1xxuxhrbvoxxxxxxxxxtablenm()).setParameter("rowN", "99").setParameter("owner2", owner2Code).getSingleResult();
                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Query")+" "+ bundle.getString("failed")+", "+bundle.getString("table")+" "+this.instance.getA1xxuxhrbvoxxxxxxxxxtablenm()+" "+ bundle.getString("row")+" "+"99"+" "+e.getMessage(),""));
                    return "";
                }
                try{  
                  this.clearInstance(); 
                  this.setInstance(cc1);  
                  //get target bean classNameGen ie Jxx..customer using this.instance.getA1xxuxhrbvoxxxxxxxxxtablenm()
                  String classNameGen=${truefalseEntityName}List.getClassNames("all").get(this.instance.getA1xxuxhrbvoxxxxxxxxxtablenm()).substring(27);
                  String beanPropName=${truefalseEntityName}List.columnNmToProprtyNm(classNameGen,this.mailingText2); 
                  BeanUtils.setProperty(this.instance,propName,beanPropName);
                  this.update();


                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("update")+" "+ bundle.getString("failed")+", "+ bundle.getString("row")+" "+"00"+" "+ bundle.getString("value")+" "+this.mailingText2+" "+e.getMessage(),""));
                  return "";
                }

         
         return ""; 
        }


	public void mapCsvToPojo(String key,String keyQualifier,int keySequence,int size) {
           //called by Importmappingedit(create/rebuild ..)
           // clear/reuse all rows of IMPORT, insert/reuse ist row with col1,col2 etc as holding values to be used for opencsv mapping
           // other rows will hold values from csv lines and reused. so some may be old
           // jsf will also have a drop down showing all column name values, which can be selected and replace col1, 2 etc  
           // select column # using input spinner, select pojo column name, set mapping column button, existing import button
           // other heading rows can/should be removed,row 1 is used to decide which data will go to which entity column
               if(mailingText2 == null || mailingText2.isEmpty()){  
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("MapTo")+" "+ bundle.getString("value")+" "+ bundle.getString("empty"),""));
                 return;
               }
               importChosen=true;
	           if (this.instance == null) {
                    this.clearInstance();
	            this.instance=this.getInstance();
	           }
               int importexception=0;
               String jay="";
               int csvElements=0;
               int ii=0;
               ${importcsvEntityName?cap_first} cc1=null;                

            try{
                ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","a"+key.substring(47),keyQualifier,keySequence);
                if (${clobdataEntityName} == null || ${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("No")+" "+ bundle.getString("CSV(Comma Separated Values)")+" "+ bundle.getString("data")+" "+ bundle.getString("found")+" "+ bundle.getString("for")+" "+key.substring(47)+" "+ bundle.getString("in")+" "+ bundle.getString("textdata"),""));

                 return;
                }
                calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+yxxxuq1m1xwwqqqxxxxxclobdata.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 return; 
                }
                String csvData=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,"CSV (Comma Separated Values) data used- dated "+yxxxuq1m1xwwqqqxxxxxclobdata.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString(),""));

                try{
		 cc1 = (${importcsvEntityName?cap_first}) entityManager.createQuery("select cc from ${importcsvEntityName?cap_first} cc where cc.a2xxukcxbvxxxxxxxxxxrow = :rowN AND cc.a1xxuxhrbvoxxxxxxxxxtablenm = :tablenm AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		  .setParameter("tablenm", this.mailingText2.substring(47)).setParameter("rowN", "00").setParameter("owner2", owner2Code).getSingleResult();
                }catch(NoResultException nre){
                 //ignore
                 cc1=null;
                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Query")+" "+ bundle.getString("failed")+", "+ bundle.getString("row")+" "+"oo"+" "+e.getMessage(),""));
                   return;               
                }
                try{
                 if(cc1 ==null){
                  this.instance.setA1xxuxhrbvoxxxxxxxxxtablenm(this.mailingText2.substring(47));
                  this.instance.setA2xxukcxbvxxxxxxxxxxrow("00");//short propertyName set in mapRow00ToProperty method
                  this.persist();
                  this.clearInstance();
                  this.instance=this.getInstance();
                  this.instance.setA1xxuxhrbvoxxxxxxxxxtablenm(this.mailingText2.substring(47));
                  this.instance.setA2xxukcxbvxxxxxxxxxxrow("99");//Gen (20 ch prefix) propname needed for mapping strategy
                  this.persist();
                 }
                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+ bundle.getString("failed")+", "+ bundle.getString("row")+" "+"00"+" "+e.getMessage(),""));
                  return;
                }
                

               int skipl=1;
               final CSVParser parser =
                new CSVParserBuilder()
                 .withSeparator(',')
                 .withIgnoreQuotations(true)
                 .build();
               final CSVReader reader =
                new CSVReaderBuilder(new StringReader(csvData))
                 .withSkipLines(skipl)
                 .withCSVParser(parser)
                 .build();
/*             for debugging but no data further down
               String [] nextLine;
               while ((nextLine = reader.readNext()) != null) {
                // nextLine[] is an array of values from the line
                  importdone=importdone+1;
               }
*/
    Map<String, String> columnMapping = new HashMap<>();
    int csSize=65;
    String[] columns = new String[csSize];
    // we may use ftl cloumnIterator for this
    Arrays.stream(com.rcomputer.genapp.model.${importcsvEntityName?cap_first}.class.getDeclaredFields())
    .forEach(field -> {
        columnMapping.put(field.getName(), field.getName()); 
    });
    columns=yxxxch5a1xhhxxhxxxxxtruefalseList.entityColumnNames("${importcsvEntityName?cap_first}",false,true,55).toArray(columns);
    //false dont trim 20ch , true all uppercase, upto 0..65 ie 65 columns
/*  not needed for importcsv bean
    HeaderColumnNameTranslateMappingStrategy strategy = new HeaderColumnNameTranslateMappingStrategy();
    strategy.setType(com.rcomputer.genapp.model.Yrxxch5b1xhhxxhxxxxximportcsv.class);
    strategy.setColumnMapping(columnMapping);
*/
        ColumnPositionMappingStrategy strategy = new ColumnPositionMappingStrategy();
        strategy.setType(com.rcomputer.genapp.model.${importcsvEntityName?cap_first}.class);
        strategy.setColumnMapping(columns);
        CsvToBean csvToBean = new CsvToBeanBuilder(reader)
       .withType(com.rcomputer.genapp.model.${importcsvEntityName?cap_first}.class)
       .withMappingStrategy(strategy)
       .build();
        //List list = csvToBean.parse();//yourReader in opencsv eaxample
        Iterator<${importcsvEntityName?cap_first}> it = csvToBean.iterator();
                int rr=0;
                String zeroes8="00000000";
                String rrs="";
                bcontinue=false;
            while (it.hasNext()) {
                rr=rr+1;
                if(rr>99){
                 break;// max row 99 in importcsv mapping data, no need to show more. 00/99 mapping other rows csv dara
                }
                //weed out empty or bad pattern csv data by checking first 10 column values
                rrs=""+rr;
                rrs=zeroes8.substring(0,2-rrs.length())+rrs;
                ${importcsvEntityName}li = it.next();
                ${importcsvEntityName}li.setA1xxuxhrbvoxxxxxxxxxtablenm(this.mailingText2.substring(47));
                ${importcsvEntityName}li.setA2xxukcxbvxxxxxxxxxxrow(rrs);
                ${importcsvEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
                ${importcsvEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                ${importcsvEntityName}li.setZ1xxzzfxhhxxxxxxxxxxstatusfl(0);
                ${importcsvEntityName}li.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                //in map we read csv data and add or update existing rows. row and column no ignored, only table nm used
                try{
		 cc1 = (${importcsvEntityName?cap_first}) entityManager.createQuery("select cc from ${importcsvEntityName?cap_first} cc where cc.a2xxukcxbvxxxxxxxxxxrow = :rowN AND cc.a1xxuxhrbvoxxxxxxxxxtablenm = :tablenm AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		  .setParameter("tablenm", this.mailingText2.substring(47)).setParameter("rowN", rrs).setParameter("owner2", owner2Code).getSingleResult();
                }catch(NoResultException nre){
                 //ignore
                 cc1=null;
                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Query")+" "+ bundle.getString("failed")+", "+ bundle.getString("row")+" "+rrs+" "+e.getMessage(),""));
                }
                try{
                 if(cc1 ==null){
                  this.clearInstance();
                  this.setInstance(${importcsvEntityName}li);
                  this.persist();
                 }else{
                  this.setInstance(${importcsvEntityName}li);
                  this.instance.setA0xxuobxbxxxxxxxxxxxsid(cc1.getA0xxuobxbxxxxxxxxxxxsid());
                  this.instance.setA1xxuxhrbvoxxxxxxxxxtablenm(cc1.getA1xxuxhrbvoxxxxxxxxxtablenm());
                  this.instance.setA2xxukcxbvxxxxxxxxxxrow(cc1.getA2xxukcxbvxxxxxxxxxxrow());
                  this.instance.setZ3xxutoxlhxxxxxxxxxxowner(cc1.getZ3xxutoxlhxxxxxxxxxxowner());
                  this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(0);
                  this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                  this.superdotupdate();
                 }
                }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("persist")+" / "+bundle.getString("update")+" "+ bundle.getString("failed")+", "+ bundle.getString("row")+" "+rrs+" "+e.getMessage(),""));
                }
                this.clearInstance();
                bcontinue=true;
            }//while
               if(!bcontinue){
                  if(rr==0){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("aborting")+" "+ bundle.getString("import")+", "+ bundle.getString("Csv")+", "+ this.mailingText2.substring(47)+" "+bundle.getString("bean")+" "+ bundle.getString("list")+" "+ bundle.getString("empty"),""));
                  }else{
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("aborting")+" "+ bundle.getString("import")+", "+ bundle.getString("changes")+" "+ bundle.getString("rolled")+" "+ bundle.getString("back")+", "+ bundle.getString("fix")+" "+ bundle.getString("and")+" "+ bundle.getString("try")+" "+ bundle.getString("again"),""));
                   return;
                  }     
               }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("map")+" "+ bundle.getString("create")+" / "+ bundle.getString("update")+" "+ bundle.getString("completed"),""));
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Next")+" "+ bundle.getString("step")+": "+ bundle.getString("select")+" "+ bundle.getString("List")+" "+ bundle.getString("CSV")+" "+ bundle.getString("rows")+", "+ bundle.getString("view")+" "+ bundle.getString("the")+" "+ bundle.getString("row")+" "+ bundle.getString("content")+". "+ bundle.getString("row")+" "+ bundle.getString("00")+" "+ bundle.getString("is")+" "+ bundle.getString("used")+" "+ bundle.getString("for")+" "+ bundle.getString("mapping")+" "+ bundle.getString("and")+" "+ bundle.getString("the")+" "+ bundle.getString("other")+" "+ bundle.getString("rows")+" "+ bundle.getString("show")+" "+ bundle.getString("CSV")+" "+ bundle.getString("data"),""));
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Click")+" "+  bundle.getString("on")+" "+ bundle.getString("Map")+" "+ bundle.getString("column")+" "+ bundle.getString("to")+" "+ bundle.getString("Map")+", "+bundle.getString("CSV")+": "+ bundle.getString("data")+" "+ bundle.getString("gives")+" "+ bundle.getString("an")+" "+ bundle.getString("idea")+" "+ bundle.getString("of")+" "+ bundle.getString("its")+" "+ bundle.getString("use")+" "+ bundle.getString("and")+" "+ bundle.getString("select")+" "+ bundle.getString("Table")+" "+ bundle.getString("column")+" "+ bundle.getString("to")+" "+ bundle.getString("map")+" "+ bundle.getString("against"),""));
               } 
              }catch (Exception ef){
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,bundle.getString("exception")+" "+ ef.getMessage()+" "+jay,""));

		   log.severe(" import error "+owner2Code+' ' + ef.getMessage()+' '+jay);
                  }     
             }
      } 




	public String importUsingMapping(String className) {
           //called by importusingmapping(Import using mapping)
           // target ClassName is full name, row 00 of importcsv is csv data header with short property names for target bean
           //                                row 99 has 20ch prefix for property name and used for mapping below 
           // columnMapping map will have csv header from row00 value, bean property value from row99 value                               
           // importcsv (65 cols) is used to hold data for all target beans and Header will have all column entries and their value
           // reuse the csvdata from clob, but read the row 00/999 contents as csvdata header and insert in front
           // of clobdata for the target bean/className passed as parameter
           // use HeaderColumnNameTranslateMappingStrategy, 
           // Translate mapping will have entries only if csv column matches against a bean property
           // for customer column06 will have say lastname value, column01 may have null ie no match
               if(className == null || className.isEmpty()){  
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("Select")+" "+ bundle.getString("map")+" "+ bundle.getString("empty"),""));
                 return "";
               }
               ${importcsvEntityName?cap_first} cc1=null; 
               String classNameSh=className.substring(47);    
               String classNameGen=className.substring(27);           
               try{
		 cc1 = (${importcsvEntityName?cap_first}) entityManager.createQuery("select cc from ${importcsvEntityName?cap_first} cc where cc.a2xxukcxbvxxxxxxxxxxrow = :rowN AND cc.a1xxuxhrbvoxxxxxxxxxtablenm = :tablenm AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		  .setParameter("tablenm", classNameSh).setParameter("rowN", "00").setParameter("owner2", owner2Code).getSingleResult();
               }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Query")+" "+ bundle.getString("failed")+", "+bundle.getString("table")+" "+classNameSh+" "+ bundle.getString("row")+" "+"00"+" "+e.getMessage(),""));
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("may")+" "+ bundle.getString("need")+" "+classNameSh+" "+bundle.getString("csv")+" "+ bundle.getString("mapping"),""));
                 return "";
               }
               String csvHeader="";
               String csvHeader1=(cc1.getB1xxuo01bvxxxxxxxxxxcolumn01()==null?"column01":cc1.getB1xxuo01bvxxxxxxxxxxcolumn01())+",";
               String csvHeader2=(cc1.getB4xxuo02bvxxxxxxxxxxcolumn02()==null?"column02":cc1.getB4xxuo02bvxxxxxxxxxxcolumn02())+",";
               String csvHeader3=(cc1.getB7xxuo03bvxxxxxxxxxxcolumn03()==null?"column03":cc1.getB7xxuo03bvxxxxxxxxxxcolumn03())+",";
               String csvHeader4=(cc1.getC1xxuo04bvxxxxxxxxxxcolumn04()==null?"column04":cc1.getC1xxuo04bvxxxxxxxxxxcolumn04())+",";
               String csvHeader5=(cc1.getC4xxuo05bvxxxxxxxxxxcolumn05()==null?"column05":cc1.getC4xxuo05bvxxxxxxxxxxcolumn05())+",";
               String csvHeader6=(cc1.getC7xxuo06bvxxxxxxxxxxcolumn06()==null?"column06":cc1.getC7xxuo06bvxxxxxxxxxxcolumn06())+",";
               String csvHeader7=(cc1.getD1xxuo07bvxxxxxxxxxxcolumn07()==null?"column07":cc1.getD1xxuo07bvxxxxxxxxxxcolumn07())+",";
               String csvHeader8=(cc1.getD4xxuo08bvxxxxxxxxxxcolumn08()==null?"column08":cc1.getD4xxuo08bvxxxxxxxxxxcolumn08())+",";
               String csvHeader9=(cc1.getD7xxuo09bvxxxxxxxxxxcolumn09()==null?"column09":cc1.getD7xxuo09bvxxxxxxxxxxcolumn09())+",";
               String csvHeader10=(cc1.getE1xxuo10bvxxxxxxxxxxcolumn10()==null?"column10":cc1.getE1xxuo10bvxxxxxxxxxxcolumn10())+",";
               String csvHeader11=(cc1.getE4xxuo11bvxxxxxxxxxxcolumn11()==null?"column11":cc1.getE4xxuo11bvxxxxxxxxxxcolumn11())+",";
               String csvHeader12=(cc1.getE7xxuo12bvxxxxxxxxxxcolumn12()==null?"column12":cc1.getE7xxuo12bvxxxxxxxxxxcolumn12())+",";
               String csvHeader13=(cc1.getF1xxuo13bvxxxxxxxxxxcolumn13()==null?"column13":cc1.getF1xxuo13bvxxxxxxxxxxcolumn13())+",";
               String csvHeader14=(cc1.getF4xxuo14bvxxxxxxxxxxcolumn14()==null?"column14":cc1.getF4xxuo14bvxxxxxxxxxxcolumn14())+",";
               String csvHeader15=(cc1.getF7xxuo15bvxxxxxxxxxxcolumn15()==null?"column15":cc1.getF7xxuo15bvxxxxxxxxxxcolumn15())+",";
               String csvHeader16=(cc1.getG1xxuo16bvxxxxxxxxxxcolumn16()==null?"column16":cc1.getG1xxuo16bvxxxxxxxxxxcolumn16())+",";
               String csvHeader17=(cc1.getG4xxuo17bvxxxxxxxxxxcolumn17()==null?"column17":cc1.getG4xxuo17bvxxxxxxxxxxcolumn17())+",";
               String csvHeader18=(cc1.getG7xxuo18bvxxxxxxxxxxcolumn18()==null?"column18":cc1.getG7xxuo18bvxxxxxxxxxxcolumn18())+",";
               String csvHeader19=(cc1.getH1xxuo19bvxxxxxxxxxxcolumn19()==null?"column19":cc1.getH1xxuo19bvxxxxxxxxxxcolumn19())+",";
               String csvHeader20=(cc1.getH4xxuo20bvxxxxxxxxxxcolumn20()==null?"column20":cc1.getH4xxuo20bvxxxxxxxxxxcolumn20())+",";
               String csvHeader21=(cc1.getH7xxuo21bvxxxxxxxxxxcolumn21()==null?"column21":cc1.getH7xxuo21bvxxxxxxxxxxcolumn21())+",";
               String csvHeader22=(cc1.getI1xxuo22bvxxxxxxxxxxcolumn22()==null?"column22":cc1.getI1xxuo22bvxxxxxxxxxxcolumn22())+",";
               String csvHeader23=(cc1.getI4xxuo23bvxxxxxxxxxxcolumn23()==null?"column23":cc1.getI4xxuo23bvxxxxxxxxxxcolumn23())+",";
               String csvHeader24=(cc1.getI7xxuo24bvxxxxxxxxxxcolumn24()==null?"column24":cc1.getI7xxuo24bvxxxxxxxxxxcolumn24())+",";
               String csvHeader25=(cc1.getJ1xxuo25bvxxxxxxxxxxcolumn25()==null?"column25":cc1.getJ1xxuo25bvxxxxxxxxxxcolumn25())+",";
               String csvHeader26=(cc1.getJ4xxuo26bvxxxxxxxxxxcolumn26()==null?"column26":cc1.getJ4xxuo26bvxxxxxxxxxxcolumn26())+",";
               String csvHeader27=(cc1.getJ7xxuo27bvxxxxxxxxxxcolumn27()==null?"column27":cc1.getJ7xxuo27bvxxxxxxxxxxcolumn27())+",";
               String csvHeader28=(cc1.getK1xxuo28bvxxxxxxxxxxcolumn28()==null?"column28":cc1.getK1xxuo28bvxxxxxxxxxxcolumn28())+",";
               String csvHeader29=(cc1.getK4xxuo29bvxxxxxxxxxxcolumn29()==null?"column29":cc1.getK4xxuo29bvxxxxxxxxxxcolumn29())+",";
               String csvHeader30=(cc1.getK7xxuo30bvxxxxxxxxxxcolumn30()==null?"column30":cc1.getK7xxuo30bvxxxxxxxxxxcolumn30())+",";
               String csvHeader31=(cc1.getL1xxuo31bvxxxxxxxxxxcolumn31()==null?"column31":cc1.getL1xxuo31bvxxxxxxxxxxcolumn31())+",";
               String csvHeader32=(cc1.getL4xxuo32bvxxxxxxxxxxcolumn32()==null?"column32":cc1.getL4xxuo32bvxxxxxxxxxxcolumn32())+",";
               String csvHeader33=(cc1.getL7xxuo33bvxxxxxxxxxxcolumn33()==null?"column33":cc1.getL7xxuo33bvxxxxxxxxxxcolumn33())+",";
               String csvHeader34=(cc1.getM1xxuo34bvxxxxxxxxxxcolumn34()==null?"column34":cc1.getM1xxuo34bvxxxxxxxxxxcolumn34())+",";
               String csvHeader35=(cc1.getM4xxuo35bvxxxxxxxxxxcolumn35()==null?"column35":cc1.getM4xxuo35bvxxxxxxxxxxcolumn35())+",";
               String csvHeader36=(cc1.getM7xxuo36bvxxxxxxxxxxcolumn36()==null?"column36":cc1.getM7xxuo36bvxxxxxxxxxxcolumn36())+",";
               String csvHeader37=(cc1.getN1xxuo37bvxxxxxxxxxxcolumn37()==null?"column37":cc1.getN1xxuo37bvxxxxxxxxxxcolumn37())+",";
               String csvHeader38=(cc1.getN4xxuo38bvxxxxxxxxxxcolumn38()==null?"column38":cc1.getN4xxuo38bvxxxxxxxxxxcolumn38())+",";
               String csvHeader39=(cc1.getN7xxuo39bvxxxxxxxxxxcolumn39()==null?"column39":cc1.getN7xxuo39bvxxxxxxxxxxcolumn39())+",";
               String csvHeader40=(cc1.getO1xxuo40bvxxxxxxxxxxcolumn40()==null?"column40":cc1.getO1xxuo40bvxxxxxxxxxxcolumn40())+",";
               String csvHeader41=(cc1.getO4xxuo41bvxxxxxxxxxxcolumn41()==null?"column41":cc1.getO4xxuo41bvxxxxxxxxxxcolumn41())+",";
               String csvHeader42=(cc1.getO7xxuo42bvxxxxxxxxxxcolumn42()==null?"column42":cc1.getO7xxuo42bvxxxxxxxxxxcolumn42())+",";
               String csvHeader43=(cc1.getP1xxuo43bvxxxxxxxxxxcolumn43()==null?"column43":cc1.getP1xxuo43bvxxxxxxxxxxcolumn43())+",";
               String csvHeader44=(cc1.getP4xxuo44bvxxxxxxxxxxcolumn44()==null?"column44":cc1.getP4xxuo44bvxxxxxxxxxxcolumn44())+",";
               String csvHeader45=(cc1.getP7xxuo45bvxxxxxxxxxxcolumn45()==null?"column45":cc1.getP7xxuo45bvxxxxxxxxxxcolumn45())+",";
               String csvHeader46=(cc1.getQ1xxuo46bvxxxxxxxxxxcolumn46()==null?"column46":cc1.getQ1xxuo46bvxxxxxxxxxxcolumn46())+",";
               String csvHeader47=(cc1.getQ4xxuo47bvxxxxxxxxxxcolumn47()==null?"column47":cc1.getQ4xxuo47bvxxxxxxxxxxcolumn47())+",";
               String csvHeader48=(cc1.getQ7xxuo48bvxxxxxxxxxxcolumn48()==null?"column48":cc1.getQ7xxuo48bvxxxxxxxxxxcolumn48())+",";
               String csvHeader49=(cc1.getR1xxuo49bvxxxxxxxxxxcolumn49()==null?"column49":cc1.getR1xxuo49bvxxxxxxxxxxcolumn49())+",";
               String csvHeader50=(cc1.getR4xxuo50bvxxxxxxxxxxcolumn50()==null?"column50":cc1.getR4xxuo50bvxxxxxxxxxxcolumn50())+",";
               String csvHeader51=(cc1.getR7xxuo51bvxxxxxxxxxxcolumn51()==null?"column51":cc1.getR7xxuo51bvxxxxxxxxxxcolumn51())+",";
               String csvHeader52=(cc1.getS1xxuo52bvxxxxxxxxxxcolumn52()==null?"column52":cc1.getS1xxuo52bvxxxxxxxxxxcolumn52())+",";
               String csvHeader53=(cc1.getS4xxuo53bvxxxxxxxxxxcolumn53()==null?"column53":cc1.getS4xxuo53bvxxxxxxxxxxcolumn53())+",";
               String csvHeader54=(cc1.getS7xxuo54bvxxxxxxxxxxcolumn54()==null?"column54":cc1.getS7xxuo54bvxxxxxxxxxxcolumn54())+",";
               String csvHeader55=(cc1.getT1xxuo55bvxxxxxxxxxxcolumn55()==null?"column55":cc1.getT1xxuo55bvxxxxxxxxxxcolumn55())+",";
               String csvHeader56=(cc1.getT4xxuo56bvxxxxxxxxxxcolumn56()==null?"column56":cc1.getT4xxuo56bvxxxxxxxxxxcolumn56())+",";
               String csvHeader57=(cc1.getT7xxuo57bvxxxxxxxxxxcolumn57()==null?"column57":cc1.getT7xxuo57bvxxxxxxxxxxcolumn57())+",";
               String csvHeader58=(cc1.getU1xxuo58bvxxxxxxxxxxcolumn58()==null?"column58":cc1.getU1xxuo58bvxxxxxxxxxxcolumn58())+",";
               String csvHeader59=(cc1.getU4xxuo59bvxxxxxxxxxxcolumn59()==null?"column59":cc1.getU4xxuo59bvxxxxxxxxxxcolumn59())+",";
               String csvHeader60=(cc1.getU7xxuo60bvxxxxxxxxxxcolumn60()==null?"column60":cc1.getU7xxuo60bvxxxxxxxxxxcolumn60())+",";
               String csvHeader61=(cc1.getV1xxuo61bvxxxxxxxxxxcolumn61()==null?"column61":cc1.getV1xxuo61bvxxxxxxxxxxcolumn61())+",";
               String csvHeader62=(cc1.getV4xxuo62bvxxxxxxxxxxcolumn62()==null?"column62":cc1.getV4xxuo62bvxxxxxxxxxxcolumn62())+",";
               String csvHeader63=(cc1.getV7xxuo63bvxxxxxxxxxxcolumn63()==null?"column63":cc1.getV7xxuo63bvxxxxxxxxxxcolumn63())+",";
               String csvHeader64=(cc1.getW1xxuo64bvxxxxxxxxxxcolumn64()==null?"column64":cc1.getW1xxuo64bvxxxxxxxxxxcolumn64())+",";
               String csvHeader65=(cc1.getW4xxuo65bvxxxxxxxxxxcolumn65()==null?"column65":cc1.getW4xxuo65bvxxxxxxxxxxcolumn65());
               csvHeader= csvHeader1+csvHeader2+csvHeader3+csvHeader4+csvHeader5+csvHeader6+csvHeader7+csvHeader8+csvHeader9
                         +csvHeader10+csvHeader11+csvHeader12+csvHeader13+csvHeader14+csvHeader15+csvHeader16+csvHeader17+csvHeader18+csvHeader19
                         +csvHeader20+csvHeader21+csvHeader22+csvHeader23+csvHeader24+csvHeader25+csvHeader26+csvHeader27+csvHeader28+csvHeader29
                         +csvHeader30+csvHeader31+csvHeader32+csvHeader33+csvHeader34+csvHeader35+csvHeader36+csvHeader37+csvHeader38+csvHeader39
                         +csvHeader40+csvHeader41+csvHeader42+csvHeader43+csvHeader44+csvHeader45+csvHeader46+csvHeader47+csvHeader48+csvHeader49
                         +csvHeader50+csvHeader51+csvHeader52+csvHeader53+csvHeader54+csvHeader55+csvHeader56+csvHeader57+csvHeader58
                         +csvHeader59+csvHeader60+csvHeader61+csvHeader62+csvHeader63+csvHeader64+csvHeader65;
               importChosen=true;
               int importexception=0;
               String jay="";
               String keyWPrefix="a"+classNameSh;
               String keyQualifier="csv";
               int keySequence=1;
               int size=4096000;
               int csvElements=0;
               int ii=0;
               int importdone=0;

            try{
                yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata",keyWPrefix,keyQualifier,keySequence);
                if (yxxxuq1m1xwwqqqxxxxxclobdata == null || yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("No")+" "+ bundle.getString("CSV(Comma Separated Values)")+" "+ bundle.getString("data")+" "+ bundle.getString("found")+" "+ bundle.getString("for")+" "+keyWPrefix+" "+ bundle.getString("in")+" "+ bundle.getString("textdata"),""));

                 return null;
                }
                calendare.setTime(yxxxuq1m1xwwqqqxxxxxclobdata.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+yxxxuq1m1xwwqqqxxxxxclobdata.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 return null; 
                }
                String csvData=yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata();

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,"CSV (Comma Separated Values) data used- dated "+yxxxuq1m1xwwqqqxxxxxclobdata.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString(),""));
               //add csv header needed by hedercolumntranslate strategy, ignore real header if any
               csvData=csvHeader+"\n"+csvData;
               //jay add logic to check for flags for space delemeted, comma delemeted etc
               int skipl=1;
               final CSVParser parser =
                new CSVParserBuilder()
                 .withSeparator(',')
                 .withIgnoreQuotations(true)
                 .build();
               final CSVReader reader =
                new CSVReaderBuilder(new StringReader(csvData))
                 .withSkipLines(skipl)
                 .withCSVParser(parser)
                 .build();
               Map<String, String> columnMapping = new HashMap<>();//why skiplines 0 did not work??

               final Yrxxch5b1xhhxxhxxxxximportcsv cch=cc1;
                try{
		 cc1 = (${importcsvEntityName?cap_first}) entityManager.createQuery("select cc from ${importcsvEntityName?cap_first} cc where cc.a2xxukcxbvxxxxxxxxxxrow = :rowN AND cc.a1xxuxhrbvoxxxxxxxxxtablenm = :tablenm AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		  .setParameter("tablenm", classNameSh).setParameter("rowN", "99").setParameter("owner2", owner2Code).getSingleResult();
               }catch(Exception e){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Query")+" "+ bundle.getString("failed")+", "+bundle.getString("table")+" "+classNameSh+" "+ bundle.getString("row")+" "+"99"+" "+e.getMessage(),""));
                 return "";
               }
               final Yrxxch5b1xhhxxhxxxxximportcsv ccp=cc1;   

/*
      have a do case stmt for possible/alllowed classes and hardcode logic or call a method with param 
      loop through and put only those where cc1.getB1xxuo01bvxxxxxxxxxxcolumnxx() is not null
       ie mapping will have entries where csv column to bean full proprty name ie 20c+xxx xlate is possible  
*/
    //Arrays.stream(com.rcomputer.genapp.model.Jxxxuq201xwwqqhxxxxxcustomer.class.getDeclaredFields())



   try{ 
    boolean cap=true;
    Arrays.stream(com.rcomputer.genapp.model.Yrxxch5b1xhhxxhxxxxximportcsv.class.getDeclaredFields())//className is full Yrxxch5b1xhhxxhxxxxximportcsv
    .forEach(field -> {
       try{ 
        String propName=field.getName().substring(20);
        if(field.getType().equals(String.class) && !propName.equals("sid") && !propName.equals("tablenm") && !propName.equals("row")
           && !propName.equals("owner") && !propName.equals("owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc") && BeanUtils.getProperty(cch,field.getName()) !=null ){ 
         String colValue=BeanUtils.getProperty(cch,field.getName());//cch,ccp instance of importcsv
         String propValue=BeanUtils.getProperty(ccp,field.getName());
         if(colValue != null && propValue != null ){
          if(cap){
           columnMapping.put(colValue.toUpperCase(), propValue.toUpperCase()); // mapping strategy expects uppercase?
          }else{
           columnMapping.put(colValue, propValue); // mapping strategy expects uppercase?
          }
         }
        }
       }catch (Exception ef){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("columnmapping")+" "+bundle.getString("exception")+" "+ ef.getMessage()+" "+field.getName(),""));
       }

    });
   }catch (Exception ef){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("columnmapping")+" "+bundle.getString("exception")+" "+ ef.getMessage()+" "+className,""));
         return "";
   }

        HeaderColumnNameTranslateMappingStrategy strategy = new HeaderColumnNameTranslateMappingStrategy();

        //strategy.setType(Jxxxuq201xwwqqhxxxxxcustomer.class);
        strategy.setType(Class.forName(className));
        strategy.setColumnMapping(columnMapping);

        CsvToBean csvToBean = new CsvToBeanBuilder(reader)
       .withType(Class.forName(className))
       .withMappingStrategy(strategy)
       .build();
        //List list = csvToBean.parse();//yourReader in opencsv eaxample
        int rr=0;
        int rs=0;
        switch(classNameSh){
         case "customer":
         Jxxxuq201xwwqqhxxxxxcustomer beanC=null;
         Iterator<Jxxxuq201xwwqqhxxxxxcustomer> itC = csvToBean.iterator();
            while (itC.hasNext()) {
                rr=rr+1;
                beanC = itC.next();
                //check for subkey fields, may not be needed if we check for first 10 columns forv null in 
                // mapcsvtopojo
                if(beanC.getC1xxuslnbvixxxxxxxxxlastname()==null && beanC.getC2xxu2fnbvixxxxxxxxxfirstname()==null
                   && beanC.getD1xxu3cnbvixxxxxxxxxcustomerascompanyname()==null && beanC.getY0xxuzsxbvxxxxxxxxxxdescript()==null)
                {
                  rs=rs+1;
                  continue;
                } 
                ${customerEntityName}Home.clearInstance();
                ${customerEntityName}Home.setInstance(beanC);//sets imported values
                ${customerEntityName}Home.getInstance().setZdxxutoxlhxxxxxxxxxxowner(ownerCode);
                ${customerEntityName}Home.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                ${customerEntityName}Home.getInstance().setZaxxzzfxhhxxxxxxxxxxstatusfl(0);
                ${customerEntityName}Home.getInstance().setZbxxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());

                ${customerEntityName}Home.persist();

            }//while
      
         case "division":
         Fxxxch133xhhxqhxxlxxdivision beanD=null;
         Iterator<Fxxxch133xhhxqhxxlxxdivision> itD = csvToBean.iterator();
            while (itD.hasNext()) {
                rr=rr+1;
                beanD = itD.next();
                if(beanD.getB1xxuszsbvxxxxxxxxxxdescript()==null)
                {
                  rs=rs+1;
                  continue;
                } 
                ${divisionEntityName}Home.clearInstance();
                ${divisionEntityName}Home.setInstance(beanD);//sets imported values
                ${divisionEntityName}Home.getInstance().setZ6xxutoxlhxxxxxxxxxxowner(ownerCode);
                ${divisionEntityName}Home.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                ${divisionEntityName}Home.getInstance().setZ3xxzzfxhhxxxxxxxxxxstatusfl(0);
                ${divisionEntityName}Home.getInstance().setZ4xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                ${divisionEntityName}Home.persist();

            }//while
         case "vendor":
         Jxxxuq300xwwqqhxxxxxvendor beanV=null;
         Iterator<Jxxxuq300xwwqqhxxxxxvendor> itV = csvToBean.iterator();
            while (itV.hasNext()) {
                rr=rr+1;
                beanV = itV.next();
                if(beanV.getB3xxuslnbvxxxxxxxxxxlastname()==null && beanV.getB4xxu2fnbvxxxxxxxxxxfirstname()==null
                   && beanV.getD1xxu3cnbvxxxxxxxxxxvendorascompanyname()==null && beanV.getY0xxuzsxbvxxxxxxxxxxdescript()==null)
                {
                  rs=rs+1;
                  continue;
                } 
                ${vendorEntityName}Home.clearInstance();
                ${vendorEntityName}Home.setInstance(beanV);//sets imported values
                ${vendorEntityName}Home.getInstance().setZhxxutoxlhxxxxxxxxxxowner(ownerCode);
                ${vendorEntityName}Home.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                ${vendorEntityName}Home.getInstance().setZdxxzzfxhhxxxxxxxxxxstatusfl(0);
                ${vendorEntityName}Home.getInstance().setZexxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                ${vendorEntityName}Home.persist();
            }//while
         case "employee":
         Jxxxbh400xwwqqhxxxxxemployee beanE=null;
         Iterator<Jxxxbh400xwwqqhxxxxxemployee> itE = csvToBean.iterator();
            while (itE.hasNext()) {
                rr=rr+1;
                beanE = itE.next();
                if(beanE.getB3xxuslnbvixxxxxxxxxlastname()==null && beanE.getB4xxu2fnbvxxxxxxxxxxfirstname()==null
                   && beanE.getY0xxuzsxbvxxxxxxxxxxdescript()==null)
                {
                  rs=rs+1;
                  continue;
                } 
                ${employeeEntityName}Home.clearInstance();
                ${employeeEntityName}Home.setInstance(beanE);//sets imported values
                ${employeeEntityName}Home.getInstance().setZexxutoxlhxxxxxxxxxxowner(ownerCode);
                ${employeeEntityName}Home.getInstance().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                ${employeeEntityName}Home.getInstance().setZexxzzfxhhxxxxxxxxxxstatusfl(0);
                ${employeeEntityName}Home.getInstance().setZfxxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                ${employeeEntityName}Home.persist();
            }//while


            

        }


               

               if(!bcontinue){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("aborting")+" "+ bundle.getString("import"),""));
                   return "";
     
               }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("import")+" "+  bundle.getString("done")+" "+ bundle.getString("for")+" "+ classNameSh+", "+bundle.getString("checked")+" "+ rr+" "+bundle.getString("skipped")+" "+ rs+" "+bundle.getString("net")+" "+ (rr-rs)+" "+bundle.getString("records"),""));
               } 
              }catch (Exception ef){
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,bundle.getString("exception")+" "+ ef.getMessage()+" "+jay,""));

		   log.severe(" import error "+owner2Code+' ' + ef.getMessage()+' '+jay);
                  }     
             }
              
             return null;

      } 



    </#if>






    <#if menuAttributesp2 == "1M">
	public String getThemeFunction() {
		return themeFunction;
	}
     
	public void setThemeFunction(String themeFunction) {
		this.themeFunction = themeFunction;
	}

	public String getThemeFunctionSub() {
		return themeFunctionSub;
	}
     
	public void setThemeFunctionSub(String themeFunctionSub) {
		this.themeFunctionSub = themeFunctionSub;
	}

	public String getContentTheme() {
		return contentTheme;
	}
     
	public void setContentTheme(String contentTheme) {
		this.contentTheme = contentTheme;
                skinBean.setPreviewTh(contentTheme);// used by other pages like news-1PT
                if(contentTheme !=null && !contentTheme.isEmpty()){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,contentTheme+" "+bundle.getString("was")+" "+bundle.getString("selected"),""));
                }
	}
	public String getContentVendor() {
		return contentVendor;
	}
     
	public void setContentVendor(String contentVendor) {
		this.contentVendor = contentVendor;
	}

	public String getFromPageP() {
		return fromPageP;
	}
     
	public void setFromPageP(String fromPageP) {
		this.fromPageP = fromPageP;
	}
	public String getFromPageA() {
		return fromPageA;
	}
     
	public void setFromPageA(String fromPageA) {
		this.fromPageA = fromPageA;
	}

	public String getFromPageN() {
		return fromPageN;
	}
     
	public void setFromPageN(String fromPageN) {
		this.fromPageN = fromPageN;
	}

	public String getFromPageC() {
		return fromPageC;
	}
     
	public void setFromPageC(String fromPageC) {
		this.fromPageC = fromPageC;
	}

	public String getFromPageI() {
		return fromPageI;
	}
     
	public void setFromPageI(String fromPageI) {
		this.fromPageI = fromPageI;
	}


	public String getToPageP() {
		return toPageP;
	}
     
	public void setToPageP(String toPageP) {
		this.toPageP = toPageP;
	}
	public String getToPageA() {
		return toPageA;
	}
     
	public void setToPageA(String toPageA) {
		this.toPageA = toPageA;
	}

	public String getToPageN() {
		return toPageN;
	}
     
	public void setToPageN(String toPageN) {
		this.toPageN = toPageN;
	}

	public String getToPageC() {
		return toPageC;
	}
     
	public void setToPageC(String toPageC) {
		this.toPageC = toPageC;
	}

	public String getToPageI() {
		return toPageI;
	}
     
	public void setToPageI(String toPageI) {
		this.toPageI = toPageI;
	}


    /**
    * The following method used by themeExport.xhtml to
    * to validate and set contentTheme and contentvendor values 
    * @param arg contentTheme 
    * @return void 
    * @exception None 
    * @see "fpxxfq1a5xwwqqhxxxxxitemHome.exportCsvData where a theme is used "
    * 
    */
	public void setContentThemeAndVendor(String contentTheme) {
                if(contentTheme == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("theme")+" "+bundle.getString("name")+" "+contentTheme+" "+bundle.getString("empty"),""));
                 return;
                }
                Fpxxfq1a5xwwqqhxxxxxitem item=null;
                this.contentTheme = contentTheme;
                skinBean.setPreviewTh(contentTheme);
                List<Fpxxfq1a5xwwqqhxxxxxitem> results=null;
                try{
                 results = getEntityManager()
		 .createQuery(
		 "select cc from Fpxxfq1a5xwwqqhxxxxxitem cc where cc.a0xxukixbxxxxxxxxxxxmatcode = :nKeyName and (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2='SYSTEM')  order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		 .setParameter("nKeyName",contentTheme)
		 .setParameter("owner2", masterSiteCode)
		 .getResultList();
                }catch(Exception e){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+contentTheme+" "+bundle.getString("error")+" "+e.getMessage(), ""));
                 return ;
                }
                if(results.isEmpty()){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("theme")+" "+bundle.getString("instance")+" "+contentTheme+" "+bundle.getString("missing"),""));
                 return ;
                } 
                if(results.size() >1){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+bundle.getString("multiple")+" "+bundle.getString("entries"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("first")+" "+bundle.getString("one")+" "+bundle.getString("used")+", "+bundle.getString("delete")+" "+bundle.getString("duplicates"), ""));
                }
                item= results.get(0);

                if(item == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("theme")+" "+bundle.getString("instance")+" "+contentTheme+" "+bundle.getString("empty"),""));
                 return;
                }
                  this.contentVendor = item.getY2xxuxxrbvxxxxxxxxxxmisccode1();
	}

    /**
    * The following method used by migrateTools.xhtml to scrape url content
    * @param arg contentTheme is the external URL not theme
    * @return void but the method updates preview pages like mid-top, news etc
    * @exception None 
    * @see "setContentThemeAndVendor where a theme is used "
    * 
    * select <img tags from landing page , download img as blob, replace img src to blob
    * and save/update the page content as clob mid-top. ie url page content becomes home page
    * then take the same page content and select all link tags <a and href attributes for other pages
    * Loop through each link and get the page and download images to db and change img src and
    * based on the link name map to a raaspi page like About, product, News etc. default to product key 
    * mapping can be helped by user specifying from and to page
    *  do not use rtemplate etc but use html as is except update to be xml compliant
    * background image uses url which needs change to servlet
    * change img to <img  src="/ImageServletCdi/?table=blobdata&amp;seq=1&amp;qlf=PIC&amp;id=Xcircle-logo.png" 
    * instead of <img src = "images/circle-logo.png". basically instead of using fie storage we will use db
    * an alternative can be to store in data dir pf the wildfly server need to check what will be the path for url
    * we need add logic to check any existing css or js file if not copy the file and its content as inline for the 
    * page source. for js it will be <script> see socialLogin.xhtml
    * for css it will be ,h1 or body{ see 3rcustom.css
    * imline entries have precedence over from lib
    * if needed these can later be moved to js or stylesheet dir 
    *  we need to convert to .xhtml because html source need to come from db via jsf tag <h:outputText
    * we need to use Jsoup.parse to ensure html is .xml compliant
    * backoffice pages will continue to use rtemplate and jsf
    * front end will now use ruitemplate and minimum jsf. ruitemplate will be to hold css and js libraries
    * and not for page layout ie no predefined page layout. Layout will depend on ui templates or manual
    * site editors will be simpler since all the layout page sections like top-most or footer will be gone
    * They dont use base rtemplate.
    * File upload should get updated to use new ui and rest api
    * use js fetch and existing rest services to get/update host data. This will replace jsf method call
    * check the <link tag and attribute href value. If contains http or https: then skip
    * else change the path. If already exists use that path. If not copy the source on this page and comment
    * out //<link and add <style> copied source </style>   
    * we may have to check and rearrange the order of style entries, last one gets used if same key
/*

 final Document document = Jsoup.parse(html);
    document.outputSettings().syntax(Document.OutputSettings.Syntax.xml);
    return document.html();

*/
	public void setContentThemeAndMigrateUi(String contentTheme) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString(""),""));

                if(contentTheme == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("url")+" "+bundle.getString("address")+" "+contentTheme+" "+bundle.getString("empty"),""));
                 return;
                }
                String url=contentTheme;//stripoff prefix part
                if (url.contains("www.")){
                 urlIndex=url.lastIndexOf("www.");
                 if (urlIndex == -1){
                  key=url;
                 }else{
                  key=url.substring(urlIndex)+4;
                 }
                }else{
                 urlIndex=url.lastIndexOf("//");
                 if (urlIndex == -1){
                  key=url;
                 }else{
                  key=url.substring(urlIndex)+2;
                 }
                }
                /////////////////////////////////////////get landing page or any other page
                //get page content for index (default to home),home,about etc
                Document page=null;
                List<String> tags = new ArrayList<String>(); //record tags
                try{
                 page = Jsoup.connect(url).userAgent("http://scrapingauthority.com").get();
                 page.outputSettings().syntax(Document.OutputSettings.Syntax.xml);// xml compliant
                }catch (Exception e){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("url")+" "+url+" "+bundle.getString("connect")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
                 return ;
                }
                String id="";
                String key="";
                String pageKey="";
                String hgraphicImage="";
                String outTxt="";
                Element temp=null;
                int p1=0;
                int n1=0;
                int a1=0;
                int r1=0;
                int c1=0;
                int i1=0;
                String oldValue=null;
                String newValue=null;
                String oldUrl=null;
                String newUrl=null;

                //get all the style attributes and replace background-image: url('images/in-store/in-store1.jpg') to   
                // besides html page, css can also have background-image tag   background-image: url("https://www.bigbasket.com/media/uploads/homeWeb.png")
            ////iterate over all style attribute for any tag   
                for(Element e : page.getAllElements()){      // all elements in html
                 tags.add(e.tagName().toLowerCase());    // add each tag in tags List
                 //System.out.println("Tag: "+ e.tag()+" attributes = "+e.attributes());  // attributes with values in string
                 //System.out.println("Tag: "+ e.tag()+" attributes = "+e.attributes().asList()); //attributes in List<Attribute>
                 for(Attribute att : e.attributes().asList()){ // for each tag get all attributes in one List<Attribute>
                  //System.out.print("Key: "+att.getKey()+ " , Value: "+att.getValue());
                  //System.out.println();
                  if(att.getKey().equals("style")){
                   //att.getValue()
                   oldValue=e.attr("style"); //style="background-image: url...
                   if(!oldValue.contains("background-image:")){
                    continue;
                   }
                   //extract url value within () and then replace(oldUrl,newUrl)
                   int index1=oldValue.indexOf("'");
                   int index2=oldValue.lastIndexOf("'");
                   oldUrl=oldValue.substring(index1,index2);
                   downloadImage(oldUrl);//saved as seq 1 

                   key="X"+oldValue.substring( oldValue.lastIndexOf("/") + 1,index2);//xx.jpg');
                   //key=key.replace("');","");//xx.jpg
                   newUrl="/ImageServletCdi/?table=blobdata&seq=1&qlf=PIC&id="+key;
                   newValue=oldValue.replace(oldUrl,newUrl);
                   e.attr(att.getKey(),newValue);

                   
                  } 
                 }
                }



                //select all img tags for home/landing page, 
             
                Elements imageElements = page.select("img");
            ////////////////////////////////////////////////////////iterate img tag
                //iterate over each image, copy to db and replace with jsf tag to load from db
                for(Element imageElement : imageElements){
                 String strImageURL = imageElement.attr("abs:src");
                 //download image for home page
                 downloadImage(strImageURL);
                 key="X"+strImageURL.substring( strImageURL.lastIndexOf("/") + 1 );
                 //imageElement.replaceWith(new TextNode(hgraphicImage));
                 hgraphicImage="/ImageServletCdi/?table=blobdata&seq=1&qlf=PIC&id="+key;
                 imageElement.attr("src", hgraphicImage);//change img source and then save home page
                }
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("approximate")+" "+bundle.getString("total")+" "+bundle.getString("images")+" "+imageElements.size()+" "+bundle.getString("migrated"),""));

                outTxt=page.toString();
                this.clearInstance();
                yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0);
                if (yxxxuq1m1xwwqqqxxxxxclobdata == null) {
                 yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();
                 yxxxuq1m1xwwqqqxxxxxclobdata=this.getInstance();
                 this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
                 this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-M");
                 this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                 this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(outTxt);
                 this.instance.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 this.instance.setA4xxexxxbvxxxxxxxxxxtype("txt");

                 superdotpersist();                
               }else{
                 //add logic to save current data ??
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(outTxt);
                 this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                 superdotupdate(); 
               }  
               // new logic method call here to iterate over <link and <script to check exists or using cdn
               // if not, copy css on top and script at bottom for this page 
        
 
                //after home page, convert/map links to other pages. Also adjust the raaspi menue
            //////follow <a ref and check other pages  
                Elements myElements = page.select("a");
                //iterate over each anchor/link, get url and scrape that page content and copy into
                // about-1,News-, ContactUs- etc raaspi .xhtml based on linkname
                // see below for manual maping based migration for other pages ex old url > new fromPageN(ews) 
                //convert existing Li based html menue to <nav raaspi horizontal menue, later add raaspi menu support
                int counterMax=5;
                int counterLast=0;
                int counterDone=0;
                counterLast=this.clientUpdateCounter(0);//get last counter
                int counter=0;
                if(counterLast >= myElements.size()){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Migration")+" "+bundle.getString("already")+" "+bundle.getString("done"),""));
                  return;
                }
                for(Element myElement : myElements){
                 String strMyURL = myElement.attr("href");
                 if(!strMyURL.contains(".html")){
                  continue;//# php ?take care later 
                 }
                 //map URL to pageKey
                 pageKey="";
                 if(strMyURL.toLowerCase().contains("home")){
                  continue;
                 }

                 if(strMyURL.toLowerCase().contains("contact") || 
                  (toPageC !=null && !this.toPageC.isEmpty() && strMyURL.toLowerCase().contains(fromPageC)) ){
                  pageKey="3R-CONTACTUS-1-M";
                  c1=c1+1;
                  if(c1==2){
                   pageKey="3R-CONTACTUS-2-M";
                  }
                  if(c1==3){
                   pageKey="3R-CONTACTUS-3-M";
                  }
                 }
                 // now check manual mapped news and key words like even , calendar

                 if(strMyURL.toLowerCase().contains("event") ||strMyURL.toLowerCase().contains("calendar")
                  || (toPageN !=null && !this.toPageN.isEmpty() && strMyURL.toLowerCase().contains(fromPageN)) ){
                  pageKey="3R-NEWS-1-M";
                  n1=n1+1;
                  if(n1==2){
                   pageKey="3R-NEWS-2-M";
                  }
                  if(n1==3){
                   pageKey="3R-NEWS-3-M";
                  }
                 }
                 if(strMyURL.toLowerCase().contains("about") ||strMyURL.toLowerCase().contains("who")
                  || (toPageA !=null && !this.toPageA.isEmpty() && strMyURL.toLowerCase().contains(fromPageA)) ){
                  pageKey="3R-ABOUT-1-M";
                  a1=a1+1;
                  if(a1==2){
                   pageKey="3R-ABOUT-2-M";
                  }
                  if(a1==3){
                   pageKey="3R-ABOUT-3-M";
                  }
                 }
                 if(strMyURL.toLowerCase().contains("product") ||strMyURL.toLowerCase().contains("buy")
                  || (toPageP !=null && !this.toPageP.isEmpty() && strMyURL.toLowerCase().contains(fromPageP)) ){
                  pageKey="3R-PRODUCT-1-M";
                  p1=p1+1;
                 }
                 if(pageKey.isEmpty()){
                  pageKey="3R-PRODUCT-1-M";
                  p1=p1+1;
                 }
                  if(p1==1){
                   pageKey="3R-PRODUCT-2-M";
                  }
                  if(p1==2){
                   pageKey="3R-PRODUCT-3-M";
                  }
                 // P4 need to go to other categories

                  if(p1==4){
                   if(c1==2){
                    pageKey="3R-CONTACTUS-3-M";
                    c1=3;
                   }
                   if(c1==1){
                    pageKey="3R-CONTACTUS-2-M";
                    c1=2;
                   }
                   if(n1==2){
                    pageKey="3R-NEWS-3-M";
                    n1=3;
                   }
                   if(n1==1){
                    pageKey="3R-NEWS-2-M";
                    n1=2;
                   }
                   if(n1==0){
                    pageKey="3R-NEWS-1-M";
                    n1=1;
                   }
                   if(a1==0){
                    pageKey="3R-ABOUT-1-M";
                    a1=1; 
                   }
                   if(a1==1){
                    pageKey="3R-ABOUT-2-M";
                    a1=2;
                   }
                   if(a1==2){
                    pageKey="3R-ABOUT-3-M";
                    a1=3;
                   }
                  }

                 counter=counter+1;
                 if(counter <=counterLast){
                  continue;//skip
                 }
               ///////connect to other pages one at a time
                 
                 try{
                  page = Jsoup.connect(url+"/"+strMyURL).userAgent("http://scrapingauthority.com").get();
                 }catch (Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("url")+" "+url+" "+strMyURL+" "+bundle.getString("connect")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
                  return ;
                 }

                 //duplicate or call a method to save and use background image
   
                 //save after img source is changed 
                 //select all img tags for this page
                 Elements myImageElements = page.select("img");
                 //iterate over each image, copy to db and replace with jsf tag to load from db
                 for(Element imageElement : myImageElements){
                  String strImageURL = imageElement.attr("abs:src");
                  //download image  if img tag with src empty use current url
                  if(strImageURL.isEmpty()){
                   strImageURL=url+"/"+strMyURL;
                  }
                  downloadImage(strImageURL);
                  key="X"+strImageURL.substring( strImageURL.lastIndexOf("/") + 1 );
                  //imageElement.replaceWith(new TextNode(hgraphicImage));
                  hgraphicImage="/ImageServletCdi/?table=blobdata&seq=1&qlf=PIC&id="+key;
                  imageElement.attr("src", hgraphicImage);
                  homeOthersTxt=page.toString();

                //now save the page for each key change 
                //jun012020 change html menu <a href="contact.html" to <a href="contact.html" to Cantact-1.wflow
                this.clearInstance();
                yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A"+pageKey,"TXT",0);
                if (yxxxuq1m1xwwqqqxxxxxclobdata == null || yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 yxxxuq1m1xwwqqqxxxxxclobdata=this.getInstance();
                 this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
                 this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(pageKey);
                 this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                 this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
                 this.instance.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 this.instance.setA4xxexxxbvxxxxxxxxxxtype("txt");

                 superdotpersist();                
                }else{
                 //add logic to save current data ??
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
                 this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 superdotupdate(); 
                }   

                 }
                 if(counter >= counterMax ){
                  // save counter in client and next time skip 5 records to avoid txn time out
                  counterDone=counterLast+counter;
                  this.clientUpdateCounter(counterDone);
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("approximate")+" "+bundle.getString("total")+" "+bundle.getString("page")+" "+bundle.getString("links")+" "+myElements.size()+", "+bundle.getString("migrated")+" "+counterDone,""));
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Migrated")+" "+bundle.getString("as")+" "+bundle.getString("Preview")+" "+bundle.getString("pages[XXX-M]")+", "+" "+bundle.getString("use")+" "+bundle.getString("Setups/Customization")+" "+bundle.getString("to")+" "+bundle.getString("Preview")+" "+bundle.getString("then")+" "+bundle.getString("Publish"),""));

                  return;
                 } 

                }//links

 
	}




    /**
    * The following method used by migrateTools.xhtml to scrape url content
    * @param arg contentTheme is the external URL not theme
    * @return void but the method updates preview pages like mid-top, news etc
    * @exception None 
    * @see "setContentThemeAndVendor where a theme is used "
    * 
    * select <img tags from landing page , download img as blob, replace img src to blob
    * and save/update the page content as clob mid-top. ie url page content becomes home page
    * then take the same page content and select all link tags <a and href attributes for other pages
    * Loop through each link and get the page and download images to db and change img src and
    * based on the link name map to a raaspi page like About, product, News etc. default to product key 
    * mapping can be helped by user specifying from and to page
    *  do not convert to xhtml or use rtemplate etc but use html as is except
    * change img to <img  src="/ImageServletCdi/?table=blobdata&amp;seq=1&amp;qlf=PIC&amp;id=Xcircle-logo.png" 
    * instead of <img src = "images/circle-logo.png". basically instead of using fie storage we will use db
    * an alternative can be to store in data dir pf the wildfly server need to check what will be the path for url
    * we need add logic to 
    */
	public void setContentThemeAndMigrate(String contentTheme) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString(""),""));

                if(contentTheme == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("url")+" "+bundle.getString("address")+" "+contentTheme+" "+bundle.getString("empty"),""));
                 return;
                }
                String url=contentTheme;//stripoff prefix part
                if (url.contains("www.")){
                 urlIndex=url.lastIndexOf("www.");
                 if (urlIndex == -1){
                  key=url;
                 }else{
                  key=url.substring(urlIndex)+4;
                 }
                }else{
                 urlIndex=url.lastIndexOf("//");
                 if (urlIndex == -1){
                  key=url;
                 }else{
                  key=url.substring(urlIndex)+2;
                 }
                }
                //get page content
                Document page=null;
                try{
                 page = Jsoup.connect(url).userAgent("http://scrapingauthority.com").get();
                }catch (Exception e){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("url")+" "+url+" "+bundle.getString("connect")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
                 return ;
                }
                String id="";
                String key="";
                String pageKey="";
                String hgraphicImage="";
                String outTxt="";
                Element temp=null;
                int p1=0;
                int n1=0;
                int a1=0;
                int r1=0;
                int c1=0;
                int i1=0;
                //select all img tags for home/landing page
                Elements imageElements = page.select("img");
                //iterate over each image, copy to db and replace with jsf tag to load from db
                for(Element imageElement : imageElements){
                 String strImageURL = imageElement.attr("abs:src");
                 //download image for home page
                 downloadImage(strImageURL);
                 key="X"+strImageURL.substring( strImageURL.lastIndexOf("/") + 1 );
                 //imageElement.replaceWith(new TextNode(hgraphicImage));
                 hgraphicImage="/ImageServletCdi/?table=blobdata&seq=1&qlf=PIC&id="+key;
                 imageElement.attr("src", hgraphicImage);//change img source and then save home page
                }
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("approximate")+" "+bundle.getString("total")+" "+bundle.getString("images")+" "+imageElements.size()+" "+bundle.getString("migrated"),""));

                outTxt=page.toString();
                this.clearInstance();
                yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0);
                if (yxxxuq1m1xwwqqqxxxxxclobdata == null || yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  //FacesMessage.SEVERITY_INFO,"No clobdata found",""));

                 //return;
                 yxxxuq1m1xwwqqqxxxxxclobdata=this.getInstance();
                 this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
                 this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-M");
                 this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                 this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(outTxt);
                 this.instance.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 this.instance.setA4xxexxxbvxxxxxxxxxxtype("txt");

                 superdotpersist();                
                }else{
                 //add logic to save current data ??
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(outTxt);
                 this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                 superdotupdate(); 
                }   
                //after home page, convert/map links to other pages. Also adjust the raaspi menue
                Elements myElements = page.select("a");
                //iterate over each anchor/link, get url and scrape that page content and copy into
                // about-1,News-, ContactUs- etc raaspi .xhtml based on linkname
                // see below for manual maping based migration for other pages ex old url > new fromPageN(ews) 
                //convert existing Li based html menue to <nav raaspi horizontal menue, later add raaspi menu support
                int counterMax=5;
                int counterLast=0;
                int counterDone=0;
                counterLast=this.clientUpdateCounter(0);//get last counter
                int counter=0;
                if(counterLast >= myElements.size()){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Migration")+" "+bundle.getString("already")+" "+bundle.getString("done"),""));
                  return;
                }
                for(Element myElement : myElements){
                 String strMyURL = myElement.attr("href");
                 if(!strMyURL.contains(".html")){
                  continue;//# php ?take care later 
                 }
                 //map URL to pageKey
                 pageKey="";
                 if(strMyURL.toLowerCase().contains("home")){
                  continue;
                 }

                 if(strMyURL.toLowerCase().contains("contact") || 
                  (toPageC !=null && !this.toPageC.isEmpty() && strMyURL.toLowerCase().contains(fromPageC)) ){
                  pageKey="3R-CONTACTUS-1-M";
                  c1=c1+1;
                  if(c1==2){
                   pageKey="3R-CONTACTUS-2-M";
                  }
                  if(c1==3){
                   pageKey="3R-CONTACTUS-3-M";
                  }
                 }
                 // now check manual mapped news and key words like even , calendar

                 if(strMyURL.toLowerCase().contains("event") ||strMyURL.toLowerCase().contains("calendar")
                  || (toPageN !=null && !this.toPageN.isEmpty() && strMyURL.toLowerCase().contains(fromPageN)) ){
                  pageKey="3R-NEWS-1-M";
                  n1=n1+1;
                  if(n1==2){
                   pageKey="3R-NEWS-2-M";
                  }
                  if(n1==3){
                   pageKey="3R-NEWS-3-M";
                  }
                 }
                 if(strMyURL.toLowerCase().contains("about") ||strMyURL.toLowerCase().contains("who")
                  || (toPageA !=null && !this.toPageA.isEmpty() && strMyURL.toLowerCase().contains(fromPageA)) ){
                  pageKey="3R-ABOUT-1-M";
                  a1=a1+1;
                  if(a1==2){
                   pageKey="3R-ABOUT-2-M";
                  }
                  if(a1==3){
                   pageKey="3R-ABOUT-3-M";
                  }
                 }
                 if(strMyURL.toLowerCase().contains("product") ||strMyURL.toLowerCase().contains("buy")
                  || (toPageP !=null && !this.toPageP.isEmpty() && strMyURL.toLowerCase().contains(fromPageP)) ){
                  pageKey="3R-PRODUCT-1-M";
                  p1=p1+1;
                 }
                 if(pageKey.isEmpty()){
                  pageKey="3R-PRODUCT-1-M";
                  p1=p1+1;
                 }
                  if(p1==1){
                   pageKey="3R-PRODUCT-2-M";
                  }
                  if(p1==2){
                   pageKey="3R-PRODUCT-3-M";
                  }
                 // P4 need to go to other categories

                  if(p1==4){
                   if(c1==2){
                    pageKey="3R-CONTACTUS-3-M";
                    c1=3;
                   }
                   if(c1==1){
                    pageKey="3R-CONTACTUS-2-M";
                    c1=2;
                   }
                   if(n1==2){
                    pageKey="3R-NEWS-3-M";
                    n1=3;
                   }
                   if(n1==1){
                    pageKey="3R-NEWS-2-M";
                    n1=2;
                   }
                   if(n1==0){
                    pageKey="3R-NEWS-1-M";
                    n1=1;
                   }
                   if(a1==0){
                    pageKey="3R-ABOUT-1-M";
                    a1=1; 
                   }
                   if(a1==1){
                    pageKey="3R-ABOUT-2-M";
                    a1=2;
                   }
                   if(a1==2){
                    pageKey="3R-ABOUT-3-M";
                    a1=3;
                   }
                  }

                 counter=counter+1;
                 if(counter <=counterLast){
                  continue;//skip
                 }
                 
                 try{
                  page = Jsoup.connect(url+"/"+strMyURL).userAgent("http://scrapingauthority.com").get();
                 }catch (Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("url")+" "+url+" "+strMyURL+" "+bundle.getString("connect")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
                  return ;
                 }
                 //save after img source is changed 
                 //select all img tags for this page
                 Elements myImageElements = page.select("img");
                 //iterate over each image, copy to db and replace with jsf tag to load from db
                 for(Element imageElement : myImageElements){
                  String strImageURL = imageElement.attr("abs:src");
                  //download image  if img tag with src empty use current url
                  if(strImageURL.isEmpty()){
                   strImageURL=url+"/"+strMyURL;
                  }
                  downloadImage(strImageURL);
                  key="X"+strImageURL.substring( strImageURL.lastIndexOf("/") + 1 );
                  //imageElement.replaceWith(new TextNode(hgraphicImage));
                  hgraphicImage="/ImageServletCdi/?table=blobdata&seq=1&qlf=PIC&id="+key;
                  imageElement.attr("src", hgraphicImage);
                  homeOthersTxt=page.toString();

                //now save the page for each key change
                this.clearInstance();
                yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A"+pageKey,"TXT",0);
                if (yxxxuq1m1xwwqqqxxxxxclobdata == null || yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 yxxxuq1m1xwwqqqxxxxxclobdata=this.getInstance();
                 this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
                 this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(pageKey);
                 this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                 this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
                 this.instance.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 this.instance.setA4xxexxxbvxxxxxxxxxxtype("txt");

                 superdotpersist();                
                }else{
                 //add logic to save current data ??
                 yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
                 this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 superdotupdate(); 
                }   

                 }
                 if(counter >= counterMax ){
                  // save counter in client and next time skip 5 records to avoid txn time out
                  counterDone=counterLast+counter;
                  this.clientUpdateCounter(counterDone);
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("approximate")+" "+bundle.getString("total")+" "+bundle.getString("page")+" "+bundle.getString("links")+" "+myElements.size()+", "+bundle.getString("migrated")+" "+counterDone,""));
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Migrated")+" "+bundle.getString("as")+" "+bundle.getString("Preview")+" "+bundle.getString("pages[XXX-M]")+", "+" "+bundle.getString("use")+" "+bundle.getString("Setups/Customization")+" "+bundle.getString("to")+" "+bundle.getString("Preview")+" "+bundle.getString("then")+" "+bundle.getString("Publish"),""));

                  return;
                 } 

                }//links
 
	}

    public Integer clientUpdateCounter(Integer counter) {
                 try{
                  yxxxch522xhhxxhxxxxxclient =(Yxxxch522xhhxxhxxxxxclient) entityManager
		 .createQuery(
		  "select cc from Yxxxch522xhhxxhxxxxxclient cc where cc.a0xxukxxbvxxxxxxxxxxclientversion = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		  .setParameter("nKeyName","01")
		  .setParameter("owner2", owner2Code)
		  .getSingleResult();
		      if (yxxxch522xhhxxhxxxxxclient != null) {
                       // first check whether Client Table is locked for Bus Date maintenance , not sure where is the lock logic
                       // remove hard coded property names
			  int mstatusfl=yxxxch522xhhxxhxxxxxclient.getZexxzzfxhhxxxxxxxxxxstatusfl();
                       if (isBitSet(mstatusfl, _mpartial)){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("api")+bundle.getString("key")+bundle.getString("not")+bundle.getString("setup")+bundle.getString("yet"),""));

		       }
                       if (isBitSet(mstatusfl, _mclosed) ){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("service")+" "+bundle.getString("decommisioned"),""));

          		       }
                       // update changes the client statusfldate and tracks when last logon for this tenant
                       if(counter == 0){
                        if(yxxxch522xhhxxhxxxxxclient.getP3xxzxxrbvxxxxxxxxxxrefbaradj()==null){
                         return 0;  
                        }else{
                         return yxxxch522xhhxxhxxxxxclient.getP3xxzxxrbvxxxxxxxxxxrefbaradj();
                        }
                       }
                       yxxxch522xhhxxhxxxxxclient.setP3xxzxxrbvxxxxxxxxxxrefbaradj(counter);
                       // migration means static ui pages but images and text dynamic
                       // via editor but no db data for items etc
                       // along with bootstrap,w3.css put some jsf themes to change to jsf
                       //products stays jsf but can choose ui part 22 will use ??
          
                       yxxxch522xhhxxhxxxxxclient.setW5xxuxxxbvxxxxxxxxxxrmlpassw("2 ");//use home-s(tatic) 

                       yxxxch522xhhxxhxxxxxclientHome.clearInstance();
                       yxxxch522xhhxxhxxxxxclientHome.setInstance(yxxxch522xhhxxhxxxxxclient);
                       yxxxch522xhhxxhxxxxxclientHome.update();

                      }
	             } catch (NoResultException ex) {
                       //ignore
                     }catch (Exception ex){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("install")+" / "+bundle.getString("access")+" "+bundle.getString("code")+" "+bundle.getString("exception")+" "+ex.getMessage(),""));

                     }
                    return null;

     }




    private void downloadImage(String strImageURL){
        
        //get file name from image path 
        String strImageURLR=strImageURL.replaceAll(" ","%20");         
        String strImageName = strImageURL.substring( strImageURL.lastIndexOf("/") + 1 );
        byte[] imageInByte=null;
        
        try {
            
            //open the stream from URL
            URL urlImage = new URL(strImageURLR);
            InputStream in = urlImage.openStream();
            
            byte[] buffer = new byte[4096];
            int n = -1;
            
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            
            //write bytes to the ByteArrayOutput stream
            while ( (n = in.read(buffer)) != -1 ){
                baos.write(buffer, 0, n);
            }
            imageInByte=baos.toByteArray();
            baos.close();
      urlIndex=strImageName.lastIndexOf(".");
      lobDataType=strImageName.substring(urlIndex+1);
      if(lobDataType.length()>35){
       lobDataType=lobDataType.substring(0,34);
      }
      if(strImageName.length()>35){
       strImageName=strImageName.substring(0,34);
      }
      yxxxuq1n1xwwqqqxxxxxblobdataHome.clearInstance();
      yxxxuq1n1xwwqqqxxxxxblobdata=yxxxuq1n1xwwqqqxxxxxblobdataHome.getInstance();;
      yxxxuq1n1xwwqqqxxxxxblobdata.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
      yxxxuq1n1xwwqqqxxxxxblobdata.setA1xxuxxxbv49xxxxxxxxfromkey(strImageName);
      yxxxuq1n1xwwqqqxxxxxblobdata.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
      yxxxuq1n1xwwqqqxxxxxblobdata.setA3xxexnsbvxxxxxxxxxxsequence(1);
      yxxxuq1n1xwwqqqxxxxxblobdata=yxxxuq1n1xwwqqqxxxxxblobdataHome.getInstance();
      yxxxuq1n1xwwqqqxxxxxblobdata.setB1xxuzbxbvxxxxxxxxxxdata(imageInByte);
      yxxxuq1n1xwwqqqxxxxxblobdata.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
      yxxxuq1n1xwwqqqxxxxxblobdata.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      yxxxuq1n1xwwqqqxxxxxblobdata.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      yxxxuq1n1xwwqqqxxxxxblobdataHome.persist();


            
        } catch (IOException e) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_ERROR,bundle.getString("image")+" "+bundle.getString("download")+" / "+bundle.getString("save")+" "+bundle.getString("exception")+" "+e.getMessage(),""));

        }
        
    }

    // persistUpdateClobData is a general purpose method to create text record where data exists for any key combination
    //used in cartItem.xhtml . This method may replace existing custom methods or be called by them to minimize ui change
    public String persistUpdateClobData(String table,String keyWPrefix,String keyQualifier,String type,int keySequence,String owner,String owner2,String data,String appendData) {
    
        Map<String,String> params = 
        FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
        String ratingV=params.get("rating"); //not sure why param passing rating, used to be ratingVal
        customIdentity.setHoldValue(ratingV);

     if(keyWPrefix.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("No")+" "+bundle.getString("product")+" "+bundle.getString("selected"),""));
      return null;
     }
     if(data.isEmpty() && appendData.isEmpty() && ratingV.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("Content")+" "+bundle.getString("empty"),""));
       return null;
     }
     if(keySequence == -30 ){
      keySequence = yxxxuq1m1xwwqqqxxxxxclobdataList.getNextSeqAvailable(table,keyWPrefix,keyQualifier,30);// no end limit 
     }
     if(ratingV==null || ratingV.isEmpty()){
      //data=data+"<br></br>"+appendData+"<br></br>Rating: None "; used for non rating as well, use el to show none
      data=data+"<br></br>"+appendData;
     }else{
      if(ratingV.equals("1")){
       ratingV="*";
      }
      if(ratingV.equals("2")){
       ratingV="**";
      }
      if(ratingV.equals("3")){
       ratingV="***";
      }
      if(ratingV.equals("4")){
       ratingV="****";
      }
      if(ratingV.equals("5")){
       ratingV="*****";
      }
      data=data+"<br></br>"+appendData+"<br></br>Rating "+ratingV;
     }
     if(keySequence >=30 ){//put date only if review not for summary or specifications
      String[] str = customIdentity.getImailaddr().split("@");
      String By="";
      if(str.length>1){
       By=str[0].length()>4?str[0].substring(0,4):str[0];
      }
      By=By+"..";
      timeStamp = new SimpleDateFormat("yyyy MMMM").format(new Date());
      data=data+" "+"\u270D"+" "+By+"  "+timeStamp+"<hr></hr>";
     }
     this.clearInstance();
     this.getInstance();
     if(owner.isEmpty()){
      owner=ownerCode;
     }
     if(owner2.isEmpty()){
      owner2=owner2Code;
     }
     if(owner2.equals("SYSTEM")){
      yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance(table,keyWPrefix,keyQualifier,keySequence,owner);
     }else{
      yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance(table,keyWPrefix,keyQualifier,keySequence);
     }
     if(!bcontinue){
      return null;
     }
     slobkeyhash = keyWPrefix.substring(1);
     if(yxxxuq1m1xwwqqqxxxxxclobdata !=null){
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
      // if table ITEM and key contains PRODUCT- seq 0,10 or 30 and HDR then delete rather than update. if does not exist , wont come here. Allows toggling on/off
      if(table.equals("FPXXFQ1A5XWWQQHXXXXXITEM") && slobkeyhash.contains("PRODUCT-")
          && keyQualifier.equals("HDR") && (keySequence == 0 ||keySequence == 10 || keySequence == 30)){
       superdotremove();
       return "deleted";
      }

      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(data);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+": "+table+" "+slobkeyhash+" "+keyQualifier+" "+keySequence+" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable(table); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(keyQualifier);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(keySequence);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(data);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(owner);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype(type);
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+": "+table+" "+slobkeyhash+" "+keyQualifier+" "+keySequence+" "+"at"+" "+timeStamp,""));
     }
     customIdentity.setHoldValue2("");//clear input area
     customIdentity.setHoldValue("");//clear rating
     return "";
    }

    // added but was decided to not use for theme
    public String persistTopLTAsSystem() {
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-M",this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(yxxxuq1m1xwwqqqxxxxxclobdata !=null){
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtT);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("short")+" "+bundle.getString("highlight")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtT);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("short")+" "+bundle.getString("highlight")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTopLTFAsSystem() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-M",this.contentTheme,1,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtTF);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("short")+" "+bundle.getString("highlight")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtTF);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("short")+" "+bundle.getString("highlight")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTopLAsSystem() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-LEFT-M",this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtL);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("short")+" "+bundle.getString("highlight")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-LEFT-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtL);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("short")+" "+bundle.getString("highlight")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistTopAsSystem() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-BKGR-M",this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTopHAsSystem() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-MENU-M",this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtH);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MENU-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtH);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTextAndItem(String type,String parentKey) {
     bcontinue=true;
     String aName=null;
     String param2="";//holds parentKey original value
     String jay=null;
     // overide homeTopTxt if homeTopTxtH is not empty
     //comes from TextEditEasy. type is like BI-D etc parantKey is null or themeName or SYSTEM
     //non parameters contentVendor value for theme Name copied into aName if type is Detail -D
     //               overRideValue holds categoryName and overRideValueS holds System categoryName if type is Detail BI-D and copied over parentKey
     //               overridevalueS holds subcategory if SI-D  
     //               contentTheme value holds Category Name and also copied into aName if type is Category -L 
     //mar15 may not need BI-DV video/voice ?? as BI-D with iframe may cover it
     if(homeTopTxtH !=null && !homeTopTxtH.isEmpty()){
      homeTopTxt=homeTopTxtH;
     } 
     if(parentKey.equals("sampleT")){
      if(${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-SAMPLE-TOP","1",1) !=null){ 
       homeTopTxt=${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-SAMPLE-TOP","1",1).getB1xxuzaxbvxxxxxxxxxxdata();//use render to show
       if(homeTopTxt==null || homeTopTxt.isEmpty()){ 
        bcontinue=false;
       }
      }else{
       bcontinue=false;
      }
      if(!bcontinue){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("sample")+" "+bundle.getString("content")+" "+bundle.getString("for")+" "+bundle.getString("key")+" "+"3R-SAMPLE-TOP"+" "+bundle.getString("empty"),""));
        return null;
      }
      jay=homeTopTxt;
      try{
       homeTopTxt=this.sanitize(homeTopTxt);
       homeTopTxt=jay;
      } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
               return null;
      }
     }
     if(parentKey.equals("sampleM")){
      if(${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-SAMPLE-MID","1",1) !=null){ 
       homeMidTxt=${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-SAMPLE-MID","1",1).getB1xxuzaxbvxxxxxxxxxxdata();//use render to show
       if(homeMidTxt==null || homeMidTxt.isEmpty()){ 
        bcontinue=false;
       }
      }else{
       bcontinue=false;
      }
      if(!bcontinue){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("sample")+" "+bundle.getString("content")+" "+bundle.getString("for")+" "+bundle.getString("key")+" "+"3R-SAMPLE-MID"+" "+bundle.getString("empty"),""));
        return null;
      }
      jay=homeMidTxt;
      try{
       homeMidTxt=this.sanitize(homeMidTxt);
       homeMidTxt=jay;
      } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
               return null;
      }
     }

     if(parentKey.equals("sampleT") && parentKey.equals("sampleM") ){
      return null;
     }
    
     param2=parentKey;
     if(type.equals("SI-D")){
      aName=this.getContentVendor();//contentVendor has theme name (SI-D) not vendor name
     }
     if(type.equals("SI-L*")){
      aName=this.getThemeFunctionSub();//themeFunctionSub holds name for theme subcategory Name(SI-L*)
     }
     if(type.equals("SI-L1")){
      aName=this.getContentTheme();//contentTheme holds name for theme category Name(SI-L1)
     }
     if(type.equals("BI-L1") || (type.equals("BI-L1") && parentKey.equals("SYSTEM")) ){
      aName=contentTheme;
     }
     if(type.equals("BI-D") || type.equals("BI-DV")){
      aName=this.getContentVendor();//contentTheme varaiable holds name for theme category (SI-L1)
     }
     if(type.equals("CI-L1")){
      aName=this.getContentTheme();//
     }

     if(homeTopTxt ==null || homeTopTxt.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_WARN,bundle.getString("Content")+" "+bundle.getString("for")+" "+aName+" "+bundle.getString("empty"),""));
     } 

     //create item instance along with docmnt key with prefix and then create clobdata instance with fromtable as item 
     // and fromkey as docmnt less prefix
    try{
     fpxxfq1a5xwwqqhxxxxxitem=fpxxfq1a5xwwqqhxxxxxitemHome.getInstance();
     fpxxfq1a5xwwqqhxxxxxitem.setZ2xxcsxrlxxxxxxxxxxxdateadded(calendar.getTime());
     if ( (type.equals("BI-D") || type.equals("BI-DV")) && (aName == null || aName.isEmpty()) ){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Blog")+" "+bundle.getString("title")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if (type.equals("SI-D") && (aName == null || aName.isEmpty())){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("themeContent")+" "+bundle.getString("title")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("BI-DV") && (homeTopTxt == null || homeTopTxt.length() == 0)){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("blog")+" / "+bundle.getString("theme")+" "+bundle.getString("content")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("BI-L1") && aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Blog")+" "+bundle.getString("category")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("SI-L*") && aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("themeContent")+" "+bundle.getString("subcategory")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("SI-L1") && aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("themeContent")+" "+bundle.getString("category")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("CI-L1") && aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("case")+" "+bundle.getString("category")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }

     if(type.equals("BI-D") && param2.equals("SYSTEM") ){
      parentKey=overRideValueS;
     } 
     if(type.equals("SI-D") && param2.equals("sub") ){
      parentKey=overRideValueS;
     } 
     if(param2.isEmpty() ){
      parentKey=overRideValue;
     } 
     if (parentKey == null && (type.equals("BI-D")|| type.equals("BI-DV")) ){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Library")+" / "+bundle.getString("Category")+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("SI-L*") && overRideValue==null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("themeCategory")+" "+overRideValue+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("SI-D") && (overRideValue==null && overRideValueS==null)){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("themeCategory")+" / "+bundle.getString("themeSubCategory")+" "+bundle.getString("empty"),""));
      return null;
     }

     if(type.equals("BI-DV")){
      fpxxfq1a5xwwqqhxxxxxitem.setC6xxusxrbv16xxxxxxxxtype("BI-D");
     }else{
      fpxxfq1a5xwwqqhxxxxxitem.setC6xxusxrbv16xxxxxxxxtype(type);
     }
     if (type.equals("SI-D")){
      String jt=aName+themeFunction;//theme for site usage function
      subKey=subKey+jt;
      if(jt.length() > 120){
       jt=jt.substring(0,120);
      }
      fpxxfq1a5xwwqqhxxxxxitem.setB1xxuszsbvxxxxxxxxxxdescript(aName+"/"+themeFunction); 
     }else{
      subKey=subKey+aName+type;
      fpxxfq1a5xwwqqhxxxxxitem.setB1xxuszsbvxxxxxxxxxxdescript(aName); 
     }
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
     subKey=subKey+timeStamp.substring(17,18);
     subKey=subKey+fpxxfq1a5xwwqqhxxxxxitem.getZ2xxcsxrlxxxxxxxxxxxdateadded().toString().substring(0,10)+fpxxfq1a5xwwqqhxxxxxitem.getZ2xxcsxrlxxxxxxxxxxxdateadded().toString().substring(fpxxfq1a5xwwqqhxxxxxitem.getZ2xxcsxrlxxxxxxxxxxxdateadded().toString().length()-6);
     int subL=subKey.length();
     if (subL !=0){
      String subKeyh=Integer.toString(subKey.hashCode());
      if (subL > 25){
       subKey=subKey.substring(0,11)+subKey.substring(subL-5,subL)+subKeyh;
      }
      else {
       subKey=subKey+subKeyh;
      }
     }

     key=subKey;
     if (key.length() > 32){
       key=key.substring(0,32);//33 chrs
     }
     fpxxfq1a5xwwqqhxxxxxitem.setA0xxukixbxxxxxxxxxxxmatcode(key); 
     if(this.getMailingText1() !=null && !this.getMailingText1().isEmpty()){
      fpxxfq1a5xwwqqhxxxxxitem.setY2xxuxxrbvxxxxxxxxxxmisccode1(this.getMailingText1()); 
      fpxxfq1a5xwwqqhxxxxxitem.setY3xxuxxrbvxxxxxxxxxxmisccode2(this.getMailingText2()); 
     } 
     slobkeyhash=Integer.toString(key.hashCode());
     fpxxfq1a5xwwqqhxxxxxitem.setW8xxuzdrbvxxxxxxxxxxdocmnt("A"+slobkeyhash); 
     fpxxfq1a5xwwqqhxxxxxitemHome.setInstance(fpxxfq1a5xwwqqhxxxxxitem);  
     //if theme, misccode2 has lowest level ie theme name say London(SI-D) or theme sub category say Bakery if SI-L*
     // or theme category say Elegant if SI-L1
     // subcodesn1 has 'TH' for all 3 types. Note theme vendor dicides on category and subcategory, function is fixed
     // subcodesn2 has sub category say Nature if SI-D or category Panaromic if SI-L* and null if SI-L1
     // subcodesn2 has function like Bakery/Business if SI-D and null if SI-L* or SI-L1
     if(type.equals("SI-D")){
      fpxxfq1a5xwwqqhxxxxxitem.setY2xxuxxrbvxxxxxxxxxxmisccode1(ownerCode);//theme vendor
      fpxxfq1a5xwwqqhxxxxxitem.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");//make these SYSTEM to share among masyer and client siotes
      fpxxfq1a5xwwqqhxxxxxitem.setY3xxuxxrbvxxxxxxxxxxmisccode2(aName);//contentVendor/theme name if si-d
      fpxxfq1a5xwwqqhxxxxxitem.setFpxxfq1a5xwwqqhxxxxxitem(fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(parentKey));
      fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn1bvxxxxxxxxxxsubcodesn("TH");
      String subCat="";
      String cat="";
      if(fpxxfq1a5xwwqqhxxxxxitem.getFpxxfq1a5xwwqqhxxxxxitem().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L*")){
       subCat=fpxxfq1a5xwwqqhxxxxxitem.getFpxxfq1a5xwwqqhxxxxxitem().getY3xxuxxrbvxxxxxxxxxxmisccode2();
       fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn2bvxxxxxxxxxxsubcodesn2(subCat);// get parent subcodesn2
      }else{
       if(fpxxfq1a5xwwqqhxxxxxitem.getFpxxfq1a5xwwqqhxxxxxitem().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1")){
        cat=fpxxfq1a5xwwqqhxxxxxitem.getFpxxfq1a5xwwqqhxxxxxitem().getY3xxuxxrbvxxxxxxxxxxmisccode2();
        fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn3bvxxxxxxxxxxsubcodesn3(cat);//, get parent subcodesn2
       }
      }
      fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn3bvxxxxxxxxxxsubcodesn3(themeFunction);//siteusage
     }
     if(type.equals("SI-L*")){
      fpxxfq1a5xwwqqhxxxxxitem.setY2xxuxxrbvxxxxxxxxxxmisccode1(ownerCode);
      fpxxfq1a5xwwqqhxxxxxitem.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");//make these SYSTEM to share among masyer and client siotes
      fpxxfq1a5xwwqqhxxxxxitem.setY3xxuxxrbvxxxxxxxxxxmisccode2(aName);//themeFunctionSub/theme sub category if SI-L* say Bakery
      fpxxfq1a5xwwqqhxxxxxitem.setFpxxfq1a5xwwqqhxxxxxitem(fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(parentKey));//
      fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn1bvxxxxxxxxxxsubcodesn("TH");
      String catL="";
      if(fpxxfq1a5xwwqqhxxxxxitem.getFpxxfq1a5xwwqqhxxxxxitem().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1")){
       catL=fpxxfq1a5xwwqqhxxxxxitem.getFpxxfq1a5xwwqqhxxxxxitem().getY3xxuxxrbvxxxxxxxxxxmisccode2();
       fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn2bvxxxxxxxxxxsubcodesn2(catL);//, get parent subcodesn2
      }
     }
     if(type.equals("SI-L1")){
      fpxxfq1a5xwwqqhxxxxxitem.setY2xxuxxrbvxxxxxxxxxxmisccode1(ownerCode);
      fpxxfq1a5xwwqqhxxxxxitem.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");//make these SYSTEM to share among masyer and client siotes
      fpxxfq1a5xwwqqhxxxxxitem.setY3xxuxxrbvxxxxxxxxxxmisccode2(aName);//contentTheme/theme category if SI-L1 say Nature
      fpxxfq1a5xwwqqhxxxxxitem.setG2xxuxn1bvxxxxxxxxxxsubcodesn("TH");
     }

     if(type.equals("BI-D")||type.equals("BI-DV")){
      fpxxfq1a5xwwqqhxxxxxitem.setFpxxfq1a5xwwqqhxxxxxitem(fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(parentKey)); 
     }
     if((type.equals("BI-D") || type.equals("BI-L1")) && param2.equals("SYSTEM") ){  
       fpxxfq1a5xwwqqhxxxxxitem.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
       fpxxfq1a5xwwqqhxxxxxitemHome.superdotpersist();
     }else{
       fpxxfq1a5xwwqqhxxxxxitemHome.superdotpersist();//item persist next is clob
     }
     if(bcontinue){
      if (customIdentity.isDebug()){
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("item")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+key+") "+"at"+" "+timeStamp,""));
      }
     }
    } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO," "+"Item"+" "+" "+bundle.getString("key")+" "+ key+" "+bundle.getString("save")+"/ "+bundle.getString("content")+" "+bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));

         //if(type.equals("BI-D")||type.equals("BI-DV")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("use")+" "+ bundle.getString("Next")+" "+bundle.getString("button")+", "+bundle.getString("if")+" "+bundle.getString("multiple")+" "+bundle.getString("save")+" "+e.getMessage(),""));
         //}
               bcontinue=false;
               return null;
    }
    //now clobdata .  only if not BI-L1 and not SI-L1 (SI-L1 here means theme category not shopping item)
    // Category itself is not a blog or theme, so no clob is invloved
    // treat category as mini blog to show as summary with image, description only not good
    //also causes confusion re editor use and bypass needed  loading new image  SI-L* 
    if(!bcontinue){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+bundle.getString("save")+" "+bundle.getString("for")+" "+bundle.getString("key")+" "+key+" "+bundle.getString("error"),""));
        return null;//
    }
    if(type.equals("SI-D") || type.equals("BI-D")|| type.equals("BI-DV")
        ||type.equals("SI-L1") || type.equals("BI-L1") || type.equals("SI-L*") ||type.equals("CI-L1")){
     try{
      this.getInstance();
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("FPXXFQ1A5XWWQQHXXXXXITEM"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      if(type.equals("BI-DV")){
       this.instance.setB1xxuzaxbvxxxxxxxxxxdata(this.getHomeTopTxt());
      }else{
       this.instance.setB1xxuzaxbvxxxxxxxxxxdata(this.getHomeTopTxt());
      }
      //blog will have seq as 0 note some other type has seq 1
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      yxxxuq1m1xwwqqqxxxxxclobdata=this.instance;
      if(param2.equals("SYSTEM") ){  
       this.persist("SYSTEM");
      }else{
       this.persist();//clob/blob persist does not give msg
      }

     } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO," "+"Txt"+" "+" "+slobkeyhash+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));

               bcontinue=false;
               return null;
     }
     if(bcontinue){
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("Clobdata")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
     }  
    }
    //clear uploaded data otherwise another save will fail as detached entity
    this.clearUploadData();
    return "";
    }


    public String persistTopH() {
    // save directly to avoid ckeditor filtering out ul style
     //this.homeTopTxt=homeTopTxtH;
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MENU-M","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtH);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("html")+" "+bundle.getString("menu")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MENU-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtH);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("html")+" "+bundle.getString("menu")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }
    //
    public String persistTopC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }
    public String persistTopLTC() {
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(yxxxuq1m1xwwqqqxxxxxclobdata !=null){
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtT);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtT);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistTopLTFC() {
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",1);
     if(!bcontinue){
      return null;
     }
     if(yxxxuq1m1xwwqqqxxxxxclobdata !=null){
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtTF);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtTF);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTopLC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-LEFT-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtL);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-LEFT-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtL);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTop() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-M","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }
    public String persistTopLT() {
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-M","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(yxxxuq1m1xwwqqqxxxxxclobdata !=null){
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtT);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtT);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistTopLTF() {
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-M","TXT",1);
     if(!bcontinue){
      return null;
     }
     if(yxxxuq1m1xwwqqqxxxxxclobdata !=null){
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtTF);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtTF);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistTopL() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-LEFT-M","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtL);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-LEFT-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxtL);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    // added missing methods 
    public String persistProdC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-1-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-PRODUCT-1-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("product")+" "+bundle.getString("publish")+" "+bundle.getString("page") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistNewsC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-1-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-NEWS-1-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("news")+" "+bundle.getString("publish")+" "+bundle.getString("page") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistAboutC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-1-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-ABOUT-1-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("about")+" "+bundle.getString("publish")+" "+bundle.getString("page") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }
    public String persistContactC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-1-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-CONTACTUS-1-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("contactus")+" "+bundle.getString("publish")+" "+bundle.getString("page") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistResellerC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-1-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-RESELLERS-1-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
     timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("resellers")+" "+bundle.getString("publish")+" "+bundle.getString("page") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }




    public String removeTop() {
      try {
       this.getInstance();
       if(this.instance == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("delete"),""));
          return "null"; 
       }

         superdotremove();
      } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

           return null;
        }
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" Clobdata"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

    }

    public String removeTopLT() {
      try {
       this.getInstance();
       if(this.instance == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("delete"),""));
          return "null"; 
       }

         superdotremove();
      } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

           return null;
        }
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" Clobdata"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

    }

    public String removeTopLTF() {
      try {
       this.getInstance();
       if(this.instance == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("delete"),""));
          return "null"; 
       }

         superdotremove();
      } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

           return null;
        }
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" Clobdata"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

    }



    public String removeTopL() {
      try {
       this.getInstance();
       if(this.instance == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("delete"),""));
          return "null"; 
       }

         superdotremove();
      } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

           return null;
        }
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" Clobdata"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

    }



/**
 persist or updates shared (SYSTEM) entity for a vendor(owner) and a theme(qualifier) for key -M
*/
    public String persistMidAsSystem() {
     this.clearInstance();
     this.getInstance();
     if(contentTheme == null || contentTheme.isEmpty() ){
       if(skinBean.getPreviewTh() !=null && !skinBean.getPreviewTh().isEmpty() ){
        contentTheme=skinBean.getPreviewTh();// replacement for selectItems
       }else{
        contentTheme="sample";
       }
     }
     if(contentVendor == null){
      contentVendor="3R";// this should get replaced with selectVandor now ui:removed
     }

     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-MID-TOP-M",this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

/**
 persist or updates  entity for a key -M for a specific site
*/

    public String persistMidC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String persistMid() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String removeMid() {
      try {
       this.getInstance();
       if(this.instance == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("selected")+" "+bundle.getString("to")+" "+bundle.getString("delete"),""));
          return "null"; 
       }

         superdotremove();
      } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

           return null;
        }
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" Clobdata"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

    }



    public String persistFooterAsSystem() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-FOOTER-1-M",this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-FOOTER-1-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String persistFooterC() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-C","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-FOOTER-1-C");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

 
    public String persistFooter() {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-M","TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-FOOTER-1-M");
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    public String removeFooter() {
       this.clearInstance();
       this.getInstance();
       if(this.instance == null){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("delete"),""));
          return "null"; 
       }

        try {
         superdotremove();
        } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+this.instance.getA2xxuxxxbv50xxxxxxxxqualifier()+" "+this.instance.getA3xxexnsbvxxxxxxxxxxsequence()+" Clobdata"+" "+"at"+" "+timeStamp,""));

           return null;
        }
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+"Clobdata"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

    }



   public String updateTop() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-M","TXT",0);
     if(${clobdataEntityName} == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("top")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     ${clobdataEntityName}2=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-C","TXT",0);//check publish exists
     if(${clobdataEntityName}2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

   public String updateTopLT() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-M","TXT",0);
     if(yxxxuq1m1xwwqqqxxxxxclobdata == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("top")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     yxxxuq1m1xwwqqqxxxxxclobdata2=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",0);//check publish exists
     if(yxxxuq1m1xwwqqqxxxxxclobdata2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }
   public String updateTopLTF() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-M","TXT",1);
     if(yxxxuq1m1xwwqqqxxxxxclobdata == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("top")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     yxxxuq1m1xwwqqqxxxxxclobdata2=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",1);//check publish exists
     if(yxxxuq1m1xwwqqqxxxxxclobdata2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-MOST-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


   public String updateTopL() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-LEFT-M","TXT",0);
     if(${clobdataEntityName} == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("top")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     ${clobdataEntityName}2=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-LEFT-C","TXT",0);//check publish exists
     if(${clobdataEntityName}2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-LEFT-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("top")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

   public String updateMenu() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MENU-M","TXT",0);
     if(${clobdataEntityName} == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("menu")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     ${clobdataEntityName}2=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MENU-C","TXT",0);//check publish exists
     if(${clobdataEntityName}2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MENU-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("html")+" "+bundle.getString("menu")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("html")+" "+bundle.getString("menu")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }



/**
 called by Publish button and updates -C from -M data (should review before publish), persists or updates as needed
 if mistake can load -M again and publish
*/
    public String updateMid() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0);
     if(${clobdataEntityName} == null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("mid")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     ${clobdataEntityName}2=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-C","TXT",0);//check publish exists
     if(${clobdataEntityName}2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("mid")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }


    public String updateFooter() {
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-M","TXT",0);
     if(${clobdataEntityName} == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("footer")+" , "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("record")+" "+bundle.getString("to")+" "+" "+bundle.getString("publish")+" "+"at"+" "+timeStamp,""));
      return "";
     }
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata());//put preview data
     ${clobdataEntityName}2=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-C","TXT",0);//check publish exists
     if(${clobdataEntityName}2 == null){
      this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-FOOTER-1-C");
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata2);//exists so overide preview here w new data
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata());
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("footer")+" "+bundle.getString("publish") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }



/**
 called by Save in Gallery button (shown if raaspi and logged in as vendor) and updates -C from -M data (should review before publish) for owner(vendor)
  and SYSTEM
 if mistake can load -M again and save in Gallery
*/

   public String updateTopAsSystem() {
     // it seems none of the updatexxxAsSystem is called because no concept of publish for gallery, check logic if used in future
     //persistxxxasSytem is used to save as gallery
     //qualifier has theme name, owner has vendor code
     String key="A3R-TOP-BKGR-M";
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     if(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,this.contentTheme,0,this.contentVendor) == null){
      this.upLoadPurpose="ad";
      persistTopAsSystem();
      return "";
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,this.contentTheme,0,contentVendor));
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeTopTxt);
      //test more  
      this.upLoadPurpose="re";
      this.allowUpdate();
      return "";
     }
    }


/**
 no publish for a vendor, remove it ?? persistMidAsSystem should be used 
*/
    public String updateMidAsSystem() {
     //qualifier has theme name, owner has vendor code
     String key="A3R-MID-TOP-M";
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     if(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,this.contentTheme,0,this.contentVendor) == null){
      this.upLoadPurpose="ad";
      persistMidAsSystem();
      return "";
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,this.contentTheme,0,contentVendor));
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
      //test more  
      this.upLoadPurpose="re";
      this.allowUpdate();
      return "";
     }
    }

    public String updateFooterAsSystem() {
     //qualifier has theme name, owner has vendor code
     String key="A3R-FOOTER-1-M";
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     if(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,this.contentTheme,0,this.contentVendor) == null){
      this.upLoadPurpose="ad";
      persistFooterAsSystem();
      return "";
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,this.contentTheme,0,contentVendor));
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
      //test more  
      this.upLoadPurpose="re";
      this.allowUpdate();
      return "";
     }
    }

    public String persistAsSystem() {
     //need to change instance owner2 to SYSTEM first
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM"); 
     persist("SYSTEM");
     this.persist("SYSTEM");

     return "";
    }

    /**
    * used by site ThemeContent vendors to save their contents in Gallery for non Home page keys 3R-PRODUCT-X-M , 3R-CONTACTUS-X-M etc 
    * an html page with images and text is saved as owner2 SYSTEM for the key in clobdata 
    * @param args -String key of the clobdata, without prefix 
    * not as parameters but property contentTheme has name of the theme and used as qualifier and contentVendor as type 
    * homeOthersTxt holds the data entered in ckEditor and sequence is fixed as 0  
    * onces saved, takeContentAction method in homeOtherPagesEdtr is used to load page content from gallery.
    *  getSuggestListThemeVendor and getSuggestListTheme methods are used in homeOtherPagesEdtr to set which vendor, which theme
    * @return "" String type
    * @exception none here but handled in called methods 
    * @see "persist"
    */

    public String persistOthersAsSystem(String key) {
     this.clearInstance();
     this.getInstance();
     if(contentTheme == null || contentTheme.isEmpty() ){
       if(skinBean.getPreviewTh() !=null && !skinBean.getPreviewTh().isEmpty() ){
        contentTheme=skinBean.getPreviewTh();// replacement for selectItems
       }else{
        contentTheme="sample";
       }
     }
     if(contentVendor == null){
      contentVendor="3R";// this should get replaced with selectVandor now ui:removed
      //now contentvendor>owner is ignored in getclobDataSystemOwnerInstance
     }
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A"+key,this.contentTheme,0,this.contentVendor);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      if(key.contains("FOOTER-1")){// footer stores data in 
       this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
      }else{
       this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      }
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("others")+" "+key+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(key);
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(this.contentTheme);
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     if(key.contains("FOOTER-1")){// footer stores data in 
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeFooterTxt);
     }else{
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     }
     this.instance.setZ3xxutoxlhxxxxxxxxxxowner(this.contentVendor);
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.instance.setA4xxexxxbvxxxxxxxxxxtype("theme");
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("shared")+" "+bundle.getString("clobdata")+" "+bundle.getString("others")+" "+key+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }

    /**
    * used by site ThemeContent vendors to save their contents in System Gallery for non Home page keys 3R-PRODUCT-X-M , 3R-CONTACTUS-X-M etc 
    * an html page with images and text is saved as owner2 SYSTEM for the key in clobdata 
    * @param args -String key of the clobdata, without prefix 
    * not as parameters but property contentTheme has name of the theme and used as qualifier and contentVendor as type 
    * homeOthersTxt holds the data entered in ckEditor and sequence is fixed as 0  
    * onces saved, takeContentAction method in homeOtherPagesEdtr is used to load page content from gallery.
    *  getSuggestListThemeVendor and getSuggestListTheme methods are used in homeOtherPagesEdtr to set which vendor, which theme
    * @return "" String type
    * @exception none here but handled in called methods 
    * @see "persist()"
    */



    public String persistOthers(String key) {
     this.clearInstance();
     this.getInstance();
     ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A"+key,"TXT",0);
     if(!bcontinue){
      return null;
     }
     if(${clobdataEntityName} !=null){
      this.setInstance(${clobdataEntityName});
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
      this.superdotupdate();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("others")+" "+key+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }else{
     this.instance.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(key);
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(0);
     this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
     this.superdotpersist();
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("clobdata")+" "+bundle.getString("home")+" "+bundle.getString("others")+" "+key+" "+bundle.getString("preview") +" "+"at"+" "+timeStamp,""));
     }
     return "";
    }
    //
    public String updateOthersAsSystem(String key) {
     if(homeOthersTxt ==null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("content")+" "+ bundle.getString("empty")+" "+bundle.getString("load")+" "+bundle.getString("content")+" "+bundle.getString("if")+" "+bundle.getString("needed"),""));
      //return null;
     }
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     //get vendor code via user
     if(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,"TXT",0,"3R Compjayjay33-1339540101") == null){
      this.upLoadPurpose="ad";
      persistOthersAsSystem(key);
      return "";
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata",key,"TXT",0,"3R Compjayjay33-1339540101"));
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      //test more  
      this.upLoadPurpose="re";
      this.allowUpdate();
      return "";
     }
    }

    //comes from otherPagesEdtr used for publish,saves whatever key came as
    // key with prefix comes here to get instance, need to strip it off if persist 
    public String updateOthers(String key) {
     if(homeOthersTxt ==null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("content")+" "+ bundle.getString("empty")+" "+bundle.getString("load")+" "+bundle.getString("content"),""));
      return null;
     }
     this.bcontinue=true;
     this.clearInstance();
     this.getInstance();
     if(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata",key,"TXT",0) == null){
      this.upLoadPurpose="ad";
      key=key.substring(1);//
      persistOthers(key);// key without prefix
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("added")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+key+") "+"at"+" "+timeStamp,""));
      return "";
     }else{
      this.setInstance(yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata",key,"TXT",0));//key plus prefix
      this.instance.setB1xxuzaxbvxxxxxxxxxxdata(homeOthersTxt);
      //test more  
      this.upLoadPurpose="re";
      this.update();
      return "";
     }
    }


   
  </#if>
   
    /***
    * update is used by ui like xxxEdit and xxxEditEasy and has logic to prevent cross user updates 
    * update normally updates the entity for which the update was issued, but sometimes related updates are done like
    * 1. for transactions the details,item,customer/vendor are updated before calling entity updated
    *  like order,shipment etc are updated.
    *  If different owner then allowupdate() is used
    * 2. for usagebyperiods, rollupgroup is also updated but same owner  
    * 3. for entities like item,customer which has docmnt fileld for clob/blob data
    *  clob/blob has docmnt field but holds actual data wheres other entities like Item,Customer has 
    *  their hashed key field value in docmnt field. The sid key value not available until item gets created.
    *  There is logic to allow VW (visitor)or DH (Demo User) to change only own user records.
    *  verify posting not needed here because invoice/payment updates are done via updatedetailsall
    *  do not allow user to delete own user record or update own role/level/restrict/allow settings to prevent no one
    *  be left with enough rights , prevent via jsf rendered do not show if owner same as logon id
    * 
    * @param none but values come via variables
    * @return String null or some string value 
    * @exception various

    * Add logic to handle key value change > new hash code > update item as well as clob/blob fromKey
    * Change logic for clob/blob all over to not use seq 0, reserve it store removed value. Seq starts from 1
    * if more than 1 img why both add and replace not shown. If add put the new one with ++seq
    */
    public String update() {
     if(customIdentity.hasRole("VH") || customIdentity.hasRole("PH")) {
      <#if menuAttributesp2 == "1A" >
       if(!ownerCode.equals(this.instance.getZexxutoxlhxxxxxxxxxxowner())){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("If")+" "+bundle.getString("non")+" "+bundle.getString("owned")+", "+bundle.getString("update")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));
                 return null;
       }
      <#elseif menuAttributesp2 == "1M" && menuAttributesp2 == "1N">
       if(!ownerCode.equals(this.instance.getZ3xxutoxlhxxxxxxxxxxowner())){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("If")+" "+bundle.getString("non")+" "+bundle.getString("owned")+", "+bundle.getString("update")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));
                 return null;
       }
      </#if>
     } 
     <#if menuAttributesp2 == "59">
                //stepname in rate table can be upto 32 ch        
                if (this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("DC")
                     || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("DC%")
                      || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")
                       || this.instance.getA0xxukxxbvxxxxxxxxxxusertype().equals("PC")){
                 if (this.getValueOverRide() != null && !this.getValueOverRide().isEmpty() ){
                   if(this.getValueOverRide().length() >32){
                    this.instance.setB2xxuxxrbv51xxxxxxxxstepname(this.getValueOverRide().substring(0,32));
                   }else{
                    this.instance.setB2xxuxxrbv51xxxxxxxxstepname(this.getValueOverRide());//takes care of ANY
                   }
                   //DC and PC stepName will have SIDs
                 }
                }     
 

     </#if>
     <#if menuAttributesp2 == "56">
      //check for restrict own if el readonly does not work
     </#if>

     <#if menuAttributesp2 == "5A">
      this.instance.setA0xxukrdbvxxxxxxxxxxtablename(yxxxch5a1xhhxxhxxxxxtruefalseList.getSelectedClass().substring(47));
     </#if>

      boolean dataReplaced=false;
      byte[] bytes = null;
      //setUpdatedMessage(createValueExpression(""));
      <#if menuAttributesp2 != "1R" >
      // allow raaspi to delete SYSTEM records
      if((getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !customIdentity.isMasterSite()) || (!getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals(owner2Code))){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Gallery")+"/ "+bundle.getString("non")+" "+bundle.getString("owned")+" "+bundle.getString("records")+" "+bundle.getString("update")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));
        //bcontinue=false;
        return null;
      }
      <#else>
       if(!owner2Code.equals(masterSiteCode)){
        if(getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") || !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals(owner2Code)){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("If")+" "+bundle.getString("non")+" "+bundle.getString("owned")+", "+bundle.getString("update")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));
          //bcontinue=false;
          return null;
        }
       }
      </#if>
      <#if ownerField !="">
      // allow user to change its own doc (image) if product is forum
      // in user edit make only doc property as editable all others read only
      // similarly allow users to change their own customer info like address, name etc , but send an email to original value to inform
      if (((customIdentity.getRestrict1() != null && customIdentity.getRestrict1().equals("D")) || customIdentity.hasRole("VW")) && (!getInstance().get${ownerField?cap_first}().equals(ownerCode) && getInstance().getA0xxuobxbxxxxxxxxxxxsid() != customIdentity.getUserSid() )  ){ 
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("If")+" "+bundle.getString("non")+" "+bundle.getString("owned")+", "+bundle.getString("update")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));
        //bcontinue=false;
        return null;
      }
      </#if>
        entityUpdated =false;
        String fromTable="";
        String qualifier="";
       <#if scheduleStartDateField !=""  >
        validateAndSetseDates();
        <#if menuAttributesp2 != "9A" && menuAttributesp2 != "9B" && (activityEntityName?? && activityEntityName?length > eL)>
          validateTodoActivityNotnull();
        </#if>
        if (!bcontinue){
         return null;
        }
       </#if>
       if (!bcontinue){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("error")+", "+ bundle.getString("not")+" "+bundle.getString("continue"),""));
         return null;
       }
     <#if menuAttributesp2 == "60">
      if(this.instance !=null && !this.instance.getB1xxuwgxbv01xxxxxxxxcategory().equals(categoryO)){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("info")+", "+ bundle.getString("account")+" "+bundle.getString("category")+" "+categoryO+" "+bundle.getString("changed")+" "+bundle.getString("to")+" "+this.instance.getB1xxuwgxbv01xxxxxxxxcategory(),""));
        this.instance.setB1xxuwgxbv01xxxxxxxxcategory(categoryO.substring(0,1));
      } 
      if(this.instance !=null && this.instance.getB1xxuwgxbv01xxxxxxxxcategory()==null || this.instance.getB1xxuwgxbv01xxxxxxxxcategory().isEmpty()){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("error")+", "+ bundle.getString("account")+" "+bundle.getString("category")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
         return null;
      } 
     </#if>
       <#if statusFlagDField !=""  >
         this.instance.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
       </#if>
       <#if documentField != "" >
       if(file !=null){
        //this.clearUploadData();// to allow new upload , jay remove this since it ctears any uploaded file. clear using button if needed
       }
       </#if>
             //Below is common to all type of keys coming from above ${documentField} ${clobDataClass} ${blobDataClass}
            //jay add logic to delete existing docs, below will add new ones -done
           <#if menuAttributesp2 == "1A" >
              // replace below with jsf validation later
              if(this.instance.get${itemEntityName?cap_first}() != null && (this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("PI-L1") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("PI-L*")) &&  (!this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-D") && !this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("BI-D") && !this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-L*") )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("use")+" "+ bundle.getString("image")+" "+bundle.getString("subcategory")+" "+bundle.getString("or")+" "+bundle.getString("detail")+" "+bundle.getString("type"),""));

                return null;            
              }
              if(this.instance.get${itemEntityName?cap_first}() != null && (this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L*")|| this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L3")) &&  (!(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")||this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-S")||this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-C")||this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-P")||this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-DG")) && !(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L*")|| !this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L3")) )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("use")+" "+ bundle.getString("shopping")+" "+bundle.getString("subcategory")+" "+bundle.getString("or")+" "+bundle.getString("detail")+" "+bundle.getString("type"),""));

                return null;            
              }
              if (this.instance.getC6xxusxrbv16xxxxxxxxtype() == null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_WARN,bundle.getString("type")+" "+bundle.getString("empty")+", "+bundle.getString("need")+" "+bundle.getString("to")+" "+bundle.getString("add")+" "+bundle.getString("to")+" "+bundle.getString("options")+" "+bundle.getString("using")+" "+bundle.getString("setup"),""));
                return null;            
              }// if dropdown list value does'nt match, type value becomes null

              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-D") && (this.instance.get${itemEntityName?cap_first}() != null && !(this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("PI-L1") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype() .equals("PI-L*")) )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("use")+" "+ bundle.getString("image")+" "+bundle.getString("category")+" "+bundle.getString("or")+" "+bundle.getString("sub")+" "+bundle.getString("category")+" "+bundle.getString("as")+" "+bundle.getString("parent"),""));

                return null;            
              }

              if((this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")||this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-S")) 
               && (this.instance.get${itemEntityName?cap_first}() != null && !(this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1") || this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype() .equals("SI-L*")|| this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype() .equals("SI-L3")) )){

               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("use")+" "+ bundle.getString("shopping")+" "+bundle.getString("category")+" "+bundle.getString("or")+" "+bundle.getString("sub")+" "+bundle.getString("category")+" "+bundle.getString("as")+" "+bundle.getString("parent"),""));

                return null;            
              }
              if((this.instance.get${itemEntityName?cap_first}() != null && (!this.instance.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1")  || this.instance.get${itemEntityName?cap_first}() ==null ))  &&  ( this.instance.getC6xxusxrbv16xxxxxxxxtype() .equals("SI-L*") ||this.instance.getC6xxusxrbv16xxxxxxxxtype() .equals("SI-L3") )){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("use")+" "+ bundle.getString("shopping")+" "+bundle.getString("category")+" "+bundle.getString("as")+" "+bundle.getString("parent"),""));
                return null;            
              }

              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("PI-L1") && this.instance.get${itemEntityName?cap_first}() != null ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("parent")+" "+ bundle.getString("corrected")+" "+bundle.getString("to")+" "+bundle.getString("null"),""));
                this.instance.set${itemEntityName?cap_first}(null);
              }

              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-L1") && this.instance.get${itemEntityName?cap_first}() != null ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("parent")+" "+ bundle.getString("corrected")+" "+bundle.getString("to")+" "+bundle.getString("null"),""));

                this.instance.set${itemEntityName?cap_first}(null);
              }

              String checkedDataAndSize="";
              // checkedData is a temporary field and may be null based on the logic flow 
              // checkedData is initialized as {" "} so not null
              if((this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D") && !this.instance.getG2xxuxn1bvxxxxxxxxxxsubcodesn().equals("TH") ) || this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-C")
                 ||  this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-S") ||  this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("IX") && this.instance.getCheckedData() != null  ){
                String checkedDataS="";//will allow selectmanycheckbox upto 4
                if(this.instance != null && this.instance.getCheckedData() != null){
                 int jj=this.instance.getCheckedData().length;
                 for(int i=0; i<4; i=i+1){
                  if(jj>i && this.instance.getCheckedData()[i]!=null){
                   checkedDataS=checkedDataS+this.instance.getCheckedData()[i]; 
                  }else{
                   checkedDataS=checkedDataS+"X"; 
                  } 
                 }
                }
                checkedDataAndSize=checkedDataAndSize+checkedDataS+this.instance.getCheckedSize()+this.unitLength
                +this.valueLength+this.unitWidth+this.valueWidth+this.unitHeight+this.valueHeight+this.unitWeight+this.valueWeight;//free ship will put X, otherwise S/M/L
                if(checkedDataAndSize.length() > 25){
                 checkedDataAndSize=checkedDataAndSize.substring(0,25);
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_WARN,bundle.getString("shipcode")+" "+bundle.getString("truncated")+" "+bundle.getString("to")+" "+checkedDataAndSize+", "+bundle.getString("maximum")+" "+bundle.getString("size")+" "+bundle.getString("25"),""));
                }
                this.instance.setC3fbuxscbvxxxxxxxxxxshipcode(checkedDataAndSize);
              }else{
               this.instance.setC3fbuxscbvxxxxxxxxxxshipcode("XXXXX");// recalship checks this and skips ship cost
              }
              // do not override subcodesn2,n3 unless SI-D itemEditEasy shows size etc if change needed
              if(this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D") && !this.instance.getG2xxuxn1bvxxxxxxxxxxsubcodesn().equals("TH")){
              String itemVariants="";
              String itemVariantsL="";
              String spaces8="        "; 
              String spaces9="         "; 
              if(itemVariantSize !=null && itemVariantSize.length()<8){
               itemVariantSize=itemVariantSize+spaces8.substring(0,8-itemVariantSize.length());
              }
              if(itemVariantColour !=null && itemVariantColour.length()<8){
               itemVariantColour=itemVariantColour+spaces8.substring(0,8-itemVariantColour.length());
              }
              if(itemVariantMaterial !=null && itemVariantMaterial.length()<8){
               itemVariantMaterial=itemVariantMaterial+spaces8.substring(0,8-itemVariantMaterial.length());
              }
              if(itemVariantBrand !=null && itemVariantBrand.length()<8){
               itemVariantBrand=itemVariantBrand+spaces8.substring(0,8-itemVariantBrand.length());
              }
              //cannot add unicode "\u2714", it increases string length
              itemVariants=itemVariantSize+itemVariantColour+itemVariantMaterial+itemVariantBrand;
              if (! (this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1() !=null 
                && this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1().length() >4
                 && (this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1().substring(0,5).equals("trial")
                  || this.instance.getY2xxuxxrbvxxxxxxxxxxmisccode1().substring(0,5).equals("recur"))) ){
               this.instance.setG2xxuxn2bvxxxxxxxxxxsubcodesn2(itemVariants);
              }// skip if trial/recurring

              if(itemVariantSizeL !=null && itemVariantSizeL.length()<9){
               itemVariantSizeL=itemVariantSizeL+spaces9.substring(0,9-itemVariantSizeL.length());
              }
              if(itemVariantColourL !=null && itemVariantColourL.length()<9){
               itemVariantColourL=itemVariantColourL+spaces9.substring(0,9-itemVariantColourL.length());
              }
              if(itemVariantMaterialL !=null && itemVariantMaterialL.length()<9){
               itemVariantMaterialL=itemVariantMaterialL+spaces9.substring(0,9-itemVariantMaterialL.length());
              }
              if(itemVariantBrandL !=null && itemVariantBrandL.length()<9){
               itemVariantBrandL=itemVariantBrandL+spaces9.substring(0,9-itemVariantBrandL.length());
              }
              //cannot add unicode "\u2714", it increases string length
              itemVariantsL=itemVariantSizeL+itemVariantColourL+itemVariantMaterialL+itemVariantBrandL;
              itemVariantsL=itemVariantsL.trim();      
              if(itemVariantsL.length()>35){
               itemVariantsL=itemVariantsL.substring(0,35);
              }
              this.instance.setG2xxuxn3bvxxxxxxxxxxsubcodesn3(itemVariantsL);
              }//end of Si-d

              // take care of replyToMatCodeSid
              if (replyToMatSidS != null){
               Integer replyToMatSid = Integer.parseInt(replyToMatSidS);
               ${componentName}li = (${componentName?cap_first}) entityManager.createQuery("select cc from ${componentName?cap_first} cc where cc.a0xxuobxbxxxxxxxxxxxsid = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                .setParameter("keyOfEntity", replyToMatSid).setParameter("owner2", owner2Code).getSingleResult();
               if (${componentName}li != null) {
                this.instance.set${componentName?cap_first}(${componentName}li);
               }
              }
              if(this.getInstance().getG2xxuxn3bvxxxxxxxxxxsubcodesn3()==null || this.getInstance().getG2xxuxn3bvxxxxxxxxxxsubcodesn3().isEmpty()){
               this.instance.setG2xxuxn3bvxxxxxxxxxxsubcodesn3("size    :colour  :material:brand  :");//default value
              }
           </#if> 

           /* not all entities have document ie clob/blob */
           <#if documentField != "" >
             /* non clob/blob container like item,customer whose data has pointer to actual data */ 
             //docmntOriginalValue is used to hold the clob/blob current data value, new value is under file object via fileUpLoad
             <#if blobDataClass=="">
              // jay blob dont have docmn so why check  in case of clob it is actual data, for other entities it is string pointer value and may point to string(clob) or binary(blob) data
              String docmntOriginalValue=this.instance.get${documentField?cap_first}();
              <#if clobDataClass=="Y">
               ${clobdataEntityName}=this.getInstance();
              </#if>
             <#else>
              // in case of only blob update
              byte[] docmntOriginalValue=this.instance.get${documentField?cap_first}();
              ${blobdataEntityName}=this.getInstance();
             </#if>
            <#if clobDataClass =="" && blobDataClass=="">
                // clobdata entity iterator used by  master entity update()
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                dataReplaced=true;
                slobkeyhash=Integer.toString((${lobkey}).hashCode());
                fromTable="${entityName?upper_case}";
                qualifier=Integer.toString(1);

                String clobImgUrl=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance().getB1xxuzaxbvxxxxxxxxxxdata();
                if(clobImgUrl == null || clobImgUrl.isEmpty() || (clobImgUrl.indexOf("table=") == -1)){
                 clobImgUrl="";
                } 
                if(!clobImgUrl.isEmpty()){
                 //If clobimg (clobdataInstance.data) we will assume to either add or replace any existing blobdata img
                 // with the clobimg url as byte data. Need to extract and convert back img url to String as needed
                 dataIsBlob = true;// feature is used for blob only
                 this.instance.set${documentField?cap_first}("B"+slobkeyhash);
                 bytes = null;
                 String imgUrl=null;
                 try{
                  yxxxuq1n1xwwqqqxxxxxblobdataHome.clearInstance();
                  yxxxuq1n1xwwqqqxxxxxblobdata = yxxxuq1n1xwwqqqxxxxxblobdataHome.getInstance();
                  yxxxuq1n1xwwqqqxxxxxblobdataHome.setInstance(yxxxuq1n1xwwqqqxxxxxblobdata);
                  yxxxuq1n1xwwqqqxxxxxblobdata.setA4xxexxxbvxxxxxxxxxxtype("url");
                  bytes=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance().getB1xxuzaxbvxxxxxxxxxxdata().getBytes("UTF-8");
                  yxxxuq1n1xwwqqqxxxxxblobdata.setB1xxuzbxbvxxxxxxxxxxdata(bytes);//other fields like key follow same as file load logic
                  imgUrl=new String(bytes, StandardCharsets.UTF_8);
                 } catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("clobImgUrl")+" "+ bundle.getString("error")+" "+e.getMessage(),""));
                   return null;
                 }
                }else{
                 //  iterate through files to check each file mime,also check variable upload count to decide skip
                 // there seems to be duplication and override of logic below re type of doc data
                 while (itr.hasNext()) {
                  file = itr.next();
                  dataIsClob=false;
                  dataIsBlob=false;
                  temps=file.getMime();
                  if ("image/bmp".equals(temps)) {
                   lobDataType = "bmp";
                  }else if ("image/jpeg".equals(temps)) {
                   lobDataType = "jpg";
                  } else if ("image/gif".equals(temps)) {
                   lobDataType = "gif";
                  } else if ("image/png".equals(temps)) {
                   lobDataType = "png";
                  } else if ("text/xml".equals(temps)) {
                   lobDataType = "xml";
                 } else if ("application/msword".equals(temps)) {
                  lobDataType = "doc";
                 } else if ("text/plain".equals(temps)) {
                  lobDataType = "txt";
                 } else if ("text/html".equals(temps)) {
                  lobDataType = "html";
			 } else if ("text/csv".equals(temps)) {
				lobDataType = "csv";
			 } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			 } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			 } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("text/html".equals(temps)) {
				lobDataType = "txt";
			 } else if ("text/htm".equals(temps)) {
				lobDataType = "txt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			 } else {
				lobDataType = "unkn";
			 }

                     if (lobDataType.equals("txt") || lobDataType.equals("xml") || lobDataType.equals("csv")
                       || lobDataType.equals("html") ) {
                         dataIsClob = true;
                         this.instance.set${documentField?cap_first}("C"+slobkeyhash);
                    } else {
                         dataIsBlob = true;
                         this.instance.set${documentField?cap_first}("B"+slobkeyhash);
                    }
                 }
                }
            <#else>
                String clobImgUrl="";// support to be added for clob/blob
                <#if clobDataClass !="">
                  /* clob container whose data has the actual data */ 
                  fromTable=this.instance.getA0xxukcdlvxxxxxxxxxxfromtable();
                  slobkeyhash=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();
                  qualifier=this.instance.getA2xxuxxxbv50xxxxxxxxqualifier();
                // in case of clob, data can come from file upload or from ckeditor. if ckediotor there is no iterator
                // so if only ckeditor then copy the data into file
                if (file.getLength() == 0){
                 if (docmntOriginalValue == null  || (docmntOriginalValue != null && docmntOriginalValue.trim().length() <= 1) ){
                  if((owner2Code.equals(masterSiteCode) && customIdentity.hasRole("UH")) || this.instance.getA2xxuxxxbv50xxxxxxxxqualifier().equals("csv")){
                   superdotupdate();//
                  }else{
                   if(file.getLength() != 0){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,bundle.getString("only")+" "+bundle.getString("csv")+" "+bundle.getString("qualifier")+" "+bundle.getString("allowed"),""));
                    return "";
                   }else{
                    superdotupdate();//
                   }
                  }
                  setChangeDone(true);
                  return "updated";    
                 }
                 dataIsClob = true;
                }
                </#if>
                <#if blobDataClass !="">
                  //blobdata iterator used for update()  
                  /* blob container whose data has the actual data */ 
                  fromTable=this.instance.getA0xxukbdlvxxxxxxxxxxfromtable();
                  slobkeyhash=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();
                  qualifier=this.instance.getA2xxuxxxbv50xxxxxxxxqualifier();
                </#if>
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                // update may not involve loading a new file rather updating the existing data qualifier etc, so set default value
                dataIsBlob = true;
                while (itr.hasNext()) {
                 // key values for direct add/modify to clob/blob is restricted via drop down list and are not generated
                 // when a blob/clob is attached to other entities like item or customer
                 dataReplaced=true;
                 file = itr.next();
                 if (file.getMime().equals("text/plain") || file.getMime().equals("text/xml")
                         || lobDataType.equals("html")) {
                         dataIsClob = true;
                 } else {
                  dataIsBlob = true;
                 }
                }//end of while
            </#if>
           </#if>
           <#if documentField != "" >
            /* continuing after file/clobImgUrl,following for items/customers etc , clob/blob does not have document */
                int i=0;
                Integer attachment=0;
                int jay=0;
                // currenly only one doc can be uploaded so iteration is for only 1 if any upload, it can be 0 as well
                // in case of clob data can come from file upload or from ckeditor
                 //jay itr loop here based on number of file objects in files arraylist ie arraylist size
                 // there could be 2 cases- one parent entity does not have any clob or blob or 2nd it has 
                 // we need to check column docmnt in parent 
                 <#if documentField?substring(5,7)=="zb">
                  if (docmntOriginalValue == null  || (docmntOriginalValue != null && docmntOriginalValue.length < 1) ){
                   // existing blob data is empty, new data under file
                 <#else>
                  if (docmntOriginalValue == null  || (docmntOriginalValue != null && docmntOriginalValue.trim().length() <= 1) ){
                   // no clob data exists , new data under file
                 </#if>
                   if (dataIsClob) {
                    ${clobdataEntityName} = ${clobdataEntityName}Home.getInstance();
                    ${clobdataEntityName}Home.setInstance(${clobdataEntityName});
                    // instance already has values for natural keys fromtable,fromkey,qualifier and seq
                    // leave seq as is unless 0 or less
                    if (${clobdataEntityName}.getA3xxexnsbvxxxxxxxxxxsequence() < 1){
                     //${clobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(1);
                    }
                   }else{
                     ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                     ${blobdataEntityName}Home.setInstance(${blobdataEntityName});//why
                    // instance already has values for natural keys fromtable,fromkey,qualifier and seq
                    if (${blobdataEntityName}.getA3xxexnsbvxxxxxxxxxxsequence() < 1){
                     //${blobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(1);
                    }
                   }
                  }else{
                   //clob/blob already exists and being replaced or left alone and new one being appended
                   // if same session clob/blob entity already exists otherwise use entityquery
                   // added a checkbox for append or replace existing clob/blob entry, upLoadPurpose value is ad or re
                   //sequence gets incremented if more pictures are uploaded to add
                   // sequence is meant for viewing sequence and may be richfaces pick list can be used
                   // check and use max qualifier as there could be many already
                   if (dataIsClob) {
                    if (${clobdataEntityName} == null){
                     try {
                      List<${clobdataEntityName?cap_first}> results = entityManager
                      .createQuery(
                         "select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                         .setParameter("clobdatafromtable", fromTable).setParameter(
                          "clobdatafromkey", slobkeyhash).setParameter("owner2", owner2Code).getResultList();
                      if(!results.isEmpty()){
                       attachment=results.size();
                       ${clobdataEntityName}= results.get(attachment-1);
                       //${clobdataEntityName}.set${clobdataentityDataFieldName?cap_first}(new String(file.getData()));
                       if(file.getData() !=null){// if not from ckeditor                   
                        String uploadedText=file.getText();
                        String jay2=uploadedText;
                        try{
                         uploadedText=this.sanitize(uploadedText);
                         uploadedText=jay2;
                        } catch ( Exception e){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_INFO," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
                         return null;
                        }
                        ${clobdataEntityName}.set${clobdataentityDataFieldName?cap_first}(uploadedText);
                       }
                       ${clobdataEntityName}Home.getInstance();
                       ${clobdataEntityName}Home.setInstance(${clobdataEntityName});
                      }else{
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_INFO,"clob_result_empty",""));
                        // this means clob/blob to be replaced is gone or was never created, so why not log the error and continue as add
                        log.severe("Error retrieving clob");
                        return null;
                      }
                     } catch (NoResultException nre) {
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_INFO,"no_clob_record",""));
                       return null;
                     } catch (Exception e) {
                        log.severe("Error persisting clob"+ e);
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_INFO,"clob_persist_error" + e.getMessage(),""));
                      //return null;
                      upLoadPurpose="ad";
                     }
                    }
                   }
                   else{
                    if (${blobdataEntityName} == null){
                     try {
                            List<${blobdataEntityName?cap_first}> results = entityManager
                              .createQuery(
                               "select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                                .setParameter("blobdatafromtable", fromTable).setParameter(
                                "blobdatafromkey", slobkeyhash).setParameter("owner2", owner2Code).getResultList();
		             if(!results.isEmpty()){
                              // results include the new instance to be persisted
                              attachment=results.size();
                              ${blobdataEntityName}= results.get(attachment-1);
                              ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());
                              ${blobdataEntityName}Home.getInstance();
                              ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                             }else{
                              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,"blob_result_empty",""));
                              // this means clob/blob to be replaced is gone or was never created, so why not log the error and continue as add
                              log.severe("Error retrieving blob");
                              //return null;
                              upLoadPurpose="ad";
                           }
                          } catch (NoResultException nre) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,"no_blob_record",""));
                            return null;
                          } catch (Exception e) {
	 	            log.severe("Error persisting blob"+ e);
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,"blob_persist_error" + e.getMessage(),""));

                            return null;
                          }
                    }
                   }

                   if (dataIsClob && "ad".equals(upLoadPurpose)) {
                    ${clobdataEntityName}Home.clearInstance();
                    ${clobdataEntityName} = ${clobdataEntityName}Home.getInstance();
                    if (${clobdataEntityName}.getA3xxexnsbvxxxxxxxxxxsequence() > 0){
                     <#if clobDataClass =="" && blobDataClass=="">
                      //non clob/blob added useSeq to avoid ambiguity
                      if(useSeq==-1){
                       jay=  ${clobdataEntityName}List.getNextSeqAvailable("${entityName?upper_case}","C"+slobkeyhash,qualifier,0);
                      }else{
                       jay=useSeq; 
                      }
                     <#else>
                      if(useSeq==-1){
                       jay=  ${clobdataEntityName}List.getNextSeqAvailable("clobdata","C"+slobkeyhash,qualifier,0);
                      }else{
                       jay=useSeq; 
                      }
                     </#if>
                     ${clobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(jay);
                    }
                   }   
                   if (dataIsBlob && "ad".equals(upLoadPurpose)) {
                    <#if clobDataClass =="" && blobDataClass=="">
                    if(clobImgUrl.isEmpty()){
                     ${blobdataEntityName}Home.clearInstance();
                     ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                    }
                    <#else>
                     ${blobdataEntityName}Home.clearInstance();
                     ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                    </#if>
                    if (${blobdataEntityName}.getA3xxexnsbvxxxxxxxxxxsequence() > 0){
                     <#if clobDataClass =="" && blobDataClass=="">
                      // added useSeq to avoid ambiguity
                      if(useSeq==-1){
                       jay=  ${blobdataEntityName}List.getNextSeqAvailable("${entityName?upper_case}","B"+slobkeyhash,qualifier,0);
                      }else{
                       jay=useSeq; 
                      }
                     <#else>
                      if(useSeq==-1){
                       jay=  ${blobdataEntityName}List.getNextSeqAvailable("blobdata","B"+slobkeyhash,qualifier,0);
                      }else{
                       jay=useSeq; 
                      }
                     </#if>
                     ${blobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(jay);
                    }
                   }
                  }
                  // common below ie for update for new docmnt or w existing doc

                  if (dataIsClob && "ad".equals(upLoadPurpose)) {
                     if(file.getData() !=null){// if not from ckeditor                   
                      String uploadedText=file.getText();
                      String jay2=uploadedText;
                      try{
                       uploadedText=this.sanitize(uploadedText);
                       uploadedText=jay2;
                      } catch ( Exception e){
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_INFO," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
                       return null;
                      }
                      ${clobdataEntityName}.set${clobdataentityDataFieldName?cap_first}(uploadedText);
                     }

                   ${clobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                   ${clobdataEntityName}.setA0xxukcdlvxxxxxxxxxxfromtable(fromTable);
                   ${clobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                   ${clobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier);
                   ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(file.getName());
                    ${clobdataEntityName}Home.setInstance(${clobdataEntityName});
                    ${clobdataEntityName}Home.persist();
                    timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("${blobdataEntityName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+slobkeyhash+") "+"at"+" "+timeStamp,""));
                  }
                  if (dataIsClob && "re".equals(upLoadPurpose)) {
                     if(file.getData() !=null){// if not from ckeditor                   
                      String uploadedText=file.getText();
                      String jay2=uploadedText;
                      try{
                       uploadedText=this.sanitize(uploadedText);
                       uploadedText=jay2;
                      } catch ( Exception e){
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_INFO," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
                       return null;
                      }
                      ${clobdataEntityName}.set${clobdataentityDataFieldName?cap_first}(uploadedText);
                     }

                    ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(file.getName());
                    ${clobdataEntityName}Home.setInstance(${clobdataEntityName});

                    ${clobdataEntityName}Home.superUpdate(); 
                    timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("${clobdataEntityName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+slobkeyhash+") "+"at"+" "+timeStamp,""));

                  }
                  if (dataIsBlob && "ad".equals(upLoadPurpose)) {
                   if (clobImgUrl.isEmpty()){
                    if(file.getData() !=null){
                     ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());// use only if uploaded
                    }
                    if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && !${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                     ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                    }
                    if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && ${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                     ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                    }
                    if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                     ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                    }
                   }
                  ${blobdataEntityName}.setA0xxukbdlvxxxxxxxxxxfromtable(fromTable);
                  ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                  ${blobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier);
                  ${blobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(file.getName());
                   ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                   ${blobdataEntityName}Home.persist();
                   timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("${blobdataEntityName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+slobkeyhash+") "+"at"+" "+timeStamp,""));

                  }
                  if (${blobdataEntityName} !=null && dataIsBlob && "re".equals(upLoadPurpose)) {
                   if (clobImgUrl.isEmpty()){
                    if(file.getData() !=null){
                     ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());
                    }
                    if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && !${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                    ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                    }
                    if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && ${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                    ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                    }
                    if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                    ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                    }
                   }
                   ${blobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(file.getName());

                   // in case of clob/blob the superUpdate will repeat further dowm, add ftl logic to skip this
                   ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                   ${blobdataEntityName}Home.superUpdate();
                   timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("${blobdataEntityName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+slobkeyhash+") "+"at"+" "+timeStamp,""));
                  }
                //}old while now pushed up as end of while loop
                // in case an update is done after this save, will allow fresh upload
                if(dataReplaced){
                 clearUploadData();
                }else{
                  if(fromTable.isEmpty() || !fromTable.equals("blobdata")){
                   //continue, allow other changes  
                  }else{
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("update")+" "+bundle.getString("bypassed")+", "+bundle.getString("no")+" "+bundle.getString("file")+" "+bundle.getString("uploaded"),""));
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("either")+" "+bundle.getString("upload")+" "+bundle.getString("new")+" "+bundle.getString("or")+" "+bundle.getString("re-upload")+" "+bundle.getString("existing"),""));
                    return null;
                  }
                } 
           </#if>
           //end of documentField != "" ie item/customer and non clob/blob 
           <#if menuAttributesp2 == "65" >
            //glentries update,  add showNet() updatefDetails incuding reverse a/c updates etc 
             if (moreActive){
              createGdetailsetValues();
              ${gentriesDetailsEntityName}Home.persist();
             }else{
              updateGdetailsetValues();
             }
             showNetValue();
             moreActive=false;
           </#if>
           <#if menuAttributesp2 == "89" >
            //glentries update,  add showNet() updatefDetails incuding reverse a/c updates etc 
             if (moreActive){
              createSdetailsetValues();
             ${scheduleDetailsEntityName}Home.persist();
             }else{
              updateSdetailsetValues();
              ${scheduleDetailsEntityName}Home.update();
             }
             moreActive=false;
           </#if>

           <#if  entityFunction == "co" || entityFunction == "cq" || entityFunction == "ci" || entityFunction == "sh" || entityFunction == "cp"  >
           // add cq etc later
           // take care of cdetails and item and customer and then order itself
           // updateCdetails will update details instance and superdotupdate will update order
           // method more already did clear instance for detailshome to make sure a new detail instance will come
           updateCdetailsetValues();
           //cartPoStatus="p";// persist not x otherwise loop  showrunt calls recalship 
           showrunt(); //calls recalShip  
            if(!bcontinue){
             return "";
            }
           persistrunt(); 
           if(moreActive){
            ${cuinvoiceEtcItemDetailsEntityName}Home.persist();
            moreActive=false;
           }
           else{
            ${cuinvoiceEtcItemDetailsEntityName}Home.update();       
           }
           // calculate net values
           // put net values ie new value-old value to reverse previous entries and add new entry
           if (bcontinue){
            updateitemeCustomer();
           }
           if (bcontinue){
            updateCustomer();
           }
           </#if>
           <#if  entityFunction == "vo" || entityFunction == "vq" || entityFunction == "vi" || entityFunction == "sv" || entityFunction == "vp"  >
           // add cq etc later
           // take care of cdetails and item and customer and then order itself
           // updateCdetails will update details instance and superdotupdate will update order
           // method more already did clear instance for detailshome to make sure a new detail instance will come
           updateVdetailsetValues();
           showrunt();
            if(!bcontinue){
             return "";
            }
           persistrunt(); 
           if(moreActive){
            ${vendorInvoiceEtcItemDetailsEntityName}Home.persist();
            moreActive=false;
           }
           else{
            ${vendorInvoiceEtcItemDetailsEntityName}Home.update();       
           }
           // calculate net values
           // put net values ie new value-old value to reverse previous entries and add new entry
           if (bcontinue){
            updateitemeVendor();
           }
           if (bcontinue){
            updateVendor();
           }
           </#if>
            // in update key value is always changed to reflect any change in description etc but also uses
            // current time, so key will always change. Do not use key value instead use sid no as int or as string
           <#if clobDataClass == "" && blobDataClass == "" >
            // if subkeys have changed then key value needs to be reestablished unless rest or import (how?)
            <#assign subKeys ="">
            subKey="";
            <#foreach property in pojo.allPropertiesIterator>
            <#if (property.name?length > eL)>
             <#if property.name?substring(pkS,pkE)=="k" >
              <#assign ids=property.name>
             </#if>
             <#assign propnmcapfirst = property.name?cap_first>
             <#if (property.value.type.name?contains("tring") | property.value.type.name?contains("time") ) && (property.name?substring(pkS,pkE)=="s" | (property.name?substring(pkS,pkE)=="2" && property.name?substring(pfS,pfE)!="2o" ) | property.name?substring(pkS,pkE)=="3"
              | property.name?substring(pkS,pkE)=="4" | property.name?substring(pkS,pkE)=="5") >
              <#assign subKeys="subKeys">
              <#if property.value.type.name == "timestamp" >
               subKey=subKey+this.instance.get${propnmcapfirst}().toString().substring(0,10)+this.instance.get${propnmcapfirst}().toString().substring(this.instance.get${propnmcapfirst}().toString().length()-6);
              <#else>
               if (this.instance.get${propnmcapfirst}() != null && this.instance.get${propnmcapfirst}() !=null && this.instance.get${propnmcapfirst}().length() !=0){
               <#if property.name?substring(pkS,pkE)=="3"> 
                subKey=this.instance.get${propnmcapfirst}()+subKey;
               <#else>
                subKey=subKey+this.instance.get${propnmcapfirst}();
                timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                subKey=subKey+timeStamp.substring(17,18);
               </#if>
               }else{
                // need a random filler otherwise same subkey will be generated if same names are used ie say only * used as name
                timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                subKey=subKey+timeStamp.substring(17,18);
               } 
              </#if>
             </#if>
            </#if>
            </#foreach>
            <#if subKeys != "" && ids !="" >
              subKey=subKeyFirst+subKey;
              int subL=subKey.length();
              if (subL !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subL !=0){
                if (subL > 25){
                //needs logic for names
                <#if (menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" ) >
                 <#if (menuAttributesp2 ="20")>
                  if (this.instance.getC2xxu2fnbvixxxxxxxxxfirstname() != null && this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().length() !=0){
                   String fName=this.instance.getC2xxu2fnbvixxxxxxxxxfirstname();
                   if (fName.length() > 4){
                    fName=fName.substring(0,4);
                   }
                   subKey=subKey.substring(0,7)+fName+subKey.substring(subL-5,subL)+subKeyh;
                  }else{
                    subKey=subKey.substring(0,7)+subKey.substring(subL-5,subL)+subKey.substring(subL-5,subL)+subKeyh;
                  } 
                 </#if>
                 <#if (menuAttributesp2 ="30")>
                  if (this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname() != null && this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().length() !=0){
                   String fName=this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname();
                   if (fName.length() > 4){
                    fName=fName.substring(0,4);
                   }
                   subKey=subKey.substring(0,7)+fName+subKey.substring(subL-5,subL)+subKeyh;
                  }else{
                    subKey=subKey.substring(0,7)+subKey.substring(subL-5,subL)+subKey.substring(subL-5,subL)+subKeyh;
                  } 
                 </#if>
                 <#if (menuAttributesp2 ="40")>
                  if (this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname() != null && this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().length() !=0){
                   String fName=this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname();
                   if (fName.length() > 4){
                    fName=fName.substring(0,4);
                   }
                   subKey=subKey.substring(0,7)+fName+subKey.substring(subL-5,subL)+subKeyh;
                  }else{
                    subKey=subKey.substring(0,7)+subKey.substring(subL-5,subL)+subKey.substring(subL-5,subL)+subKeyh;
                  } 
                 </#if>
                <#else>
                 subKey=subKey.substring(0,11)+subKey.substring(subL-5,subL)+subKeyh;
                </#if>
                }
                else {
                 subKey=subKey+subKeyh;
                }
               }
              }
              if (subKey.length() > ${keyMaxLength}){
                subKey=subKey.substring(0,${keyMaxLength});
              }
              //usagebyperiods have metrics whose key names should not change from subkeys ,apply to all usageby.. keys

              <#if (menuAttributesp2 !="63" && menuAttributesp2 !="1B" )>
              if(!this.instance.get${ids?cap_first}().equals(subKey)){
               this.instance.set${ids?cap_first}(subKey);
              } 
              </#if>
            </#if>
             // key set but return if the natural key already exists except for clob and blob where duplicates ok
             // in keyExists method, initCap will be applied and existing key always gets replaced
             <#if clobDataClass =="" && blobDataClass =="" && entityKeyFieldName !="">
             if (key.length() > 7 && keyExists(key.substring(0,8))){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("parent")+" "+ bundle.getString("corrected")+" "+bundle.getString("to")+" "+bundle.getString("null"),""));


              //return null;
             }
             </#if>
            <#if menuAttributesp2 != "1R" >
             <#if menuAttributesp2 == "1L" >
              //may02 added logic same as in persist
              if (!this.instance.getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")){
               this.instance.setA1xxuxxxbvxxxxxxxxxxcountry("US");//allways US 
               this.instance.setA1xxuxxxbvxxxxxxxxxxvariant("o2");//o2 owner2, oc owner2+country,ov owner2+country
               subKey="m"+this.instance.getA1xxuxxxbvxxxxxxxxxxlanguage().trim()+this.instance.getA1xxuxxxbvxxxxxxxxxxcountry().trim()+"o2";
               this.instance.setA0xxukrdbvxxxxxxxxxxname(subKey);
               if (subKey.length() > 7 && keyExists(subKey.toLowerCase())){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("key") +" "+subKey+" "+bundle.getString("exists") ,""));
                return null;
               }
              }
             </#if>
             <#if menuAttributesp2 == "20" || menuAttributesp2 == "30" || menuAttributesp2 == "40" >
 
             // any value in addrl1 means overide/add new address. address shown for mailto only to avoid
             // two sets of getters. Use billtosame or dropdown address 
             // was incomplete before. if addrl1 has entered value then use the new address
             // else if lastfxxxuq111xwwqqhxxxxxaddressP is null then remove existing and if diff then use the selected new one
             if (this.getAddrL1() !=null) {
              createAddress();// validate and creates fxxxuq111xwwqqhxxxxxaddress2
              if(!bcontinue){
               return null;
              }
             // no need to clear instance because no multiple addresses are involved
             // clear instance to avoid detached entity  either use 2 or leave as original code. It seems if address is empty
             // it does not perist. If there is value it uses the home instance which points to fxxxuq111xwwqqhxxxxxaddress2
             //    fxxxuq111xwwqqhxxxxxaddressHome.clearInstance();
             //    fxxxuq111xwwqqhxxxxxaddressHome.setInstance(fxxxuq111xwwqqhxxxxxaddress);
             // parent say customer already persisted and did not include new address ( if existing address it was via select & validate)
             // not true also parent may have included potential clob/blob key which may not be included above as expeceted
             // so update parent, if needed for address  
	      fxxxuq111xwwqqhxxxxxaddressHome.persist();
              setChangeDone(true);
              importAdded=importAdded+1;
              this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(fxxxuq111xwwqqhxxxxxaddress2);
             }
             </#if>

             <#if ids != "notdefinedxxxxxxxxx" && idsType?contains("tring")>
              // to allow system messages to be changed if raaspi,  show parent code in next edit
              <#if menuAttributesp2 == "1A">
               if(this.instance!=null && this.instance.get${componentName?cap_first}() !=null){
                last${componentName}P=this.instance.get${componentName?cap_first}().get${entityKeyFieldName?cap_first}();
               }else{
                last${componentName}P="";
               }
              </#if>
             </#if>
             if(owner2Code.equals(masterSiteCode)){
               allowUpdate();     
             }else{
               superdotupdate();
             }    
            <#else>
             superdotupdate();
            </#if>
           </#if>
              <#if bt != "">
              if (bcontinue){
               recalculateTotalThis();
               if (jxxxuq53dxwwqqhxxxxxrollupgroup != null){
                recalculateTotalDeep();
                jxxxuq53dxwwqqhxxxxxrollupgroupHome.setInstance(jxxxuq53dxwwqqhxxxxxrollupgroup);
                jxxxuq53dxwwqqhxxxxxrollupgroupHome.superUpdate();
               }
              }
              </#if>

          <#if menuAttributesp2 == "60" >
           /* roll up summary accounts 
             Heading (H), Detail(D),T (Total upto prev Header), B Block Header 
             ie Sub Header), S(Sub Total upto prev Block or Header) 
           */
           if (doRollUp){
            accountTotalsRollUp(this.instance.getA0xxukwxbvxxxxxxxxxxaccount());
           }
          </#if> 
           entityUpdated =true;
           setChangeDone(true);
           // better to return and show msg not sure why the redirect was there 
           // changedone did not work either because it got reinitilized and no change msg was being shown
           //or look into using jsf flush msg
           return "updated"; 
           //String viewId = FacesContext.getCurrentInstance().getViewRoot().getViewId();
           //return viewId + "?faces-redirect=true";// refresh

    }
 <#if menuAttributesp2 == "1N" >
    public String allowRemoveSystem(${entityName?cap_first} row) {
     try{
         this.setInstance(row);
         superdotremove();
           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+bundle.getString("entity")+" "+"at"+" "+timeStamp,""));
           return "removed"; 
     } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

     }
           return null;
    }
  </#if>
 <#if menuAttributesp2 == "36" >
  public void markPaid() {
   this.instance.setZ2xxzzfxhhxxxxxxxxxxstatusfl(mpaid);
   this.superUpdate();
  }
 </#if>
 <#if menuAttributesp2 == "1N" >
    public String allowFading(${entityName?cap_first} row) {
     try{
         this.setInstance(row);
         if(this.instance.getA4xxexxxbvxxxxxxxxxxtype() !=null && !this.instance.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
          this.instance.setA4xxexxxbvxxxxxxxxxxtype(this.instance.getA4xxexxxbvxxxxxxxxxxtype()+"asis");
         }
         this.setInstance(row);
         superdotupdate();
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("selected")+" "+bundle.getString("entity")+" "+"at"+" "+timeStamp,""));
           return "removed"; 
        } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("update")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

        }
           return null;
    }
    public String removeFading(${entityName?cap_first} row) {
     try{
         this.setInstance(row);
         if(this.instance.getA4xxexxxbvxxxxxxxxxxtype() !=null && this.instance.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
          this.instance.setA4xxexxxbvxxxxxxxxxxtype(this.instance.getA4xxexxxbvxxxxxxxxxxtype().replace("asis",""));
         }
         this.setInstance(row);
         superdotupdate();
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+bundle.getString("selected")+" "+bundle.getString("entity")+" "+"at"+" "+timeStamp,""));
           return "removed"; 
     } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("update")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

        }
           return null;
    }
  </#if>



    public String remove() {
     //jay added logic to delete related entities ie if a demo user is deleted then created employee should be deleted and/or
     // add logic to use employee resultlist rather than singleresult
     // useful for debugging validation failure and also to remove child entities first automatically(logic to be added)
     // some reversing logic needed for transactions aw well
     // allow raaspi user UH to delete SYSTEM records , needed for bad resource and blob etc
       //setDeletedMessage(createValueExpression(""));
        entityDeleted =false;
      // whats about other details like itemjobdetails etc?? 
      // add logic to adjust posting if invoice/payment
      <#if menuAttributesp2 == "56">
       if(getInstance().getA0xxukuxbvxxxxxxxxxxid().equals(customIdentity.getUsername())){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("delete")+" "+ bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("own")+" "+ bundle.getString("record"),""));
         return null;
       }
      </#if>
      // allow raaspi to delete SYSTEM records
      if((getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !owner2Code.equals("myflowp") && !owner2Code.equals(masterSiteCode)) || (!getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM") && !getInstance().getZzxxu2oxxhxxxxxxxxxxowner2().equals(owner2Code))){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("delete")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));

                 bcontinue=false;
                 return null;
      }
      <#if ownerField !="">
      if (((customIdentity.getRestrict1() != null && customIdentity.getRestrict1().equals("D")) || customIdentity.hasRole("VW")) && !getInstance().get${ownerField?cap_first}().equals(ownerCode)  ){ 
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("delete")+" "+ bundle.getString("not")+" "+bundle.getString("allowed"),""));

                 bcontinue=false;
                 return null;
      }
      </#if>

      <#if (entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci" || entityFunction=="cp" ||  entityFunction=="sh"
       || entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" ||  entityFunction=="sv"
       || entityFunction=="eo" || menuAttributesp2 =="89" || menuAttributesp2=="9A" || menuAttributesp2=="65" || menuAttributesp2=="1G"
       || menuAttributesp2=="92" || entityFunction=="16" || entityFunction=="1r"  )  >
       // (1) remove() detail by call xxxList.entityDetailedList(sid), use for loop if checked remove
       // (2) update order or delete order if no details left,  but refresh parent by getting it from db after no reference from detail
       Integer xid=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
       //92(itemjob) details are 9a (jobassignmet and its details)
       try{
        deleteDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());// calls flush()
        entityDeleted =true;
        } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));
           return null;
	}
        try {
         this.clearInstance();//load again after delete details
         ${entityName} noDetail=${listName}.getSidToEntity(xid);
         this.setInstance(noDetail);
         superdotremove();
         setChangeDone(true);
         timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+"${componentName?substring(eL)?cap_first}"+" "+"at"+" "+timeStamp,""));

         return "all deleted";
        } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));


           return null;
        }
        
      <#else>
        // entities without details ,function ${entityFunction}
        try {
         superdotremove();
        } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));

           return null;
        }
          <#if menuAttributesp2 == "60" >
           /* roll up summary accounts 
             Heading (H), Detail(D),T (Total upto prev Header), B Block Header 
             ie Sub Header), S(Sub Total upto prev Block or Header) 
           */
           if (doRollUp){
            accountTotalsRollUp(this.instance.getA0xxukwxbvxxxxxxxxxxaccount());
           }
          </#if> 
          <#if menuAttributesp2 == "65" >
           // if gl entry is removed, entry should be removed from journal but be in audit file
          </#if> 
          <#if menuAttributesp2 == "89" >
          </#if> 
          <#if  entityFunction == "co"  >
           // no accounting but customer stats
          </#if> 
          <#if  entityFunction == "ci"  >
           //  accounting and customer stats
          </#if> 
          <#if menuAttributesp2 == "1A" >
           /* delete clob or blob as they will be orphan 
              a separate new method to purge closed records including parent/all children , it is too risky here
           */

                try{
                 List<${blobdataEntityName?cap_first}> results = entityManager
		 .createQuery(
			"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "FPXXFQ1A5XWWQQHXXXXXITEM").setParameter("blobdatafromkey", this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1))
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","1").getResultList();
		if(!results.isEmpty() ){
                 //blob/clob are not constrained as foreign entity to item, so just remove it
                  ${blobdataEntityName}Home.clearInstance();
                  ${blobdataEntityName}Home.setInstance(results.get(0));
                  ${blobdataEntityName}Home.superdotremove();
                }  
                 }catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("binary")+" "+bundle.getString("data")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                 }  
                try{
                 List<${clobdataEntityName?cap_first}> resultsc = entityManager
		 .createQuery(
			"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "FPXXFQ1A5XWWQQHXXXXXITEM").setParameter("blobdatafromkey", this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1))
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","1").getResultList();
		if(!resultsc.isEmpty() ){
                 //blob/clob are not constrained as foreign entity to item, so just remove it
                  ${clobdataEntityName}Home.clearInstance();
                  ${clobdataEntityName}Home.setInstance(resultsc.get(0));
                  ${clobdataEntityName}Home.superdotremove();
                }  
                 }catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                   return "";
                 }  
   
          </#if> 

           entityDeleted =true;
           setChangeDone(true);
           timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+bundle.getString("selected")+" "+"${componentName?substring(eL)?cap_first}"+" "+"at"+" "+timeStamp,""));
           return "removed"; 

      </#if>


    }


    /**
    * save in clobdata key being accounts,import,csv,1 note when calling clobdata needes extra character before import
    * The following methods supports import of csv data into entities.
    * A file containing csv data is uploaded in clob db under clob key kkkqqqseq where ttt is dollar{entityName}
    * kkk is "dollar{entityName} like accounts" and qqq is "csv" seq is 1
    * The csv data must have the first row containing name of target table columns corresponding to csv data
    * if there is data but no target column name then ,,
    * a template containing the matching column names can be downloaded using import wizard 
    * importCsvData method copies 
    * @param args -option one is to pass clob key  
    * @return none void type
    * @exception None.
    * @see " "
    * in the table called options, column called value will have filter value which will dictate whether it will be hidden,visible or 
    * to use the specified value rather than value in column called options
    * to hide a value in column called options for say activity entity put h=1a. to hide for both item and activity put value= h=1a,18
    * to show a value in column called options for say activity entity put s=1a. to show for both item and activity put value= s=1a,18
    * to show based on locale put in pupose ca=manual-cheque us=manual-check  in value put ca=m us=m
    * to use value rather than whats in options colimn, use v=xxx where xxx is the value.
    */
    <#if menuAttributesp2 == "60" >
     // make sure to include @Inject clobdata if non clob entity and remove hardcoding below use entitynames
	@Inject
	${clobdataEntityName?cap_first}Home ${clobdataEntityName}Home;
        private ${clobdataEntityName?cap_first} ${clobdataEntityName};
	@Inject
	${clobdataEntityName?cap_first}List ${clobdataEntityName}List;
	@Inject
	${acintegrEntityName?cap_first}Home ${acintegrEntityName}Home;
        private ${acintegrEntityName?cap_first} ${acintegrEntityName};

	@Inject
	${accountEntityName?cap_first}Home ${accountEntityName}Home;
        private	${accountEntityName?cap_first} ${accountEntityName};

        private String propSet="N";
        private String delimeterBy="C";
        private String enclosedBy="D";
        private String lineBy="N";
        private String skipRecordOne="N";

        public String getImportSet() {
         return propSet;
        }
        public void setImportSet(String propSet) { 
         this.propSet = propSet;
        }
        public String getDelimeterBy() {
         return delimeterBy;
        }
        public void setDelimeterBy(String delimeterBy) { 
         this.delimeterBy = delimeterBy;
        }

        public String getEnclosedBy() {
         return enclosedBy;
        }
        public void setEnclosedBy(String enclosedBy) { 
         this.enclosedBy = enclosedBy;
        }

        public String getLineBy() {
         return lineBy;
        }
        public void setLineBy(String lineBy) { 
         this.lineBy = lineBy;
        }
     
        public String getSkipRecordOne() {
         return skipRecordOne;
        }
        public void setSkipRecordOne(String skipRecordOne) { 
         this.skipRecordOne = skipRecordOne;
        }


    /**
    * The following method imports csv ie comma separated value as data base records  
    * This one specific for account and accountIntegration. AccountIntgr record has a field which refers to 
    * account key not the sid
    * @param args -4 first 3 are key related and last is size. They are used based on the table
    * @return none 
    * @exception io errors and validation and messages are given
    * @see "importCsvData for customer/vendor/employee/item/address"
    */


	public void importCsvData(String keyWPrefix,String keyQualifier,int keySequence,int size) {
           // account import,ignore table value assume as clobdata so that we can use editclobdata where table is allways clobdata
           // table can have other values via appl code
               importChosen=true;
               if(this.propSet.equals("N")){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("select")+" "+ bundle.getString("and")+" "+bundle.getString("confirm")+" "+bundle.getString("which")+" "+bundle.getString("fields")+" "+bundle.getString("will")+" "+bundle.getString("be")+" "+bundle.getString("imported"),""));
                  return;
               }
              String jay="";
              int csvElements=6;//account csv elements delemeter if empty
              int importexception=0;
              int ii=0;
	      try {
               doRollUp=false;
               importChosen=true;
               String mykeyWPrefix=keyWPrefix;
               String mykeyQualifier=keyQualifier;
               int mykeySequence=keySequence;
               int mysize=size;
               //backup and restore to be used for fall back or for reimport
	       if (this.instance == null) {
                this.clearInstance();
	        this.instance=this.getInstance();
	       }
                // date check, dont allow if older than 7 days, delemeter check
                ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","a"+keyWPrefix,keyQualifier,keySequence);
                if (${clobdataEntityName} == null || ${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,"No CSV (Comma Separated Values) data found for Accounts Import",""));
                 return;
                }
                calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 return; 
                }
                String csvData=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,"CSV (Comma Separated Values) data used- dated "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString(),""));

                String lines[] = csvData.split("\\r?\\n");
                String[] csvDataArray=null;
                String[] csvDataArray2=new String[11];

                String lastEmail="";
                int element=-1;
                int importdone=0;
                int importnotdone=0;
                importexception=0;
                int i=0;
                if(this.skipRecordOne.equals("Y")){
                  ii=1; 
                }
                //For loop a/c csv data rows
                for(i=ii;i<lines.length;i++){
                 element=-1;
                 csvDataArray=null;
                 jay=lines[i];
                 if (jay.length() < 5){                  continue;
                 }
                 try{
                 if(!this.lineBy.equals("N")){
                  jay=jay.substring(0,jay.length()-1); 
                 }
                 if(this.enclosedBy.equals("D")){
                  jay=jay.replace("\"",""); 
                 }
                 if(this.enclosedBy.equals("S")){
                  jay=jay.replace("\'",""); 
                 }
                 if(this.delimeterBy.equals("C")){
                  csvDataArray=jay.split(",");
                 }
                 if(this.delimeterBy.equals("S")){
                  csvDataArray=jay.split(" ");
                 }
                 int k=csvDataArray.length;
                 int j=0;
                 for(j=0;j<11;j++){
                  if(j < k && csvDataArray[j] !=null){
                   csvDataArray2[j]=csvDataArray[j];
                  }else{
                   csvDataArray2[j]="";    
                  }
                 }
                 
                 if(csvDataArray2.length != csvElements){
                  importnotdone=importnotdone+1;
                  if(importnotdone <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Account")+" "+ bundle.getString("found")+" "+csvDataArray.length+", "+ bundle.getString("expected")+" "+ csvElements+" "+bundle.getString("and")+" "+bundle.getString("csv")+" "+ bundle.getString("elements")+" "+ jay,""));
                  }     
                 }
                  this.instance.setA0xxukwxbvxxxxxxxxxxaccount(csvDataArray2[0]);
                  this.instance.setA1xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[1]);
                  this.instance.setB1xxuwgxbv01xxxxxxxxcategory(csvDataArray2[2]);
                  this.instance.setB2xxuwtxbv02xxxxxxxxtype(csvDataArray2[3]);
                  if(csvDataArray2[4]==null || csvDataArray2[4].isEmpty()){
                   this.instance.setB4xxzwaxlvxxxxxxxxxxactual(BigDecimal.ZERO);
                  }else{
                   this.instance.setB4xxzwaxlvxxxxxxxxxxactual(new BigDecimal(csvDataArray2[4]));
                  }
                  if(csvDataArray2[5]==null || csvDataArray2[5].isEmpty()){
                   this.instance.setZ4xxzwaplvxxxxxxxxxxprevact(BigDecimal.ZERO);
                  }else{
                   this.instance.setZ4xxzwaplvxxxxxxxxxxprevact(new BigDecimal(csvDataArray2[5]));
                  }
                  this.instance.setZ5xxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                  this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                  // any account persist will invoke accountTotalsRollUp 
                  this.persist();
                  this.clearInstance();
	          this.instance=this.getInstance();
                 }catch (Exception ef){
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("exception")+" "+ ef.getCause()+", "+ ef.getMessage()+" "+jay,""));

		   log.severe(" import error "+owner2Code+' ' + ef.getCause()+' ' + ef.getMessage()+' '+jay);
                  }     
                 }
                 if(i >=400){
                  // runs out of memory,try session.flush and clear
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("upto")+" 400 "+ bundle.getString("records")+" "+bundle.getString("per")+" "+bundle.getString("import"),""));

                  break;
                 }

                }//for a/c loop
                mykeyWPrefix="acintegr";
                mykeyQualifier="csv";
                mykeySequence=1;
                mysize=90000;
                ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","a"+keyWPrefix,keyQualifier,keySequence);
                if (${clobdataEntityName} == null || ${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,"No CSV (Comma Separated Values) data found for Accounts Integration Import",""));
                 return;
                }
                calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("accountIntegration")+" "+bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 return; 
                }
                csvData=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();

                if (${acintegrEntityName} == null) {
	            ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
                }
                lines = csvData.split("\\r?\\n");
                csvDataArray=null;
                lastEmail="";
                element=-1;
                importdone=0;
                importnotdone=0;
                importexception=0;
                i=0;
                if(this.skipRecordOne.equals("Y")){
                  ii=1; 
                }

                for(i=ii;i<lines.length;i++){
                 element=-1;
                 csvDataArray=null;
                 jay=lines[i];
                 if (jay.length() < 5){
                  continue;
                 }
                 try{
                 if(!this.lineBy.equals("N")){
                  jay=jay.substring(0,jay.length()-1); 
                 }
                 if(this.enclosedBy.equals("D")){
                  jay=jay.replace("\"",""); 
                 }
                 if(this.enclosedBy.equals("S")){
                  jay=jay.replace("\'",""); 
                 }
                 if(this.delimeterBy.equals("C")){
                  csvDataArray=jay.split(",");
                 }
                 if(this.delimeterBy.equals("S")){
                  csvDataArray=jay.split(" ");
                 }
                 int k=csvDataArray.length;
                 int j=0;
                 for(j=0;j<11;j++){
                  if(j < k && csvDataArray[j] !=null){
                   csvDataArray2[j]=csvDataArray[j];
                  }else{
                   csvDataArray2[j]="";    
                  }
                 }
                 if(csvDataArray2.length != csvElements){
                  importnotdone=importnotdone+1;
                  if(importnotdone <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("AccountIntegration")+" "+ bundle.getString("found")+" "+csvDataArray.length+", "+ bundle.getString("expected")+" "+ csvElements+" "+bundle.getString("and")+" "+bundle.getString("csv")+" "+ bundle.getString("elements")+" "+ jay,""));
                  }     
                 }
                  ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid(csvDataArray2[0]);
                  ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid(csvDataArray2[1]);
                  ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr(csvDataArray2[2]);
                  ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode(csvDataArray2[3]);
                  accountn=csvDataArray2[4];
                  checkAccount();
                  if (!bcontinue){
                   continue;
                  }
                  ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
                  ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                  ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  ${acintegrEntityName}.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mcopy);

                  ${acintegrEntityName}Home.persist();
                  ${acintegrEntityName}Home.clearInstance();
                  ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
                 }catch (Exception ef){
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("account_Integration")+" "+bundle.getString("exception")+" "+ ef.getMessage()+" "+jay,""));

		   log.severe(" a/c integr import error "+owner2Code+' ' + ef.getMessage()+' '+jay);
                  }     
                 }
                 if(i >=400){
                  // runs out of memory,try session.flush and clear
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("upto")+" 400 "+ bundle.getString("records")+" "+bundle.getString("per")+" "+bundle.getString("import"),""));

                  break;
                 }

                }//for acintgr loop
                // rollUp was turned off, now do it once for all preceding updated
                accountTotalsRollUp("import");
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("Import")+" "+ bundle.getString("Completed")+" "+ bundle.getString("for")+" "+ bundle.getString("account")+" "+ bundle.getString("and")+" "+ bundle.getString("related")+" "+ bundle.getString("integration"),""));
                return;

		} catch (Exception e) {
		   //log.severe(" import account error for "+jay + e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("Import")+" "+ bundle.getString("failed")+" "+ bundle.getString("for")+" "+ bundle.getString("account")+" "+ bundle.getString("and")+" "+ bundle.getString("related")+" "+ bundle.getString("integration")+", "+bundle.getString("for")+" "+jay + " "+e.getMessage(),""));

		}
      } 

      public boolean accountTotalsRollUp(String account){
          // this is called after any account entity instance is persisted/updated/removed
          // it will go through all instances and recalculate the subtotals/totals
          // the parameter passed to this is not used but can be used during debug as a reference
          // it need to be called for other than type D, so that if a new subtotal is added it will show new total
          // but it will get updated if any detail is changed later
          // using a flag may be it can be called after any bulk updates like import or posting etc 

          BigDecimal accountTotals=new BigDecimal("0.0");
          BigDecimal accountSubTotals=new BigDecimal("0.0");
          BigDecimal accountTotalsB=new BigDecimal("0.0");
          BigDecimal accountSubTotalsB=new BigDecimal("0.0");
          BigDecimal accountTotalsPA=new BigDecimal("0.0");
          BigDecimal accountSubTotalsPA=new BigDecimal("0.0");
          BigDecimal accountTotalsP1=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP1=new BigDecimal("0.0");
          BigDecimal accountTotalsP2=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP2=new BigDecimal("0.0");
          BigDecimal accountTotalsP3=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP3=new BigDecimal("0.0");
          BigDecimal accountTotalsP4=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP4=new BigDecimal("0.0");
          BigDecimal accountTotalsP5=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP5=new BigDecimal("0.0");
          BigDecimal accountTotalsP6=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP6=new BigDecimal("0.0");
          BigDecimal accountTotalsP7=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP7=new BigDecimal("0.0");
          BigDecimal accountTotalsP8=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP8=new BigDecimal("0.0");
          BigDecimal accountTotalsP9=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP9=new BigDecimal("0.0");
          BigDecimal accountTotalsP10=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP10=new BigDecimal("0.0");
          BigDecimal accountTotalsP11=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP11=new BigDecimal("0.0");
          BigDecimal accountTotalsP12=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP12=new BigDecimal("0.0");
          BigDecimal accountTotalsP13=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP13=new BigDecimal("0.0");
          BigDecimal accountTotalsP14=new BigDecimal("0.0");
          BigDecimal accountSubTotalsP14=new BigDecimal("0.0");
          doRollUp=false;
		try {
               // Heading (H), Detail(D),T (Total upto prev Header), B Block Header 
               // ie Sub Header), S(Sub Total upto prev Block(Sub Header) or Header) 
               // for type D all columns ie P1,p2 etc are populated under update method here we take care of subtotals, totals
               // using the prefilled detail values for type D
               // total debits and credits are done in the report itself 
               // logic relies on account list being in account order


                //${accountEntityName}List.setMaxResults(1200);
                List<${accountEntityName?cap_first}> listofAccounts=${accountEntityName}List.getResultListMaxSet(1200) ;
			Iterator<${accountEntityName?cap_first}> itr = listofAccounts.iterator();
			while (itr.hasNext()) {

			  ${accountEntityName} = itr.next();
          if (${accountEntityName}.getB2xxuwtxbv02xxxxxxxxtype().startsWith("H")){
           //header does not persist any values, but is used to reset header totals and block and sutotals 

                   accountTotals=new BigDecimal("0.0");
                   accountTotalsB=new BigDecimal("0.0");
                   accountTotalsPA=new BigDecimal("0.0");
                   accountSubTotals=new BigDecimal("0.0");
                   accountSubTotalsB=new BigDecimal("0.0");
          accountSubTotalsPA=new BigDecimal("0.0");
          accountTotalsP1=new BigDecimal("0.0");
          accountSubTotalsP1=new BigDecimal("0.0");
          accountTotalsP2=new BigDecimal("0.0");
          accountSubTotalsP2=new BigDecimal("0.0");
          accountTotalsP3=new BigDecimal("0.0");
          accountSubTotalsP3=new BigDecimal("0.0");
          accountTotalsP4=new BigDecimal("0.0");
          accountSubTotalsP4=new BigDecimal("0.0");
          accountTotalsP5=new BigDecimal("0.0");
          accountSubTotalsP5=new BigDecimal("0.0");
          accountTotalsP6=new BigDecimal("0.0");
          accountSubTotalsP6=new BigDecimal("0.0");
          accountTotalsP7=new BigDecimal("0.0");
          accountSubTotalsP7=new BigDecimal("0.0");
          accountTotalsP8=new BigDecimal("0.0");
          accountSubTotalsP8=new BigDecimal("0.0");
          accountTotalsP9=new BigDecimal("0.0");
          accountSubTotalsP9=new BigDecimal("0.0");
          accountTotalsP10=new BigDecimal("0.0");
          accountSubTotalsP10=new BigDecimal("0.0");
          accountTotalsP11=new BigDecimal("0.0");
          accountSubTotalsP11=new BigDecimal("0.0");
          accountTotalsP12=new BigDecimal("0.0");
          accountSubTotalsP12=new BigDecimal("0.0");
          accountTotalsP13=new BigDecimal("0.0");
          accountSubTotalsP13=new BigDecimal("0.0");
          accountTotalsP14=new BigDecimal("0.0");
          accountSubTotalsP14=new BigDecimal("0.0");
                  }
          if (${accountEntityName}.getB2xxuwtxbv02xxxxxxxxtype().startsWith("B")){
          // B is Sub header , its like a header ie nothing to persist but need to reset subtotals

                   accountSubTotals=new BigDecimal("0.0");
                   accountSubTotalsB=new BigDecimal("0.0");
                   accountSubTotalsPA=new BigDecimal("0.0");
          accountSubTotals=new BigDecimal("0.0");
          accountSubTotalsB=new BigDecimal("0.0");
          accountSubTotalsPA=new BigDecimal("0.0");
          accountTotalsP1=new BigDecimal("0.0");
          accountSubTotalsP1=new BigDecimal("0.0");
          accountTotalsP2=new BigDecimal("0.0");
          accountSubTotalsP2=new BigDecimal("0.0");
          accountTotalsP3=new BigDecimal("0.0");
          accountSubTotalsP3=new BigDecimal("0.0");
          accountTotalsP4=new BigDecimal("0.0");
          accountSubTotalsP4=new BigDecimal("0.0");
          accountTotalsP5=new BigDecimal("0.0");
          accountSubTotalsP5=new BigDecimal("0.0");
          accountTotalsP6=new BigDecimal("0.0");
          accountSubTotalsP6=new BigDecimal("0.0");
          accountTotalsP7=new BigDecimal("0.0");
          accountSubTotalsP7=new BigDecimal("0.0");
          accountTotalsP8=new BigDecimal("0.0");
          accountSubTotalsP8=new BigDecimal("0.0");
          accountTotalsP9=new BigDecimal("0.0");
          accountSubTotalsP9=new BigDecimal("0.0");
          accountTotalsP10=new BigDecimal("0.0");
          accountSubTotalsP10=new BigDecimal("0.0");
          accountTotalsP11=new BigDecimal("0.0");
          accountSubTotalsP11=new BigDecimal("0.0");
          accountTotalsP12=new BigDecimal("0.0");
          accountSubTotalsP12=new BigDecimal("0.0");
          accountTotalsP13=new BigDecimal("0.0");
          accountSubTotalsP13=new BigDecimal("0.0");
          accountTotalsP14=new BigDecimal("0.0");
          accountSubTotalsP14=new BigDecimal("0.0");
                  }
          if (${accountEntityName}.getB2xxuwtxbv02xxxxxxxxtype().startsWith("D")){
          // D is Detail nothing to persist since the column values already exist and are used to add to totals and subtotals
                   accountTotals=accountTotals.add(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual());
                   accountSubTotals=accountSubTotals.add(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual());
                   accountTotalsPA=accountTotalsPA.add(${accountEntityName}.getZ4xxzwaplvxxxxxxxxxxprevact());
                   accountSubTotalsPA=accountSubTotalsPA.add(${accountEntityName}.getZ4xxzwaplvxxxxxxxxxxprevact());
                   accountTotalsB=accountTotalsB.add(${accountEntityName}.getB3xxzwbxbvxxxxxxxxxxbudget());
                   accountSubTotalsB=accountSubTotalsB.add(${accountEntityName}.getB3xxzwbxbvxxxxxxxxxxbudget());
                   accountTotalsP1=accountTotalsP1.add(${accountEntityName}.getZ7xxzw1xlvxxxxxxxxxxp1());
                   accountSubTotalsP1=accountSubTotalsP1.add(${accountEntityName}.getZ7xxzw1xlvxxxxxxxxxxp1());
                   accountTotalsP2=accountTotalsP2.add(${accountEntityName}.getZ8xxzw2xlvxxxxxxxxxxp2());
                   accountSubTotalsP2=accountSubTotalsP2.add(${accountEntityName}.getZ8xxzw2xlvxxxxxxxxxxp2());
                   accountTotalsP3=accountTotalsP3.add(${accountEntityName}.getZ9xxzw3xlvxxxxxxxxxxp3());
                   accountSubTotalsP3=accountSubTotalsP3.add(${accountEntityName}.getZ9xxzw3xlvxxxxxxxxxxp3());
                   accountTotalsP4=accountTotalsP4.add(${accountEntityName}.getZaxxzw4xlvxxxxxxxxxxp4());
                   accountSubTotalsP4=accountSubTotalsP4.add(${accountEntityName}.getZaxxzw4xlvxxxxxxxxxxp4());
                   accountTotalsP5=accountTotalsP5.add(${accountEntityName}.getZbxxzw5xlvxxxxxxxxxxp5());
                   accountSubTotalsP5=accountSubTotalsP5.add(${accountEntityName}.getZbxxzw5xlvxxxxxxxxxxp5());
                   accountTotalsP6=accountTotalsP6.add(${accountEntityName}.getZcxxzw6xlvxxxxxxxxxxp6());
                   accountSubTotalsP6=accountSubTotalsP6.add(${accountEntityName}.getZcxxzw6xlvxxxxxxxxxxp6());
                   accountTotalsP7=accountTotalsP7.add(${accountEntityName}.getZdxxzw7xlvxxxxxxxxxxp7());
                   accountSubTotalsP7=accountSubTotalsP7.add(${accountEntityName}.getZdxxzw7xlvxxxxxxxxxxp7());
                   accountTotalsP8=accountTotalsP8.add(${accountEntityName}.getZexxzw8xlvxxxxxxxxxxp8());
                   accountSubTotalsP8=accountSubTotalsP8.add(${accountEntityName}.getZexxzw8xlvxxxxxxxxxxp8());
                   accountTotalsP9=accountTotalsP9.add(${accountEntityName}.getZfxxzw9xlvxxxxxxxxxxp9());
                   accountSubTotalsP9=accountSubTotalsP9.add(${accountEntityName}.getZfxxzw9xlvxxxxxxxxxxp9());
                   accountTotalsP10=accountTotalsP10.add(${accountEntityName}.getZgxxzw10lvxxxxxxxxxxp10());
                   accountSubTotalsP10=accountSubTotalsP10.add(${accountEntityName}.getZgxxzw10lvxxxxxxxxxxp10());
                   accountTotalsP11=accountTotalsP11.add(${accountEntityName}.getZhxxzw11lvxxxxxxxxxxp11());
                   accountSubTotalsP11=accountSubTotalsP11.add(${accountEntityName}.getZhxxzw11lvxxxxxxxxxxp11());
                   accountTotalsP12=accountTotalsP12.add(${accountEntityName}.getZixxzw12lvxxxxxxxxxxp12());
                   accountSubTotalsP12=accountSubTotalsP12.add(${accountEntityName}.getZixxzw12lvxxxxxxxxxxp12());
                   accountTotalsP13=accountTotalsP13.add(${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13());
                   accountSubTotalsP13=accountSubTotalsP13.add(${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13());
                   accountTotalsP14=accountTotalsP14.add(${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14());
                   accountSubTotalsP14=accountSubTotalsP14.add(${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14());
                  }
                  if (${accountEntityName}.getB2xxuwtxbv02xxxxxxxxtype().startsWith("T")){
                  // T needs to show the totals upto this point, so need persist, totals will get reset under the next header H
                
		        ${accountEntityName}.setB4xxzwaxlvxxxxxxxxxxactual(accountTotals);
		        ${accountEntityName}.setZ4xxzwaplvxxxxxxxxxxprevact(accountTotalsPA);
		        ${accountEntityName}.setB3xxzwbxbvxxxxxxxxxxbudget(accountTotalsB);
		        ${accountEntityName}.setZ7xxzw1xlvxxxxxxxxxxp1(accountTotalsP1);
		        ${accountEntityName}.setZ8xxzw2xlvxxxxxxxxxxp2(accountTotalsP2);
		        ${accountEntityName}.setZ9xxzw3xlvxxxxxxxxxxp3(accountTotalsP3);
		        ${accountEntityName}.setZaxxzw4xlvxxxxxxxxxxp4(accountTotalsP4);
		        ${accountEntityName}.setZbxxzw5xlvxxxxxxxxxxp5(accountTotalsP5);
		        ${accountEntityName}.setZcxxzw6xlvxxxxxxxxxxp6(accountTotalsP6);
		        ${accountEntityName}.setZdxxzw7xlvxxxxxxxxxxp7(accountTotalsP7);
		        ${accountEntityName}.setZexxzw8xlvxxxxxxxxxxp8(accountTotalsP8);
		        ${accountEntityName}.setZfxxzw9xlvxxxxxxxxxxp9(accountTotalsP9);
		        ${accountEntityName}.setZgxxzw10lvxxxxxxxxxxp10(accountTotalsP10);
		        ${accountEntityName}.setZhxxzw11lvxxxxxxxxxxp11(accountTotalsP11);
		        ${accountEntityName}.setZixxzw12lvxxxxxxxxxxp12(accountTotalsP12);
		        ${accountEntityName}.setZjxxzw13lvxxxxxxxxxxp13(accountTotalsP13);
		        ${accountEntityName}.setZkxxzw14lvxxxxxxxxxxp14(accountTotalsP14);
                        this.setInstance(${accountEntityName}); 
                        ${accountEntityName}Home.allowUpdate();

                  }
                  if (${accountEntityName}.getB2xxuwtxbv02xxxxxxxxtype().startsWith("S")){
                  // S needs to show the sub or block totals upto this point, so need persist, subtotals will get reset under the next header B or H

		        ${accountEntityName}.setB4xxzwaxlvxxxxxxxxxxactual(accountSubTotals);
		        ${accountEntityName}.setZ4xxzwaplvxxxxxxxxxxprevact(accountSubTotalsPA);
		        ${accountEntityName}.setB3xxzwbxbvxxxxxxxxxxbudget(accountSubTotalsB);
		        ${accountEntityName}.setZ7xxzw1xlvxxxxxxxxxxp1(accountSubTotalsP1);
		        ${accountEntityName}.setZ8xxzw2xlvxxxxxxxxxxp2(accountSubTotalsP2);
		        ${accountEntityName}.setZ9xxzw3xlvxxxxxxxxxxp3(accountSubTotalsP3);
		        ${accountEntityName}.setZaxxzw4xlvxxxxxxxxxxp4(accountSubTotalsP4);
		        ${accountEntityName}.setZbxxzw5xlvxxxxxxxxxxp5(accountSubTotalsP5);
		        ${accountEntityName}.setZcxxzw6xlvxxxxxxxxxxp6(accountSubTotalsP6);
		        ${accountEntityName}.setZdxxzw7xlvxxxxxxxxxxp7(accountSubTotalsP7);
		        ${accountEntityName}.setZexxzw8xlvxxxxxxxxxxp8(accountSubTotalsP8);
		        ${accountEntityName}.setZfxxzw9xlvxxxxxxxxxxp9(accountSubTotalsP9);
		        ${accountEntityName}.setZgxxzw10lvxxxxxxxxxxp10(accountSubTotalsP10);
		        ${accountEntityName}.setZhxxzw11lvxxxxxxxxxxp11(accountSubTotalsP11);
		        ${accountEntityName}.setZixxzw12lvxxxxxxxxxxp12(accountSubTotalsP12);
		        ${accountEntityName}.setZjxxzw13lvxxxxxxxxxxp13(accountSubTotalsP13);
		        ${accountEntityName}.setZkxxzw14lvxxxxxxxxxxp14(accountSubTotalsP14);
                   this.setInstance(${accountEntityName}); 
                   ${accountEntityName}Home.allowUpdate();
                   // do we need to clear the subtotals and block totals here to start fresh for next D subtotal ?? 
                  }
                }
                  return true;
		} catch (Exception e) {
			log.severe("account totals field iterator/persist error " + e.getMessage());
                return false;
		}
      }
      /*
         step 1.check reasonability ie current earning n retained earning a/c exists, current bus date is in period 12 or up.
                check each period dates status is 0 ie open for fyrend otherwise stop rolling dates by 1 year
                move p13/14 data to new f yr p1
         step 2 clear customer/   yearly totals 
         step3 msg re print journal/download to local m/c and flag as closed (add new menu to purge closed + old data) 
      */
      // reuse entities and make changes rather than ejbql and update and clearHome (to detach ) and merge detached to update
      // look into keeping managed and make changes and let jpa update as part of synchronise at method end
      public void doFYearEnd(){
          doRollUp=false;
          String cEarningAccount="";
          String rEarningAccount="";
          BigDecimal cActual=new BigDecimal("0.0");
          BigDecimal c1314Actual=new BigDecimal("0.0");
          BigDecimal accountTotals=new BigDecimal("0.0");
          BigDecimal currentEarning=new BigDecimal("0.0");
          BigDecimal retainedEarning=new BigDecimal("0.0");
          Date currbusdate = calendar.getTime();
          List<${perioddatesEntityName?cap_first}> listofPeriods=null;
          Iterator<${perioddatesEntityName?cap_first}> itr = null;
          
		try {
                ${acintegrEntityName?cap_first} acintegr =null;
                accountn="";
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("accIntegrationModule", "GL")
					.setParameter("accIntegrationUsage", "EAC")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
			            accountn = acintegr.get${accountEntityName?cap_first}().getA0xxukwxbvxxxxxxxxxxaccount();
                            cEarningAccount=accountn;
                           }
                           if (accountn.isEmpty()){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+ bundle.getString("current")+" "+ bundle.getString("earning")+" "+ bundle.getString("account")+" "+ bundle.getString("found")+", "+ bundle.getString("setup")+" "+ bundle.getString("account")+" "+ bundle.getString("integration")+" "+ bundle.getString("set"),""));

			            bcontinue= false;
                           } 

		} catch (NoResultException ex) {
			bcontinue= false;
		}

		try {
                ${acintegrEntityName?cap_first} acintegr =null;
                accountn="";
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("accIntegrationModule", "GL")
					.setParameter("accIntegrationUsage", "EAR")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
			            accountn = acintegr.get${accountEntityName?cap_first}().getA0xxukwxbvxxxxxxxxxxaccount();
                            rEarningAccount=accountn;
                           }
                           if (accountn.isEmpty()){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+ bundle.getString("retained")+" "+ bundle.getString("earning")+" "+ bundle.getString("account")+" "+ bundle.getString("found")+", "+ bundle.getString("setup")+" "+ bundle.getString("account")+" "+ bundle.getString("integration")+" "+ bundle.getString("set"),""));


 			            bcontinue= false;
                           } 

		} catch (NoResultException ex) {
			bcontinue= false;
		}

		try {
                
                calendar.setTime(getAcperiodDateFieldValue("cbd"));
                currbusdate=calendar.getTime();
                //${perioddatesEntityName}List.setMaxResults(1200);
                ${perioddatesEntityName}List.setSearchDate(new Date(0));//jan  01 1970
                listofPeriods=${perioddatesEntityName}List.getResultListMaxSet(1200) ;
                // ListofPeriods are in asc order ie P12(index 11)  reset searchDate and check size
                if(listofPeriods.size() < 14){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("expected")+" "+14+" "+ bundle.getString("periods")+", "+ bundle.getString("got")+" "+listofPeriods.size(),""));
		   bcontinue= false;
                   return;
                }
  
                if(!listofPeriods.get(11).getA0xxukwpbv47xxxxxxxxperiod().equals("12")){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("expected")+" "+ bundle.getString("period")+" "+ "12"+" "+ bundle.getString("got")+" "+listofPeriods.get(11).getA0xxukwpbv47xxxxxxxxperiod(),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("check")+" "+ bundle.getString("period")+" "+ bundle.getString("dates"),""));

		   bcontinue= false;
                   return;
                }else{
                 // save this period 12 end date as calendarly (last year) to check against it in doflag and dopurge
                 // dont delete period 13/14 entries which will stay as p 1/2
                 //now calendar holds cbd ie current business date stored in acperiod table which gets update
                 // in authenticator bean. jay give warning about hold business date or reset cbd after p14
                 //calendatly holds p12 date from perioddates table which gets changed by this method only
                 calendarly.setTime(listofPeriods.get(11).getB3xxdwerbvxxxxxxxxxxenddate());
                }
                calendare.setTime(listofPeriods.get(11).getB3xxdwerbvxxxxxxxxxxenddate());
                if(calendar.before(calendare) ){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("current")+" "+ bundle.getString("business")+" "+ bundle.getString("date")+" "+ sdf.format(calendar.getTime())+" "+bundle.getString("is")+" "+ bundle.getString("before")+" "+bundle.getString("year")+" "+ bundle.getString("end")+" "+ bundle.getString("date")+" "+ sdf.format(calendare.getTime())+" , "+bundle.getString("not")+" "+ bundle.getString("ready")+" "+ bundle.getString("for")+" "+ bundle.getString("fiscal")+" "+ bundle.getString("year")+" "+ bundle.getString("end"),""));

                            // allow force ??
 			       bcontinue= false;
                       return;
                }
		itr = listofPeriods.iterator();
		while (itr.hasNext()) {
		  ${perioddatesEntityName} = itr.next();
                  // not sure why original code was checking for mclosed
                  //if(${perioddatesEntityName}.getZ1xxzzfxhhxxxxxxxxxxstatusfl() == mclosed ){
                  // mopen ie 0 means no fyrend yet, once it starts 1st step the status is -2
                  // step 1 is roll up period dates and initialize and distribute account values
                  // step 2 is to reset ytd values for customer and vendor metrics like ytd sales, purchase etc
                  // step3 is optional but is used to delete previous year's journal and ledger entries   
                  // step 1a start roll perioddates if open
                  if(${perioddatesEntityName}.getZ1xxzzfxhhxxxxxxxxxxstatusfl() == mopen ){
                            calendar.setTime(${perioddatesEntityName}.getB2xxdwsrbvxxxxxxxxxxstartdate());
                            calendar.add(Calendar.YEAR,1);
                            calendare.setTime(${perioddatesEntityName}.getB3xxdwerbvxxxxxxxxxxenddate());
                            calendare.add(Calendar.YEAR,1);
                            ${perioddatesEntityName}.setZ1xxzzfxhhxxxxxxxxxxstatusfl(-2);
                            ${perioddatesEntityName}.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                            ${perioddatesEntityName}.setB2xxdwsrbvxxxxxxxxxxstartdate(calendar.getTime());
                            ${perioddatesEntityName}.setB3xxdwerbvxxxxxxxxxxenddate(calendare.getTime());
                            ${perioddatesEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                            ${perioddatesEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                            ${perioddatesEntityName}Home.clearInstance();// to make detach for merge to work
                            ${perioddatesEntityName}Home.setInstance(${perioddatesEntityName});
                            ${perioddatesEntityName}Home.allowUpdate();
                  }
                  else{
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("period")+" "+${perioddatesEntityName}.getA0xxukwpbv47xxxxxxxxperiod()+" "+bundle.getString("status")+" "+ bundle.getString("is")+" "+ ${perioddatesEntityName}.getZ1xxzzfxhhxxxxxxxxxxstatusfl()+" "+bundle.getString("should")+" "+ bundle.getString("be")+" "+ bundle.getString("value")+" 0, "+ bundle.getString("check")+" "+ bundle.getString("period")+" "+ bundle.getString("dates"),""));


                   bcontinue= false;
                   return;
                  }        
                }
                if (bcontinue){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("fiscal")+" "+bundle.getString("year")+" "+bundle.getString("end")+" "+bundle.getString("dates")+" "+bundle.getString("rolled")+" "+bundle.getString("to")+" "+bundle.getString("next")+" "+bundle.getString("year"),""));

                  bcontinue= true;
                }
                // if step 1a fails ie bontinue false then step 1b will not do actual update but it seems hibernate
                // still update because dirty?
                //step 1b start
                // 1b- move current+prev assset/liab to prevact, current income/expense to prevact
                //   -current Equity to prevact after current earing is calculated for last year  
                //   current earning + retained earning goes to retained earning actual  + not -
                // and make current actual 0 for asset/liability/Income/Expense
                //   - at the end move period 13 & 14 values, if any, to next year's period 1 & 2
                // if completed make status -2+1 ie -1 and ready for step 2 
                // Period 13-14 allows to carry on business even though current year end adjustments continue
                // and is for convenience.  
                // now iterate over account entity and adjust asset/liabilities  and then period 13,14 -> period 1,2 but leave equities alone
                // should it filter out type <>D  ???
                //${accountEntityName}List.setMaxResults(1200);
                List<${accountEntityName?cap_first}> listofAccounts=${accountEntityName}List.getResultListMaxSet(1200) ;
		Iterator<${accountEntityName?cap_first}> itrA = listofAccounts.iterator();
		while (itrA.hasNext()) {
		  ${accountEntityName} = itrA.next();
                  if ( ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().startsWith("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().startsWith("L")
                    || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().startsWith("Q") )  {
                   if ( ${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount().equals(cEarningAccount) ){
                    continue;
                   }                  
                   if ( ${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount().equals(rEarningAccount) ){
                    continue;
                   }  
                   cActual= ${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual().add(${accountEntityName}.getZ4xxzwaplvxxxxxxxxxxprevact());
                   c1314Actual= ${accountEntityName}.getZ2xxzwanlvxxxxxxxxxxactualn();
                  }
                  // income/Expense a/cs
                  else{
                   cActual= new BigDecimal("0.0");
                   c1314Actual= ${accountEntityName}.getZ2xxzwanlvxxxxxxxxxxactualn();
                   if (yxxxch601xwwqqhxxxxxaccount.getB2xxuwtxbv02xxxxxxxxtype().startsWith("D")){
                    if ( ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().startsWith("I")){
                     currentEarning=currentEarning.add(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual());
                    }else{
                     if ( ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().startsWith("E")){
                      currentEarning=currentEarning.subtract(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual());
                     }
                    }
                   }
                  }
                  ${accountEntityName}.setZ4xxzwaplvxxxxxxxxxxprevact(cActual);
                  ${accountEntityName}.setB4xxzwaxlvxxxxxxxxxxactual(c1314Actual);
                  ${accountEntityName}.setZ3xxzwbpavxxxxxxxxxxprevbudg(${accountEntityName}.getB3xxzwbxbvxxxxxxxxxxbudget());
                  ${accountEntityName}.setB3xxzwbxbvxxxxxxxxxxbudget(new BigDecimal("0.0"));
                  ${accountEntityName}.setZ6xxzw0xlvxxxxxxxxxxp0(new BigDecimal("0.0"));
                  ${accountEntityName}.setZ7xxzw1xlvxxxxxxxxxxp1(${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13());
                  ${accountEntityName}.setZ8xxzw2xlvxxxxxxxxxxp2(${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14());
                  ${accountEntityName}.setZ9xxzw3xlvxxxxxxxxxxp3(new BigDecimal("0.0"));
                  ${accountEntityName}.setZaxxzw4xlvxxxxxxxxxxp4(new BigDecimal("0.0"));
                  ${accountEntityName}.setZbxxzw5xlvxxxxxxxxxxp5(new BigDecimal("0.0"));
                  ${accountEntityName}.setZcxxzw6xlvxxxxxxxxxxp6(new BigDecimal("0.0"));
                  ${accountEntityName}.setZdxxzw7xlvxxxxxxxxxxp7(new BigDecimal("0.0"));
                  ${accountEntityName}.setZexxzw8xlvxxxxxxxxxxp8(new BigDecimal("0.0"));
                  ${accountEntityName}.setZfxxzw9xlvxxxxxxxxxxp9(new BigDecimal("0.0"));
                  ${accountEntityName}.setZgxxzw10lvxxxxxxxxxxp10(new BigDecimal("0.0"));
                  ${accountEntityName}.setZhxxzw11lvxxxxxxxxxxp11(new BigDecimal("0.0"));
                  ${accountEntityName}.setZixxzw12lvxxxxxxxxxxp12(new BigDecimal("0.0"));
                  ${accountEntityName}.setZjxxzw13lvxxxxxxxxxxp13(new BigDecimal("0.0"));
                  ${accountEntityName}.setZkxxzw14lvxxxxxxxxxxp14(new BigDecimal("0.0"));
                  ${accountEntityName}.setZ2xxzwanlvxxxxxxxxxxactualn(new BigDecimal("0.0"));
                  ${accountEntityName}Home.clearInstance();//
                  ${accountEntityName}Home.setInstance(${accountEntityName});
                  ${accountEntityName}Home.allowUpdate();
                }//while
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("asset")+" "+ bundle.getString("liabilities")+" "+ bundle.getString("adjusted")+" "+ bundle.getString("and")+" "+ bundle.getString("periods")+" 13 & 14 "+ bundle.getString("values")+", "+ bundle.getString("if")+" "+ bundle.getString("any")+", "+ bundle.getString("moved")+" "+ bundle.getString("to")+" "+ bundle.getString("next")+" "+ bundle.getString("fiscal")+" "+ bundle.getString("period")+" 1 & 2 ",""));

                 bcontinue= true;
                 // now update current earning and retained earning a/c s,
                 // current earning (Total current Income - Total current expenses) was calculated in prev step
                 // retained earning value is moved to  prev retained earning and 
                 // is then replaced with moved retained earning + current earning
                 // checkAccount assumes accoundCode in accountn and will fetch the record in ${accountEntityName}
                 accountn=cEarningAccount;
                 checkAccount();
                 ${accountEntityName}.setZ4xxzwaplvxxxxxxxxxxprevact(currentEarning);
                 ${accountEntityName}Home.clearInstance();//
                 ${accountEntityName}Home.setInstance(${accountEntityName});
                 ${accountEntityName}Home.allowUpdate();

                 accountn=rEarningAccount;
                 checkAccount();
                 retainedEarning=currentEarning.add(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual());
                 ${accountEntityName}.setZ4xxzwaplvxxxxxxxxxxprevact(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual());

                 // add previous net income to retained earning prevactual to avoid showing red diff on left
                 BigDecimal fYrEndPrev=currentEarning.add(yxxxch601xwwqqhxxxxxaccount.getZ4xxzwaplvxxxxxxxxxxprevact());
                 yxxxch601xwwqqhxxxxxaccount.setB4xxzwaxlvxxxxxxxxxxactual(currentEarning);// this one affects

                 ${accountEntityName}Home.clearInstance();//
                 ${accountEntityName}Home.setInstance(${accountEntityName});
                 ${accountEntityName}Home.allowUpdate();

                 // end of step 1 a & b  success
		      try {

                  //${perioddatesEntityName}List.setMaxResults(1200);
                  ///List<${perioddatesEntityName?cap_first}> listofPerioddates=${perioddatesEntityName}List.getResultListMaxSet(1200) ;
			  itr = listofPeriods.iterator();
			  while (itr.hasNext()) {
			   ${perioddatesEntityName} = itr.next();
                   // update status date??
                   ${perioddatesEntityName}.setZ1xxzzfxhhxxxxxxxxxxstatusfl(-1);
                   ${perioddatesEntityName}Home.clearInstance();// to make detach for merge to work
                   ${perioddatesEntityName}Home.setInstance(${perioddatesEntityName});
                   ${perioddatesEntityName}Home.allowUpdate();

                  }
		      } catch (Exception e) {
			  log.severe( e.getMessage());
 			            bcontinue= false;
		      }


		} catch (Exception e) {
			log.severe("${'#'}{messages['account_totals_field_iterator/persist_error_']} " + e.getMessage());

 			            bcontinue= false;
		}
           // start step 2
           // now time to reset ytd values for customer/vendor/employee/item/activity
           // at successful end of step 2, reset parioddates entries statusfl back to 0s, so that it is ready for next Fyearend
		try {

                //${customerEntityName}List.setMaxResults(1200);
                List<${customerEntityName?cap_first}> listofCustomers=${customerEntityName}List.getResultListMaxSet(1200) ;
			Iterator<${customerEntityName?cap_first}> itrA = listofCustomers.iterator();
			while (itrA.hasNext()) {
			  ${customerEntityName} = itrA.next();
                          ${customerEntityName}.setZ1xxzrrplexxxxxxxxxxcusrtotl(new BigDecimal("0.0"));
                          ${customerEntityName}Home.clearInstance();
                          ${customerEntityName}Home.setInstance(${customerEntityName});
                          ${customerEntityName}Home.allowUpdate();
                        }
		} catch (Exception e) {
			log.severe("Reset Customer Ytd error " + e.getMessage());
 			            bcontinue= false;
		}
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("ytd")+" "+ bundle.getString("values")+" "+ bundle.getString("reset")+" "+ bundle.getString("to")+" 0 "+ bundle.getString("for")+", "+ bundle.getString("next")+" "+ bundle.getString("year"),""));
                 bcontinue= true;
                 // rollUp was turned off, now do it once for all preceding updated
                 accountTotalsRollUp("fyearEnd");
                 //step 3 call a mothod to flag entries posting date less than current bus date
                 // another method to delete/purge if status is closed. jscript can ask for confirmation and call the ist method from here
                 // also show 2 buttons under fyrend page  
                 // we also need to change journal and gentries status to closed like orders etc
                 // queries/reports should not show closed items
                    doFlagJournals();
                 // separate purge button should delete them
                    doPurgeJournals();
                 // end of step 1 & 2 success, now reset the period dates status to o to be ready for next F year end,  moved to end
		 try {
		    itr = listofPeriods.iterator();
		     while (itr.hasNext()) {
		      ${perioddatesEntityName} = itr.next();
                      // update status date??
                      ${perioddatesEntityName}.setZ1xxzzfxhhxxxxxxxxxxstatusfl(0);
                      ${perioddatesEntityName}Home.clearInstance();
                      ${perioddatesEntityName}Home.setInstance(${perioddatesEntityName});
                      ${perioddatesEntityName}Home.allowUpdate();
                     }
                            if (acperiod != null && isBitSet(acperiod.getZ1xxzzfxhhxxxxxxxxxxstatusfl(),_mconsign)){
                              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                               FacesMessage.SEVERITY_INFO,bundle.getString("use")+" "+bundle.getString("setup")+"/ "+bundle.getString("accounting")+" "+bundle.getString("period")+" "+bundle.getString("to")+" "+bundle.getString("remove")+" "+bundle.getString("business")+" "+bundle.getString("date")+" "+bundle.getString("hold"),""));
                            }  

		  } catch (Exception e) {
		    log.severe( e.getMessage());
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_INFO,bundle.getString("Error")+" "+ bundle.getString("perioddates")+" "+ bundle.getString("record")+" "+e.getMessage(),""));
 		    bcontinue= false;
      	         }//save fyrend date in client
                try{
                    calendar.setTime(calendarly.getTime());
                    calendar.add(Calendar.YEAR,1);// save in client
                    ${clientEntityName?cap_first} client =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
                      if (client != null) {
		       ${clientEntityName}Home.setId( client.getA0xxuobxbxxxxxxxxxxxsid() );
 	               client = ${clientEntityName}Home.getDefinedInstance();
                       // first check whether Client Table is locked for Bus Date maintenance , not sure where is the lock logic
                       // remove hard coded property names
			  int mstatusfl=client.getZexxzzfxhhxxxxxxxxxxstatusfl();
                       if (isBitSet(mstatusfl, _mpartial)){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("system")+" "+bundle.getString("maintence")+" "+bundle.getString("try")+" "+bundle.getString("later"),""));

		        return;
		       }
                       if (isBitSet(mstatusfl, _mclosed) ){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("failed")+" "+ bundle.getString("updating")+" "+ bundle.getString("client")+" "+ bundle.getString("record")+" "+ bundle.getString("with")+" "+ bundle.getString("Fiscal")+" "+ bundle.getString("end")+" "+ bundle.getString("date")+", "+ bundle.getString("please")+" "+ bundle.getString("folowup"),""));


		        return;
		       }
                       // update changes the client statusfldate and tracks when last logon for this tenant
                       // client first 2 chrs are prod and subprod, last 2 chrs are saved during site create and are qualifiers within prodsubprod
                       // last 2chrs are for future use
                       client.setZcxxdwfebvxxxxxxxxxxfyrend(calendar.getTime());
                       ${clientEntityName}Home.update();
                      }else{
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_INFO,bundle.getString("service")+" "+ bundle.getString("decommisoned"),""));
                      }

                  
		} catch (Exception e) {
		  log.severe( e.getMessage());
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_INFO,bundle.getString("Error")+" "+ bundle.getString("client")+" "+ bundle.getString("record")+" "+e.getMessage(),""));
 		  bcontinue= false;
      	         }

      }
    /**
    * used by Yearend step 2 to flag journals and glentries as closed and then calls doPurgeJournals
    * @param args -none 
    * journa/glentries posting date is then CBD
    * not as parameters but period 12 start?? end date is used to determine whether old journals or not 
    * Also period 13/14 journals now moved to period 1/2 have posting date higher than existing period 12 end date
    * jay add reasonablity logic in doflagJournals  
    * @return void
    * @exception sql methods, error msg given and bcontinue set as false
    * @see 
    */

      public void doFlagJournals(){
                 //removed from view, add later after putting a parameter for before date, for now done via fyearend
		 try { 
                   List<${journalEntityName?cap_first}> listofjournal=${journalEntityName}List.getResultListMaxSet(1200) ;
		   Iterator<${journalEntityName?cap_first}> itr = listofjournal.iterator();
		   itr = listofjournal.iterator();
                   tempCount=0;
	           while (itr.hasNext()) {
		      ${journalEntityName} = itr.next();
                      // no statusdt fld exists for journal use postdate , flag, if journal postdate is  before calendar (period 01 start date)
                      calendare.setTime(${journalEntityName}.getB1xxcjpdhvxxxxxxxxxxpostdate());
                      if(calendare.before(calendarly)){
                       tempCount=tempCount+1;
                       ${journalEntityName}.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
                       ${journalEntityName}Home.clearInstance();
                       ${journalEntityName}Home.setInstance(${journalEntityName});
                       ${journalEntityName}Home.allowUpdate();
                      }
                   }
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,tempCount+" "+bundle.getString("journals")+" "+ bundle.getString("older")+" "+ bundle.getString("than")+" "+sdf.format(calendarly.getTime())+ bundle.getString("are")+" "+ bundle.getString("now")+", "+ bundle.getString("closed"),""));

                    entityManager.flush();//added otherwise was not removing or updated
                   tempCount=0;
                   List<${glentriesEntityName?cap_first}> listofglentries=${glentriesEntityName}List.getResultListMaxSet(1200) ;
		   Iterator<${glentriesEntityName?cap_first}> itrg = listofglentries.iterator();
		   itrg = listofglentries.iterator();
	           while (itrg.hasNext()) {
		      ${glentriesEntityName} = itrg.next();
                      // statusdt fld exists for glentries 
                      calendare.setTime(${glentriesEntityName}.getB5xxcxxrlxxxxxxxxxxxpostdate());
                      if(calendare.before(calendar)){
                       tempCount=tempCount+1;
                       ${glentriesEntityName}.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
                       ${glentriesEntityName}Home.clearInstance();
                       ${glentriesEntityName}Home.setInstance(${glentriesEntityName});
                       ${glentriesEntityName}Home.allowUpdate();
                      }
                   }
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,tempCount+" "+bundle.getString("glentries")+" "+ bundle.getString("older")+" "+ bundle.getString("than")+" "+sdf.format(calendarly.getTime())+ bundle.getString("are")+" "+ bundle.getString("now")+", "+ bundle.getString("closed"),""));

                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("if")+" "+bundle.getString("delete")+" "+ bundle.getString("flag")+" "+ bundle.getString("set")+", "+bundle.getString("they")+" "+ bundle.getString("are")+", "+ bundle.getString("deleted"),""));
                    entityManager.flush();//added otherwise was not removing or updated

		 } catch (Exception e) {
			  log.severe( e.getMessage());
 			            bcontinue= false;
     	         }


      }
    /**
    * used by Yearend step 2 to remove flagged (closed) journals and glentries
    * Step 2 calls doFlagJournals to flag journals and glentries and then calls this method 
    * @param args -none 
    * not as parameters but period 01 start date is used to determine whether old journals or not 
    * jay add reasonablity logic in doflagJournals 
    * @return void
    * @exception sql methods, error msg given but continues 
    * @see 
    */

      public void doPurgeJournals(){
		 try { 
                   List<${journalEntityName?cap_first}> listofjournal=${journalEntityName}List.getResultListMaxSet(1200) ;
		   Iterator<${journalEntityName?cap_first}> itr = listofjournal.iterator();
		   itr = listofjournal.iterator();
                   tempCount=0;
	           while (itr.hasNext()) {
		      ${journalEntityName} = itr.next();
                      // no statusdt fld exists for journal use postdate , flag, if journal postdate is  before calendar (period 01 start date)
                      calendare.setTime(${journalEntityName}.getB1xxcjpdhvxxxxxxxxxxpostdate());
                      if(calendare.before(calendarly) && isBitSet(${journalEntityName}.getZ1xxzzfxhhxxxxxxxxxxstatusfl(),_mclosed) ){
                       tempCount=tempCount+1;
                       ${journalEntityName}Home.setInstance(${journalEntityName});
                       ${journalEntityName}Home.remove();
                      }
                   }
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,tempCount+" "+bundle.getString("journals")+" "+ bundle.getString("older")+" "+ bundle.getString("than")+" "+ sdf.format(calendarly.getTime())+" "+bundle.getString("are")+" "+ bundle.getString("now")+", "+ bundle.getString("deleted"),""));

                    entityManager.flush();//added otherwise was not removing or updated
                   //unlike journal glentries have details which need to be removed first
                   tempCount=0;
                   List<${glentriesEntityName?cap_first}> listofglentries=${glentriesEntityName}List.getResultListMaxSet(1200) ;
		   Iterator<${glentriesEntityName?cap_first}> itrg = listofglentries.iterator();
		   itrg = listofglentries.iterator();
	           while (itrg.hasNext()) {
		      ${glentriesEntityName} = itrg.next();
                      // statusdt fld exists for glentries 
                      calendare.setTime(${glentriesEntityName}.getB5xxcxxrlxxxxxxxxxxxpostdate());
                      if(calendare.before(calendar) && isBitSet(${glentriesEntityName}.getZ1xxzzfxhhxxxxxxxxxxstatusfl(),_mclosed) ){
                       //remove details first
                       for (${gentriesDetailsEntityName?cap_first} glDetail : ${glentriesEntityName}List.entityDetailedList(${glentriesEntityName}.getA0xxuobxbxxxxxxxxxxxsid())) {
                        // flush did not work if in loop ${gentriesDetailsEntityName}Home.remove();
                        deleteDetails(${glentriesEntityName}.getA0xxuobxbxxxxxxxxxxxsid());
                       }
                       tempCount=tempCount+1;
                       ${glentriesEntityName}Home.setInstance(${glentriesEntityName});
                       ${glentriesEntityName}Home.remove();
                      }
                   }
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,tempCount+" "+bundle.getString("glentries")+" "+bundle.getString("and")+" "+bundle.getString("associated")+" "+bundle.getString("details")+", "+ bundle.getString("older")+" "+ bundle.getString("than")+" "+ sdf.format(calendarly.getTime())+" "+bundle.getString("are")+" "+ bundle.getString("now")+", "+ bundle.getString("deleted"),""));

                    entityManager.flush();//added otherwise was not removing or updated

		 } catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("purge")+" "+bundle.getString("action")+" "+ bundle.getString("failed"),""));


			  log.severe( "glentries purge error "+e.getMessage());
 			            bcontinue= false;
     	         }


      }




    </#if>
   <#if menuAttributesp2 == "54" >
        private String propSet="N";
        private String propESet="N";
        private String propLSet=" ";
        private String propASet="N";

        public String getImportSet() {
         return propSet;
        }
        public void setImportSet(String propSet) { 
         this.propSet = propSet;
        }
        public String getImportEmailSet() {
         return propESet;
        }
        public void setImportEmailSet(String propESet) { 
         this.propESet = propESet;
        }
        public String getImportLastName() {
         return propLSet;
        }
        public void setImportLastName(String propLSet) { 
         this.propLSet = propLSet;
        }
        public String getImportAllSet() {
         return propASet;
        }
        public void setImportAllSet(String propASet) { 
         this.propASet = propASet;
        }
	public void importEntityData(String entityName,Integer sid,String memberId) {
         // assume sid are incremental are not reused. get highest customer sid already in group 
         // extract prefix and number suffix. increment number suffix
         // scan through customer records sid > already exists and copy into group members
         bcontinue=true;
         String prefix="me";
         int currentSeq=0;
         Integer groupSid=0; 
         String temp="";
         ${entityName} last=null;
         String delims = "[ ,\\s]+";
         String jay="";
         String jayOld="";
         Boolean flSwitch=false;
        int jj=0;
        int tLen=0;
        String[] tokens = null;
        String winput="";
        String lastName="";
        boolean importThis=false;

         if(this.propSet.equals("N")){
          bcontinue=false;;
         }
         // get group info first
         groupSid=${listName}.getGroupSid();
         if (groupSid !=null && groupSid  >0){
           // groupSid has group sid via dropdownList 
           ${membersgroupEntityName}Home.set${membersgroupEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(groupSid);
	   ${membersgroupEntityName}=${membersgroupEntityName}Home.getDefinedInstance();
           if(!bcontinue){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,"confirm import data selected first",""));

                  return;
           }

          
         }else{
           if(!bcontinue){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,"confirm import data selected first",""));

           }
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+ bundle.getString("group")+" "+ bundle.getString("selection")+" "+ bundle.getString("done"),""));

                  return;
         } 
         List <${entityName}> members=${listName}.getGroupGMembersList(groupSid);
         if(members.size()==0){
          //take first and last character of group id selected from drop down list
          temp=${membersgroupEntityName}.getA0xxukxxbvxxxxxxxxxxgroupid();
          prefix=temp.substring(0,1)+temp.substring(temp.length()-1);
          currentSeq=0;
         }else{
          last = members.get(members.size()-1); 
          // xxnnn may not exist, if not assume as if no memebers
          if(last.getB1xxukgmbvxxxxxxxxxxmemberid().length() <4 ){
           temp=${membersgroupEntityName}.getA0xxukxxbvxxxxxxxxxxgroupid();
           prefix=temp.substring(0,1)+temp.substring(temp.length()-1);
           currentSeq=0;
          }else{
           prefix=last.getB1xxukgmbvxxxxxxxxxxmemberid().substring(0,last.getB1xxukgmbvxxxxxxxxxxmemberid().length()-3);
           currentSeq=Integer.parseInt(last.getB1xxukgmbvxxxxxxxxxxmemberid().substring(last.getB1xxukgmbvxxxxxxxxxxmemberid().length()-3));
          }
         }
           if(getImportAllSet().equals("Y")){
            //populate a0xxuobxbxxxxxxxxxxxsid ie simulate jsf selection array
            List<Integer> allSids =${customerEntityName}List.getAllSids();
            Integer[] flattened = new Integer[allSids.size()];
            ${listName}.setToSelects(allSids.toArray(flattened));
           }
           //set filter tokes once here
           tokens = new String[20];
           winput=this.getImportLastName().trim();// get rid of leading/end space and later skip empty token caused by comma or space
           if(!winput.isEmpty()){ 
              tokens = winput.trim().split(delims,20);   
              tLen=tokens.length;
           }

           if (${listName}.getToSelects() !=null && ${listName}.getToSelects().length  >0 && ${listName}.getToSelects()[0] !=null){
            //try natural order list first ie list empty or not
            //now create new objects from toSelects and add to null sresults
            // toSelects has customer key via dropdownList 
            // loop through array and add 
            for(int i=0; i<${listName}.getToSelects().length; i++){
             ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${listName}.getToSelects()[i]);
	     ${customerEntityName}=${customerEntityName}Home.getDefinedInstance();
             // apply filter for last name contains xx,yy, etc ,company name has value,  city contains , email has value
             lastName=${customerEntityName}.get${customerLastName?cap_first}();
             if(lastName == null){
              continue;
             }
             //skip filter if empty
             if(!winput.isEmpty()){ 
              importThis=false;
              jj=0;
              for(jj=0; jj<tLen; jj++){
               if (tokens[jj] != null && !tokens[jj].isEmpty() && lastName.contains(tokens[jj])){
                importThis=true;
               }
              }
             }
             currentSeq=currentSeq+1;
             // get new instance of member, copy customer info and persist if fiter empty or filter matches, if not empty

             if(!importThis){
              continue;
             }  
             this.clearInstance();
             last=this.getInstance();
             last.set${membersgroupEntityName?cap_first}(${membersgroupEntityName});
                   String msonorde=""+currentSeq;
                   int mponolen=3;
                   String padding = new String();
                   int padlen=-1;
                   int len = Math.abs(mponolen) - msonorde.length();
                   if (len < 1) {
                     msonorde=msonorde.toString();
                   }else{
                    for (int ii = 0 ; ii < len ; ++ii){
                     padding = padding + '0';
                    }
                     msonorde= (padlen < 0 ? padding + msonorde : msonorde + padding); 
                   }

             last.setB1xxukgmbvxxxxxxxxxxmemberid(prefix+msonorde);
             last.setJxxxuq201xwwqqhxxxxxcustomer(${customerEntityName});
             last.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mcopy);//

             this.setInstance(last);
             this.persist();
            }//end of natural list for loop using i
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("import")+" "+ bundle.getString("done")+", "+bundle.getString("last")+" "+bundle.getString("id")+" "+prefix+ currentSeq,""));


           }else{
            // try sorted one
            if (${listName}.getCcSelects() !=null && ${listName}.getCcSelects().length  >0 && ${listName}.getCcSelects()[0] !=null){
            //now create new objects from ccSelects and add to null sresults
            // ccSelects has customer sorted by time key via dropdownList 
            // loop through array and add 
             for(int i=0; i<${listName}.getCcSelects().length; i++){
             ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${listName}.getCcSelects()[i]);
	     ${customerEntityName}=${customerEntityName}Home.getDefinedInstance();
             currentSeq=currentSeq+1;
             // get new instance of member, copy customer info and persist
             this.clearInstance();
             last=this.getInstance();
             last.set${membersgroupEntityName?cap_first}(${membersgroupEntityName});
                   String msonorde=""+currentSeq;
                   int mponolen=3;
                   String padding = new String();
                   int padlen=-1;
                   int len = Math.abs(mponolen) - msonorde.length();
                   if (len < 1) {
                     msonorde=msonorde.toString();
                   }else{
                    for (int ii = 0 ; ii < len ; ++ii){
                     padding = padding + '0';
                    }
                     msonorde= (padlen < 0 ? padding + msonorde : msonorde + padding); 
                   }

             last.setB1xxukgmbvxxxxxxxxxxmemberid(prefix+msonorde);
             last.setJxxxuq201xwwqqhxxxxxcustomer(${customerEntityName});
             last.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mcopy);//
             this.setInstance(last);
             this.persist();
            }//end of sorted list for loop using i
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("import")+" "+ bundle.getString("done")+", "+bundle.getString("last")+" "+bundle.getString("id")+" "+prefix+ currentSeq,""));

           

            }else{
            //both list empty
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+ bundle.getString("selection")+" "+bundle.getString("done"),""));

            }

           }//end of Selects list
        } 

   </#if>
   <#if menuAttributesp2 == "1A" >
    /**
    * used by themeExport.xhtml which calls exportCsvData method > this exportItemClobCsvData > exportClobBlobCsvData
    * this calls exportclobblobCsvData with scope no and both to populate them.

    * Export theme contents including image urls to clob and images for theme contents or theme describing items to blob. 
    * Separate exportCsvData exist for Item which holds category and members.
    * For clob, the fromKey (page section) and qualifier(theme name) along with owner should be enough to select
    * As part of the theme Item export,an array of string will be built to contain theme name,data key and theme vendor
    * After items are exported as csv, the processs will loop through the array and call this method and export
    * related clobs.
    * Same array will be looped rhrough and if data has value blob method will be called to export item related images.
    * As the last step, all blob images matching vendor id and qualifier as theme name will be exported.
    * clobdata will have fromTable as clobdata,fromKey as A3R-TOP-BKGR-M,A3R-MID-TOP-M etc for page sections
    * and qualifier for theme name as ERP (Manufa6.354-1765137116, Nature/Gene7.023544634959, type as theme
    * and shared ie owner2 as SYSTEM and owner as content vendor.
    * For blob, the fromkey and sequence along with owner2 should be enough to select
    * blobdata will have fromTable as blobdata,fromKey as 3R-TOP-LEFT-C, pizza etc for page sections or content images.
    * These images are loaded as url /ImageServletCdi/?table=blobdata&seq=5&scope=SYSTEM&qlf=PIC&id=X3R-TOP-LEFT-C&width=700
    * currently there is no way to relate blob images to a specific theme, we can use item theme members array
    * and scan for ImageServlet and its parameters to call exportCsvdata for blob
    * This will allow csf export/import of default themes for master sites and also addons of new themes as free or paid
    * tbd copy csv files from one master site to another master site instead of download and then import
    * @param args -6, are key related and SYSTEM or not and theme vendor id. 
    * fromKey page sections,qualifier theme name
    * @return none void type
    * @exception file I/O and validation. Logged or error messages.
    * @see "exportCsvData for Item"
    *@see "preLoadThemes() if file.java"
    */

 public void exportItemClobCsvData(String scope,String themeCategory,String fromTable,String fromKey,String qualifier,int keySequence,String owner,String owner2Code) {
        //scope both covers  clob and blob if clob has embedded blob as themeCategory,fromTable FX..ITEM or clob/blob, fromKey-page section or docmnt key for 
        // text or image key, qualifier-themename/matcode,seq 0,1,2 owner vendor/user owner2 master site/SYSTEM
        String csvData="";
        String base64;
        String theme="";
        
  try {

    if(scope == null || scope.isEmpty()){
       scope="both";
    }

    if(themeCategory == null || themeCategory.isEmpty()){
       themeCategory="Pre built s4.2241967210614";
    }

    if(fromKey == null || fromKey.isEmpty()){
     fromKey="%";//page sections or docmnt key
    }
    if(owner == null || owner.isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"${clobdataEntityName?cap_first?substring(eL)}, No Theme vendor name passed for Export",""));
     return ;
    }
    if(owner2Code == null || owner2Code.isEmpty()){
     owner2Code="SYSTEM";//accept shared ones and hardcode raaspi to allow legacy ones
    }

    if(fromTable == null || fromTable.isEmpty()){
       fromTable="clobdata";
    }
    if(qualifier == null || qualifier.isEmpty()){
     qualifier="TXT";// if fromtable clobdata then themeId
    }
    //tbd instead of hardcoding raaspi use master site owner2 
    List<${clobdataEntityName?cap_first}> items = getEntityManager()
	.createQuery(
	 "select cc from ${clobdataEntityName?cap_first} cc where ((cc.a0xxukcdlvxxxxxxxxxxfromtable = :fromTable AND cc.a1xxuxxxbv49xxxxxxxxfromkey like :fromKey) OR (cc.a0xxukcdlvxxxxxxxxxxfromtable = 'clobdata' AND cc.a2xxuxxxbv50xxxxxxxxqualifier = :qualifier) AND (cc.z3xxutoxlhxxxxxxxxxxowner=:owner or cc.z3xxutoxlhxxxxxxxxxxowner='' ) AND (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner22) )")
	  .setParameter("fromTable", fromTable).setParameter("fromKey", fromKey).setParameter("qualifier", qualifier).setParameter("owner", owner).setParameter("owner2", owner2Code).setParameter("owner22", masterSiteCode).getResultList();

    if(items.isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"${clobdataEntityName?cap_first?substring(eL)}, No Theme data found for Export, category "+themeCategory+", fromKey "+fromKey+", qualifier "+qualifier,""));

     return ;
    } 

    // file already created in calling method, write to it 
    // there will be multiple entries so loop through clob items tbd owner to chage to new masterSite???
    // tbd replace , as "," in data
    for (${clobdataEntityName?cap_first} item:items){ 

      csvWriter.writeNext(new String[]{item.getA0xxukcdlvxxxxxxxxxxfromtable(), item.getA1xxuxxxbv49xxxxxxxxfromkey(),
       item.getA2xxuxxxbv50xxxxxxxxqualifier(), ""+item.getA3xxexnsbvxxxxxxxxxxsequence(),
       item.getA4xxexxxbvxxxxxxxxxxtype(), item.getB1xxuzaxbvxxxxxxxxxxdata(),
       item.getY3xxuxznbvxxxxxxxxxxnotes(), item.getZ3xxutoxlhxxxxxxxxxxowner(),
       item.getZzxxu2oxxhxxxxxxxxxxowner2()
       });

     }
     csvWriter.close();
     int found=0;

     if(scope.equals("both")){
      // loop through again for any blob data inside each clob html 
      for(${clobdataEntityName?cap_first} themeString : items){
       //look for string ImageServlet and get parameters ^start . any character $ ending
       Pattern pattern = Pattern.compile(";id=.+?&amp;");
       String data=themeString.getB1xxuzaxbvxxxxxxxxxxdata();
       Matcher matcher = pattern.matcher(data);
       theme="";
       //loop through this record
       int nextStart = 0;
       found=0;
       while (matcher.find(nextStart)) {
        found=found+1;
        theme="";
        int start = matcher.start();
        int end = matcher.end();
        end=end-5;
        theme= data.substring(start+5,end);//skip prefix 
        nextStart=end;
        fpxxfq1a5xwwqqhxxxxxitemHome.exportClobBlobCsvData("no",themeCategory,"blobdata",theme,"PIC",1,owner,"SYSTEM");
        //                                                                           no clob/image,item parent  ,fromtable                                         ,fromKey,qualf,seq,
       }//while
      }//for
     }//if

  } catch (Exception ex) {
    ex.printStackTrace();
  }




 } 
    /**
    * used by themeExport.xhtml which calls exportCsvData method > exportItemClobCsvData > this exportClobBlobCsvData
    * prepares either clob or blob records in csv text format. blobdata binary data > base64 so that it can be stored as csv text
    * csvWriter2 is for blobdata and calls opencsv csvWriter2.writeNext/close  to create csv records for blobdata
    */
 public void exportClobBlobCsvData(String scope,String themeCategory,String fromTable,String fromKey,String qualifier,int keySequence,String owner,String owner2Code) {
        //scope both covers clob data as well as blob inside clob as imageservlet
        String csvData="";
        String base64;
        String theme="";
        
  try {

    if(scope == null || scope.isEmpty()){
       scope="both";
    }

    if(themeCategory == null || themeCategory.isEmpty()){
       themeCategory="Pre built s4.2241967210614";
    }

    if(fromKey == null || fromKey.isEmpty()){
     fromKey="%";//page sections or docmnt key
    }
    if(owner == null || owner.isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"${blobdataEntityName?cap_first?substring(eL)}, No Theme vendor name passed for Export",""));
     return ;
    }
    if(owner2Code == null || owner2Code.isEmpty()){
     owner2Code="SYSTEM";//accept shared ones and hardcode raaspi to allow legacy ones
    }

    if(fromTable == null || fromTable.isEmpty()){
       fromTable="blobdata";
    }
    if(qualifier == null || qualifier.isEmpty()){
     qualifier="PIC";
    }
    //like fromKey will bring all themes for a themecategory since 
    List<${blobdataEntityName?cap_first}> items = getEntityManager()
	.createQuery(
	 "select cc from ${blobdataEntityName?cap_first} cc where (cc.a0xxukbdlvxxxxxxxxxxfromtable = :fromTable AND cc.a1xxuxxxbv49xxxxxxxxfromkey like :fromKey AND cc.a2xxuxxxbv50xxxxxxxxqualifier = :qualifier AND cc.z3xxutoxlhxxxxxxxxxxowner=:owner AND (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner22))")
	  .setParameter("fromTable", fromTable).setParameter("fromKey", fromKey).setParameter("qualifier", qualifier).setParameter("owner", owner).setParameter("owner2", owner2Code).setParameter("owner22", masterSiteCode).getResultList();

    if(items.isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"${blobdataEntityName?cap_first?substring(eL)}, No Theme data found for Export, category "+themeCategory+", fromKey "+fromKey,""));

     return ;
    } 

    ${blobdataEntityName?cap_first} item =items.get(0);// since only one member in the list ??? why one

    base64 = Base64.getEncoder().encodeToString(item.getB1xxuzbxbvxxxxxxxxxxdata());//image byte data as base64 string
    //need to find a way to use column data/byte[] -> base64 ->csv  b1xxuzbxbvxxxxxxxxxxdata
      csvWriter2.writeNext(new String[]{item.getA0xxukbdlvxxxxxxxxxxfromtable(), item.getA1xxuxxxbv49xxxxxxxxfromkey(),
       item.getA2xxuxxxbv50xxxxxxxxqualifier(), ""+item.getA3xxexnsbvxxxxxxxxxxsequence(),
       item.getA4xxexxxbvxxxxxxxxxxtype(), base64,
       item.getY3xxuxznbvxxxxxxxxxxnotes(), item.getZ3xxutoxlhxxxxxxxxxxowner(),
       item.getZzxxu2oxxhxxxxxxxxxxowner2()
       });

      csvWriter2.close();
      //csv:"blobdata","3R-MID-TOP-M","restorative-yoga.jpg1936474490","PIC","1","pic","base64 data","","3R Computersss","SYSTEM"
     int found=0;


  } catch (Exception ex) {
    ex.printStackTrace();
  }




 } 



   </#if>

   <#if menuAttributesp2 == "1A" >
    /**
    * used by themeExport.xhtml which calls this exportCsvData method > exportItemClobCsvData > exportClobBlobCsvData
    * this method first creates and populates theme info (not content) related sitems.csv, sitemblob.csv and then creates theme content related sclob.csv and sblob.csv files
    * but calls exportItemClobCsvData which in turns calls exportclobblobCsvData with scope no and both to populate them.
    *
    * overall logic: theme items first, for the theme category build a list of theme items called items/members  and loop through items and create sitems.csv. 
    * Loop throgh once more and if the item has value in docmnt field and there is blob data, then convert into base64 and write sitemblob.csv
    * Next theme contents stored in clob/blob. Loop through members and extract theme id (matcode) and the clob/blob key (docmnt)
    * and call exportItemClobCsvData. A theme item content is in a clob but the clob itself may have images as blobdata using imageservlet.
    * for each member get the clobdata using the fromkey(item docmnt) and if present write sclob.csv.
    * In the clob data, look for imageServlet signature id=, if found, call exportClobBlobCsvData to handle clob>blob data.
    *
    * 
    * Exports theme category and members data kept in dataBase item records(descriptions) and in clob/blob records(contents). 
    * Theme descriptions in items include descript,notes text data and separate blob data records via docmnt field
    * as fromKey and fromtable as blob. Using clobdata for theme description is less common because it should be short.
    *
    * Theme contents reside in shared ie SYSTEM clob as HTML data which in turn can contain url for images in shared
    * /SYSTEM blob. The fromTable is XXXITEM and fromKey has the themename which is the matcode of the item.
    *    
    *
    * This method creates or reuses a dir in server and creates/overwrites item file for a theme category and members. 
    * category has type SI-L1 and members (children) have type SI-D. Both have subcodesn as TH and misccode1 has theme vendor
    * matCode is themeId  subcodesn3 has theme visual type/ theme business type, misccode2 theme visual type
    * if SI-L1 then its parent key has 0, SI-D then parent key will have sid of the parent. At import time we can insert the sid
    * For both item types, data field will have the key value say 795290653 matching either or both blob and clobdata
    * For now, hardode key value for SI-L1 as Pre built s4.2241967210614. Allow user prompt to make this changeable. 
    *  
    * explore using StatefulBeanToCsv, for now custom logic to support relations
    * instead of sid for a foreign key, fetch and write natural key value in csv. In import use the natural key to 
    * locate the sid and then use sid.
    * This means items need to be imported and created first and then blob and then clob.
    * @param args -6, are key related and SYSTEM or not and theme vendor id. 
    * fromKey page sections,qualifier theme name
    * @return none void type
    * @exception file I/O and validation. Logged or error messages.
    * @see "exportCsvData for clob and blob"
    * @see "preLoadThemes() in file.java"
    */
  public void exportCsvData(String themeGallery,String keyQualifier,String itemType,String subCodesn,String owner,String owner2Code) {
        // themeGallery,keyQualifier csv  subCodesn 'TH'
        // unlike clob and blob, theme items owner2 is normally master site
        String csvData="";
        String themeId="";
        String imageKey="";
        String fromKey="";
        List<${itemEntityName?cap_first}> members=null;
        List<${itemEntityName?cap_first}> items = null;
        if(themeGallery == null || themeGallery.isEmpty()){
         themeGallery="Pre built s4.2241967210614";
        }

        themeGallery=themeGallery.trim();
        if(owner2Code == null || owner2Code.isEmpty()){
         owner2Code="SYSTEM";//accept shared ones and hardcode raaspi to allow legacy ones
        }

   try {
    //get category first and then use its sid to get its members
    items = getEntityManager()
	.createQuery(
	 "select cc from ${itemEntityName?cap_first} cc where (cc.c6xxusxrbv16xxxxxxxxtype = 'SI-L1' AND cc.g2xxuxn1bvxxxxxxxxxxsubcodesn = 'TH' AND cc.a0xxukixbxxxxxxxxxxxmatcode like :keyValue AND (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner22))")
	  .setParameter("keyValue", themeGallery+"%").setParameter("owner2", owner2Code).setParameter("owner22", masterSiteCode).getResultList();
    if(items.isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"No Theme category data found for Export",""));
     return ;
    }
    sidValue=items.get(0).getA0xxuobxbxxxxxxxxxxxsid();
    members = getEntityManager()
	.createQuery(
	 "select cc from ${itemEntityName?cap_first} cc where (cc.c6xxusxrbv16xxxxxxxxtype = 'SI-D' AND cc.g2xxuxn1bvxxxxxxxxxxsubcodesn = 'TH' AND cc.${itemEntityName}.a0xxuobxbxxxxxxxxxxxsid=:sidValue AND (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner22))")
	  .setParameter("sidValue", sidValue).setParameter("owner2", owner2Code).setParameter("owner22", masterSiteCode).getResultList();
    if(members.isEmpty()){
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"for Theme category "+themeGallery+" No details data found for Export",""));
     return ;
    }

    items.addAll(members);// category followed by all theme member items.
    //Actual text/images and theme contents are in clob/blob
    // create a file and write
    if(keyQualifier == null || keyQualifier.isEmpty()){
       keyQualifier="csv";
    }
    path_to = "resources" + java.io.File.separator + "csv";
    fileSavePath = FacesContext.getCurrentInstance().getExternalContext().getRealPath("") + this.path_to;
    newfilename = themeGallery + "items"+".csv";

    java.io.File fileToCreate = new java.io.File(fileSavePath, newfilename);//default creates/overwrites, append needs flag
    java.io.File folder = new java.io.File(fileSavePath);
    if (!folder.exists()) {
     folder.mkdirs();
    }
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,"Folder for csv files: "+fileSavePath,""));

     csvWriter = new CSVWriter(new FileWriter(fileToCreate));
     //CSVWriter(Writer writer,char separator(,),quotechar("),escapechar(""),String lineEnd(\n)
     //quotechar to allow comma in data and escape char to allow quotechar itself in data.

     //StatefulBeanToCsv beanToCsv = new StatefulBeanToCsvBuilder(writer)
     //.withMappingStrategy(strategy)
     //.build(); //mapping not working ie output empty
     //StatefulBeanToCsv beanToCsv = new StatefulBeanToCsvBuilder(writer)
     //.build(); //no mapping but error related to jdbc handling collections
     //beanToCsv.write(items);
     //loop through items, create Array<String> themeItem of matcode,subcodesn etc
     // instead of saving parent sid which will change, save logical value ie matcode. parent sid may be null 
     String parentKey="";
     for(${itemEntityName?cap_first} item : items){
      parentKey="";
      if(item.get${itemEntityName?cap_first}()!=null ){
       parentKey=item.get${itemEntityName?cap_first}().getA0xxukixbxxxxxxxxxxxmatcode();
      }
      csvWriter.writeNext(new String[]{item.getA0xxukixbxxxxxxxxxxxmatcode(), item.getB1xxuszsbvxxxxxxxxxxdescript(),
       item.getY2xxuxxrbvxxxxxxxxxxmisccode1(), item.getY3xxuxxrbvxxxxxxxxxxmisccode2(),
       item.getC6xxusxrbv16xxxxxxxxtype(), parentKey,
       item.getG2xxuxn1bvxxxxxxxxxxsubcodesn(), item.getG2xxuxn3bvxxxxxxxxxxsubcodesn3(),
       item.getW7xxuznxbvxxxxxxxxxxnotes(), item.getW8xxuzdrbvxxxxxxxxxxdocmnt(),
       item.getZexxutoxlhxxxxxxxxxxowner(), item.getZzxxu2oxxhxxxxxxxxxxowner2()
       });
     }
     csvWriter.close();
     //csv: ""Agency /Gen50.94-1028397090"",""Agency /Generic/Agency"",""3R Computersss"",""Nature"",""SI-D"",""Pre built s4.2241967210614"",""TH"",""Generic/Agency"",""A generic theme under the Nature series and can be used as the base for any Agency site"",""B1987041908"",""3R Computersss"",""raaspi""
   } catch (Exception ex) {
    ex.printStackTrace();
   }

   try {
    newfilename = themeGallery + "itemblob"+".csv";

    java.io.File fileToCreate = new java.io.File(fileSavePath, newfilename);
    java.io.File folder = new java.io.File(fileSavePath);
    if (!folder.exists()) {
     folder.mkdirs();
    }

     csvWriter = new CSVWriter(new FileWriter(fileToCreate));
     //CSVWriter(Writer writer,char separator(,),quotechar("),escapechar(""),String lineEnd(\n)
     for(${itemEntityName?cap_first} item : items){
      if(!item.getW8xxuzdrbvxxxxxxxxxxdocmnt().isEmpty()){
       //check if any blobdata matching imageKey and create itemblob csv
       Yxxxuq1n1xwwqqqxxxxxblobdata blobdata=yxxxuq1n1xwwqqqxxxxxblobdataList.getDocmntWPrefixToEntity(item.getW8xxuzdrbvxxxxxxxxxxdocmnt());
       if(blobdata==null){
        continue;
       }
       //base64
       String base64 = Base64.getEncoder().encodeToString(blobdata.getB1xxuzbxbvxxxxxxxxxxdata());// image data in base64

       csvWriter.writeNext(new String[]{blobdata.getA0xxukbdlvxxxxxxxxxxfromtable(),blobdata.getA1xxuxxxbv49xxxxxxxxfromkey(),
       blobdata.getA2xxuxxxbv50xxxxxxxxqualifier(), ""+blobdata.getA3xxexnsbvxxxxxxxxxxsequence(),
       blobdata.getA4xxexxxbvxxxxxxxxxxtype(), base64,
       blobdata.getZ3xxutoxlhxxxxxxxxxxowner(), blobdata.getZzxxu2oxxhxxxxxxxxxxowner2()
       });
      }
     }
     csvWriter.close();

   } catch (Exception ex) {
    ex.printStackTrace();
   }


   // item csv file  and its blob csv file was created.
   //tbd in below loop also check getW8xxuzdrbvxxxxxxxxxxdocmnt() if not empty exportcsv for blob
   //create csv files here to avoid creating them in a loop
    // create a clob csv file and write
   try {
    path_to = "resources" + java.io.File.separator + "csv";//dir
    newfilename = themeGallery + "clob"+".csv";
    fileSavePath = FacesContext.getCurrentInstance().getExternalContext().getRealPath("") + this.path_to;

    fileToCreate = new java.io.File(fileSavePath, newfilename);
    folder = new java.io.File(fileSavePath);
    if (!folder.exists()) {
     folder.mkdirs();//should already exist
    }
    csvWriter = new CSVWriter(new FileWriter(fileToCreate));
    //CSVWriter(Writer writer,char separator(,),quotechar("),escapechar(""),String lineEnd(\n)

    // create a blob csv file and write
    newfilename = themeGallery + "blob"+".csv";
    fileSavePath = FacesContext.getCurrentInstance().getExternalContext().getRealPath("") + this.path_to;

    fileToCreate = new java.io.File(fileSavePath, newfilename);
    folder = new java.io.File(fileSavePath);
    if (!folder.exists()) {
     folder.mkdirs();//should already exist
    }
    csvWriter2 = new CSVWriter(new FileWriter(fileToCreate));
    //CSVWriter(Writer writer,char separator(,),quotechar("),escapechar(""),String lineEnd(\n)

    //now loop through theme members and call clob export, use item matcode as fromKey
    for(${itemEntityName?cap_first} theme : members){
     themeId= theme.getA0xxukixbxxxxxxxxxxxmatcode();
     fromKey= "%"; //theme.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1) for theme descript but need to include content keys like MID- etc
     //csv files sclob.csv and sblob.csv created here but calls method to write. owner2 is masterSite for descript and SYSTEM for contents
     ${itemEntityName}Home.exportItemClobCsvData("both",themeGallery,"clobdata",fromKey,themeId,0,owner,"SYSTEM");
     //method params                              scope,themeCategory,fromTable,fromKey,qualifier,keySequence,owner,owner2Code

     //ecah call creates website root/resources/csv/ a file named themecategory.clob
     //with multiple lines holding theme contents for many themes and their pages.
     // exportcsvData for clob at the end calls exportcsvData for blob for imageServlet entries,
     // which creates another blob csv file
    }
   } catch (Exception ex) {
    ex.printStackTrace();
   }

  }

    /**
    * The following method imports csv ie comma separated value as data base records  
    * theme related items,itemImage/Blobdata,item theme description and themecontent clobs and image/blobdata embedded in clobs   
    * Separate importCsvData files(4) exist for them, can be empty. 
    * @param args -2 csv file byte content, file name.  file name contains entity type ie item,itemblob,clob,blob
    * @return none 
    * @exception io errors and validation and messages are given
    * csv file needs to be recent to avoid old data  
    * @see "importCsvData for Account and also for item,customer etc"
    */
        //
	public void importThemeCsvData(byte[] fileContent,String fileName) {
/*
           // other than account, ignore table value assume as clobdata so that we can use editclobdata where table is allways clobdata
           // table can have other values via appl code
               importChosen=true;

               if(this.propSet.equals("N")){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("select")+" "+ bundle.getString("and")+" "+bundle.getString("confirm")+" "+bundle.getString("which")+" "+bundle.getString("fields")+" "+bundle.getString("will")+" "+bundle.getString("be")+" "+bundle.getString("imported"),""));

                  return;
               }
               int importexception=0;
               String jay="";
                String mykeyWPrefix=keyWPrefix;
                String mykeyQualifier=keyQualifier;
                int mykeySequence=keySequence;
                int mysize=size;
                int csvElements=11;
                int ii=0;
                importexception=0;     
               //try for customer/vendor/employee/item/address, loop inside
               try {
                <#if menuAttributesp2 == "40">
                 csvElements=10;//no companyName
                </#if>   
                <#if menuAttributesp2 == "11">
                 csvElements=5;//address
                </#if>   
                <#if menuAttributesp2 == "1A">
                 csvElements=7;//Item
                </#if>   

	        if (this.instance == null) {
                 this.clearInstance();
	         this.instance=this.getInstance();
	        }

                 // date check, dont allow if older than 7 days,  removed csvElements count its fixed
                ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","a"+keyWPrefix,keyQualifier,keySequence);
                if (${clobdataEntityName} == null || ${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,"No CSV (Comma Separated Values) data found for Import",""));
                 return;
                }
                calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 return; 
                }
                String csvData=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,"CSV (Comma Separated Values) data used- dated "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString(),""));

                String lines[] = csvData.split("\\r?\\n");
                String[] csvDataArray=null;
                String[] csvDataArray2=new String[11];
                String lastEmail="";
                int element=-1;
                int importdone=0;
                int importnotdone=0;
                int i=0;
                if(this.skipRecordOne.equals("Y")){
                  ii=1; 
                }

                for(i=ii;i<lines.length;i++){
                 element=-1;
                 csvDataArray=null;
                 jay=lines[i];
                 try{
                 if(!this.lineBy.equals("N")){
                  jay=jay.substring(0,jay.length()-1); 
                 }
                 if(this.enclosedBy.equals("D")){
                  jay=jay.replace("\"",""); 
                 }
                 if(this.enclosedBy.equals("S")){
                  jay=jay.replace("\'",""); 
                 }
                 if(this.delimeterBy.equals("C")){
                  csvDataArray=jay.split(",");
                 }
                 if(this.delimeterBy.equals("S")){
                  csvDataArray=jay.split(" ");
                 }
                 int k=csvDataArray.length;
                 int j=0;
                 for(j=0;j<11;j++){
                  if(j < k && csvDataArray[j] !=null){
                   csvDataArray2[j]=csvDataArray[j];
                  }else{
                   csvDataArray2[j]="";    
                  }
                 }
                 if(csvDataArray2.length != csvElements){
                  importnotdone=importnotdone+1;
                  if(importnotdone <6){

                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("elements")+" "+ bundle.getString("found")+" "+csvDataArray.length+", "+ bundle.getString("expected")+" "+ csvElements+" "+bundle.getString("and")+" "+ bundle.getString("csv")+" "+ bundle.getString("elements")+" "+ jay,""));

                  }     
                 }
                <#if menuAttributesp2 == "20">
                 this.instance.setA0xxukxxbvxxxxxxxxxxcustomer(csvDataArray2[0]);
                 this.instance.setY0xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[1]);
                 this.instance.setB1xxuxxxbv21xxxxxxxxtitle(csvDataArray2[2]);
                 this.instance.set${customerLastName?cap_first}(csvDataArray2[3]);
                 this.instance.set${customerFirstName?cap_first}(csvDataArray2[4]);
                 this.instance.set${customerCompanyName?cap_first}(csvDataArray2[5]);
                 this.instance.set${customerPhoneO?cap_first}(csvDataArray2[6].replace(" ",""));
                 this.instance.set${customerPhoneH?cap_first}(csvDataArray2[7].replace(" ",""));
                 this.instance.setP3xxhxxxbv27xxxxxxxxphonec(csvDataArray2[8].replace(" ",""));
                 this.instance.setQ4xxhxxxbv24xxxxxxxximailaddr(csvDataArray2[9].trim());
                 lastEmail=csvDataArray2[9].trim();
                 this.instance.setF1xxuxxxav28xxxxxxxxtype(csvDataArray2[10]);
                 this.instance.setZdxxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "30">
                 this.instance.setA0xxukxxbvxxxxxxxxxxvendor(csvDataArray2[0]);
                 this.instance.setY0xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[1]);
                 this.instance.setB1xxuxxrbv21xxxxxxxxtitle(csvDataArray2[2]);
                 this.instance.set${vendorLastName?cap_first}(csvDataArray2[3]);
                 this.instance.set${vendorFirstName?cap_first}(csvDataArray2[4]);
                 this.instance.set${vendorFirstName?cap_first}(csvDataArray2[5]);
                 this.instance.set${vendorCompanyName?cap_first}(csvDataArray2[6]);
                 this.instance.set${vendorPhoneO?cap_first}(csvDataArray2[7].replace(" ",""));
                 this.instance.set${vendorPhoneH?cap_first}(csvDataArray2[8].replace(" ",""));
                 this.instance.setM3xxhxxrbv27xxxxxxxxphonec(csvDataArray2[9].replace(" ",""));
                 this.instance.setN4xxhxxrbv24xxxxxxxximailaddr(csvDataArray2[10].trim());
                 this.instance.setY5xxuxxrbv29xxxxxxxxtype(csvDataArray2[11]);
                 this.instance.setZhxxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "40">
                 this.instance.setA0xxuktxbvxxxxxxxxxxemployee(csvDataArray2[0]);
                 this.instance.setY0xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[2]);
                 this.instance.setB1xxuxxxbv21xxxxxxxxtitle(csvDataArray2[3]);
                 this.instance.set${employeeLastName?cap_first}(csvDataArray2[4]);
                 this.instance.set${employeeFirstName?cap_first}(csvDataArray2[5]);
                 this.instance.set${employeePhoneO?cap_first}(csvDataArray2[6].replace(" ",""));
                 this.instance.set${employeePhoneH?cap_first}(csvDataArray2[7].replace(" ",""));
                 this.instance.setM3xxh5pcbv27xxxxxxxxphonec(csvDataArray2[8].replace(" ",""));
                 this.instance.setN4xxhxxrbv24xxxxxxxximailaddr(csvDataArray2[9].trim());
                 lastEmail=csvDataArray2[9].trim();
                 this.instance.setO1xxuxxrbv45xxxxxxxxtype(csvDataArray2[10]);
                 this.instance.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "1A">
                 this.instance.setA0xxukixbxxxxxxxxxxxmatcode(csvDataArray2[0]);// check for non numeric
                 if(csvDataArray2[1]==null || csvDataArray2[1].isEmpty()){
                  this.instance.setB0xxziqxlvxxsaxxxxxxquantity(BigDecimal.ZERO);
                 }else{
                  this.instance.setB0xxziqxlvxxsaxxxxxxquantity(new BigDecimal(csvDataArray2[1]));
                 }
                 this.instance.setB1xxuszsbvxxxxxxxxxxdescript(csvDataArray2[2]);
                 if(csvDataArray2[3]==null || csvDataArray2[3].isEmpty()){
                  this.instance.setB6fbzicxbvxxxxxxxxxxcost(BigDecimal.ZERO);
                 }else{
                  this.instance.setB6fbzicxbvxxxxxxxxxxcost(new BigDecimal(csvDataArray2[3]));
                 }
                 if(csvDataArray2[4]==null || csvDataArray2[4].isEmpty()){
                  this.instance.setB8fbzpxxbvxxxxxxxxxxselprice(BigDecimal.ZERO);
                 }else{
                  this.instance.setB8fbzpxxbvxxxxxxxxxxselprice(new BigDecimal(csvDataArray2[4]));
                 }
                 this.instance.setZxxrbvxxxvxxxxxxxxxxbarupc(csvDataArray2[5]);
                 if(csvDataArray2[6] == null || csvDataArray2[6].isEmpty()){
                  csvDataArray2[6]="SI-D";
                 } 
                 this.instance.setZxxrbvxxxvxxxxxxxxxxbarupc(csvDataArray2[5]);
                 if(csvDataArray2[6] == null || csvDataArray2[6].isEmpty()){
                  csvDataArray2[6]="SI-D";
                 } 
                 this.instance.setC6xxusxrbv16xxxxxxxxtype(csvDataArray2[6]);
                 this.instance.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                 this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "11">
                   this.instance.setA0xxukbxbxxxxxxxxxxxaddrescode(csvDataArray2[0]);
                   this.instance.setB1pxusa1bvxxxxxxxxxxaddrl1(csvDataArray2[1]);
                   this.instance.setB3xxh2acbv11xxxxxxxxcity(csvDataArray2[2]);
                   this.instance.setB4xxhbpxbv12xxxxxxxxprovnstate(csvDataArray2[3]);
                   this.instance.setB6xxh3azbv14xxxxxxxxpzcode(csvDataArray2[4]);
                   this.instance.setZ3xxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                   this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                   this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>


                 this.subKey="";
                 <#if menuAttributesp2 == "20" ||  menuAttributesp2 == "30" || menuAttributesp2 == "40"  >
                  //put a flag in list to turn off default customer + address
                  if(persistNextAddress(i) ==0 ){           
                   return;
                  }
                  //update this.instance.addressByMailtocode using the address sid
                  // persist has logic to calculate key value and calls keyexists to prevent duplicate
                  <#if menuAttributesp2 == "20">
                    this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(${addressEntityName}ByMailtocode);
                  </#if>                  
                  <#if menuAttributesp2 == "30">
                    this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(${addressEntityName}ByMailtocode);
                  </#if>                  
                  <#if menuAttributesp2 == "40">
                    this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(${addressEntityName}ByMailtocode);
                  </#if>                  

                 </#if>
                 this.persist();//customer etc
                 importdone=importdone+1;
                 this.clearInstance();
	         this.instance=this.getInstance();
                 if(!bcontinue){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("aborting")+" "+ bundle.getString("import")+", "+ bundle.getString("changes")+" "+ bundle.getString("rolled")+" "+ bundle.getString("back")+", "+ bundle.getString("fix")+" "+ bundle.getString("and")+" "+ bundle.getString("try")+" "+ bundle.getString("again"),""));
                   return;
     
                 }
                 }catch (Exception ef){
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("exception")+" "+ ef.getCause()+", "+ ef.getMessage()+" "+jay,""));

		   log.severe(" import error "+owner2Code+' ' + ef.getCause()+' ' + ef.getMessage()+' '+jay);
                  }     
                 }
                 if(i >=400){
                  // runs out of memory,try session.flush and clear
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("upto")+" 400 "+ bundle.getString("records")+" "+bundle.getString("per")+" "+bundle.getString("import"),""));

                  break;
                 }
                }//for loop
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("total")+" "+i+" = "+ bundle.getString("dropped")+" "+duplDropped+"  "+ bundle.getString("added")+" "+importAdded,""));

                 //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  //FacesMessage.SEVERITY_INFO,i+" "+bundle.getString("last")+" "+ bundle.getString("processed")+" "+lastEmail,""));

              


		} catch (Exception e) {
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("exception")+" "+e.getMessage()+" "+ jay,""));

		   log.severe(" import error "+owner2Code+' ' + e.getMessage()+' '+jay);
                  }     
		}
*/
      } 



   </#if>

   <#if menuAttributesp2 == "11" || menuAttributesp2 == "1A" || menuAttributesp2 == "20" || menuAttributesp2 == "30" || menuAttributesp2 == "40" >
     // make sure to include @Inject clobdata if non clob entity and remove hardcoding below use entitynames
     <#if menuAttributesp2 != "1A">       
	@Inject
	${componentName?cap_first}Home ${componentName}Home;
        private ${componentName?cap_first} ${componentName};
     </#if>  
     <#if menuAttributesp2 == "11">       
	@Inject
	${clobdataEntityName?cap_first}Home ${clobdataEntityName}Home;
	@Inject
	${clobdataEntityName?cap_first}List ${clobdataEntityName}List;
	private ${clobdataEntityName?cap_first} ${clobdataEntityName};
     </#if>  

        private String propSet="N";
        private String delimeterBy="C";
        private String enclosedBy="D";
        private String lineBy="N";
        private String keyBy="N";
        private String descriptionBy="N";
        private String titleBy="N";
        private String lastfirstBy="LF";
        private String companyBy="N";
        private String ophoneBy="Y";
        private String hphoneBy="N";
        private String cphoneBy="Y";
        private String emailBy="Y";
        private String typeBy="N";
        private String skipRecordOne="N";

        public String getImportSet() {
         return propSet;
        }
        public void setImportSet(String propSet) { 
         this.propSet = propSet;
        }
        public String getDelimeterBy() {
         return delimeterBy;
        }
        public void setDelimeterBy(String delimeterBy) { 
         this.delimeterBy = delimeterBy;
        }

        public String getEnclosedBy() {
         return enclosedBy;
        }
        public void setEnclosedBy(String enclosedBy) { 
         this.enclosedBy = enclosedBy;
        }

        public String getLineBy() {
         return lineBy;
        }
        public void setLineBy(String lineBy) { 
         this.lineBy = lineBy;
        }
     
        public String getKeyBy() {
         return keyBy;
        }
        public void setKeyBy(String keyBy) { 
         this.keyBy = keyBy;
        }
        public String getDescriptionBy() {
         return descriptionBy;
        }
        public void setDescriptionBy(String descriptionBy) { 
         this.descriptionBy = descriptionBy;
        }
        public String getTitleBy() {
         return titleBy;
        }
        public void setTitleBy(String titleBy) { 
         this.titleBy = titleBy;
        }
        public String getLastfirstBy() {
         return lastfirstBy;
        }
        public void setLastfirstBy(String lastfirstBy) { 
         this.lastfirstBy = lastfirstBy;
        }
        public String getCompanyBy() {
         return companyBy;
        }
        public void setCompanyBy(String companyBy) { 
         this.companyBy = companyBy;
        }
        public String getOphoneBy() {
         return ophoneBy;
        }
        public void setOphoneBy(String ophoneBy) { 
         this.ophoneBy = ophoneBy;
        }
        public String getHphoneBy() {
         return hphoneBy;
        }
        public void setHphoneBy(String hphoneBy) { 
         this.hphoneBy = hphoneBy;
        }
        public String getCphoneBy() {
         return cphoneBy;
        }

        public void setCphoneBy(String cphoneBy) { 
         this.cphoneBy = cphoneBy;
        }
        public String getEmailBy() {
         return emailBy;
        }
        public void setEmailBy(String emailBy) { 
         this.emailBy = emailBy;
        }

        public String getTypeBy() {
         return typeBy;
        }
        public void setTypeBy(String typeBy) { 
         this.typeBy = typeBy;
        }
        public String getSkipRecordOne() {
         return skipRecordOne;
        }
        public void setSkipRecordOne(String skipRecordOne) { 
         this.skipRecordOne = skipRecordOne;
        }

    /**
    * The following method imports csv ie comma separated value as data base records  
    * currently customer/vendor/employee/item/address tables are supported. 
    * Relations not supported but tbd
    * Separate importCsvData exists for account and accountIntegration and supports relation
    * @param args -4 first 3 are key related and last is size. They are used based on the table
    * @return none 
    * @exception io errors and validation and messages are given
    * csv file needs to be recent 
    * @see "importCsvData for Account"
    */

	public void importCsvData(String keyWPrefix,String keyQualifier,int keySequence,int size) {
           // other than account, ignore table value assume as clobdata so that we can use editclobdata where table is allways clobdata
           // table can have other values via appl code
               importChosen=true;

               if(this.propSet.equals("N")){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("select")+" "+ bundle.getString("and")+" "+bundle.getString("confirm")+" "+bundle.getString("which")+" "+bundle.getString("fields")+" "+bundle.getString("will")+" "+bundle.getString("be")+" "+bundle.getString("imported"),""));

                  return;
               }
               int importexception=0;
               String jay="";
                String mykeyWPrefix=keyWPrefix;
                String mykeyQualifier=keyQualifier;
                int mykeySequence=keySequence;
                int mysize=size;
                int csvElements=11;
                int ii=0;
                importexception=0;     
               //try for customer/vendor/employee/item/address, loop inside
               try {
                <#if menuAttributesp2 == "40">
                 csvElements=10;//no companyName
                </#if>   
                <#if menuAttributesp2 == "11">
                 csvElements=5;//address
                </#if>   
                <#if menuAttributesp2 == "1A">
                 csvElements=7;//Item
                </#if>   

	        if (this.instance == null) {
                 this.clearInstance();
	         this.instance=this.getInstance();
	        }

                 // date check, dont allow if older than 7 days,  removed csvElements count its fixed
                ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","a"+keyWPrefix,keyQualifier,keySequence);
                if (${clobdataEntityName} == null || ${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,"No CSV (Comma Separated Values) data found for Import",""));
                 return;
                }
                calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 return; 
                }
                String csvData=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,"CSV (Comma Separated Values) data used- dated "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString(),""));

                String lines[] = csvData.split("\\r?\\n");
                String[] csvDataArray=null;
                String[] csvDataArray2=new String[11];
                String lastEmail="";
                int element=-1;
                int importdone=0;
                int importnotdone=0;
                int i=0;
                if(this.skipRecordOne.equals("Y")){
                  ii=1; 
                }

                for(i=ii;i<lines.length;i++){
                 element=-1;
                 csvDataArray=null;
                 jay=lines[i];
                 try{
                 if(!this.lineBy.equals("N")){
                  jay=jay.substring(0,jay.length()-1); 
                 }
                 if(this.enclosedBy.equals("D")){
                  jay=jay.replace("\"",""); 
                 }
                 if(this.enclosedBy.equals("S")){
                  jay=jay.replace("\'",""); 
                 }
                 if(this.delimeterBy.equals("C")){
                  csvDataArray=jay.split(",");
                 }
                 if(this.delimeterBy.equals("S")){
                  csvDataArray=jay.split(" ");
                 }
                 int k=csvDataArray.length;
                 int j=0;
                 for(j=0;j<11;j++){
                  if(j < k && csvDataArray[j] !=null){
                   csvDataArray2[j]=csvDataArray[j];
                  }else{
                   csvDataArray2[j]="";    
                  }
                 }
                 if(csvDataArray2.length != csvElements){
                  importnotdone=importnotdone+1;
                  if(importnotdone <6){

                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("elements")+" "+ bundle.getString("found")+" "+csvDataArray.length+", "+ bundle.getString("expected")+" "+ csvElements+" "+bundle.getString("and")+" "+ bundle.getString("csv")+" "+ bundle.getString("elements")+" "+ jay,""));

                  }     
                 }
                <#if menuAttributesp2 == "20">
                 this.instance.setA0xxukxxbvxxxxxxxxxxcustomer(csvDataArray2[0]);
                 this.instance.setY0xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[1]);
                 this.instance.setB1xxuxxxbv21xxxxxxxxtitle(csvDataArray2[2]);
                 this.instance.set${customerLastName?cap_first}(csvDataArray2[3]);
                 this.instance.set${customerFirstName?cap_first}(csvDataArray2[4]);
                 this.instance.set${customerCompanyName?cap_first}(csvDataArray2[5]);
                 this.instance.set${customerPhoneO?cap_first}(csvDataArray2[6].replace(" ",""));
                 this.instance.set${customerPhoneH?cap_first}(csvDataArray2[7].replace(" ",""));
                 this.instance.setP3xxhxxxbv27xxxxxxxxphonec(csvDataArray2[8].replace(" ",""));
                 this.instance.setQ4xxhxxxbv24xxxxxxxximailaddr(csvDataArray2[9].trim());
                 lastEmail=csvDataArray2[9].trim();
                 this.instance.setF1xxuxxxav28xxxxxxxxtype(csvDataArray2[10]);
                 this.instance.setZdxxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "30">
                 this.instance.setA0xxukxxbvxxxxxxxxxxvendor(csvDataArray2[0]);
                 this.instance.setY0xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[1]);
                 this.instance.setB1xxuxxrbv21xxxxxxxxtitle(csvDataArray2[2]);
                 this.instance.set${vendorLastName?cap_first}(csvDataArray2[3]);
                 this.instance.set${vendorFirstName?cap_first}(csvDataArray2[4]);
                 this.instance.set${vendorFirstName?cap_first}(csvDataArray2[5]);
                 this.instance.set${vendorCompanyName?cap_first}(csvDataArray2[6]);
                 this.instance.set${vendorPhoneO?cap_first}(csvDataArray2[7].replace(" ",""));
                 this.instance.set${vendorPhoneH?cap_first}(csvDataArray2[8].replace(" ",""));
                 this.instance.setM3xxhxxrbv27xxxxxxxxphonec(csvDataArray2[9].replace(" ",""));
                 this.instance.setN4xxhxxrbv24xxxxxxxximailaddr(csvDataArray2[10].trim());
                 this.instance.setY5xxuxxrbv29xxxxxxxxtype(csvDataArray2[11]);
                 this.instance.setZhxxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "40">
                 this.instance.setA0xxuktxbvxxxxxxxxxxemployee(csvDataArray2[0]);
                 this.instance.setY0xxuzsxbvxxxxxxxxxxdescript(csvDataArray2[2]);
                 this.instance.setB1xxuxxxbv21xxxxxxxxtitle(csvDataArray2[3]);
                 this.instance.set${employeeLastName?cap_first}(csvDataArray2[4]);
                 this.instance.set${employeeFirstName?cap_first}(csvDataArray2[5]);
                 this.instance.set${employeePhoneO?cap_first}(csvDataArray2[6].replace(" ",""));
                 this.instance.set${employeePhoneH?cap_first}(csvDataArray2[7].replace(" ",""));
                 this.instance.setM3xxh5pcbv27xxxxxxxxphonec(csvDataArray2[8].replace(" ",""));
                 this.instance.setN4xxhxxrbv24xxxxxxxximailaddr(csvDataArray2[9].trim());
                 lastEmail=csvDataArray2[9].trim();
                 this.instance.setO1xxuxxrbv45xxxxxxxxtype(csvDataArray2[10]);
                 this.instance.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                  this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "1A">
                 this.instance.setA0xxukixbxxxxxxxxxxxmatcode(csvDataArray2[0]);// check for non numeric
                 if(csvDataArray2[1]==null || csvDataArray2[1].isEmpty()){
                  this.instance.setB0xxziqxlvxxsaxxxxxxquantity(BigDecimal.ZERO);
                 }else{
                  this.instance.setB0xxziqxlvxxsaxxxxxxquantity(new BigDecimal(csvDataArray2[1]));
                 }
                 this.instance.setB1xxuszsbvxxxxxxxxxxdescript(csvDataArray2[2]);
                 if(csvDataArray2[3]==null || csvDataArray2[3].isEmpty()){
                  this.instance.setB6fbzicxbvxxxxxxxxxxcost(BigDecimal.ZERO);
                 }else{
                  this.instance.setB6fbzicxbvxxxxxxxxxxcost(new BigDecimal(csvDataArray2[3]));
                 }
                 if(csvDataArray2[4]==null || csvDataArray2[4].isEmpty()){
                  this.instance.setB8fbzpxxbvxxxxxxxxxxselprice(BigDecimal.ZERO);
                 }else{
                  this.instance.setB8fbzpxxbvxxxxxxxxxxselprice(new BigDecimal(csvDataArray2[4]));
                 }
                 this.instance.setZxxrbvxxxvxxxxxxxxxxbarupc(csvDataArray2[5]);
                 if(csvDataArray2[6] == null || csvDataArray2[6].isEmpty()){
                  csvDataArray2[6]="SI-D";
                 } 
                 this.instance.setZxxrbvxxxvxxxxxxxxxxbarupc(csvDataArray2[5]);
                 if(csvDataArray2[6] == null || csvDataArray2[6].isEmpty()){
                  csvDataArray2[6]="SI-D";
                 } 
                 this.instance.setC6xxusxrbv16xxxxxxxxtype(csvDataArray2[6]);
                 this.instance.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                 this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                 this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>
                <#if menuAttributesp2 == "11">
                   this.instance.setA0xxukbxbxxxxxxxxxxxaddrescode(csvDataArray2[0]);
                   this.instance.setB1pxusa1bvxxxxxxxxxxaddrl1(csvDataArray2[1]);
                   this.instance.setB3xxh2acbv11xxxxxxxxcity(csvDataArray2[2]);
                   this.instance.setB4xxhbpxbv12xxxxxxxxprovnstate(csvDataArray2[3]);
                   this.instance.setB6xxh3azbv14xxxxxxxxpzcode(csvDataArray2[4]);
                   this.instance.setZ3xxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                   this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                   this.instance.set${statusFlagField?cap_first}(mcopy);

                </#if>


                 this.subKey="";
                 <#if menuAttributesp2 == "20" ||  menuAttributesp2 == "30" || menuAttributesp2 == "40"  >
                  //put a flag in list to turn off default customer + address
                  if(persistNextAddress(i) ==0 ){           
                   return;
                  }
                  //update this.instance.addressByMailtocode using the address sid
                  // persist has logic to calculate key value and calls keyexists to prevent duplicate
                  <#if menuAttributesp2 == "20">
                    this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(${addressEntityName}ByMailtocode);
                  </#if>                  
                  <#if menuAttributesp2 == "30">
                    this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(${addressEntityName}ByMailtocode);
                  </#if>                  
                  <#if menuAttributesp2 == "40">
                    this.instance.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(${addressEntityName}ByMailtocode);
                  </#if>                  

                 </#if>
                 this.persist();//customer etc
                 importdone=importdone+1;
                 this.clearInstance();
	         this.instance=this.getInstance();
                 if(!bcontinue){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("aborting")+" "+ bundle.getString("import")+", "+ bundle.getString("changes")+" "+ bundle.getString("rolled")+" "+ bundle.getString("back")+", "+ bundle.getString("fix")+" "+ bundle.getString("and")+" "+ bundle.getString("try")+" "+ bundle.getString("again"),""));
                   return;
     
                 }
                 }catch (Exception ef){
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("exception")+" "+ ef.getCause()+", "+ ef.getMessage()+" "+jay,""));

		   log.severe(" import error "+owner2Code+' ' + ef.getCause()+' ' + ef.getMessage()+' '+jay);
                  }     
                 }
                 if(i >=400){
                  // runs out of memory,try session.flush and clear
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("upto")+" 400 "+ bundle.getString("records")+" "+bundle.getString("per")+" "+bundle.getString("import"),""));

                  break;
                 }
                }//for loop
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("total")+" "+i+" = "+ bundle.getString("dropped")+" "+duplDropped+"  "+ bundle.getString("added")+" "+importAdded,""));

                 //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  //FacesMessage.SEVERITY_INFO,i+" "+bundle.getString("last")+" "+ bundle.getString("processed")+" "+lastEmail,""));

              


		} catch (Exception e) {
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("exception")+" "+e.getMessage()+" "+ jay,""));

		   log.severe(" import error "+owner2Code+' ' + e.getMessage()+' '+jay);
                  }     
		}
      } 


      <#if menuAttributesp2 == "20" ||  menuAttributesp2 == "30" ||  menuAttributesp2 == "40"  >
	public int persistNextAddress(int row) {
               bcontinue=true;
               int importexception=0;
               String jay="";
                int csvElements=5;
                int iii=0;
                importexception=0;     
               // read clobdata and build address array first time only ie row=0
               if(this.skipRecordOne.equals("Y")){
                  iii=1; 
               }
              if(row==iii){  
               try {
                ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","aaddress","csv",1);
                if (${clobdataEntityName} == null || ${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata().isEmpty()) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,"No CSV (Comma Separated Values) data found for Address Import",""));
                 bcontinue=false; 
                 return 0;
                }
                calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                calendare.add(Calendar.DAY_OF_YEAR,7);
                if(calendare.before(currbusdate) ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("Address")+" "+bundle.getString("csv")+" "+ bundle.getString("data")+" "+ bundle.getString("dated")+" "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString()+" "+bundle.getString("older")+" "+bundle.getString("than")+" "+bundle.getString("7")+" "+bundle.getString("days"),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed")+", "+bundle.getString("import")+" "+ bundle.getString("adds")+"/"+ bundle.getString("overrides")+" "+bundle.getString("existing")+" "+bundle.getString("data"),""));
                 bcontinue=false; 
                 return 0; 
                }
                String csvData=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,"Address CSV (Comma Separated Values) data used- dated "+${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt().toString(),""));
                linesA = csvData.split("\\r?\\n");
               }catch (Exception e) {//outer try
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("Address")+" "+bundle.getString("exception")+" "+e.getMessage()+" "+ jay,""));

		   log.severe(" Address import error "+owner2Code+' ' + e.getMessage()+' '+jay);
                  }   
                bcontinue=false;
                return 0;
               }
              }
              //LinesA[] already in memory as part of row 0 request

                String[] csvDataArray=null;
                String[] csvDataArray2=new String[5];
                int element=-1;
                int importdone=0;
                int importnotdone=0;

                int i=0;

                element=-1;
                csvDataArray=null;
                jay=linesA[row];//method argument
                try{
                 if(!this.lineBy.equals("N")){
                  jay=jay.substring(0,jay.length()-1); 
                 }
                 if(this.enclosedBy.equals("D")){
                  jay=jay.replace("\"",""); 
                 }
                 if(this.enclosedBy.equals("S")){
                  jay=jay.replace("\'",""); 
                 }
                 if(this.delimeterBy.equals("C")){
                  csvDataArray=jay.split(",");
                 }
                 if(this.delimeterBy.equals("S")){
                  csvDataArray=jay.split(" ");
                 }
                 int k=csvDataArray.length;
                 int j=0;
                 for(j=0;j<5;j++){
                  if(j < k && csvDataArray[j] !=null){
                   csvDataArray2[j]=csvDataArray[j];
                  }else{
                   csvDataArray2[j]="";    
                  }
                 }
                 if(csvDataArray2.length != csvElements){
                  importnotdone=importnotdone+1;
                  if(importnotdone <6){

                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Address")+" "+bundle.getString("elements")+" "+ bundle.getString("found")+" "+csvDataArray.length+", "+ bundle.getString("expected")+" "+ csvElements+" "+bundle.getString("and")+" "+ bundle.getString("csv")+" "+ bundle.getString("elements")+" "+ jay,""));
                    bcontinue=false; 
                    return 0;
                  }     
                 }
                 //row 0 or higher Address Entity
                   ${addressEntityName}Home.clearInstance();
                   ${addressEntityName}ByMailtocode= ${addressEntityName}Home.getInstance();  
                   ${addressEntityName}ByMailtocode.setA0xxukbxbxxxxxxxxxxxaddrescode(csvDataArray2[0]);
                   ${addressEntityName}ByMailtocode.setB1pxusa1bvxxxxxxxxxxaddrl1(csvDataArray2[1]);
                   ${addressEntityName}ByMailtocode.setB3xxh2acbv11xxxxxxxxcity(csvDataArray2[2]);
                   ${addressEntityName}ByMailtocode.setB4xxhbpxbv12xxxxxxxxprovnstate(csvDataArray2[3]);
                   ${addressEntityName}ByMailtocode.setB6xxh3azbv14xxxxxxxxpzcode(csvDataArray2[4]);
                   ${addressEntityName}ByMailtocode.setZ3xxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
                   ${addressEntityName}ByMailtocode.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                   ${addressEntityName}ByMailtocode.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mcopy);
                   //update this.instance.addressByMailtocode using the address sid
                 // persist has logic to calculate key value and calls keyexists to prevent duplicate
                 ${addressEntityName}Home.persist();
                 importdone=importdone+1;
                 if(!bcontinue){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("aborting")+" "+ ${addressEntityName}+" "+bundle.getString("import")+", "+ bundle.getString("changes")+" "+ bundle.getString("rolled")+" "+ bundle.getString("back")+", "+ bundle.getString("fix")+" "+ bundle.getString("and")+" "+ bundle.getString("try")+" "+ bundle.getString("again"),""));
                   return 0;
     
                 }
                }catch (Exception ef){//inner try for a row of data
                  importexception=importexception+1;
                  if(importexception <6){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Address")+" "+bundle.getString("exception")+" "+ ef.getMessage()+" "+jay,""));

		   log.severe(" Address import error "+owner2Code+' ' + ef.getMessage()+' '+jay);
                  }     
                }
                 if(i >=400){
                  // runs out of memory,try session.flush and clear
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("upto")+" 400 "+ bundle.getString("records")+" "+bundle.getString("per")+" "+bundle.getString("Address")+" "+bundle.getString("import"),""));
                  bcontinue=false;
                  return 0;
                 }
                int fLink=${addressEntityName}Home.getId();//return sid to be used as foreign link
                return fLink;

        }
      </#if>

   </#if>
    <#if entityFunction == "ci" >
      public ${cuinvoiceEntityName?cap_first} cartExtended_persist(${cuordersEntityName?cap_first} order) {
        if(order == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("customer")+" "+ bundle.getString("order")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
                 bcontinue=false;
                 return null;
         }
         if(this.getInstance()==null){
          this.clearInstance();//
         }
         this.getInstance().set${cuordersEntityName?cap_first}(order);
         ${cuordersEntityName}=order;
         extended_persist(true);//should use ordprice not item price
         return this.getInstance();
        }
    </#if>
    <#if ids?substring(6,8)=="cp"  >
       public ${cpaymentEntityName?cap_first} cartExtended_persist(${cuinvoiceEntityName?cap_first} invoice) {
        if(invoice == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("customer")+" "+ bundle.getString("invoice")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
                 bcontinue=false;
                 return null;
        }
         this.getInstance().set${cuinvoiceEntityName?cap_first}(invoice);
         ${cuinvoiceEntityName}=invoice;
         extended_persist(true);
         if(bcontinue){
          return this.getInstance();
         }else{
          return null;//
         }
       }
    </#if>
   <#if entityFunction == "vo">
    /**
    * generate orders (vendor) for all items where qty is -ve or below reorder qty qtylevel1 (0.0 is initial/default value)
    * return list excludes qty already on order
    * check if we can get vendor id from a previous vendor order for this item , if none give msg and return
    * order qty = qtylevel1 minus qty ie in case level1 is 0 and qty -2 then reorder 0 -(-2) ie 2, if level1 5 and qty 3 order 2 
    * add logic in cuorder shipment/checkout to send email for small client re reorder
    * User should be able to change vendor via edit of vendorOrder
    * @param args -none  
    * @return none void type
    * @exception keys not found
    * @see 
    */

     public void generateOrders(){
      //add as menu entry to avoid item/vendor validation if part of venOrder
       boolean notFound=true;
       ${vendorEntityName?cap_first} vendor=null;
       BigDecimal toOrderQty=new BigDecimal("0.0");
       try{
                List<${itemEntityName?cap_first}> sresults= new ArrayList<${itemEntityName?cap_first}>();
		sresults= getEntityManager()
				.createQuery(
				 "select cc from ${itemEntityName?cap_first} cc where (cc.b0xxziqxlvxxsaxxxxxxquantity < cc.c4fbzxxxbvxxxxxxxxxxqtylevel1 AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2)")
				  .setParameter("owner2", owner2Code).getResultList();
        for (${itemEntityName?cap_first} item : sresults){
         //query open vendor orders for this item, orders can be with different vendors
         // or no current order exists 
         toOrderQty=item.getB0xxziqxlvxxsaxxxxxxquantity().abs();
         for (Trexuq344xwwqqhxxxxxvendorders order : trexuq344xwwqqhxxxxxvendordersList.getToVoForItemSid(item.getA0xxuobxbxxxxxxxxxxxsid()) ){
          if(order !=null){
           toOrderQty=toOrderQty.subtract(order.getZ3xxztqrlxxxxxxxxxxxqtytotal());
           vendor=order.get${vendorEntityName?cap_first}();
           notFound=false;
          }
         }
         if (notFound){
          //any orders closed or new for this item?
          for (Trexuq344xwwqqhxxxxxvendorders order : trexuq344xwwqqhxxxxxvendordersList.getAnyVoVendorForItemSid(item.getA0xxuobxbxxxxxxxxxxxsid()) ){
           vendor=order.get${vendorEntityName?cap_first}();
           notFound=false;
          }
         }
         if(notFound){
          vendor=jxxxuq300xwwqqhxxxxxvendorList.getVoVendorLike("");
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR, bundle.getString("no")+" "+bundle.getString("order")+" "+bundle.getString("history")+", "+bundle.getString("yet")+" "+bundle.getString("for")+" "+bundle.getString("item")+" "+item.getA0xxukixbxxxxxxxxxxxmatcode()+", "+bundle.getString("used")+" "+vendor.getA0xxukxxbvxxxxxxxxxxvendor()+" "+bundle.getString("as")+" "+bundle.getString("vendor"),""));
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR, bundle.getString("edit")+" "+bundle.getString("order")+" "+bundle.getString("to")+" "+bundle.getString("change")+" "+bundle.getString("vendor")+" "+bundle.getString("as")+" "+bundle.getString("needed"),""));
         }
         //for each item but diff vendor and qty coomon end
         if( toOrderQty.compareTo(new BigDecimal("0.0"))  > 0 ){
          this.getInstance().set${itemEntityName?cap_first}(item);
          this.getInstance().set${vendorEntityName?cap_first}(vendor);
          item.setTempQuantity(toOrderQty);
          this.addWithDetails();  
         }
        }
       } catch (Exception e) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR, bundle.getString("reorder")+" "+bundle.getString("list")+" "+bundle.getString("error")+" "+ e.getMessage(),""));
       }



     }



    </#if>
    /**
    * persist true means came from copynsave ie convert order to invoice etc , false comes from show outstanding and resets totals but no copy
    * called by xxEdit convertToxx button to copy existing entity say order date into new invoice along with the details
    * Similar function as AddWithDetails or AddProductsToOrder but they are interactive, this one loops through existing data
    * Flow:loops through each copy from item like quote,order or invoice
    *       persist -> showTempRunt -> createcDetails ->setParent sets parent totals (loops through as parent details created)
    *          -> PersistRunT prepares Totals for persist -> actual persist of parent and then detail instance
    *      loop back for each item to be copied
    *
    *@see "R3RestClient SyncData where series of order data comes as json values    "
    */

    <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || ids?substring(6,8)=="cp" || entityFunction == "vq"  || entityFunction == "vo" || entityFunction == "vi" || ids?substring(6,8)=="vp"
                      || entityFunction == "sh" || entityFunction == "sv" || entityFunction == "eo"  >

      public String extended_persist(Boolean persist) {
      // persist true means came from copynsave ie convert order to invoice etc , false comes from show outstanding and resets totals but no copy
      // copies into main cq,co etc and then calls persist to create details 
      // persist has logic via showtemprunt to create details and update run totals and persist both details and parent
      // we need to loop and call persist multiple times    
      // jay copy from existing do not seem to be complete, assumes only one detail ???
      //added logic to copy order detail item price/qty to invoice detail so that detailbaseamt is not zeroe 
      // use create instance type ftl logic below to inititialize fields like stausfl
      // also check why in case of extended they were not initialized debug shows tr..quote gets initialized, why not set instance w this
      // after getinstance. we may be doing this w blob and clob
      // extended_persist call persist which calls persistrunt before final persist
       // we need to check whether validation has set bcontinue has false, if so clear it and return
     // if shipment, shipcodefrompay should exist in related order then use that, also call r3Cart to capture authorized amount
      // Note: C2xxuxxrbv51xxxxxxxxtype value coming from convert to shipment ie shiptype holds 2 chrs ie shipcode+itemsize 
      // but extended_persist expects the 1st character only, so remove the 2nd character
     // 

       if (!bcontinue){
             bcontinue=true;
             return null;
       }

      <#if entityFunction=="cq">
       if(this.instance.get${cuquoteEntityName?cap_first}() == null){
          return "null";
      }
       if(${cuquoteEntityName}==null){
	${cuquoteEntityName} = this.instance.get${cuquoteEntityName?cap_first}();//
       }
      <#elseif entityFunction=="co">
       if(this.instance.get${cuquoteEntityName?cap_first}() == null){
          return "null";
       }
       if(${cuquoteEntityName}==null){
	${cuquoteEntityName} = this.instance.get${cuquoteEntityName?cap_first}();//
       }

      <#elseif entityFunction=="ci">
       if(this.instance.get${cuordersEntityName?cap_first}() == null){
          return "null";
      }
       if(${cuordersEntityName}==null){
	${cuordersEntityName} = this.instance.get${cuordersEntityName?cap_first}();//
       }
       // if order type is not cart/basket ie by backoffice and blank/empty then give message
       if((${cuordersEntityName}.getY9xxcxxxbv10xxxxxxxxtype() == null ||  ${cuordersEntityName}.getY9xxcxxxbv10xxxxxxxxtype().isEmpty()) && ${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl() != mshipped){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("Before")+" "+bundle.getString("invoicing")+", "+bundle.getString("order")+" "+${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+" "+bundle.getString("neeeds")+" "+bundle.getString("to")+" "+bundle.getString("be")+" "+bundle.getString("in")+" "+bundle.getString("PickUp")+" / "+bundle.getString("shipped")+" "+bundle.getString("status"),""));
           return null;
       }
      <#elseif entityFunction=="sh">
       if(this.instance.get${cuinvoiceEntityName?cap_first}() == null  && this.instance.get${cuordersEntityName?cap_first}() == null){
          return "null";
       }
       if(${cuordersEntityName}==null){
	${cuordersEntityName} = this.instance.get${cuordersEntityName?cap_first}();//
       }
       if(${cuinvoiceEntityName}==null){
	${cuinvoiceEntityName} = this.instance.get${cuinvoiceEntityName?cap_first}();//
       }
      <#elseif entityFunction=="cp">
       if(!persist && this.instance.get${cuinvoiceEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_WARN,bundle.getString("No")+" "+bundle.getString("invoice")+" "+bundle.getString("selected"),""));
         return "null";//
       }
       if(this.instance.get${cuinvoiceEntityName?cap_first}() == null){
          return "null";
       }
       if(${cuinvoiceEntityName}==null){
        ${cuinvoiceEntityName} = this.instance.get${cuinvoiceEntityName?cap_first}();//
       }
        // check for order type cart, then prefill paytype as cash, check for null
        if(${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null 
         && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().getY9xxcxxxbv10xxxxxxxxtype() !=null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().getY9xxcxxxbv10xxxxxxxxtype().toLowerCase().contains("cart")){
         this.instance.setB6xxuxxrbv10xxxxxxxxpaytype("Cash");
        } 
        // persist false means show outstanding
        if(persist && (this.instance.getB6xxuxxrbv10xxxxxxxxpaytype()==null || this.instance.getB6xxuxxrbv10xxxxxxxxpaytype().isEmpty())){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_WARN,bundle.getString("Paytype")+" "+bundle.getString("value")+" "+bundle.getString("not")+" "+bundle.getString("selected"),""));
         return "null";
        } 
      <#elseif entityFunction=="vq">
       if(this.instance.get${venquoteEntityName?cap_first}() == null){
          return "null";
      }
       if(${venquoteEntityName}==null){
	${venquoteEntityName} = this.instance.get${venquoteEntityName?cap_first}();//
       }
      <#elseif entityFunction=="vo">
       if(this.instance.get${venquoteEntityName?cap_first}() == null){
          return "null";
       }
       if(${venquoteEntityName}==null){
	${venquoteEntityName} = this.instance.get${venquoteEntityName?cap_first}();//
       }
      <#elseif entityFunction=="vi">
       if(this.instance.get${vendordersEntityName?cap_first}() == null){
          return "null";
      }
       if(${vendordersEntityName}==null){
	${vendordersEntityName} = this.instance.get${vendordersEntityName?cap_first}();//
       }
      <#elseif entityFunction=="sv">
       // do we need to add vinvoice as foreign field jay ??
       if(this.instance.get${vendordersEntityName?cap_first}() == null){
          return "null";
      }
       if(${vendordersEntityName}==null){
	${vendordersEntityName} = this.instance.get${vendordersEntityName?cap_first}();//
       }
      <#elseif entityFunction=="vp">
       if(!persist && this.instance.get${vinvoiceEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_WARN,bundle.getString("No")+" "+bundle.getString("invoice")+" "+bundle.getString("selected"),""));
         return "null";//
       }

       if(this.instance.get${vinvoiceEntityName?cap_first}() == null){
          return "null";
       }
       if(${vinvoiceEntityName}==null){
	${vinvoiceEntityName} = this.instance.get${vinvoiceEntityName?cap_first}();//
       }
       if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype()==null || this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().isEmpty()){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_WARN,bundle.getString("Paytype")+" "+bundle.getString("value")+" "+bundle.getString("not")+" "+bundle.getString("selected"),""));
        return "null";
       } 
      <#elseif entityFunction=="eo">
      </#if> 
      if(persist){
       // came from copynsave
       // if shipment
       //if(this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P") && poTerm !=null && !poTerm.contains("Pickup") && ${customerEntityName} !=null && !this.instance.getD2xxugbrbvxxxxxxxxxxbilltosameasshipto()){

       cartPoStatus="e";
       //reload updates these values, need to reset
       qtyOrdPrev=new BigDecimal("0.0");
       amountTotal=new BigDecimal("0.0");
       qtyTotal=new BigDecimal("0.0");///remove
       totalbaseamt=new BigDecimal("0.0");
       totalqty=new BigDecimal("0.0");///added
       lastItemLine=0;

      }else{
       //used in createXDetails
       cartPoStatus="e"; 
       //used in showrunt, start from scratch as it loops below
       qtyOrdPrev=new BigDecimal("0.0");
       amountTotal=new BigDecimal("0.0");
       qtyTotal=new BigDecimal("0.0");//remove
       totalbaseamt=new BigDecimal("0.0");
       lastItemLine=0;
       totalqty=new BigDecimal("0.0");//remove
      }
      bcontinue=false;// this allows detecting no details
      this.instance.set${statusFlagField?cap_first}(0);
      //  copy existing quote etc info into order etc
      //  trexuq23cuquote has the quote object
      // removed code from showtemprunt but copy some of it back here so that autokeygen logic is put below
     <#if entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci"  || entityFunction=="cp" || entityFunction=="sh"   >
      <#if entityFunction=="cq" >
       //for loop ,get next 'from cqdetails' line info and copy. this simulates picking an item and saving  
       // get quotedetails using quote sid via itemList.detailedList and For loop
       for (${cuqdetailsEntityName?cap_first} itemOrderDetail : ${cuquoteEntityName}List.entityDetailedList(this.instance.get${cuquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+" "+bundle.getString("with")+" "+bundle.getString("no")+" "+bundle.getString("item"),""));

         continue;
        }
        bcontinue=true;
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        if(${itemEntityName} !=null){
         ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+ bundle.getString("read")+" "+" "+bundle.getString("error"),""));
        }
        ${cuquoteEntityName}Home.setLast${cuquoteEntityName}P(itemOrderDetail.get${cuquoteEntityName?cap_first}().getA0xxuncqbvxxxxxxxxxxpurchsno());

        this.instance.set${customerEntityName?cap_first}(itemOrderDetail.get${cuquoteEntityName?cap_first}().get${customerEntityName?cap_first}());
        ${customerEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuquoteEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();
        this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
        // jay enhance to take days diff from existing and add the same diff of days to new order date
        calendar.setTime(getAcperiodDateFieldValue("cbd"));
        currbusdate=calendar.getTime();
        this.instance.setB1xxcxxrlxxxxxxxxxxxdelvdatet(currbusdate);
        //not closed to allow copy any quote , delete quote if not needed any more
        if (persist){
         // order detail has deliv/misc and tax1,etc gets recalculated in showrun
         detailDel=itemOrderDetail.getZbxxzlxxavxxxxxxxxxxdelivchrg();
         detailMis=itemOrderDetail.getZcxxzmxxavxxxxxxxxxxmiscchrg();
         nextShow=true;// reset so that detail totals are calculated at least once
         newOrdPrice=itemOrderDetail.getZ5xxzpxravxxxxxxxxxxordprice();
         persist();//new quote  use ord price which may not be item price
         // persist calls showtemprunt which calls createcdetails and then showrunt() and then setParentTotalsFromDetails
         // then calls persistrunt() for totals
         skipValidation=true;//next one will be update
         more(); 
        }
        else{
         showtemprunt(); // calls createcdetails and showrunt
        }
        // do not set original quote as closed, it should be done by order processing
       }
       if (bcontinue){
        bcontinue=true;
        return "extended";
       }else{
        bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }

          // there seems to be a need to initialize some values in createInstance if copy involved
       // persist has logic via showtemprunt to create details and update run totals and persist both details and parent
      <#elseif  entityFunction=="co"  >
       for (${cuqdetailsEntityName?cap_first} itemOrderDetail : ${cuquoteEntityName}List.entityDetailedList(this.instance.get${cuquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+" "+bundle.getString("with")+" "+bundle.getString("no")+" "+bundle.getString("item"),""));

         continue;
        }
        bcontinue=true;
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        ${cuquoteEntityName}Home.setLast${cuquoteEntityName}P(itemOrderDetail.get${cuquoteEntityName?cap_first}().getA0xxuncqbvxxxxxxxxxxpurchsno());
        this.instance.set${customerEntityName?cap_first}(itemOrderDetail.get${cuquoteEntityName?cap_first}().get${customerEntityName?cap_first}());
        ${customerEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuquoteEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();
        this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
        // jay enhance to take days diff from existing and add the same diff of days to new order date
        calendar.setTime(getAcperiodDateFieldValue("cbd"));
        currbusdate=calendar.getTime();
        this.instance.setB1xxcxxxbvxxxxxxxxxxdelvdatet(currbusdate);
        this.instance.setZ1xxztprlxxxxxxxxxxxamounttotal(this.instance.getZ1xxztprlxxxxxxxxxxxamounttotal().add(itemOrderDetail.getZgxxzlpxxvxxxxxxxxxxlinetotl()));
        this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(this.instance.getZ2xxzyprlxxxxxxxxxxxamountostndt().add(itemOrderDetail.getZgxxzlpxxvxxxxxxxxxxlinetotl()));
        this.instance.setB5xxztqrlxxxxxxxxxxxqtytotal(this.instance.getB5xxztqrlxxxxxxxxxxxqtytotal().add(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));

        // copy delvdate and cuqote & mark quote as closed

        if (persist){
         // persist means copynsave ,update copied from quote as closed
         if(${cuquoteEntityName}==null){
          ${cuquoteEntityName}Home.set${cuquoteEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${cuquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
          ${cuquoteEntityName} = ${cuquoteEntityName}Home.getDefinedInstance();
         }
            ${cuquoteEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
            ${cuquoteEntityName}Home.setInstance(${cuquoteEntityName});

         ${cuquoteEntityName}Home.superUpdate();
         // order detail has deliv/misc and tax1,etc gets recalculated in showrun
         detailDel=itemOrderDetail.getZbxxzlxxavxxxxxxxxxxdelivchrg();
         detailMis=itemOrderDetail.getZcxxzmxxavxxxxxxxxxxmiscchrg();
         nextShow=true;// reset so that detail totals are calculated at least once
         newOrdPrice=itemOrderDetail.getZ5xxzpxravxxxxxxxxxxordprice();
         persist();//new ord  use ord price which may not be item price
         skipValidation=true;//next one will be update
         // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
         more(); 
        }
        else{
         showtemprunt(); // not persist ie not vopynsave but show totals, calls createcdetails and showrunt
        }
       }
       if (bcontinue){
        bcontinue=true;
        return "extended";
       }else{
        bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }
      <#elseif  entityFunction=="ci"  >
       //for loop ,get next 'from codetails' line info and copy to invoice detail. this simulates picking an item and saving  
       // we may remove accounting logic from here because posting logic is under persist , which will be called here
        ${acintegrEntityName?cap_first} acintegr =null;
       for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(this.instance.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+" "+bundle.getString("with")+" "+bundle.getString("no")+" "+bundle.getString("item"),""));
         continue;
        }
        bcontinue=true;
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        ${itemEntityName}Home.clearInstance();// avoid lazy load null if in loop
        ${itemEntityName}=fpxxfq1a5xwwqqhxxxxxitemHome.getInstance();
        ${itemEntityName} = itemOrderDetail.get${itemEntityName?cap_first}();
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        if(${itemEntityName} !=null){
         ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+ bundle.getString("read")+" "+" "+bundle.getString("error"),""));
        }
        this.instance.set${customerEntityName?cap_first}(itemOrderDetail.get${cuordersEntityName?cap_first}().get${customerEntityName?cap_first}());
        Integer jSid=${cuordersEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();//avoid lazy loading null
        ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(jSid);
        ${cuordersEntityName}Home.setLast${cuordersEntityName}P(itemOrderDetail.get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno());
        ${customerEntityName} = ${customerEntityName}List.getSidToEntity(jSid);//
        this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
        // copy cuorder shipcodefrompay key to invoice shipcode varchar for visual ref. In shipment use 
        //invoice>order shipcodefrompay to override cuatomer ship/mail address 
        if(itemOrderDetail.get${cuordersEntityName?cap_first}().get${addressEntityName?cap_first}ByShipcodefrompay()!=null){
         this.instance.setY5xxuxxrblxxxxxxxxxxshipcode(""+itemOrderDetail.get${cuordersEntityName?cap_first}().get${addressEntityName?cap_first}ByShipcodefrompay().getA0xxuobxbxxxxxxxxxxxsid());
        }else{
         if (${customerEntityName} !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode() !=null){
          this.instance.setY5xxuxxrblxxxxxxxxxxshipcode(""+${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode().getA0xxuobxbxxxxxxxxxxxsid());
         }else{
          if(${customerEntityName} !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByMailtocode() !=null){
           this.instance.setY5xxuxxrblxxxxxxxxxxshipcode(""+${customerEntityName}.get${addressEntityName?cap_first}ByMailtocode().getA0xxuobxbxxxxxxxxxxxsid());
          }else{
           // shipcode not mandatory for invoice, so ignore
          }
         }
        }
       // assume ARARR is the account payment should go to
        try{
         List<${acintegrEntityName?cap_first}> results =  entityManager
         .createQuery("select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
         .setParameter("accIntegrationModule", "AR")
         .setParameter("accIntegrationUsage", "ARR")
         .setParameter("accIntegrationSet", getIntegrationAccountSet())
         .setParameter("owner2", owner2Code)
         .getResultList();
         if(!results.isEmpty()){
           acintegr = results.get(0);
         }
         else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,"Account Integration Set "+"ARARR "+getIntegrationAccountSet()+ " not found",""));
           bcontinue=false;
           return "empty";
         }
        } catch (Exception e) {
         log.severe("acintegr ARARR Error "+ e.getMessage());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"Cannot get record : " + e.getMessage(),""));

          bcontinue=false;
          return "empty";
         }
         accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
         checkAccount();
         //this.instance.setYxxxch601xwwqqhxxxxxaccount(${accountEntityName});
         this.instance.setYdxxuznybvxxxxxxxxxxnotes(${cuordersEntityName}Home.getLast${cuordersEntityName}P());
        if (persist){
         // persist means copynsave,mark order as closed if order is already shipped or orderdetails shipoption is none or pickup or invoiced if sipoption is standard/express
         if(${cuordersEntityName}==null){
          ${cuordersEntityName}Home.set${cuordersEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
          ${cuordersEntityName} = ${cuordersEntityName}Home.getDefinedInstance();
         }
         if (${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl() == mshipped || (itemOrderDetail.getZ9xxtxsolxxxxxxxxxxxshipoption() !="S" && itemOrderDetail.getZ9xxtxsolxxxxxxxxxxxshipoption() !="E") ){
          // pickup still needs shipment for audit and to capture payment and shipped item needs invoicing/payment. close after payment ??
          //${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
         }
         //else{//
         if (${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl() != mshipped && ${cuordersEntityName}.getFxxxuq111xwwqqhxxxxxaddressByShipcodefrompay() !=null){//exclude POS 
          if (customIdentity.isDebug() || (!${cuordersEntityName}.getC2xxcxxxbv09xxxxxxxxterms().contains("PrePay") &&  persist) ){//persist true means backoffice initiated
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("order")+" "+bundle.getString("not")+" "+ bundle.getString("shipped")+"/"+bundle.getString("picked")+" "+ bundle.getString("yet"),""));
          }
         }
        if(${cuordersEntityName}.getC2xxcxxxbv09xxxxxxxxterms().contains("Pickup")){
         this.instance.setC2xxuxxrbv51xxxxxxxxshiptype("PX");//based on order payby type or term  and item size use X for item size
        }
         ${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
         ${cuordersEntityName}Home.setInstance(${cuordersEntityName} );
         ${cuordersEntityName}Home.superUpdate();// in a loop, so may get updated for each detail
         // order detail has deliv/misc and tax1,etc gets recalculated in showrun
         // later createcdetails sets invoice deatl deliv/misc value from detaildel/misc
         // copy these now, not available later or copy itemdetail into xoxxuq2b4xwwqqhxxxxxcuodetails and use
         detailDel=itemOrderDetail.getZbxxzlxxavxxxxxxxxxxdelivchrg();
         detailMis=itemOrderDetail.getZcxxzmxxavxxxxxxxxxxmiscchrg();
         //if(getLastItemLine().intValue()<2){
          nextShow=true;// reset so that detail totals are calculated at least once
         //}
         newOrdPrice=itemOrderDetail.getZ5xxzpxravxxxxxxxxxxordprice();
         this.instance.setC3xxuxxrbv09xxxxxxxxterms(${cuordersEntityName}.getC2xxcxxxbv09xxxxxxxxterms());//copy order term into invoice
         persist();//new invoice  along with detail, use ord price which may not be item price
         skipValidation=true;
         // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
         more(); 
        }
        else{
         showtemprunt(); // calls createcdetails and showrunt 
        }
        // update shipment record to include this invoice so that suggestlist(NC) works and the value should be there
        try{
         if(${shipmentEntityName}==null){
          ${shipmentEntityName}=${shipmentEntityName}List.getOrderSidToEntity(${cuordersEntityName}.getA0xxuobxbxxxxxxxxxxxsid());
          // for COD payment there are no shipments involved and will be null
          if(${shipmentEntityName} != null){
           ${shipmentEntityName}.set${cuinvoiceEntityName?cap_first}(this.instance);
           ${shipmentEntityName}Home.setInstance(${shipmentEntityName});
           ${shipmentEntityName}Home.superUpdate();
          }
         }
        } catch (Exception e) {
         log.severe("Shipment update Error "+ e.getMessage());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"Cannot update shipment record : " + e.getMessage(),""));
         bcontinue=false;
         return "empty";
        }
       }//for loop orderdetails 
    
       if (bcontinue){
        return "extended";
       }else{
        bcontinue=false;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }
      <#elseif  entityFunction=="cp"   >
       // no item only invoice
       //, if amountin then use that instead of invoice for the 1st invoice for the customer
        // add logic to put type cart in invoice and if cart bypass amountin checking
        // use fromJsf to check and put invoice outstanding

        if (persist && fromJsf && (xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin() ==null
         || xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin().compareTo(BigDecimal.ZERO) == 0) ){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("entered")+" "+bundle.getString("payment")+" "+ bundle.getString("amount")+" "+ bundle.getString("0.0")+", "+ bundle.getString("cannot")+" "+ bundle.getString("create")+" "+ bundle.getString("payment"),""));
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("invoice")+" "+bundle.getString("list")+" "+ bundle.getString("shows")+" "+ bundle.getString("outstanding")+" "+ bundle.getString("amount")+", "+ bundle.getString("you")+" "+ bundle.getString("may")+" "+ bundle.getString("enter")+" "+ bundle.getString("partial")+" "+ bundle.getString("amount"),""));
           bcontinue=false;
           return "empty";
        }
        countB=0;//
        ${acintegrEntityName?cap_first} acintegr =null;
        totaloutstanding=new BigDecimal("0.0");
        totaloutstanding=trexuq266xwwqqhxxxxxcuinvoice.getZ2xxzyprlxxxxxxxxxxxamountostndt();//
        if(!fromJsf && totaloutstanding.compareTo(BigDecimal.ZERO) > 0){
         xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().setZ6xxzxxxavxxxxxxxxxxamountin(totaloutstanding);
        }

        // no need to create payment for each invoice, do it at summary level
        //for (${cuidetailsEntityName?cap_first} itemOrderDetail : ${cuinvoiceEntityName}List.entityDetailedList(this.instance.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
         bcontinue=true;
         setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
         this.instance.setF1xxuwmxbv40xxxxxxxxintegrset(${cuinvoiceEntityName}.getYbxxuwmybv40xxxxxxxxintegrset());
         ${customerEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
         ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuinvoiceEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
         ${cuinvoiceEntityName}Home.setLast${cuinvoiceEntityName}P(${cuinvoiceEntityName}.getA0xxuncibvxxxxxxxxxxinvoice());
         ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();
         // check why customer info getting twice remove one? added  save customer in payment
         ${customerEntityName} = trexuq266xwwqqhxxxxxcuinvoice.getJxxxuq201xwwqqhxxxxxcustomer();
         this.instance.set${customerEntityName?cap_first}(${customerEntityName});//used in journal
         this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());

         // no item${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());

         // assume ARARR is the account payment should go to
         try{
	     List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery("select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("accIntegrationModule", "AR")
					.setParameter("accIntegrationUsage", "ARR")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
                           else{
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,"Account Integration Set "+"ARARR "+getIntegrationAccountSet()+ " not found",""));
                            bcontinue=false;
                            return "empty";
                           }
         } catch (Exception e) {
	   log.severe("acintegr ARARR Error "+ e.getMessage());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,"Cannot get record : " + e.getMessage(),""));
                            bcontinue=false;
                            return "empty";
         }
  	 accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
         checkAccount();
         this.instance.setYxxxch601xwwqqhxxxxxaccount(${accountEntityName});
 
//        } moved below
         this.instance.setY2xxuxznbvxxxxxxxxxxnotes(${cuinvoiceEntityName}Home.getLast${cuinvoiceEntityName}P());
         if (persist){
          //detailDel=itemOrderDetail.getZbxxzlxxavxxxxxxxxxxdelivchrg();
          //detailMis=itemOrderDetail.getZcxxzmxxavxxxxxxxxxxmiscchrg();
          nextShow=true;// reset so that detail totals are calculated at least once
          //amountIn=itemOrderDetail.getZgxxzlpxxvxxxxxxxxxxlinetotl();
          // allow partial payment by using entered amtin
          if (xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin() !=null
             && xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin().compareTo(BigDecimal.ZERO) != 0 ){
           amountIn=xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin();
          }
          totaloutstanding=totaloutstanding.subtract(amountIn);
          // update copied from invoice as closed if outstanding amt 0  code added to check
          if(${cuinvoiceEntityName}==null){
           ${cuinvoiceEntityName}Home.set${cuinvoiceEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
           ${cuinvoiceEntityName} = ${cuinvoiceEntityName}Home.getDefinedInstance();
          }
          ${cuinvoiceEntityName}.setZ2xxzyprlxxxxxxxxxxxamountostndt(totaloutstanding);
          if(totaloutstanding.compareTo(new BigDecimal("0.0")) == 0){  
           ${cuinvoiceEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
          }
          if(totaloutstanding.compareTo(new BigDecimal("0.0")) < 0){  
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("overpayment")+" "+ bundle.getString("done")+", "+" "+bundle.getString("can")+" "+bundle.getString("use")+" "+bundle.getString("-ve")+" "+bundle.getString("amount")+" "+bundle.getString("to")+" "+bundle.getString("reduce"),""));
          }
          ${cuinvoiceEntityName}Home.setInstance(${cuinvoiceEntityName});
          ${cuinvoiceEntityName}Home.superUpdate();

          ${listName}.setReportName("ma${entityName}Master");
          // update payment with the invoice instance just used to copy from
          this.instance.set${cuinvoiceEntityName?cap_first}(${cuinvoiceEntityName});
          this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(totaloutstanding);
          //persist has posting logic
          persist();//new payment works on total invoice, item/ord price not involved
          skipValidation=true;
          // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
          more(); 
         }else{
          showtemprunt(); // calls createcdetails n showrunt 
         }
        //} no loop
        if (bcontinue){
         bcontinue=true;
         return "extended";
        }else{
         bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
         return "";
       }
      <#elseif  entityFunction=="sh"   >
       // existing order only but can be cart order or back office order
       // 
       // once shipment and invoice is done below, capture of auth fund can be done via capture button which will call paypalcapture method here to create
       // payment from the invoice and calls CaptureRequest in shoppingcart bean  
       //  add logic if inv to ship then get related order as close it

        if (${cuinvoiceEntityName} !=null){
         //  comes here if shopping cart, order flag is invoiced, invoice flag is active and be selected
         for (${cuidetailsEntityName?cap_first} itemOrderDetail : ${cuinvoiceEntityName}List.entityDetailedList(this.instance.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
          if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+" "+bundle.getString("with")+" "+bundle.getString("no")+" "+bundle.getString("item"),""));
          continue;
          }
          bcontinue=true;
          ${customerEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
          ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuinvoiceEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
          ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();
          this.instance.set${customerEntityName?cap_first}(${customerEntityName});// added throw exception to roll back,so can update instance 

          setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
          // moved here to check so that no instance proxy is updated to avoid auto commit by hibernate and causing lazy exception
                       // if customer, check if order has shipcodefrompay and use that otherwise if cart po give warning
                       // for non shipcodefrompay (non cart PO or invoice) make sure customer has address also check  
                       // billtosameasshipto. if shipcodefrompay not empty use that as if customer shipment addr
                       // if paypal then address should not be empty, if not paypal give warning and suggest manual pickup/get shipment info
                         String poTerm= null;
                         if(${cuinvoiceEntityName} !=null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null){
                          poTerm=  ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().getC2xxcxxxbv09xxxxxxxxterms();
                         }
                         if(poTerm == null && ${cuordersEntityName} !=null){
                          poTerm= ${cuordersEntityName}.getC2xxcxxxbv09xxxxxxxxterms(); 
                         }
                         if( ${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().get${addressEntityName?cap_first}ByShipcodefrompay() == null){
                          //not all orders will have rerms populated, POS will have POS or toPay etc but backOffice ones may have 60 days or be null
                          if(this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P") && poTerm !=null && !poTerm.contains("Pickup") && ${customerEntityName} !=null && !this.instance.getD2xxugbrbvxxxxxxxxxxbilltosameasshipto()){
                           if (${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode() ==null){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("customer")+" "+ bundle.getString("shipment")+" "+" "+bundle.getString("address")+" "+bundle.getString("empty"),""));
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("check")+" "+ bundle.getString("Billtosameasshipto")+" "+bundle.getString("setting"),""));
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("Not")+" "+bundle.getString("continuing")+", "+bundle.getString("but")+" "+bundle.getString("ensure")+" "+ bundle.getString("correct")+" "+ bundle.getString("shipping")+" "+bundle.getString("setting"),""));
                                     return "";                           
                           }
                           if (${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode().getB1pxusa1bvxxxxxxxxxxaddrl1() !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByShiptocode().getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("customer")+" "+ bundle.getString("shipment")+" "+" "+bundle.getString("address")+" "+bundle.getString("line")+" 1 "+bundle.getString("empty"),""));
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("Continuing")+", "+bundle.getString("but")+" "+bundle.getString("ensure")+" "+ bundle.getString("correct")+" "+ bundle.getString("shipping")+" "+bundle.getString("setting"),""));
                            //bcontinue=false;
                            //return "";                           
                           }
                         }else{
                           if (this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P") &&  poTerm !=null && !poTerm.contains("Pickup") && ${customerEntityName} !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode() ==null){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+ bundle.getString("billing")+" "+" "+bundle.getString("address")+" "+bundle.getString("empty"),""));
                            //give errors for either conds
                            //return "";                           
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("Continuing")+", "+bundle.getString("but")+" "+bundle.getString("ensure")+" "+ bundle.getString("shipping")+" "+bundle.getString("setting"),""));
                           }
                           if (${customerEntityName} !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByMailtocode() !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByMailtocode().getB1pxusa1bvxxxxxxxxxxaddrl1() !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode().getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+ bundle.getString("billing")+" "+" "+bundle.getString("address")+" "+bundle.getString("line")+" 1 "+bundle.getString("empty"),""));
                            //bcontinue=false;
                            //return "";                           
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("Continuing")+", "+bundle.getString("but")+" "+bundle.getString("ensure")+" "+ bundle.getString("correct")+" "+ bundle.getString("shipping")+" "+bundle.getString("setting"),""));
                           }
                        }
                       }else{//shipcodefrompay
                        if (${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null){
                         this.instance.setFxxxuq111xwwqqhxxxxxaddressByShiptocode(${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().get${addressEntityName?cap_first}ByShipcodefrompay());
                        }
                       }
          this.instance.set${customerEntityName?cap_first}(${customerEntityName});// update only after no errors
          this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
          ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
          ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
          ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
          ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());

          this.instance.set${customerEntityName?cap_first}(itemOrderDetail.get${cuinvoiceEntityName?cap_first}().get${customerEntityName?cap_first}());
          ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuinvoiceEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
          ${cuinvoiceEntityName}Home.setLast${cuinvoiceEntityName}P(itemOrderDetail.get${cuinvoiceEntityName?cap_first}().getA0xxuncibvxxxxxxxxxxinvoice());
           // added logic from cuorder re statusfl  below check if first line
           if(${customerEntityName} != null){ 
            this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
           }
           if (persist){
            if( getLastItemLine().intValue()==1 && ${cuinvoiceEntityName}.getZ5xxzzfxhhxxxxxxxxxxstatusfl()==mshipped ){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_ERROR,bundle.getString("invoice")+" "+ ${cuinvoiceEntityName}.getA0xxuncibvxxxxxxxxxxinvoice()+" "+bundle.getString("status")+" "+bundle.getString("already")+" "+bundle.getString("shipped"),""));
             return "";
            }

            // mark invoice as shipped (do not close now to allow payment)
            // validateandselect may have already set invice value
            if(${cuinvoiceEntityName}==null){
             ${cuinvoiceEntityName}Home.set${cuinvoiceEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
             ${cuinvoiceEntityName} = ${cuinvoiceEntityName}Home.getDefinedInstance();
            }
            ${cuinvoiceEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mactive);//  separate button mark as picked or shipped for mshipped
            ${cuinvoiceEntityName}Home.setInstance(${cuinvoiceEntityName});

            ${cuinvoiceEntityName}Home.superUpdate();//invoice
             this.instance.set${cuinvoiceEntityName?cap_first}(${cuinvoiceEntityName});
            // 
            // get order from invoice ,mark order as closed (use invoice to allow payment), put order in shipment
            if(${cuordersEntityName}==null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null){
             ${cuordersEntityName}Home.clearInstance();
             ${cuordersEntityName}Home.set${cuordersEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
             ${cuordersEntityName} = ${cuordersEntityName}Home.getDefinedInstance();
            }
            if(${cuordersEntityName} !=null){
             ${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
             ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
             ${cuordersEntityName}Home.superUpdate();//order
             this.instance.set${cuordersEntityName?cap_first}(${cuordersEntityName});
            }
           }
           
           nextShow=true;// reset so that detail totals are calculated at least once
            // invoice  status not affected
           if (persist){
            persist();//shipment
            skipValidation=true;
            // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
            more(); 
           }
           else{
            showtemprunt(); //calls createcdetails n showrunt
           }
         }//end of for cui details loop
        }
        //end of invoice, start of cuorder
        else{
         if (${cuordersEntityName} != null){
          for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(this.instance.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
           if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+" "+bundle.getString("with")+" "+bundle.getString("no")+" "+bundle.getString("item"),""));
             continue;
           }
           bcontinue=true;
           ${customerEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
           ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuordersEntityName}.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
           ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();
           this.instance.set${customerEntityName?cap_first}(${customerEntityName});// added throw exception to roll back,so can update instance 

                       // check if order has shipcodefrompay and use that otherwise if cart po give warning
                       // for non shipcodefrompay (non cart PO or invoice) make sure customer has address also check   
                       // billtosameasshipto. if shipcodefrompay not empty use that as if customer shipment addr, moved here
                        if( ${cuordersEntityName}.get${addressEntityName?cap_first}ByShipcodefrompay() == null){
                          //assume back office po ie not cart order
                          if(this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P") &&  !this.instance.getD2xxugbrbvxxxxxxxxxxbilltosameasshipto()){
                           if (${customerEntityName} !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode() ==null){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("customer")+" "+ bundle.getString("shipment")+" "+bundle.getString("address")+" "+bundle.getString("empty"),""));
                            bcontinue=false;
                            return "";                           
                           }
                           if (${customerEntityName} !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode().getB1pxusa1bvxxxxxxxxxxaddrl1() !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByShiptocode().getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("customer")+" "+ bundle.getString("shipment")+" "+bundle.getString("address")+" "+bundle.getString("line")+" 1 "+bundle.getString("empty"),""));
                            bcontinue=false;
                            return "";                           
                           }
                          }else{
                           if (${customerEntityName} !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode() ==null){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("customer")+" "+ bundle.getString("billing")+" "+bundle.getString("address")+" "+bundle.getString("empty"),""));
                            bcontinue=false;
                            return "";                           
                           }
                           if (${customerEntityName} !=null && ${customerEntityName}.get${addressEntityName?cap_first}ByMailtocode() !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode().getB1pxusa1bvxxxxxxxxxxaddrl1() !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode().getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("customer")+" "+ bundle.getString("billing")+" "+bundle.getString("address")+" "+bundle.getString("line")+" 1 "+bundle.getString("empty"),""));
                            bcontinue=false;
                            return "";                           
                           }
                          }
                        }else{
                          //process as cart order shipment and use shiptocodefrompay as shipping address
                          // jay find where shipment shiptocode is updated
                          // pass paymentId which is stored as attach in order
                          //
                          // authorization capture error Response code: 401 Error response: {"error":"invalid_token","error_description":"The token passed in was not found in the system"}
                          try{
                          /// check if cart then give this msg
                           //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           //          FacesMessage.SEVERITY_INFO,bundle.getString("ready")+" "+bundle.getString("for")+" "+bundle.getString("payment")+" "+ bundle.getString("authorization")+" "+bundle.getString("capture"),""));
                           this.instance.setFxxxuq111xwwqqhxxxxxaddressByShiptocode(${cuordersEntityName}.get${addressEntityName?cap_first}ByShipcodefrompay());
                          }
                          catch (Exception e){
                           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("authorization")+" "+ bundle.getString("capture")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                          }
                        } 
                        //

           this.instance.set${customerEntityName?cap_first}(${customerEntityName});//
           setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
           this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
           ${cuordersEntityName}Home.setLast${cuordersEntityName}P(itemOrderDetail.get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno());
           ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
           ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
           ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
           ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
           this.instance.set${customerEntityName?cap_first}(itemOrderDetail.get${cuordersEntityName?cap_first}().get${customerEntityName?cap_first}());
           // item update moved here and updateItemecustomer commented out because actual update was not taking place
              BigDecimal currentQty=${itemEntityName}.getB0xxziqxlvxxsaxxxxxxquantity();
              try {
               ${itemEntityName}Home.clearInstance();
               ${itemEntityName}Home.setInstance(${itemEntityName});
               //${itemEntityName}Home.allowUpdate(); // commeted out because persist below has updateitemecustomer causing double qty
	     } catch (Exception e) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+ bundle.getString("update")+" "+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));

                  bcontinue=false;
		  //return "";
	    }

           if (persist){
            if( getLastItemLine().intValue()==1 && ${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl()==mshipped){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_ERROR,bundle.getString("order")+" "+ ${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+" "+bundle.getString("status")+" "+bundle.getString("already")+" "+bundle.getString("shipped"),""));
             return "";
            }

            // mark order as closed if status is invoiced otherwise as shipped
            // validateandselect may have already set cuorders value
            if(${cuordersEntityName}==null){
             ${cuordersEntityName}Home.set${cuordersEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
	     ${cuordersEntityName} = ${cuordersEntityName}Home.getDefinedInstance();
            }
            if (${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl() == minvoiced ){
             ${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
            }
            else{
             ${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(mshipped); // by separate button in shipment
            }
            ${cuordersEntityName}Home.setInstance(${cuordersEntityName});

            ${cuordersEntityName}Home.superUpdate();
            this.instance.set${cuordersEntityName?cap_first}(${cuordersEntityName});
           }
           nextShow=true;// reset so that detail totals are calculated at least once
           //shipment
           if (persist){
            persist();
            skipValidation=true;
            // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
            more(); 
           }
           else{
            showtemprunt(); //calls createcdetails n showrunt
           }
          }//end of for
         }
        }
       if (bcontinue){
        bcontinue=true;
        return "extended";
       }else{
        bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }
      </#if>
      // persist has logic via showtemprunt to create details and update run totals and persist both details and parent
     <#elseif entityFunction == "vq" || entityFunction == "vo" || entityFunction == "vi" || entityFunction == "sv" || ids?substring(6,8)=="vp" >
      <#if entityFunction=="vq" >
       //for loop ,get next 'from venqdetails' line info and copy. this simulates picking an item and saving  
       for (${vendqdetailsEntityName?cap_first} itemOrderDetail : ${venquoteEntityName}List.entityDetailedList(this.instance.get${venquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) { 
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+bundle.getString("with")+" "+bundle.getString("no")+" 1 "+bundle.getString("item"),""));
         continue;
        }
        bcontinue=true;
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        if(${itemEntityName} !=null){
         ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+ bundle.getString("read")+" "+" "+bundle.getString("error"),""));
        }



        //wont work if multiline n diff items this.instance.set${itemEntityName?cap_first}(${venquoteEntityName}.get${itemEntityName?cap_first}());
        this.instance.set${vendorEntityName?cap_first}(${venquoteEntityName}.get${vendorEntityName?cap_first}());
        //${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
       //${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        //${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        ${venquoteEntityName}Home.setLast${venquoteEntityName}P(itemOrderDetail.get${venquoteEntityName?cap_first}().getA0xxunvqbvxxxxxxxxxxpurchsno());

        if (persist){
         // order detail has deliv/misc and tax1,etc gets recalculated in showrun
         detailDel=itemOrderDetail.getZaxxzlxxavxxxxxxxxxxdelivchrg();
         detailMis=itemOrderDetail.getZbxxzmxxavxxxxxxxxxxmiscchrg();
         nextShow=true;// reset so that detail totals are calculated at least once
         persist();
         skipValidation=true;//next one will be update
         // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
         more(); 
        }
        else{
         showtemprunt(); //calls createcdetails n showrunt
        }
        // do not set original quote as closed, it should be done by order processing
       }
       if (bcontinue){
        bcontinue=true;
        return "extended";
       }else{
        bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }
      <#elseif entityFunction=="vo"  >
       //for loop ,get next 'from venqdetails' line info and copy. this simulates picking an item and saving  
       for (${vendqdetailsEntityName?cap_first} itemOrderDetail : ${venquoteEntityName}List.entityDetailedList(this.instance.get${venquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+bundle.getString("with")+" "+bundle.getString("no")+" 1 "+bundle.getString("item"),""));

         continue;
        }
        ${venquoteEntityName}Home.setLast${venquoteEntityName}P(itemOrderDetail.get${venquoteEntityName?cap_first}().getA0xxunvqbvxxxxxxxxxxpurchsno());
        bcontinue=true;
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        if(${itemEntityName} !=null){
         ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+ bundle.getString("read")+" "+" "+bundle.getString("error"),""));
         }

        this.instance.set${vendorEntityName?cap_first}(${venquoteEntityName}.get${vendorEntityName?cap_first}());
        if (persist){
         // order detail has deliv/misc and tax1,etc gets recalculated in showrun
         detailDel=itemOrderDetail.getZaxxzlxxavxxxxxxxxxxdelivchrg();
         detailMis=itemOrderDetail.getZbxxzmxxavxxxxxxxxxxmiscchrg();
         nextShow=true;// reset so that detail totals are calculated at least once
         persist();
         skipValidation=true;//next one will be update
         // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
         more(); 
        }
        else{
         showtemprunt(); //calls createcdetails n showrunt
        }
       }
       // update quote as closed
       if(${venquoteEntityName}==null){
        ${venquoteEntityName}Home.set${venquoteEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${venquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
	${venquoteEntityName} = ${venquoteEntityName}Home.getDefinedInstance();
       }
       ${venquoteEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
       ${venquoteEntityName}Home.setInstance(${venquoteEntityName});
       ${venquoteEntityName}Home.superUpdate();
        skipValidation=true;
        if (bcontinue){
         bcontinue=true;
         return "extended";
        }else{
         bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
         return "";
        }
      <#elseif  entityFunction=="vi"  >
       //for loop ,get next 'from venqdetails' line info and copy. this simulates picking an item and saving  
       ${acintegrEntityName?cap_first} acintegr =null;
       for (${vendodetailsEntityName?cap_first} itemOrderDetail : ${vendordersEntityName}List.entityDetailedList(this.instance.get${vendordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+bundle.getString("with")+" "+bundle.getString("no")+" "+bundle.getString("item"),""));

         continue;
        }
        bcontinue=true;
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        if(${itemEntityName} !=null){
         ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+ bundle.getString("read")+" "+" "+bundle.getString("error"),""));
        }



        ${vendordersEntityName}Home.setLast${vendordersEntityName}P(itemOrderDetail.get${vendordersEntityName?cap_first}().getA0xxunvobvxxxxxxxxxxpurchsno());
        this.instance.set${vendorEntityName?cap_first}(${vendordersEntityName}.get${vendorEntityName?cap_first}());
        this.instance.set${vendorEntityName?cap_first}(itemOrderDetail.get${vendordersEntityName?cap_first}().get${vendorEntityName?cap_first}());
        ${vendorEntityName}Home.clearInstance();
        ${vendorEntityName}Home.set${vendorEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${vendordersEntityName}.get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${vendorEntityName} = ${vendorEntityName}Home.getDefinedInstance();
        this.setEMailingAddress(${vendorEntityName}.getN4xxhxxrbv24xxxxxxxximailaddr());
         // assume APAPP is the account payment should go to
         try{
	     List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery("select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APP")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
                           else{

                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${accountEntityName?substring(eL)?cap_first}")+" "+bundle.getString("integration")+" "+bundle.getString("set")+" APAPP "+getIntegrationAccountSet()+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
                            bcontinue=false;
                            return "empty";
                           }
         } catch (Exception e) {
			 log.severe("acintegr ARARR Error "+ e.getMessage());
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+" "+bundle.getString("get")+" "+bundle.getString("record")+" "+e.getMessage(),""));

                               bcontinue=false;
                            return "empty";
         }
  	 accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
         checkAccount();
        if (persist){
         // order detail has deliv/misc and tax1,etc gets recalculated in showrun
         detailDel=itemOrderDetail.getZaxxzlxxavxxxxxxxxxxdelivchrg();
         detailMis=itemOrderDetail.getZbxxzmxxavxxxxxxxxxxmiscchrg();
          // cuinvoiceposting
          nextShow=true;// reset so that detail totals are calculated at least once

         persist();
         // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
         skipValidation=true;// to skip generating new key for 2nd or more items
         more(); 
        }
        else{
         showtemprunt(); //calls createcdetails n showrunt
        }
       }
         // mark order as closed
        if(${vendordersEntityName}==null){
         ${vendordersEntityName}Home.clearInstance();
         ${vendordersEntityName}Home.set${vendordersEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${vendordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
         ${vendordersEntityName} = ${vendordersEntityName}Home.getDefinedInstance();
        }
        if(${vendordersEntityName} !=null){
         ${vendordersEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
         ${vendordersEntityName}Home.setInstance(${vendordersEntityName});
         ${vendordersEntityName}Home.superUpdate();
         }
         skipValidation=true;
         if (bcontinue){
          bcontinue=true;
          return "extended";
         }else{
          bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
          return "";
         }
      <#elseif  entityFunction=="sv"  >
       //for loop ,get next 'from venqdetails' line info and copy. this simulates picking an item and saving  
        ${acintegrEntityName?cap_first} acintegr =null;
       for (${vendodetailsEntityName?cap_first} itemOrderDetail : ${vendordersEntityName}List.entityDetailedList(this.instance.get${vendordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
        if (itemOrderDetail.get${itemEntityName?cap_first}() == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("skipping")+" "+ bundle.getString("details")+" "+bundle.getString("with")+" "+bundle.getString("no")+" 1 "+bundle.getString("item"),""));
         continue;
        }
        bcontinue=true;
        ${vendorEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${vendorEntityName}Home.set${vendorEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${vendordersEntityName}.get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${vendorEntityName} = ${vendorEntityName}Home.getDefinedInstance();
        setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
        this.instance.set${itemEntityName?cap_first}(itemOrderDetail.get${itemEntityName?cap_first}());
        ${itemEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
        ${itemEntityName}Home.set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${itemEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
        ${itemEntityName} = ${itemEntityName}Home.getDefinedInstance();
        if(${itemEntityName} !=null){
         ${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+ bundle.getString("read")+" "+" "+bundle.getString("error"),""));
        }
        ${vendordersEntityName}Home.setLast${vendordersEntityName}P(itemOrderDetail.get${vendordersEntityName?cap_first}().getA0xxunvobvxxxxxxxxxxpurchsno());
        this.instance.set${vendorEntityName?cap_first}(${vendordersEntityName}.get${vendorEntityName?cap_first}());
        this.instance.set${vendorEntityName?cap_first}(itemOrderDetail.get${vendordersEntityName?cap_first}().get${vendorEntityName?cap_first}());
        nextShow=true;// reset so that detail totals are calculated at least once
        if (persist){
         persist();
         skipValidation=true;//next one will be update
         // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
         more(); 
        }
        else{
         showtemprunt(); //calls createcdetails n showrunt
        }
       }
       if (bcontinue){
        bcontinue=true;
        return "extended";
       }else{
        bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }
      <#elseif  entityFunction=="vp"   >
/*
        if (${vendpdetailsEntityName}Home.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin() ==null
         || ${vendpdetailsEntityName}Home.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin().compareTo(BigDecimal.ZERO) == 0 ){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("entered")+" "+ bundle.getString("amount")+" "+ bundle.getString("0.0"),""));
           bcontinue=false;
           return "empty";
        }
*/
        if (persist && fromJsf && (${vendpdetailsEntityName}Home.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin() ==null
         || ${vendpdetailsEntityName}Home.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin().compareTo(BigDecimal.ZERO) == 0) ){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("entered")+" "+bundle.getString("payment")+" "+ bundle.getString("amount")+" "+ bundle.getString("0.0")+", "+ bundle.getString("cannot")+" "+ bundle.getString("create")+" "+ bundle.getString("payment"),""));
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("invoice")+" "+bundle.getString("list")+" "+ bundle.getString("shows")+" "+ bundle.getString("outstanding")+" "+ bundle.getString("amount")+", "+ bundle.getString("you")+" "+ bundle.getString("may")+" "+ bundle.getString("enter")+" "+ bundle.getString("partial")+" "+ bundle.getString("amount"),""));
           bcontinue=false;
           return "empty";
        }
        countB=0;//
        ${acintegrEntityName?cap_first} acintegr =null;
        totaloutstanding=new BigDecimal("0.0");
        totaloutstanding=${vinvoiceEntityName}.getZ1xxzyprlxxxxxxxxxxxamountostndt();//
        // no need to create payment for each invoice, do it at summary level
        //for (${vendidetailsEntityName?cap_first} itemOrderDetail : ${vinvoiceEntityName}List.entityDetailedList(this.instance.get${vinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())) {
         bcontinue=true;
         setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
         ${vinvoiceEntityName}Home.setLast${vinvoiceEntityName}P(${vinvoiceEntityName}.getA0xxunvibvxxxxxxxxxxinvoice());
         this.instance.setF1xxuwmxbv40xxxxxxxxintegrset(${vinvoiceEntityName}.getY2xxuwmxbv40xxxxxxxxintegrset());
         this.instance.set${vendorEntityName?cap_first}(${vinvoiceEntityName}.get${vendorEntityName?cap_first}());
         ${vendorEntityName}Home.clearInstance();// needed to avoid lazyloading error or force to retrieve any value say sid
         ${vendorEntityName}Home.set${vendorEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${vinvoiceEntityName}.get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
         ${vendorEntityName} = ${vendorEntityName}Home.getDefinedInstance();

         // no item${itemEntityName}.setTempQuantity(itemOrderDetail.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());

         // assume APAPP is the account payment should go to
         try{
	     List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery("select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APP")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
                           else{
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("${accountEntityName?substring(eL)?cap_first}")+" "+bundle.getString("integration")+" "+bundle.getString("set")+" APARR "+getIntegrationAccountSet()+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
                            bcontinue=false;
                            return "empty";
                           }
         } catch (Exception e) {
			 log.severe("acintegr APAPP Error "+ e.getMessage());
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+" "+bundle.getString("get")+" "+bundle.getString("record")+" "+e.getMessage(),""));
                            bcontinue=false;
                            return "empty";
         }
  	 accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
         checkAccount();
         this.instance.setYxxxch601xwwqqhxxxxxaccount(${accountEntityName});

         if (persist){
          // order detail has deliv/misc and tax1,etc gets recalculated in showrun
          //detailDel=itemOrderDetail.getZaxxzlxxavxxxxxxxxxxdelivchrg();
          //detailMis=itemOrderDetail.getZbxxzmxxavxxxxxxxxxxmiscchrg();
          nextShow=true;// reset so that detail totals are calculated at least once
          //amountIn=itemOrderDetail.getZfxxzlpxxvxxxxxxxxxxlinetotl();
          // allow partial payment by using entered amtin
          if (xoxxuq3b4xwwqqhxxxxxvendpdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin() !=null
             && xoxxuq3b4xwwqqhxxxxxvendpdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin().compareTo(BigDecimal.ZERO) != 0 ){
           amountIn=xoxxuq3b4xwwqqhxxxxxvendpdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin();
          }
          //totaloutstanding=totaloutstanding.add(itemOrderDetail.getZfxxzlpxxvxxxxxxxxxxlinetotl()).subtract(amountIn);
          totaloutstanding=totaloutstanding.subtract(amountIn);//

         // update copied from invoice as closed if outstanding amt 0 jay ??
          if(${vinvoiceEntityName}==null){
           ${vinvoiceEntityName}Home.set${vinvoiceEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${vinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
   	   ${vinvoiceEntityName} = ${vinvoiceEntityName}Home.getDefinedInstance();
          }
          ${vinvoiceEntityName}.setZ1xxzyprlxxxxxxxxxxxamountostndt(totaloutstanding);
          if(totaloutstanding.compareTo(new BigDecimal("0.0")) == 0){  
           ${vinvoiceEntityName}.setZ4xxzzfxhhxxxxxxxxxxstatusfl(mclosed);
          }
          if(totaloutstanding.compareTo(new BigDecimal("0.0")) < 0){  
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("overpayment")+" "+ bundle.getString("done")+", "+" "+bundle.getString("can")+" "+bundle.getString("use")+" "+bundle.getString("-ve")+" "+bundle.getString("amount")+" "+bundle.getString("to")+" "+bundle.getString("reduce"),""));
          }

          ${vinvoiceEntityName}Home.setInstance(${vinvoiceEntityName});
          ${vinvoiceEntityName}Home.superUpdate();
          ${listName}.setReportName("ma${entityName}Master");
          persist();// should be outaide save new payment, from invoice already updated
          // persist calls showtemprunt which calls createcdetails and more intialise the instance to avoid not saving each instance
          // calls superdotpersist if new or update if called for 2nd item
          // also persists the detail  
          skipValidation=true;//next one will be update
          more(); 
         }
         else{
          showtemprunt(); //calls createcdetails n showrunt
         }
        //}//end of for loop
       if (bcontinue){
        bcontinue=true;
        return "extended";
       }else{
        bcontinue=true;
        try{
         throw new NullPointerException();
        }catch (Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("has")+" "+ bundle.getString("no")+" "+bundle.getString("details")+" or "+bundle.getString("internal")+" "+bundle.getString("exception"),""));
        }
        return "";
       }
      </#if>
      //xoxxuq24xxxxxxxxcuodetails will hold data copied from query against xoxxuq24xxxxxxxxcuqdetails using sid 
     <#elseif  entityFunction == "eo"  >
      //no copynsave
      return persist();
     <#else> 
      return persist();
     </#if>
     }
    </#if>

<#if menuAttributesp2 == "1N" >

public BufferedImage rotateClockwise90(String action) {
// this converts all images to jpg, jay better to check field type to get value , if empty then jpg
//jpg/png (bits) ->file(byte[] array ->Image(bufferedImage) by ImageIO.Read
//90 degree angle is Math.PI / 2, 180 degrees would be Math.PI
    byte[] imageData=null;
    BufferedImage dest=null;
    //if instance.xxxdata() is null it could be not loaded yet, so use query to eager load
    if(this.getInstance().getB1xxuzbxbvxxxxxxxxxxdata()==null){
     imageData=this.getBlobdata(this.getInstance().getA0xxukbdlvxxxxxxxxxxfromtable(),'B'+this.getInstance().getA1xxuxxxbv49xxxxxxxxfromkey(),this.getInstance().getA2xxuxxxbv50xxxxxxxxqualifier(),this.getInstance().getA3xxexnsbvxxxxxxxxxxsequence());
    }else{
     imageData=this.getInstance().getB1xxuzbxbvxxxxxxxxxxdata();//already retrieved
    }   
    ByteArrayInputStream in = new ByteArrayInputStream(imageData);
    String jayImageFormat="jpg";
    int imageType=5;
    try {
     BufferedImage src = ImageIO.read(in);
     int width = src.getWidth();
     int height = src.getHeight();
     imageType = src.getType();
     if(imageType == 0) imageType = 5;
     dest = new BufferedImage(height, width, imageType);
     Graphics2D graphics2D = dest.createGraphics();
     graphics2D.translate((height - width) / 2, (height - width) / 2);
     graphics2D.rotate(Math.PI / 2, height / 2, width / 2);
     graphics2D.drawRenderedImage(src, null);
     //BufferedImage originalImage = ImageIO.read(item.getInputStream());
     //BufferedImage thumbnail = Thumbnails.of(originalImage)
     //   .size(700, 700)
     //   .asBufferedImage();
     ByteArrayOutputStream baos = new ByteArrayOutputStream();
     ImageIO.write( dest, jayImageFormat, baos );
     baos.flush();
     byte[] imageInByte = baos.toByteArray();
     baos.close();
     yxxxuq1n1xwwqqqxxxxxblobdata=this.getInstance();
     yxxxuq1n1xwwqqqxxxxxblobdata.setB1xxuzbxbvxxxxxxxxxxdata(imageInByte);
     if(action.equals("n")){//not used but tested
      yxxxuq1n1xwwqqqxxxxxblobdata.setA0xxuobxbxxxxxxxxxxxsid(null);
      yxxxuq1n1xwwqqqxxxxxblobdata.setA1xxuxxxbv49xxxxxxxxfromkey(id+"-copy");// copy logic from entityHome
      yxxxuq1n1xwwqqqxxxxxblobdataHome.clearInstance();
      yxxxuq1n1xwwqqqxxxxxblobdataHome.setInstance(yxxxuq1n1xwwqqqxxxxxblobdata);
      yxxxuq1n1xwwqqqxxxxxblobdataHome.superdotpersist();
     }else{
      yxxxuq1n1xwwqqqxxxxxblobdataHome.setInstance(yxxxuq1n1xwwqqqxxxxxblobdata);
      yxxxuq1n1xwwqqqxxxxxblobdataHome.superdotupdate();
     }
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("rotated")+" "+bundle.getString("image")+" "+bundle.getString("at")+" "+timeStamp+", "+bundle.getString("reload")+" "+bundle.getString("to")+" "+bundle.getString("see")+" "+bundle.getString("change"),""));


    }catch (Exception e){
   	   //log.severe("rotate image error "+e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("rotate")+" "+bundle.getString("image")+" "+bundle.getString("error")+" "+bundle.getString("for")+" "+bundle.getString("image")+" "+bundle.getString("type")+" "+bundle.getString("value")+" "+imageType+" ,"+e,""));

           return null;
    }

    return dest;
}







    public String getImageLocation(String reference,String location){
       String path="/img/frostedWindow.jpg";
       lobDataType="jpg";
       switch(location){
        case "PRODUCT-1":
         if(reference.equals("eerb")){
          path = "/img/bakery.jpg";
          break;
         }
         if(reference.equals("eecl")){
          path = "/img/clothing.jpg";
          break;
         }
         path="/img/productxx.png"; 
         lobDataType="png";
         break;
        case "PRODUCT-2":
         if(reference.equals("eerb")){
          path = "/img/bakery2.jpg";
          break;
         }
         path="/img/product2xx.jpg"; 
         break;
        case "NEWS-1":
         if(reference.startsWith("ee") || reference.startsWith("o") ){
          path = "/img/news.jpg";
          break;
         }
         path="/img/newsxx.jpg"; 
         break;
        case "ABOUT-1":
         if(reference.startsWith("o") ){
          path = "/img/aboutalt.jpg";
          break;
         }
         path="/img/aboutxx.jpg"; 
         break;
        case "CONTACTUS-1":
         if(reference.startsWith("ee") || reference.startsWith("o") ){
          path = "/img/contactus.jpg";
          break;
         }
         path="/img/contactusxx.jpg"; 
         break;
        case "RESELLERS-1":
          path = "/img/reseller.jpg";
          break;
        case "ATTACHMENT-1":
         path="/img/attachment.png"; 
         lobDataType="png";
         break;
        case "3R-TOP-BKGR-":
         if(reference.startsWith("eerb")){
          path = "/img/top-bkgreerb.jpg";
          break;
         }
         if(reference.startsWith("eecl")){
          path = "/img/top-bkgreecl.jpg";
          break;
         }
         path="/img/topbkgrxx.jpg"; 
         break;
        case "3R-TOP-LEFT-":
         if(reference.startsWith("eerb")){
          path = "/img/top-lefteerb.jpg";
          break;
         }
         if(reference.startsWith("o")){
          path = "/img/top-lefto.jpg";
          break;
         }
         path="/img/topleftxx.png"; 
         lobDataType="png";
         break;
        case "3R-MID-TOP-":
         if(reference.equals("eecl")){
          path = "/img/midtopeecl.jpg";
          break;
         }
         if(reference.startsWith("ef") || reference.startsWith("el")){
          path = "/img/midtopwel.jpg";
          break;
         }
         if(reference.startsWith("saia") ){
          path = "/img/midtopsaia.jpg";
          break;
         }
         if(reference.startsWith("scic") ){
          path = "/img/midtopscic.jpg";
          break;
         }
         path="/img/midtopxx.jpg"; 
         break;
       }
       return path;

    }

    public String persistUpLoadedImageAsImage1() {
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-M");     
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);     
     persistUpLoadedImage();
     return "";
    }

    public String persistUpLoadedImageAsImage2() {
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-M");     
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(2);     
     persistUpLoadedImage();
     return "";
    }

    public String publishUpLoadedImageAsImage1() {
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);     
     makePermGraphics(this.instance, "B3R-TOP-BKGR-C");
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("published")+" "+bundle.getString("image1")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+"3R-TOP-BKGR-C, seq 1"+") "+"at"+" "+timeStamp,""));
     return "";
    }
    public String publishPreviewImageAsImage1() {
     //get preview Instance
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);     
     makePermGraphics(this.instance, "B3R-TOP-BKGR-C");
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("published")+" "+bundle.getString("image1")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+"3R-TOP-BKGR-C, seq 1"+") "+"at"+" "+timeStamp,""));
     return "";
    }


    public String publishUpLoadedImageAsImage2() {
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(2);     
     makePermGraphics(this.instance, "B3R-TOP-BKGR-C");
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("published")+" "+bundle.getString("image2")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+"3R-TOP-BKGR-C, seq 2"+") "+"at"+" "+timeStamp,""));
     return "";
    }

    public String persistUpLoadedImage1AsSystem(){
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-M");     
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(1);     
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentTheme());
     persistUpLoadedImageAsSystem();
     return "";
    }
    public String persistUpLoadedImage2AsSystem(){
     this.instance.setA1xxuxxxbv49xxxxxxxxfromkey("3R-TOP-BKGR-M");     
     this.instance.setA3xxexnsbvxxxxxxxxxxsequence(2);     
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentTheme());
     persistUpLoadedImageAsSystem();
     return "";
    }


    public String persistUpLoadedImagesAsSystem(){
     bcontinue=true;
     customIdentity.setKeyValue("");
     customIdentity.setKeyValue2("");
     customIdentity.setKeyValue3("");

     String aName=customIdentity.getHoldValue();
     if (aName == null || aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("name")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(file.getLength() == 0){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("uploaded")+" "+bundle.getString("file")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }

   // copied from persist for multi
    try{
                int i=0;
                String type="";
                Integer attachment=0;
                dataIsBlob = true;
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                while (itr.hasNext()) {
                          file = itr.next();
                          temps=file.getMime();
			  if ("image/bmp".equals(temps)) {
				lobDataType = "bmp";
			  } else if ("image/jpeg".equals(temps)) {
				lobDataType = "jpg";
			  } else if ("image/gif".equals(temps)) {
				lobDataType = "gif";
			  } else if ("image/png".equals(temps)) {
				lobDataType = "png";
			  } else if ("text/xml".equals(temps)) {
				lobDataType = "xml";
			  } else if ("application/msword".equals(temps)) {
				lobDataType = "doc";
			  } else if ("text/plain".equals(temps)) {
				lobDataType = "txt";
			  } else if ("text/html".equals(temps)) {
				lobDataType = "html";
			  } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			  } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			  } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			 } else {
				lobDataType = "unkn";
			 }

                  subKey="";
                  type=lobDataType;
                  //jay itr loop here based on number of file objects in files arraylist ie arraylist size
                  if(i==0){
                    aName=customIdentity.getHoldValue();
                  }
                  if(i==1){
                   aName=customIdentity.getHoldValue2();
                  }
                  if(i==2){
                   aName=customIdentity.getHoldValue3();
                  }
                  subKey=subKey+aName+type;
                  timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                  subKey=subKey+timeStamp.substring(17,18);
                  int subL=subKey.length();
                  if (subL !=0){
                   String subKeyh=Integer.toString(subKey.hashCode());
                   if (subL > 25){
                    subKey=subKey.substring(0,11)+subKey.substring(subL-5,subL)+subKeyh;
                   }
                   else {
                    subKey=subKey+subKeyh;
                   }
                  }

                  key=subKey;
                  if (key.length() > 32){
                   key=key.substring(0,32);
                  }
                  if ( (aName+Integer.toString(key.hashCode())).length() >35){
                   slobkeyhash=(aName+Integer.toString(key.hashCode())).substring(0,34);
                  }else{
                   slobkeyhash=aName+Integer.toString(key.hashCode());
                  }

                  attachment++;
                  ${blobdataEntityName}Home.clearInstance();
                  ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                  ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                  ${blobdataEntityName}.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
                  ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                  ${blobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
                  ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && !${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && ${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   //replace beyond asis with new type if any
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                  }
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }
                  ${blobdataEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");

                  ${blobdataEntityName}Home.superdotpersist();// persist has a loop to persist blob
                  if(i==0){
                    customIdentity.setKeyValue(slobkeyhash);
                  }
                  if(i==1){
                   customIdentity.setKeyValue2(slobkeyhash);
                  }
                  if(i==2){
                   customIdentity.setKeyValue3(slobkeyhash);
                  }

                  i++;
                }

    } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO," "+"Image"+" "+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));

               bcontinue=false;
               return null;
    }



     if(bcontinue){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+file.getLength()+" "+bundle.getString("starting")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
     }else{
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("if")+" "+bundle.getString("already")+" "+bundle.getString("exists")+", "+bundle.getString("browse")+"/"+bundle.getString("search")+" "+bundle.getString("to")+", "+bundle.getString("locate")+" "+bundle.getString("and")+" "+bundle.getString("update")+"/"+bundle.getString("delete"),""));
     }
     //clear uploaded data otherwise another save will fail as detached entity
     this.clearUploadData();
     customIdentity.setHoldValue("");
     customIdentity.setHoldValue2("");
     customIdentity.setHoldValue3("");

     return "";
    }

    public String persistUpLoadedImageAsSystem(){

     bcontinue=true;
     this.getInstance();
     this.instance.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata"); 
     if (this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("key")+" "+bundle.getString("value")+" "+bundle.getString("empty"),""));
      return null;
     }
     //can be theme or PIC
     if(yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentTheme()!=null && !yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentTheme().isEmpty() ){
     }else{
      this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
     }
     if(file.getLength() == 0){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("uploaded")+" "+bundle.getString("file")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }
     this.instance.setB1xxuzbxbvxxxxxxxxxxdata(file.getData());
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     yxxxuq1n1xwwqqqxxxxxblobdata=this.instance;
     try{
      this.persist("SYSTEM");//clob/blob persist does not give msg
     } catch (Exception e) {
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+ bundle.getString("save")+" "+bundle.getString("record")+" "+e.getMessage(),""));
     }
     if(bcontinue){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+file.getLength()+" "+bundle.getString("starting")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
     }else{
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("if")+" "+bundle.getString("already")+" "+bundle.getString("exists")+", "+bundle.getString("browse")+"/"+bundle.getString("search")+" "+bundle.getString("to")+", "+bundle.getString("locate")+" "+bundle.getString("and")+" "+bundle.getString("update")+"/"+bundle.getString("delete"),""));
     }
     //clear uploaded data otherwise another save will fail as detached entity
     this.clearUploadData();
     customIdentity.setHoldValue("");
     customIdentity.setHoldValue2("");
     customIdentity.setHoldValue3("");

     return "";
    }

    public String persistUpLoadedImageAndItem(String type,String parentKey){
     bcontinue=true;
     customIdentity.setKeyValue("");
     customIdentity.setKeyValue2("");
     customIdentity.setKeyValue3("");

    String[] holdKey;
    holdKey=new String[3];

     //create item instance along with docmnt key with prefix and then create blobdata instance with fromtable as item 
     // and fromkey as docmnt less prefix
    try{
     fpxxfq1a5xwwqqhxxxxxitem=fpxxfq1a5xwwqqhxxxxxitemHome.getInstance();
     fpxxfq1a5xwwqqhxxxxxitem.setZ2xxcsxrlxxxxxxxxxxxdateadded(calendar.getTime());
     //String aName=this.instance.getA1xxuxxxbv49xxxxxxxxfromkey();
     String aName=customIdentity.getHoldValue();
     if (type.equals("PI-D") && (aName == null || aName.isEmpty())){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("name")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(type.equals("PI-L1")){
      aName=this.instance.getA0xxukbdlvxxxxxxxxxxfromtable();
     }
     if(type.equals("PI-L1") && aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("album")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     if(file.getLength() == 0){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("uploaded")+" "+bundle.getString("file")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }
     if(parentKey.isEmpty()){
      parentKey=overRideValue;
     }
     if ((parentKey == null || parentKey.isEmpty()) && type.equals("PI-D") ){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Album")+" / "+bundle.getString("Category")+" "+bundle.getString("empty"),""));
      return null;
     }
                int i=0;
                Integer attachment=0;
                dataIsBlob = true;
                Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                while (itr.hasNext()) {
                  subKey="";
                  file = itr.next();
                  //jay itr loop here based on number of file objects in files arraylist ie arraylist size
                  attachment++;
                  if(i==0){
                   if(type.equals("PI-D")){
                    aName=customIdentity.getHoldValue();
                   }
                  }
                  if(i==1){
                   aName=customIdentity.getHoldValue2();
                  }
                  if(i==2){
                   aName=customIdentity.getHoldValue3();
                  }
                  ${itemEntityName}Home.clearInstance();
                  fpxxfq1a5xwwqqhxxxxxitem = ${itemEntityName}Home.getInstance();
                  if(i==0){// moved here after instance gets created
                   if(yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentVendor() !=null && !yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentVendor().isEmpty()){
                    fpxxfq1a5xwwqqhxxxxxitem.setY2xxuxxrbvxxxxxxxxxxmisccode1(yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentVendor()); 
                    fpxxfq1a5xwwqqhxxxxxitem.setY3xxuxxrbvxxxxxxxxxxmisccode2(yxxxuq1m1xwwqqqxxxxxclobdataHome.getContentTheme()); 
                   } 
                  }
                  fpxxfq1a5xwwqqhxxxxxitem.setB1xxuszsbvxxxxxxxxxxdescript(aName); 
                  fpxxfq1a5xwwqqhxxxxxitem.setC6xxusxrbv16xxxxxxxxtype(type);
                  subKey=subKey+aName+type;
                  timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                  subKey=subKey+timeStamp.substring(17,18);
                  subKey=subKey+fpxxfq1a5xwwqqhxxxxxitem.getZ2xxcsxrlxxxxxxxxxxxdateadded().toString().substring(0,10)+fpxxfq1a5xwwqqhxxxxxitem.getZ2xxcsxrlxxxxxxxxxxxdateadded().toString().substring(fpxxfq1a5xwwqqhxxxxxitem.getZ2xxcsxrlxxxxxxxxxxxdateadded().toString().length()-6);
                  int subL=subKey.length();
                  if (subL !=0){
                   String subKeyh=Integer.toString(subKey.hashCode());
                   if (subL > 25){
                    subKey=subKey.substring(0,11)+subKey.substring(subL-5,subL)+subKeyh;
                   }
                   else {
                    subKey=subKey+subKeyh;
                   }
                  }

                  key=subKey;
                  if (key.length() > 32){
                   key=key.substring(0,32);
                  }
                  fpxxfq1a5xwwqqhxxxxxitem.setA0xxukixbxxxxxxxxxxxmatcode(key); 
                  slobkeyhash=Integer.toString(key.hashCode());
                  holdKey[i]=slobkeyhash;
                  fpxxfq1a5xwwqqhxxxxxitem.setW8xxuzdrbvxxxxxxxxxxdocmnt("B"+slobkeyhash); 
                  if(type.equals("PI-D")){
                   fpxxfq1a5xwwqqhxxxxxitem.setFpxxfq1a5xwwqqhxxxxxitem(fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(parentKey)); 
                  }     
                  //fpxxfq1a5xwwqqhxxxxxitem.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");//only themes need shared
                  fpxxfq1a5xwwqqhxxxxxitemHome.setInstance(fpxxfq1a5xwwqqhxxxxxitem);  

                  ${itemEntityName}Home.superdotpersist();// use superdot to avoid persist has a loop to persist blob
                  if(bcontinue){
                   timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("item")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+key+") "+"at"+" "+timeStamp,""));
                  }

                  i++;// 
                }


    } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO," "+"Item"+" "+" "+bundle.getString("key")+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));


               bcontinue=false;
               return null;
    }
   // now take care of related clob/blob
    try{
                int i=0;
                Integer attachment=0;
                dataIsBlob = true;
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                while (itr.hasNext()) {
                  file = itr.next();
                  //jay itr loop here based on number of file objects in files arraylist ie arraylist size
                  attachment++;
                  ${blobdataEntityName}Home.clearInstance();
                  ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                  ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                  ${blobdataEntityName}.setA0xxukbdlvxxxxxxxxxxfromtable("${itemEntityName?upper_case}");
                  ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(holdKey[i]);
                  ${blobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier("1");
                  ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && !${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && ${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   //replace beyond asis with new type if any
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                  }
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }

                  ${blobdataEntityName}Home.superdotpersist();// persist has a loop to persist blob
                  if(i==0){
                    customIdentity.setKeyValue(holdKey[i]);
                  }
                  if(i==1){
                   customIdentity.setKeyValue2(holdKey[i]);
                  }
                  if(i==2){
                   customIdentity.setKeyValue3(holdKey[i]);
                  }

                  i++;// 
                }

    } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO," "+"Image"+" "+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));

               bcontinue=false;
               return null;
    }
     if(bcontinue){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                <#if menuAttributesp2 == "1N">
                    FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+this.getFiles().size()+" "+bundle.getString("starting")+" "+bundle.getString("Blobdata")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
                <#else>
                    FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+${blobdataEntityName}Home.getFiles().size()+" "+bundle.getString("starting")+" "+bundle.getString("Blobdata")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
                </#if>

     }
     //clear uploaded data otherwise another save will fail as detached entity
     this.clearUploadData();
     customIdentity.setHoldValue("");
     customIdentity.setHoldValue2("");
     customIdentity.setHoldValue3("");
     return "";
    }

    public String persistUpLoadedImageAsMember(){
    //not used but seems meant for shared images
     bcontinue=true;
     this.getInstance();
     this.instance.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata"); 
     if (this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("key")+" "+bundle.getString("value")+" "+bundle.getString("empty"),""));
      return null;
     }
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
     <#if menuAttributesp2 == "1N">
                  if(this.getFiles().size() == 0){
                <#else>
                  if(${blobdataEntityName}Home.getFiles().size() == 0){
      </#if>
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("uploaded")+" "+bundle.getString("file")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }
     this.instance.setB1xxuzbxbvxxxxxxxxxxdata(file.getData());
     this.instance.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
     yxxxuq1n1xwwqqqxxxxxblobdata=this.instance;
     this.persist("SYSTEM");//clob/blob persist does not give msg
     if(bcontinue){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("Blobdata")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
     }
     //clear uploaded data otherwise another save will fail as detached entity
     this.clearUploadData();
     return "";
    }

    public String persistUpLoadedImage() {
     bcontinue=true;
     this.getInstance();
     this.instance.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata"); 
     if (this.instance.getA1xxuxxxbv49xxxxxxxxfromkey() == null || this.instance.getA1xxuxxxbv49xxxxxxxxfromkey().isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("key")+" "+bundle.getString("value")+" "+bundle.getString("empty"),""));
      return null;
     }
     this.instance.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
     <#if menuAttributesp2 == "1N">
                  if(this.getFiles().size() == 0){
                <#else>
                  if(${blobdataEntityName}Home.getFiles().size() == 0){
      </#if>
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("uploaded")+" "+bundle.getString("file")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }
     this.instance.setB1xxuzbxbvxxxxxxxxxxdata(file.getData());
     yxxxuq1n1xwwqqqxxxxxblobdata=this.instance;
     try{
      this.persist();//clob/blob persist does not give msg
     } catch (Exception e) {
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+ bundle.getString("save")+" "+bundle.getString("record")+" "+e.getMessage(),""));
     }
     if(bcontinue){
      timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
     }else{
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("if")+" "+bundle.getString("already")+" "+bundle.getString("exists")+", "+bundle.getString("browse")+"/"+bundle.getString("search")+" "+bundle.getString("to")+", "+bundle.getString("locate")+" "+bundle.getString("and")+" "+bundle.getString("update")+"/"+bundle.getString("delete"),""));
     }
     //clear uploaded data otherwise another save will fail as detached entity
     this.clearUploadData();
     return "";
    }

    public String persistUpLoadedImages() {
     bcontinue=true;
     customIdentity.setKeyValue("");//clear any old image key values
     customIdentity.setKeyValue2("");
     customIdentity.setKeyValue3("");

     String aName=customIdentity.getHoldValue();
     if (aName == null || aName.isEmpty()){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("Image")+" "+bundle.getString("name")+" "+aName+" "+bundle.getString("empty"),""));
      return null;
     }
     <#if menuAttributesp2 == "1N">
                  if(this.getFiles().size() == 0){
                <#else>
                  if(${blobdataEntityName}Home.getFiles().size() == 0){
      </#if>
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_ERROR,bundle.getString("uploaded")+" "+bundle.getString("file")+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
      return null;
     }
    try{
                int i=0;
                String type="";

                Integer attachment=0;
                dataIsBlob = true;
                <#if menuAttributesp2 == "1N">
                  Iterator<File> itr = this.getFiles().iterator();
                <#else>
                  Iterator<File> itr = ${blobdataEntityName}Home.getFiles().iterator();
                </#if>
                while (itr.hasNext()) {
                          file = itr.next();
                          temps=file.getMime();
			  if ("image/bmp".equals(temps)) {
				lobDataType = "bmp";
			  } else if ("image/jpeg".equals(temps)) {
				lobDataType = "jpg";
			  } else if ("image/gif".equals(temps)) {
				lobDataType = "gif";
			  } else if ("image/png".equals(temps)) {
				lobDataType = "png";
			  } else if ("text/xml".equals(temps)) {
				lobDataType = "xml";
			  } else if ("application/msword".equals(temps)) {
				lobDataType = "doc";
			  } else if ("text/plain".equals(temps)) {
				lobDataType = "txt";
			  } else if ("text/html".equals(temps)) {
				lobDataType = "html";
			  } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			  } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			  } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			 } else {
				lobDataType = "unkn";
			 }

                  subKey="";
                  type=lobDataType;
                  //jay itr loop here based on number of file objects in files arraylist ie arraylist size
                  if(i==0){
                    aName=customIdentity.getHoldValue();
                  }
                  if(i==1){
                   aName=customIdentity.getHoldValue2();
                  }
                  if(i==2){
                   aName=customIdentity.getHoldValue3();
                  }
                  subKey=subKey+aName+type;
                  timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                  subKey=subKey+timeStamp.substring(17,18);
                  int subL=subKey.length();
                  if (subL !=0){
                   String subKeyh=Integer.toString(subKey.hashCode());
                   if (subL > 25){
                    subKey=subKey.substring(0,11)+subKey.substring(subL-5,subL)+subKeyh;
                   }
                   else {
                    subKey=subKey+subKeyh;
                   }
                  }

                  key=subKey;
                  if (key.length() > 32){
                   key=key.substring(0,32);
                  }
                  if( (aName+Integer.toString(key.hashCode())).length() >35){
                   slobkeyhash=(aName+Integer.toString(key.hashCode())).substring(0,34);
                  }else{
                   slobkeyhash=aName+Integer.toString(key.hashCode());
                  }
                  attachment++;
                  ${blobdataEntityName}Home.clearInstance();
                 ${blobdataEntityName} = ${blobdataEntityName}Home.getInstance();
                 ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
                 ${blobdataEntityName}.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
                 ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey(slobkeyhash);
                 ${blobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
                  ${blobdataEntityName}.set${blobdataentityDataFieldName?cap_first}(file.getData());
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && !${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() !=null && ${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype().toLowerCase().contains("asis")){   
                   //replace beyond asis with new type if any
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype("asis"+lobDataType);
                  }
                  if(${blobdataEntityName}.getA4xxexxxbvxxxxxxxxxxtype() ==null ){   
                   ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
                  }

                  ${blobdataEntityName}Home.superdotpersist();// persist has a loop to persist blob

                  if(i==0){
                    customIdentity.setKeyValue(slobkeyhash);
                  }
                  if(i==1){
                   customIdentity.setKeyValue2(slobkeyhash);
                  }
                  if(i==2){
                   customIdentity.setKeyValue3(slobkeyhash);
                  }

                  i++;// 
                }

    } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO," "+"Image"+" "+" "+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));

               bcontinue=false;
               return null;
    }



     if(bcontinue){
                 timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                <#if menuAttributesp2 == "1N">
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+this.getFiles().size()+" "+bundle.getString("starting")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
                <#else>
                                     FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+${blobdataEntityName}Home.getFiles().size()+" "+bundle.getString("starting")+" "+bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("in")+" "+bundle.getString("gallery")+" "+bundle.getString("as")+" ("+this.instance.getA1xxuxxxbv49xxxxxxxxfromkey()+") "+"at"+" "+timeStamp,""));
                </#if>

     }else{
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("if")+" "+bundle.getString("already")+" "+bundle.getString("exists")+", "+bundle.getString("browse")+"/"+bundle.getString("search")+" "+bundle.getString("to")+", "+bundle.getString("locate")+" "+bundle.getString("and")+" "+bundle.getString("update")+"/"+bundle.getString("delete"),""));
     }
     //clear uploaded data otherwise another save will fail as detached entity
     this.clearUploadData();
     customIdentity.setHoldValue("");
     customIdentity.setHoldValue2("");
     customIdentity.setHoldValue3("");

     return "";
    }

    public String makeTempGraphicsFromTheme(String theme,String position){
            //try both seq 1 and 2
            // source(blobdata)  is system and qualifier as theme name and key XX-M , target(current) is owner2 site, qualifier PIC and key XX-M
            try{
             Yxxxuq1n1xwwqqqxxxxxblobdata blobdata = yxxxuq1n1xwwqqqxxxxxblobdataList.getSystemBlobDataInstance("blobdata",position,theme,1);
             if (blobdata == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("load")+" "+bundle.getString("from")+" "+theme+" "+", "+position+" "+bundle.getString("seq 1"),""));
             }else{
              Yxxxuq1n1xwwqqqxxxxxblobdata current = yxxxuq1n1xwwqqqxxxxxblobdataList.getUserBlobDataInstance("blobdata",position,"PIC",1);
              if (current == null){
               // create if does not exist
               this.clearInstance();
               current=this.getInstance(); 
               current.setB1xxuzbxbvxxxxxxxxxxdata(blobdata.getB1xxuzbxbvxxxxxxxxxxdata());
               current.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
               current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
               current.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
               current.setA3xxexnsbvxxxxxxxxxxsequence(1);
               current.setA4xxexxxbvxxxxxxxxxxtype(blobdata.getA4xxexxxbvxxxxxxxxxxtype());
               current.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
               current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
               current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               this.setInstance(current);
               this.persist();
              }else{
                current.setB1xxuzbxbvxxxxxxxxxxdata(blobdata.getB1xxuzbxbvxxxxxxxxxxdata());
                current.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                this.setInstance(current);
                superdotupdate();
              }
              timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copied")+" "+bundle.getString("image1")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+position+") "+"at"+" "+timeStamp,""));
             }
            }
            catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("load")+" "+bundle.getString("theme")+" "+bundle.getString("image1")+" "+bundle.getString("error")+" "+e.getMessage(),""));
            }  
            //seq 2
            try{
             Yxxxuq1n1xwwqqqxxxxxblobdata blobdata = yxxxuq1n1xwwqqqxxxxxblobdataList.getSystemBlobDataInstance("blobdata",position,theme,2);
             if (blobdata == null){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("nothing")+" "+bundle.getString("to")+" "+bundle.getString("load")+" "+bundle.getString("from")+" "+theme+" "+", "+position+" "+bundle.getString("seq 2"),""));
              return "";
             }
             Yxxxuq1n1xwwqqqxxxxxblobdata current = yxxxuq1n1xwwqqqxxxxxblobdataList.getUserBlobDataInstance("blobdata",position,"PIC",2);
             if (current == null){
              // create if does not exist
              this.clearInstance();
	      current=this.getInstance(); 
              current.setB1xxuzbxbvxxxxxxxxxxdata(blobdata.getB1xxuzbxbvxxxxxxxxxxdata());
              current.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
              current.setA3xxexnsbvxxxxxxxxxxsequence(2);
              current.setA4xxexxxbvxxxxxxxxxxtype(blobdata.getA4xxexxxbvxxxxxxxxxxtype());
              current.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.setInstance(current);
              this.persist();
             }else{
              current.setB1xxuzbxbvxxxxxxxxxxdata(blobdata.getB1xxuzbxbvxxxxxxxxxxdata());
              current.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
              this.setInstance(current);
              superdotupdate();
             }
             timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss z").format(new Date());
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copied")+" "+bundle.getString("image2")+" "+bundle.getString("reference")+" "+bundle.getString("as")+" ("+position+") "+"at"+" "+timeStamp,""));
             return "";
            }
            catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("load")+" "+bundle.getString("theme")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  

    }

    // SYSTEM record 0 is shared, so tenants own record 0 must be used 
    // create if tenant record does not exist, blobdata refers to the mockUp row being copied and position contains key with _M ie mockUp
    //not used
  
    public String makeTempGraphics(${blobdataEntityName?cap_first} blobdata, String position) {
            ${blobdataEntityName?cap_first} current = ${blobdataEntityName}List.getUserBlobDataInstance("blobdata",position,"PIC",0);
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	         current=this.getInstance(); 
              current.set${documentField?cap_first}(blobdata.get${documentField?cap_first}());
              current.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
              current.setA3xxexnsbvxxxxxxxxxxsequence(0);
              current.setA4xxexxxbvxxxxxxxxxxtype(blobdata.getA4xxexxxbvxxxxxxxxxxtype());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              //current.setY3xxuxznbvxxxxxxxxxxnotes("\u2605"+ blobdata.getA3xxexnsbvxxxxxxxxxxsequence());
              this.persist();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }else{
              current.set${documentField?cap_first}(blobdata.get${documentField?cap_first}());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setY3xxuxznbvxxxxxxxxxxnotes(current.getY3xxuxznbvxxxxxxxxxxnotes()+ "\u2605"+ blobdata.getA3xxexnsbvxxxxxxxxxxsequence());
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }
            }
            catch ( Exception e){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+bundle.getString("temp")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));

             return "";
            }  

    }
    public String makePermGraphicsAll(String position) {
     //getAllResultListSeqs for -M and use for loop
     // call makePermGraphics(Yxxxuq1n1xwwqqqxxxxxblobdata blobdata,String position)
     // blobdata is -M and position has -C
     return "";
    }

    // create if tenant record does not exist  but position contains key with _C ie Current record for display outside MockUp
    // postion has -C and blobdata has -M 
    public String makePermGraphics(${blobdataEntityName?cap_first} blobdata, String position) {
            ${blobdataEntityName?cap_first} current = ${blobdataEntityName}List.getUserBlobDataInstance("blobdata",position,"PIC",blobdata.getA3xxexnsbvxxxxxxxxxxsequence());
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	      current=this.getInstance(); 
              current.set${documentField?cap_first}(blobdata.get${documentField?cap_first}());
              current.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
              current.setA3xxexnsbvxxxxxxxxxxsequence(blobdata.getA3xxexnsbvxxxxxxxxxxsequence());
              current.setA4xxexxxbvxxxxxxxxxxtype(blobdata.getA4xxexxxbvxxxxxxxxxxtype());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              customIdentity.setMsgTempKey(position);
              this.position=position;
             }else{
              current.set${documentField?cap_first}(blobdata.get${documentField?cap_first}());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              this.setInstance(current);
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              this.position=position;
             }
             customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
             return "";
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+bundle.getString("permanent")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));

             return "";
            }  
    }
    //not used
    public void setAsPermTempMsgKeys(String position) {
      customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
      customIdentity.setMsgTempKey(position.substring(0,position.length()-1)+"M");
    }


    public String makeNoPreviewImageAll(String position) {
     //getAllResultListSeqs for -M and use for loop
     // call makeNoPrevieImage(Yxxxuq1n1xwwqqqxxxxxblobdata blobdata,String position)
     // blobdata is -M and position has -C
     return "";
    }
    // remove data for both -M and -C , blobdata has -M remove it first, position has -C so fetch it and remove it next
    public String makeNoPreviewImage(Yxxxuq1n1xwwqqqxxxxxblobdata blobdata,String position) {
            // remove param1 which points to _M  and remove it first
            int jay=blobdata.getA3xxexnsbvxxxxxxxxxxsequence();
            this.clearInstance();
            this.setInstance(blobdata);
            superdotremove();
            Yxxxuq1n1xwwqqqxxxxxblobdata current = yxxxuq1n1xwwqqqxxxxxblobdataList.getUserBlobDataInstance("blobdata",position,"PIC",jay);
            try{
             if (current == null){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+bundle.getString("find")+" "+position+" "+bundle.getString("sequence")+" "+jay,""));

               return "";
             }else{
              this.clearInstance();
              this.setInstance(current);
              superdotremove();
              return "";
             }
            }
            catch ( Exception e){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("preview")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  

    
    }
    //not used makeNoPreview does both now
    public String makeNoImage(Yxxxuq1n1xwwqqqxxxxxblobdata blobdata,String position) {
            Yxxxuq1n1xwwqqqxxxxxblobdata current = yxxxuq1n1xwwqqqxxxxxblobdataList.getUserBlobDataInstance("blobdata",position,"PIC",blobdata.getA3xxexnsbvxxxxxxxxxxsequence());
            try{
             if (current == null){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+bundle.getString("find")+" "+position+" "+bundle.getString("sequence")+" "+blobdata.getA3xxexnsbvxxxxxxxxxxsequence(),""));
               return "";
             }else{
               current.set${documentField?cap_first}(null);
               current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
               superdotupdate();
               customIdentity.setMsgTempKey(position);
               this.position=position;
               return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+bundle.getString("no")+" "+bundle.getString("preview")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  
   
    }



    /**
    * The following method creates a new preview instance
    * @param args position and from. postion refers to key like B3R-NEWS-1-M and from is used to return back to from page (not     * used)
    * @return blobedit page or empty if error
    * @exception instance creation error.
    * @see 
    * added logic to check and add -M if only -C exists
    */ 
    public String newEntry(String position, String from) {
            ${blobdataEntityName?cap_first} current = null;
            try{
              this.clearInstance();
              current=this.getInstance(); 
              current.set${documentField?cap_first}(null);
              current.setA0xxukbdlvxxxxxxxxxxfromtable("blobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
              int jay=0;
              if(position.contains("3R-TOP-BKGR")){
               jay=  yxxxuq1n1xwwqqqxxxxxblobdataList.getNextSeqAvailable("blobdata",position,"PIC",1);
              }else{
               jay=  yxxxuq1n1xwwqqqxxxxxblobdataList.getNextSeqAvailable("blobdata",position,"PIC",0);
              }
              if(jay <0 ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_WARN,bundle.getString("invalid")+" "+ bundle.getString("sequence")+" "+Integer.toString(jay),""));
               return "";
              }
              if(position.contains("3R-TOP-BKGR")){
               if(jay ==0 || (jay >0 && !(jay ==1 || jay ==2))){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("invalid")+" "+ bundle.getString("sequence")+" "+Integer.toString(jay),""));

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("use")+" "+ bundle.getString("sequence")+" 1 "+bundle.getString("or")+" "+bundle.getString("sequence")+" 2 "+" "+bundle.getString("only"),""));
                return "";
               }else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("for")+" "+ bundle.getString("fadeout")+" "+ bundle.getString("effect")+" "+ bundle.getString("put")+" "+ bundle.getString("type")+" "+ bundle.getString("as")+" "+bundle.getString("asis"),""));
               }
              }else{
               if(jay <0 || jay > 4  ){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("use")+" "+ bundle.getString("sequence")+" 0 "+bundle.getString("to")+" 4 ",""));

                return "";
               }
              }

              current.setA3xxexnsbvxxxxxxxxxxsequence(jay);
              if(current.getA4xxexxxbvxxxxxxxxxxtype()!=null && !current.getA4xxexxxbvxxxxxxxxxxtype().isEmpty()){
               current.setA4xxexxxbvxxxxxxxxxxtype("jpg");
              }
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              //set this here as well so that persist knows request came from here
              yxxxuq1n1xwwqqqxxxxxblobdataFrom="homeMockUp";
              this.persist();
              this.upLoadPurpose="re";
              return "/${blobdataEntityName?substring(eL)}Edit.xhtml?faces-redirect=true&includeViewParams=true";
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+ bundle.getString("new")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  

    }




         public byte[] getSystemBlobdata(String table,String keyWPrefix,String keyQualifier,int keySequence) {
           //no need to use since system default images are not used switching to client images preinstalled
           // based on type
           String actualTable=table;
           if(keyWPrefix.length() > 0){
            slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
           String qualifier = keyQualifier;
           int sequence = keySequence;
           try {
               ${blobdataEntityName?cap_first} blobdata=null;
		    List<${blobdataEntityName?cap_first}> results = entityManager
					.createQuery(
							"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.a3xxexnsbvxxxxxxxxxxsequence = :blobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					           .setParameter("blobdatafromtable", actualTable).setParameter(
							"blobdatafromkey", slobkeyhash).setParameter(
							"blobdataqualifier", qualifier).setParameter(
							"blobdatasequence", sequence).setParameter("owner2", "SYSTEM").getResultList();
		     if(!results.isEmpty()){
                 return results.get(0).getB1xxuzbxbvxxxxxxxxxxdata();
                }
                 return null;
           } catch (NoResultException nre) {
			return null;
          }
         }


</#if>
<#if menuAttributesp2 == "1M" >

    private List<SelectItem> availableThemeCategories = new ArrayList<SelectItem>();
  {
    SelectItemGroup group1 = new SelectItemGroup("Business Ecommerce");
    group1.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Business", "Generic"),
        new SelectItem("Retail Bakery/Business", "Retail Bakery"),
        new SelectItem("Clothing/Business", "Clothing"),
        new SelectItem("Shoes/Business", "Shoes"),
        new SelectItem("Beauty Products/Business", "Beauty Products"),
        new SelectItem("Health Foods/Business", "Health Foods"),
        new SelectItem("Shopify Store Backoffice/Business", "Shopify Store Backoffice"),
        new SelectItem("Others/Business", "Business-Others")
    });

    availableThemeCategories.add(group1);

    SelectItemGroup group2 = new SelectItemGroup("Manufacturing ERP");
    group2.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/ERP", "Generic"),
        new SelectItem("Industrial Products/ERP", "Industrial Products"),
        new SelectItem("Consumer/ERP", "Consumer"),
        new SelectItem("Wholesale/ERP", "Wholesale"),
        new SelectItem("Clothing/ERP", "Clothing"),
        new SelectItem("Others/ERP", "Manufacturing-Others")
    });
    availableThemeCategories.add(group2);
    SelectItemGroup group3 = new SelectItemGroup("Lab Environment");
    group3.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Lab", "Generic"),
        new SelectItem("Pathology/Lab", "Pathology"),
        new SelectItem("Medical Imaging/Lab", "Medical Imaging"),
        new SelectItem("Others/Lab", "Lab-Others")
    });
    availableThemeCategories.add(group3);
    SelectItemGroup group4 = new SelectItemGroup("Association/Organization");
    group4.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Organization", "Generic"),
        new SelectItem("College Alumni/Organization", "College Alumni"),
        new SelectItem("School Alumni/Organization", "School Alumni"),
        new SelectItem("Community Organization/Organization", "Community Organization"),
        new SelectItem("Events Organizer/Organization", "Events Organizer"),
        new SelectItem("Others/Organization", "Organization-Others")
    });
    availableThemeCategories.add(group4);
    SelectItemGroup group5 = new SelectItemGroup("Association/Club");
    group5.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Club", "Generic"),
        new SelectItem("Community/Club", "Community Club"),
        new SelectItem("Photography/Club", "Photography"),
        new SelectItem("Sports/Club", "Sports"),
        new SelectItem("Health/Club", "Health"),
        new SelectItem("Others/Club", "Club-Others")
    });
    availableThemeCategories.add(group5);
    SelectItemGroup group6 = new SelectItemGroup("Service Consulting");
    group6.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Consulting", "Generic"),
        new SelectItem("IT/Consulting", "IT Consulting"),
        new SelectItem("Financial/Consulting", "Financial Consulting"),
        new SelectItem("Others/Consulting", "Consulting-Others")
    });
    availableThemeCategories.add(group6);
    SelectItemGroup group7 = new SelectItemGroup("Service Agency");
    group7.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Agency", "Generic"),
        new SelectItem("Landscaping/Agency", "Cleaning Services"),
        new SelectItem("Insurance/Agency", "Insurance Agency"),
        new SelectItem("Service for a fee/Agency", "Service for a fee"),
        new SelectItem("sams/Agency", "Maid Service"),
        new SelectItem("Landscaping/Agency", "Landscaping Service"),
        new SelectItem("Landscaping/Agency", "Learning Center"),
        new SelectItem("Renovation/Agency", "Renovation Service"),
        new SelectItem("Others/Agency", "Agency-Others")
    });
    availableThemeCategories.add(group7);
    SelectItemGroup group8 = new SelectItemGroup("Users Forum Pictures/News");
    group8.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/News Forum", "Generic"),
        new SelectItem("Community/News Forum", "Community"),
        new SelectItem("Family/News Forum", "Family"),
        new SelectItem("Others/News Forum", "Forum-Others")
    });
    availableThemeCategories.add(group8);
    SelectItemGroup group9 = new SelectItemGroup("Users Forum Issues/Bugs");
    group9.setSelectItems(new SelectItem[] {
        new SelectItem("Generic/Users Forum", "Generic"),
        new SelectItem("Software/Users Forum", "Software"),
        new SelectItem("Consumer/Users Forum", "Consumer Products"),
        new SelectItem("Bugs/Users Forum", "Issues-Others")
    });
    availableThemeCategories.add(group9);


  }

    public List<SelectItem> getAvailableThemeCategories() {
        return availableThemeCategories;
    }



      public String takeChatAction(String provider){
       //  hdr not used only raaspi can upload raw html to avoid xcss attack using scripting, other sites can use it as a copy
       try{
         if(mailingText2 == null || mailingText2.isEmpty() || mailingText2.length()>35){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Tawk.to")+" "+bundle.getString("site Id")+" "+mailingText2+" "+bundle.getString("empty")+" "+bundle.getString("or")+" "+bundle.getString("invalid"),""));
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Check")+" "+bundle.getString("Tawk.to")+" "+bundle.getString("Admin")+" "+bundle.getString("overview")+" "+bundle.getString("page")+" "+bundle.getString("propertyId"),""));
             return "";
         }
         //siteId entered, use hardcoded tawk script into tScript
         String position="A3R-CONTACTUS-1-C";
         String tScript="<!--Start of Tawk.to Script--><script type=\"text/javascript\">var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();(function(){var s1=document.createElement(\"script\"),s0=document.getElementsByTagName(\"script\")[0];s1.async=true;s1.src='https://embed.tawk.to/5949dae9e9c6d324a47367dd/default';s1.charset='UTF-8';s1.setAttribute('crossorigin','*');s0.parentNode.insertBefore(s1,s0);})();</script><!--End of Tawk.to Script-->";
            String t2=tScript.replace("5949dae9e9c6d324a47367dd",mailingText2.trim());
            Yxxxuq1m1xwwqqqxxxxxclobdata current = yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-CONTACTUS-1-C","TXT",0);
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	      current=this.getInstance(); 
              current.setB1xxuzaxbvxxxxxxxxxxdata(t2);
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
              current.setA3xxexnsbvxxxxxxxxxxsequence(0);
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
             }else{
              current.setB1xxuzaxbvxxxxxxxxxxdata(t2);
              current.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
              this.setInstance(current);
              superdotupdate();
             }
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("ContactUs-1")+" "+bundle.getString("page")+" "+bundle.getString("changed")+", "+bundle.getString("if")+" "+bundle.getString("problem")+", "+bundle.getString("check")+" "+bundle.getString("content")+" "+t2,""));

              return "";
       }catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("chat")+" "+bundle.getString("setup")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
      }
 } 


/**
  called by load buttons in rtemplateHomePageEditor.xhtml/homePageEditor/homeOtherPagesEditor 
  or in retemplateSiteEditEasy/siteEditEasy to prefill respective editor 
  content like hometop,homeN3(News3) etc. -M 
  @param1 location short form of key, @param2 owner used for vendor only,@param3 theme (item key/matcode) used for 
  vendor pages only since they can have multiple entries.
  Regular user can load their own preview page or a vendor's theme preview and update if ok.(initial content loaded at site creation and saved).
  Vendor can only load their own _M content and preview and update if ok.(initial content allways loaded using sample and saved) 

*/
      public String takeContentAction(String location,String owner,String theme){
       try{
       switch(location){
        case "TOP-BKGRH":
         if(!owner.equals("")){
          homeTopTxtH=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-BKGRH-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtH=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGRH-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        //both TOP-BKGRH refers to html menu, same content also referred to by MENU 
        //instead of checking each case, we are relying on exception to detect null content and notify.
        case "MENU":
         if(!owner.equals("")){
          homeTopTxtH=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-MENU-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtH=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MENU-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;

        case "TOP-BKGR":
         if(!owner.equals("")){
          homeTopTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-BKGR-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "TOP-MOST":
         if(!owner.equals("")){
          homeTopTxtT=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtT=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-MOST-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "TOP-MOSTF":
         if(!owner.equals("")){
          homeTopTxtTF=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-M",theme,1,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtTF=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-MOST-M","TXT",1).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "TOP-LEFT":
         if(!owner.equals("")){
          homeTopTxtL=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-LEFT-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtL=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-LEFT-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "MID-TOP":
         if(!owner.equals("")){
          homeMidTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-MID-TOP-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeMidTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "FOOTER-1":
         if(!owner.equals("")){
          homeFooterTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-FOOTER-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeFooterTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-1-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-2-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-2-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-3-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-3-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-1-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-2-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-2-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-3-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-3-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-1-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-2-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-2-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-3-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-3-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-1-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-2-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-2-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-3-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-3-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-1-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-2-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-2-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-3-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-3-M","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        //The following doesnt have preview ie -M under owner2, so use -C
        case "LEGAL_NOTICE-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-LEGAL_NOTICE-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-LEGAL_NOTICE-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRIVACY_POLICY-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRIVACY_POLICY-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRIVACY_POLICY-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RETURNS_POLICY-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RETURNS_POLICY-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RETURNS_POLICY-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;

        case "SIGNUP_NOTICE-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-SIGNUP_NOTICE-1-M",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-SIGNUP_NOTICE-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        default:  
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("no")+" "+bundle.getString("content")+" "+bundle.getString("match")+" "+bundle.getString("error")+" "+bundle.getString("for")+" "+location+" "+theme+" "+owner+" ",""));
             return "";// added to catch wrong location/content name

      }
        return null;
      }catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("content")+" "+bundle.getString("empty")+" "+bundle.getString("or")+" "+bundle.getString("error")+" "+bundle.getString("for")+" "+location+" "+theme+" "+owner+" "+e.getMessage(),""));
             return "e";
      }
 } 


/**
  called by load New Image buttons in rtemplateHomePageEditor.xhtml and homePageEditor and in homeOtherPagesEditor to prefill respective editor 
  content like hometop,homeN3(News3) etc. -M 
  @param1 location short form of key, @param2 owner used for vendor only,@param3 theme used for vendor only since they can have
  multiple entries.
  One click will upload image,save it in blob and update the page content with img tage or if mpr video tag
  Will give the needed user friendliness for simple site maintenance but covers 80% cases
  look into blobdataHome persist which loads data from files and save in blob. we can copy it or make a common method
  after save use the below logic to load clobdata but put new logic to add tags loke img or video and update   
*/
      public String loadCreateSaveImage(String location,String owner,String theme){
      ////////////////////////////////////////////////////////////////////////////////////////
       try{
        //load image copied from blobdataHome persist or create iframe if url
             //Below is common to all type of keys coming from above
                boolean exists=false;
                int i=0;
                if(theme==null || theme.isEmpty()){  
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("No")+" "+bundle.getString("value")+" "+bundle.getString("entered"),""));
                   return null;
                }
                key=theme;
                subKey="";
                if(key.contains("youtu") || key.contains("vimeo.com") || key.contains("https://www.facebook.com/")
                 || key.contains("<iframe") ){
                 if(key.contains("<iframe")){
                  lobDataType="iframe";
                 }else{
                  if(key.contains("vimeo.com")){
                   lobDataType="vimeo";
                  }else{
                   if (key.contains("https://www.facebook.com/")){
                    lobDataType="embedfb";
                   }else{
                    if(key.contains("youtu")){
                     lobDataType="youtube";
                    }else{
                     //should not come here, assume its image not url
                    }
                   }
                  }
                 }
                 //
                }else{ 
                 List<Yxxxuq1n1xwwqqqxxxxxblobdata> results = entityManager
		 .createQuery(
			"select cc from Yxxxuq1n1xwwqqqxxxxxblobdata cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "blobdata").setParameter("blobdatafromkey", key)
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","PIC").getResultList();
		 if(!results.isEmpty() ){
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("binary")+" "+bundle.getString("data")+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+key+" "+"PIC"+" "+"1"+" "+owner2Code+", "+bundle.getString("Reusing")+" "+bundle.getString("it"),""));
                   bcontinue=true;
                   exists=true;
                   //return null;
               
                 }
                 if(exists){
                  //key already set
                 }else{
                  yxxxuq1n1xwwqqqxxxxxblobdataHome.clearInstance();
		  yxxxuq1n1xwwqqqxxxxxblobdata = yxxxuq1n1xwwqqqxxxxxblobdataHome.getInstance();
                  yxxxuq1n1xwwqqqxxxxxblobdata.setA1xxuxxxbv49xxxxxxxxfromkey(key);

                  yxxxuq1n1xwwqqqxxxxxblobdataHome.persistUpLoadedImage();
                  //qualifier is PIC1 , 2 etc for now PIC1  not sure why PIC1 was used when inserting
                  //set lobDataType from blobdataHome debug to find how
                 }
                 urlIndex=key.lastIndexOf(".");
                 if (urlIndex == -1){
                  lobDataType="mp4";
                 }else{
                  lobDataType=key.substring(urlIndex+1);//skip dot
                 }       


               }//url vs image
               
         
       } catch ( Exception e){
         String context="key="+key;
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR," "+"Blobdata"+" "+context+" "+ bundle.getString("error")+" "+bundle.getString("cause")+"- "+e.getMessage(),""));


               bcontinue=false;
               return null;
       }
       //////////////////////////////////////////////////////////////////////////////////////////////////
        //prepend new image to existing content , set lobDataType from blobdataHome
        String append="";
        if(lobDataType.equals("youtube")){
         append="<iframe width=\"724\" height=\"408\" src=\""+key+"\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>";
        }else{
         if(lobDataType.equals("vimeo")){
          append="<iframe src=\""+key+"\" width=\"640\" height=\"352\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";
         }else{
          if(lobDataType.equals("embedfb")){
           append="<div class=\"fb-page\" data-href=\""+key+"\" data-tabs=\"timeline\" data-width=\"\" data-height=\"\" data-small-header=\"false\" data-adapt-container-width=\"true\" data-hide-cover=\"false\" data-show-facepile=\"true\"><blockquote cite=\""+key+"\" class=\"fb-xfbml-parse-ignore\"><a href=\""+key+"\">fb page</a></blockquote></div>";
          }else{
           if(lobDataType.equals("iframe")){
            append="<div>"+key+"</div>";
           }else{
            if(lobDataType.equals("mp4")){
             append="<div><video controls autoplay height=\"400\" width=\"900\"><source src=\"/ImageServletCdi/?table=blobdata&amp;seq=1&amp;qlf=PIC&amp;id=X"+key+"\" type=\"video/mp4\" /></video></div>";        
            }else{
             if(lobDataType.equals("mp3")){
              append="<audio  controls><source src=\"/ImageServletCdi/?table=blobdata&amp;seq=1&amp;qlf=PIC&amp;id=X"+key+"\" type=\"audio/mpeg\"/></audio></div>"; 
             }else{
              if(theme.length() > 35){
               theme=theme.substring(0,35);
              }
              key=theme;//blob has max 35 ch for imame name
              append="<img src=\"/ImageServletCdi/?table=blobdata&amp;seq=1&amp;qlf=PIC&amp;id=X"+key+"\"&amp;width=200\" />";   
             }      
            }
           }
          }
         }
        }






       try{
       switch(location){
        case "TOP-BKGR":
         if(!owner.equals("")){
          homeTopTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-BKGR-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-BKGR-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          homeMidTxt=homeMidTxt+append;
          //homeMidTxt=append;
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistTopC();
          break;
        case "TOP-MOST":
         if(!owner.equals("")){
          homeTopTxtT=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtT=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          homeMidTxt=homeMidTxt+append;
          //homeMidTxt=append;
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistTopLT();
          break;
        case "TOP-MOSTF":
         if(!owner.equals("")){
          homeTopTxtTF=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-C",theme,1,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtTF=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",1).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          homeMidTxt=homeMidTxt+append;
          //homeMidTxt=append;
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistTopLTFC();
        case "TOP-LEFT":
         if(!owner.equals("")){
          homeTopTxtL=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-LEFT-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtL=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-TOP-LEFT-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistTopLC();
          break;
        case "MID-TOP":
         if(!owner.equals("")){
          homeMidTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-MID-TOP-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeMidTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-MID-TOP-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeMidTxt !=null && homeMidTxt.contains("@3r-replace")){
           homeMidTxt=homeMidTxt.replace("@3r-replace",append);
          }else{
           homeMidTxt=homeMidTxt+append;
          }
          //homeMidTxt=append; try replacing @3r-div with append
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistMidC();
          break;
        case "FOOTER-1":
         if(!owner.equals("")){
          homeFooterTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-FOOTER-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeFooterTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-FOOTER-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeFooterTxt !=null && homeFooterTxt.contains("@3r-replace")){
           homeFooterTxt=homeFooterTxt.replace("@3r-replace",append);
          }else{
           homeFooterTxt=homeFooterTxt+append;
          }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistFooterC();
          break;
        case "PRODUCT-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-PRODUCT-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeOthersTxt != null && homeOthersTxt.contains("@3r-replace")){
           homeOthersTxt=homeOthersTxt.replace("@3r-replace",append);
          }else{
           homeOthersTxt=homeOthersTxt+append;
          }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistProdC();
          break;
        case "PRODUCT-2":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-PRODUCT-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-3":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-PRODUCT-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-NEWS-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeOthersTxt != null && homeOthersTxt.contains("@3r-replace")){
           homeOthersTxt=homeOthersTxt.replace("@3r-replace",append);
          }else{
           homeOthersTxt=homeOthersTxt+append;
          }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistNewsC();
          break;
        case "NEWS-2":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-NEWS-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-3":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-NEWS-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-ABOUT-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeOthersTxt != null && homeOthersTxt.contains("@3r-replace")){
           homeOthersTxt=homeOthersTxt.replace("@3r-replace",append);
          }else{
           homeOthersTxt=homeOthersTxt+append;
          }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistAboutC();
          break;
        case "ABOUT-2":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-ABOUT-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-3":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-ABOUT-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-CONTACTUS-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeOthersTxt != null && homeOthersTxt.contains("@3r-replace")){
           homeOthersTxt=homeOthersTxt.replace("@3r-replace",append);
          }else{
           homeOthersTxt=homeOthersTxt+append;
          }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistContactC();
          break;
        case "CONTACTUS-2":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-CONTACTUS-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-3":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-CONTACTUS-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-RESELLERS-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          if(homeOthersTxt != null && homeOthersTxt.contains("@3r-replace")){
           homeOthersTxt=homeOthersTxt.replace("@3r-replace",append);
          }else{
           homeOthersTxt=homeOthersTxt+append;
          }
          yxxxuq1m1xwwqqqxxxxxclobdataHome.persistResellerC();
          break;
        case "RESELLERS-2":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-RESELLERS-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-3":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-RESELLERS-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        //The following doesnt have preview ie -M under owner2, so use -C
        case "LEGAL_NOTICE-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-LEGAL_NOTICE-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-LEGAL_NOTICE-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRIVACY_POLICY-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-PRIVACY_POLICY-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-PRIVACY_POLICY-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RETURNS_POLICY-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-RETURNS_POLICY-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-RETURNS_POLICY-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;

        case "SIGNUP_NOTICE-1":
         if(!owner.equals("")){
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemOwnerInstance("clobdata","A3R-SIGNUP_NOTICE-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A3R-SIGNUP_NOTICE-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;

      }//switch


        return null;
      }catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("content")+" "+bundle.getString("empty")+" "+bundle.getString("or")+" "+bundle.getString("error")+" "+bundle.getString("for")+" "+location+" "+theme+" "+owner+" "+e.getMessage(),""));
             return "";
      }
 } 




/**
  called by load buttons in rtemplateHomePageEditor.xhtml and homePageEditor and in homeOtherPagesEditor to prefill respective editor 
  content like hometop,homeN3(News3) etc. -M 
  @param1 location short form of key, @param2 owner used for vendor only,@param3 theme used for vendor only since they can have
  multiple entries.
  Regular user can load their own preview page or a vendor's theme preview and update if ok.(initial content loaded at site creation and saved).
  Vendor can only load their own _M content and preview and update if ok.(initial content allways loaded using sample and saved) 
  create/update preview from published content 

*/
      public String takePublishContentAction(String location,String owner,String theme){
       try{
       switch(location){
        case "TOP-BKGR":
         if(!owner.equals("")){
          homeTopTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-BKGR-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "TOP-BKGRH":
         if(!owner.equals("")){
          homeTopTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-BKGR-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          //added  for menu check menu vs bkgrh why 2 diff keys for menu?
          break;

        case "TOP-MOST":
         if(!owner.equals("")){
          homeTopTxtT=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtT=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "TOP-MOSTF":
         if(!owner.equals("")){
          homeTopTxtTF=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-MOST-C",theme,1,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtTF=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-MOST-C","TXT",1).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "TOP-LEFT":
         if(!owner.equals("")){
          homeTopTxtL=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-TOP-LEFT-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeTopTxtL=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-LEFT-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "MID-TOP":
         if(!owner.equals("")){
          homeMidTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-MID-TOP-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeMidTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-C","TXT",0);
          ${clobdataEntityName}2=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0);
          calendare.setTime(${clobdataEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
          if(${clobdataEntityName}2 !=null){
           calendar.setTime(${clobdataEntityName}2.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
           if(calendar.before(calendare)){
            ${clobdataEntityName}2.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
            ${clobdataEntityName}2.setB1xxuzaxbvxxxxxxxxxxdata(homeMidTxt);
            ${clobdataEntityName}Home.clearInstance();
            ${clobdataEntityName}Home.setInstance(${clobdataEntityName}2);
            ${clobdataEntityName}Home.superdotupdate();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,"Preview record (3R-MID-TOP-M) updated" ,""));
           }
          }else{
           ${clobdataEntityName}Home.clearInstance();
           ${clobdataEntityName}2=${clobdataEntityName}Home.getInstance();
           ${clobdataEntityName}2.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
 	   ${clobdataEntityName}2.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
	   ${clobdataEntityName}2.setA1xxuxxxbv49xxxxxxxxfromkey("3R-MID-TOP-M");
	   ${clobdataEntityName}2.setA3xxexnsbvxxxxxxxxxxsequence(0);
	   ${clobdataEntityName}2.setA2xxuxxxbv50xxxxxxxxqualifier(ownerCode);
           ${clobdataEntityName}2.set${clobdataentityDataFieldName?cap_first}(homeMidTxt);
           ${clobdataEntityName}2.setA4xxexxxbvxxxxxxxxxxtype("TXT");
           ${clobdataEntityName}Home.setInstance(${clobdataEntityName}2);
           ${clobdataEntityName}Home.persist();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,"Preview record (3R-MID-TOP-M) created" ,""));


          }
          break;
        case "FOOTER-1":
         if(!owner.equals("")){
          homeFooterTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-FOOTER-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeFooterTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRODUCT-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRODUCT-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRODUCT-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "NEWS-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-NEWS-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-NEWS-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "ABOUT-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-ABOUT-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-ABOUT-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "CONTACTUS-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-CONTACTUS-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-CONTACTUS-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-2":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-2-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-2-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RESELLERS-3":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RESELLERS-3-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RESELLERS-3-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        //The following doesnt have preview ie -M under owner2, so use -C
        case "LEGAL_NOTICE-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-LEGAL_NOTICE-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-LEGAL_NOTICE-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "PRIVACY_POLICY-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-PRIVACY_POLICY-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-PRIVACY_POLICY-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        case "RETURNS_POLICY-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-RETURNS_POLICY-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-RETURNS_POLICY-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;

        case "SIGNUP_NOTICE-1":
         if(!owner.equals("")){
          homeOthersTxt=${clobdataEntityName}List.getclobDataSystemOwnerInstance("clobdata","A3R-SIGNUP_NOTICE-1-C",theme,0,owner).getB1xxuzaxbvxxxxxxxxxxdata();
         }else{
          homeOthersTxt=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-SIGNUP_NOTICE-1-C","TXT",0).getB1xxuzaxbvxxxxxxxxxxdata();
         }
          break;
        default:  
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("no")+" "+bundle.getString("content")+" "+bundle.getString("match")+" "+bundle.getString("error")+" "+bundle.getString("for")+" "+location+" "+theme+" "+owner+" ",""));
             return "";// added to catch wrong location/content name

      }
        return null;
      }catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("content")+" "+bundle.getString("empty")+" "+bundle.getString("or")+" "+bundle.getString("error")+" "+bundle.getString("for")+" "+location+" "+theme+" "+owner+" "+e.getMessage(),""));
             return "";
      }
 } 

/**
 called by viewaction in pageHomeEditor.xhtml to prefill home page editor content
 If logged in by vendor then a sample SYSTEM based content which they can 
  customize and update  as SYSTEM and -M but vendor code as owner and theme name as qualifier.
  Unlike regular user, a vendor may have multiple records as owned for diff themes, so a separate load content
  button exists, see takeContentAction method.

 If regular user (site backOffice admin) then show the record matching the key and owned by them, not SYSTEM 
  but just like a vendor, regular user also need to load vendor/theme and preivew and if ok update as owner2 and -C
  Uunlike home page, homeOtherPages reuse homeOthersTxt so a button is provided to load specific content. See
  takeContentAction method 
  At createsite time both -M and -C records have same content
*/
      public String takeLoadHomeAction(){

       try{

       if(customIdentity.hasRole("PH")){
        ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-TOP-BKGR-M","OTH",0);
        if(${clobdataEntityName} !=null){
         homeTopTxt=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
        }
        ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-MID-TOP-M","OTH",0);
        if(${clobdataEntityName} !=null){
         homeMidTxt=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
        }
        ${clobdataEntityName}=${clobdataEntityName}List.getclobDataSystemInstance("clobdata","A3R-FOOTER-1-M","OTH",0);
        if(${clobdataEntityName} !=null){
         homeFooterTxt=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
        }
       }else{
        ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-TOP-BKGR-M","TXT",0);
        if(${clobdataEntityName} !=null){
         homeTopTxt=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
        }
        ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-MID-TOP-M","TXT",0);
        if(${clobdataEntityName} !=null){
         homeMidTxt=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
        }
        ${clobdataEntityName}=${clobdataEntityName}List.getclobDataInstance("clobdata","A3R-FOOTER-1-M","TXT",0);
        if(${clobdataEntityName} !=null){
         homeFooterTxt=${clobdataEntityName}.getB1xxuzaxbvxxxxxxxxxxdata();
        }
       }
       return null;
      }catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("content")+" "+ bundle.getString("load")+" "+bundle.getString("empty")+" "+bundle.getString("or")+" "+bundle.getString("error")+" "+${clobdataEntityName}.getA1xxuxxxbv49xxxxxxxxfromkey()+" "+e.getMessage(),""));
             return "";
   }

      }


	public String getHomeTopTxt() {
           
		return homeTopTxt;
	}

	public void setHomeTopTxt(String homeTopTxt ) {
		this.homeTopTxt = homeTopTxt;
	}


	public String getHomeTopTxtT() {
           
		return homeTopTxtT;
	}

	public void setHomeTopTxtT(String homeTopTxtT ) {
		this.homeTopTxtT = homeTopTxtT;
	}

	public String getHomeTopTxtTF() {
           
		return homeTopTxtTF;
	}

	public void setHomeTopTxtTF(String homeTopTxtTF ) {
		this.homeTopTxtTF = homeTopTxtTF;
	}



	public String getHomeTopTxtL() {
           
		return homeTopTxtL;
	}

	public void setHomeTopTxtL(String homeTopTxtL ) {
		this.homeTopTxtL = homeTopTxtL;
	}

	public String getHomeTopTxtH() {
           
		return homeTopTxtH;
	}

	public void setHomeTopTxtH(String homeTopTxtH ) {
		this.homeTopTxtH = homeTopTxtH;
	}

	public String getHomeTopTxtHM() {
           
		return homeTopTxtHM;
	}

	public void setHomeTopTxtHM(String homeTopTxtHM ) {
		this.homeTopTxtHM = homeTopTxtHM;
	}

	public String getHomeMidTxt() {
           
		return homeMidTxt;
	}

	public void setHomeMidTxt(String homeMidTxt ) {
		this.homeMidTxt = homeMidTxt;
	}

	public String getHomeFooterTxt() {
           
		return homeFooterTxt;
	}

	public void setHomeFooterTxt(String homeFooterTxt ) {
		this.homeFooterTxt = homeFooterTxt;
	}

	public String getHomeOthersTxt() {
           
		return homeOthersTxt;
	}

	public void setHomeOthersTxt(String homeOthersTxt ) {
		this.homeOthersTxt = homeOthersTxt;
	}


    // create if tenant record does not exist but position contains key with _M ie mockUp
    //not used
    public String makeTempHeader(${clobdataEntityName?cap_first} clobdata, String position) {
            ${clobdataEntityName?cap_first} current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,"HDR",0);
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	         current=this.getInstance(); 
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("HDR");
              current.setA3xxexnsbvxxxxxxxxxxsequence(0);
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }else{
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+ bundle.getString("temporary")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));

             return "";
            }  
            

    }
    // create if tenant record does not exist but position contains key with _M ie mockUp

    public String makePermHeader(${clobdataEntityName?cap_first} clobdata, String position) {
            ${clobdataEntityName?cap_first} current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,"HDR",clobdata.getA3xxexnsbvxxxxxxxxxxsequence());
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	         current=this.getInstance(); 
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("HDR");
              current.setA3xxexnsbvxxxxxxxxxxsequence(clobdata.getA3xxexnsbvxxxxxxxxxxsequence());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }else{
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              this.setInstance(current);
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }
            }
            catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+ bundle.getString("temporary")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  
    }
    // create if tenant record does not exist but position contains key with _C ie mockUp
    //not used
    public String makeTempText(${clobdataEntityName?cap_first} clobdata, String position) {
            ${clobdataEntityName?cap_first} current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,"TXT",0);
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	         current=this.getInstance(); 
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
              current.setA3xxexnsbvxxxxxxxxxxsequence(0);
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              current.setY3xxuxznbvxxxxxxxxxxnotes("\u2605" +clobdata.getA3xxexnsbvxxxxxxxxxxsequence());
              this.persist();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }else{
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              String jay=current.getY3xxuxznbvxxxxxxxxxxnotes().substring(12);
              String jayLeft=jay.substring(0,4);
              current.setY3xxuxznbvxxxxxxxxxxnotes(jayLeft+"\u2605"+clobdata.getA3xxexnsbvxxxxxxxxxxsequence()+"> "+jay);
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+ bundle.getString("temporary")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  

            

    }
    // create if tenant record does not exist but position contains key with _C ie mockUp
    public String makePermText(${clobdataEntityName?cap_first} clobdata, String position) {
            ${clobdataEntityName?cap_first} current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,"TXT",clobdata.getA3xxexnsbvxxxxxxxxxxsequence());
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	      current=this.getInstance(); 
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
              current.setA3xxexnsbvxxxxxxxxxxsequence(clobdata.getA3xxexnsbvxxxxxxxxxxsequence());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }else{
              current.set${documentField?cap_first}(clobdata.get${documentField?cap_first}());
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              this.setInstance(current);
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              customIdentity.setMsgPermKey(position.substring(0,position.length()-1)+"C");
              this.position=position;
              return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+ bundle.getString("temporary")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  
    }

    public String newEntry(String position, String from,String qualifier) {
            // can from be used to navigate to clobedit and come back ?? using clobedit return string page.xml
            ${clobdataEntityName?cap_first} current = null;
            try{
              this.clearInstance();
	      current=this.getInstance(); 
              current.set${documentField?cap_first}(null);
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier);
              // jay use count to figure out next seq
              int jay=  ${clobdataEntityName}List.getNextSeqAvailable("clobdata",position,qualifier,0);
              if(jay <0 ){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("invalid")+" "+ bundle.getString("sequence")+" "+ jay,""));
               return "";
              }
              if(qualifier.contains("HDR") && jay >0 ){
               if(!position.substring(1).contains("MID-TOP")){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("header")+" "+ bundle.getString("already")+" "+ bundle.getString("exists"),""));
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("only")+" "+ bundle.getString("sequence")+" 0 "+ bundle.getString("is")+" "+ bundle.getString("valid"),""));
                return "";
               }else{
                //jay check should mid-top allow 2 headers?
                if(jay >0){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("header")+" "+ bundle.getString("already")+" "+ bundle.getString("exists"),""));
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("only")+" "+ bundle.getString("sequence")+" 0 "+ bundle.getString("is")+" "+ bundle.getString("valid"),""));

                 return "";
                }
               }
              }else{
               if(jay <0 || jay > 4  ){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("invalid")+" "+ bundle.getString("sequence")+" "+ jay,""));
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("use")+" "+ bundle.getString("sequence")+" 0 "+bundle.getString("to")+" 4 "+ bundle.getString("only"),""));

                return "";
               }
              }
              current.setA3xxexnsbvxxxxxxxxxxsequence(jay);
              if(current.getA4xxexxxbvxxxxxxxxxxtype()!=null && !current.getA4xxexxxbvxxxxxxxxxxtype().isEmpty()){
              current.setA4xxexxxbvxxxxxxxxxxtype("txt");
              }
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              //set this here as well so that persist knows request came from here
              yxxxuq1m1xwwqqqxxxxxclobdataFrom="homeMockUp";

              this.persist();
              this.upLoadPurpose="re";
              return "/${clobdataEntityName?substring(eL)}Edit.xhtml?faces-redirect=true&includeViewParams=true";

            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+ bundle.getString("new")+" "+bundle.getString("error")+" "+e.getMessage(),""));

             return "";
            }  
    }
    // remove data for both -M and -C , clobdata has -M so remove it, position has -C so fetch it and make remove it next

    public String makeNoPreviewText(${clobdataEntityName?cap_first} clobdata,String position,String qualifier) {
            // remove clobdata ie  -M first
            int jay=clobdata.getA3xxexnsbvxxxxxxxxxxsequence();
            this.clearInstance();
            this.setInstance(clobdata);
            superdotremove();

            ${clobdataEntityName?cap_first} current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,qualifier,jay);
            try{
             if (current == null){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("cannot")+" "+ bundle.getString("find")+" "+position+" "+bundle.getString("sequence")+" "+jay,""));
               return "";
             }else{
              this.clearInstance();
              this.setInstance(current);
              superdotremove();
              return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+ bundle.getString("preview")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  

    
    }
    //not used
    public String makeNoText(String position,String qualifier) {
            ${clobdataEntityName?cap_first} current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,qualifier,1);
            try{
             if (current == null){
              // create under tenant 1st time only
              this.clearInstance();
	         current=this.getInstance(); 
              current.setB1xxuzaxbvxxxxxxxxxxdata(null);
              current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
              current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
              current.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier);
              current.setA3xxexnsbvxxxxxxxxxxsequence(0);
              current.setA4xxexxxbvxxxxxxxxxxtype("");
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              customIdentity.setMsgTempKey(position);
              this.position=position;
              return "";
             }else{
              current.setB1xxuzaxbvxxxxxxxxxxdata(null);
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              superdotupdate();
              customIdentity.setMsgTempKey(position);
              this.position=position;
              //force temp to point to the same no image data to keep consistency
              position=position.substring(0,position.length()-1)+"M";
              current = ${clobdataEntityName}List.getclobDataInstance("clobdata",position,"PIC",0);
              if (current == null){
               // create under tenant 1st time only
               this.clearInstance();
	          current=this.getInstance(); 
               current.set${documentField?cap_first}(null);
               current.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
               current.setA1xxuxxxbv49xxxxxxxxfromkey(position.substring(1));
               current.setA2xxuxxxbv50xxxxxxxxqualifier("PIC");
               current.setA3xxexnsbvxxxxxxxxxxsequence(0);
               current.setA4xxexxxbvxxxxxxxxxxtype("");
               current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
               current.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
               current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               this.persist();
               customIdentity.setMsgTempKey(position);
               this.position=position;
               return "";
              }else{
               current.set${documentField?cap_first}(null);
               current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
               superdotupdate();
               customIdentity.setMsgTempKey(position);
               this.position=position;
               return "";
              }
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+bundle.getString("no")+" "+ bundle.getString("preview")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  
   
    }


</#if>

<#if menuAttributesp2 == "1R" >
  private String msgValue;
  private String newMsgUse="p"; 

  public String getMsgValue() {
    return msgValue;
  }

  public void setMsgValue(String msgValue) {
    this.msgValue = msgValue;
  }

  public String getNewMsgUse() {
    return newMsgUse;
  }

  public void setNewMsgUse(String newMsgUse) {
    this.newMsgUse = newMsgUse;
  }


    // msg entered value and keys are in session scope customIdentity bean property 
    public String makeTempLabel(String msgKey,String msgValue) {
            // msgKey has _M suffix and getResourceInstance below will look for tenant record and not for SYSTEM
            // coming here means tenant records , not SYSTEM records
            if (msgValue == null || msgValue.isEmpty()){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_WARN,bundle.getString("no")+" "+ bundle.getString("new")+" "+ bundle.getString("value"),""));
              return "";
            }
            ${resourceEntityName?cap_first} ${resourceEntityName}li = ${resourceEntityName}List.getresourceInstance(msgKey);
            try{
             if (${resourceEntityName}li == null){
              // create under tenant 1st time only, system msgs are shared and not allowed to change by a tenant 
	         if (${resource_bundleEntityName} == null) {
	          ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
	         }
               String resource_bundleName="m"; 
               // add logic to create resource_bundle with key messages,messages_en, messages_en_ca etc. each tenant will see their message
               // if they change value for messages with owner SYSTEM
              ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
              this.clearInstance();
	      ${resourceEntityName}li=this.getInstance(); 
              if (msgValue == null || msgValue.isEmpty()){
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("No Value");
              }
              else {
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(msgValue);
              }
              ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey(msgKey);
              // remove hardcoded value "m" for resource bundle
              ${resourceEntityName}li.setYxxxuq1l1xwwqqhxxxxxresource_bundle(${resource_bundleEntityName});
              ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              return "";
             }else{
              if (msgValue == null || msgValue.isEmpty()){
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("No Value");
              }
              else {
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(msgValue);
              }
              superdotupdate();
              return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+ bundle.getString("temporary")+" "+bundle.getString("label")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  
            
    }
    // add _M suffix to msgKey to make it tempMsgKey and accept means mockUp value changed as well
    public String makePermLabel(String msgKey,String msgValue) {
            // msgKey does not have  _M suffix and getRespurceInstance below will look for tenant records and not for SYSTEM
            // coming here means tenant records , not SYSTEM records
            // First, if needed. add _M suffix to msgKey to make it tempMsgKey as accept means mockUp value changed as well
            // future add logic to bypass creating makeTempLabel if it already exists which will happen in normal flow
            if ((msgValue == null || msgValue.isEmpty()) && newMsgUse.equals("f")){
             // try to use preview value first msgKey is for publish and msgKey_M is for preview
              ${resourceEntityName?cap_first} yxxxuq1r1xwwqqhxxxxxresourceli = ${resourceEntityName}List.getresourceInstance(msgKey+"_M");
              if(${resourceEntityName}li == null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_WARN,bundle.getString("no")+" "+ bundle.getString("new")+" "+ bundle.getString("value"),""));
               return "";
              }else{
               if(${resourceEntityName}li.getA1xxuxxxbvxxxxxxxxxxvalue() !=""){
                msgValue=${resourceEntityName}li.getA1xxuxxxbvxxxxxxxxxxvalue();
               }
              }
            }
            // the following will clear msgvalue
            this.makeTempLabel(msgKey+"_M",msgValue);
            if (newMsgUse == null || newMsgUse.isEmpty() || newMsgUse.equals("p")){
              return "";
            }
            ${resourceEntityName?cap_first} ${resourceEntityName}li = ${resourceEntityName}List.getresourceInstance(msgKey);

            try{
             if (${resourceEntityName}li == null){
              // create under tenant 1st time
	         if (${resource_bundleEntityName} == null) {
	          ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
	         }
               String resource_bundleName="m"; 
               // add logic to create resource_bundle with key messages,messages_en, messages_en_ca etc. each tenant will see their message
               // if they change value for messages with owner SYSTEM
              ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
              this.clearInstance();
	         ${resourceEntityName}li=this.getInstance(); 
              if (msgValue == null || msgValue.isEmpty()){
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("No Value");
              }
              else {
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(msgValue);
              }
              ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey(msgKey);
              // remove hardcoded value "m" for resource bundle
              ${resourceEntityName}li.setYxxxuq1l1xwwqqhxxxxxresource_bundle(${resource_bundleEntityName});
              ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
              ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              return "";
             }else{
              if (msgValue == null || msgValue.isEmpty()){
               ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("No Value");
              }
              else {
               if(${resourceEntityName}li.getA1xxuxxxbvxxxxxxxxxxvalue() !=""){
                ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(msgValue);
                this.setInstance(${resourceEntityName}li);
                superdotupdate();
               }
              }
              return "";
             }
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("make")+" "+ bundle.getString("permanent")+" "+bundle.getString("graphics")+" "+bundle.getString("error")+" "+e.getMessage(),""));
             return "";
            }  
    }
</#if>

public boolean isBitSet(Integer a, Integer n){ 
 if (a == null){
  a=0;
 }
 return (a & (1 << n)) != 0; 
}



<#assign prevEntry = " ">
<#foreach property in pojo.allPropertiesIterator>
<#if (property.name?length > eL)>
<#if !c2h.isCollection(property) && !c2h.isManyToOne(property)>
 <#if (property.name?length > 10)>
      <#if property.name?substring(10,11)=="i">
       <#assign prevEntry = "init">
      </#if>
 </#if>
</#if>
</#if>
</#foreach>


// set initCap via client, make it true now
        public boolean initCap() {
         //jay add logic to check client table if initCap is on or not
            return true;
        }



<#assign compositeKeyList="">
<#foreach property in pojo.allPropertiesIterator>
<#if (property.name?length > eL)>
 <#if c2j.isComponent(property)>
  <#foreach componentProperty in property.value.propertyIterator>
  <#if (componentProperty.name?length > pL)>
   <#assign compositeKeyList= compositeKeyList+componentProperty.name?substring(12) >
  </#if>
  </#foreach>
 <#else>
  <#if c2h.isManyToOne(property) >
    <#assign parentPojo = c2j.getPOJOClass(cfg.getClassMapping(property.value.referencedEntityName))>
    <#assign parentName = util.lower(parentPojo.shortName)>
    <#foreach parentProperty in parentPojo.allPropertiesIterator>
    <#if (parentProperty.name?length > eL)>
     <#-- manytoone ie only foreign properties here rest in editproperty.ftl, parentName ${parentName} parentpojoid ${parentPojo.identifierProperty.name} parentPropName ${parentProperty.name} -->
     <#if !c2h.isCollection(parentProperty) && !c2h.isManyToOne(parentProperty)>
      <#if parentPojo.isComponent(parentProperty)>
       <#-- extract the property whose value is keyed in among the composite keys to show in combo box -->
       <#assign parentKeyName="not_initialized_zzzzzzzzzzzzzzxxxx">
       <#assign parentKeyName2="not-initialized-zzzzzzzzzzzzzzxxxx">
       <#assign parentKeyName3="not-initialized-zzzzzzzzzzzzzzxxxx">
       <#assign parentKeyName4="not-initialized-zzzzzzzzzzzzzzxxxx">
       <#foreach componentProperty in parentProperty.value.propertyIterator>
       <#if (componentProperty.name?length > eL) >
         <#-- composite componentProperty ${componentProperty}  -->
        <#if componentProperty.name.substring(pkS,pkE)= "k" | componentProperty.name.substring(pkS,pkE)= "n" | componentProperty.name.substring(pkS,pkE)= "s">
         <#assign parentKeyName =  "id."+componentProperty.name >
         <#-- composite componentProperty ${componentProperty} parentKeyName ${parentKeyName} -->
        <#else>
         <#if parentKeyName2?substring(0,3) == "not">
          <#assign parentKeyName2 =  "id."+componentProperty.name >
          <#-- composite componentProperty ${componentProperty} parentKeyName2 ${parentKeyName2} -->
         <#else>
          <#if (parentKeyName3?substring(0,3) == "not") && (parentKeyName4?substring(0,3) == "not")  >
           <#assign parentKeyName3 =  "id."+componentProperty.name >
           <#-- composite componentProperty ${componentProperty} parentKeyName2 ${parentKeyName2} parentKeyName3 ${parentKeyName3} -->
          <#else>
           <#assign parentKeyName4 =  "id."+componentProperty.name >
           <#-- composite componentProperty ${componentProperty} parentKeyName2 ${parentKeyName2} parentKeyName4 ${parentKeyName4} -->
          </#if>
         </#if>
        </#if> 
       </#if>
       </#foreach>
      <#else>
       <#if (parentProperty.name?length > pL) >
        <#if keyAutoGen == "Y" >
         <#if parentProperty.name.substring(pkS,pkE)= "k" || parentProperty.name.substring(pkS,pkE)= "n">
          <#assign parentKeyName =  parentProperty.name >
          <#-- jay notcomposite parentKeyName ${parentKey
         <#else> 
          <#if parentProperty.name.equals(parentPojo.identifierProperty.name)>
           <#assign parentKeyName =  parentProperty.name >
           <#-- jay notcomposite parentKeyName ${parentKeyName} -->
          </#if>
         </#if>
        </#if>
      </#if>
     </#if>
     <#if c2h.isManyToOne(parentProperty)>
      <#assign parentParentPojo = c2j.getPOJOClass(cfg.getClassMapping(parentProperty.value.referencedEntityName))>
      /* parentProperty ${parentProperty} parentParentPojo ${parentParentPojo} */
      <#if parentParentPojo.isComponent(parentParentPojo.identifierProperty)>
       <#foreach componentProperty in parentParentPojo.identifierProperty.value.propertyIterator> 
        /* componentProperty ${componentProperty} */
       </#foreach>
      <#else>
      </#if>
     </#if>
    </#if>
    </#foreach>
    // compositekeylist is ${compositeKeyList}
    <#if (parentKeyName?length > pL) && (compositeKeyList != "") || parentKeyName?substring(0,3) = "id." || !compositeKeyList?contains(parentKeyName?substring(12)) >
     <#if (parentKeyName?length > pL) && (property.name?length > 8)  && !(parentKeyName?substring(0,3) = "id.") >
      //generated for non composite foreign fields
      <#if property.name?contains("By")>
        <#assign modpropertyName=parentName>
        public void validateAndSelect${parentKeyName?substring(12)?cap_first}${property.name?substring(eL)}(FacesContext context,UIComponent toValidate,Object value) {
         ${property.name}  = null;
      <#else>
       <#assign modpropertyName=property.name>
         public void validateAndSelect${parentKeyName?substring(12)?cap_first}(FacesContext context,UIComponent toValidate,Object value) {
            if (skipValidation){
             //extended persist closes the copied from entity so validation will fail and we dont need validation at this point
             return;
            }
            // set bcontinue to true if set false by showrunt() at start of txn, because of property being null
            // jay not all showrunt() validate, vendor txn does not why??
            if(${property.name} == null && bcontinue == false){
             bcontinue=true;
            }
            ${property.name}  = null;
      </#if>
            String enteredValue = (String) value;
            String jay = toValidate.getAttributes().get("required").toString();
            if (!jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){ 
             return;
            }
            if (jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_WARN,bundle.getString("${parentKeyName?substring(pL)}")+" "+ bundle.getString("no")+" "+ bundle.getString("value"),""));
             bcontinue=false;
             return;
            }
            urlIndex=urlName.indexOf(">>");
            if (urlIndex != -1){
             enteredValue=enteredValue.substring(0,urlIndex);
            }
            ${modpropertyName?cap_first} cc = ${modpropertyName}Home.getInstance();
	      try {
                       <#if menuAttributesp2 == "1R" || menuAttributesp2 == "1A" >  
                        List<${modpropertyName?cap_first}> results=null;
                        // include SYSTEM bundles   system blogs
                        if(owner2Code.equals(masterSiteCode)){
 			 results =  entityManager.createQuery("select cc from ${modpropertyName?cap_first} cc where cc.${parentKeyName} = :keyOfEntity AND (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 or cc.zzxxu2oxxhxxxxxxxxxxowner2='SYSTEM')")
				.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code).getResultList();
                        }else{
			 results =  entityManager.createQuery("select cc from ${modpropertyName?cap_first} cc where cc.${parentKeyName} = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code).getResultList();                      
                        }
                       <#else>
			 List<${modpropertyName?cap_first}> results =  entityManager.createQuery("select cc from ${modpropertyName?cap_first} cc where cc.${parentKeyName} = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code).getResultList();                      
                       </#if>     
                        if(!results.isEmpty()){
                            ${property.name} = results.get(0);
                            if (results.size()>1){
                             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("${parentKeyName?substring(pL)}")+" "+ bundle.getString("multiple")+" "+ bundle.getString("results")+", "+ bundle.getString("one")+" "+ bundle.getString("selected"),""));
                        
                            }           
                        }
                        else{
                         <#if menuAttributesp2 == "36" >
                          if (enteredValue.equals("all")){
                           return;
                          }
                         </#if>
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("${parentKeyName?substring(pL)}")+" "+ enteredValue+" "+bundle.getString("not")+" "+ bundle.getString("found")+", "+ bundle.getString("create")+" "+ bundle.getString("first"),""));
                         <#if menuAttributesp2 == "1R" >
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("cannot")+" "+bundle.getString("use")+" SYSTEM "+ bundle.getString("bundle"),""));
                         </#if> 
                                     return;                           
                        } 
                        if (${property.name} != null ) {
                             // that's fine - It should exist.
                             // check if selfreferencing foreign field
                           if(this.instance == null){
                            getInstance();
                            if(this.instance == null){//
                             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                              FacesMessage.SEVERITY_WARN,bundle.getString("${entityName?substring(eL)?cap_first}")+" "+bundle.getString("instance")+" "+ bundle.getString("empty")+", "+ bundle.getString("exit")+" "+ bundle.getString("and")+" "+ bundle.getString("try")+" "+ bundle.getString("again"),""));
                             return;
                            }
                           }
                         <#if parentName == componentName>
                          this.instance.set${parentName?cap_first}(${property.name});
                         <#else>
                           //${property.name} = ${parentName}Home.getDefinedInstance();
                          this.instance.set${property.name?cap_first}(${property.name});
                         </#if>              
                         /// check if atleast 1 detail persisted then assume a new item is being considered       
                         /// put a new flag to avoid query
                         ///if(trexuq233xwwqqhxxxxxcuquoteList.entityLessStatusDetailedList(trexuq233xwwqqhxxxxxcuquoteHome.instance.a0xxuobxbxxxxxxxxxxxsid,-1).size() ge 1 )
      <#if (entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci" || entityFunction=="cp" ||  entityFunction=="sh"
       || entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" ||  entityFunction=="sv"
       || entityFunction=="eo")> 
     </#if>
                         ///}                        
                         <#if entityFunction =="sh" && property.name?substring(efS,efE)="20" > 
                          // comes here only for non cart backoffice and no order shipcodefrompay exists
                          // if customer make sure customer has address and use billto as shipment if 
                          // billtosameasshipto. 

                         if(!this.instance.getD2xxugbrbvxxxxxxxxxxbilltosameasshipto()){
                           if (this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P") && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByShiptocode() ==null){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+ bundle.getString("shipment")+" "+ bundle.getString("address")+", "+ bundle.getString("empty"),""));
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("may")+" "+ bundle.getString("set")+" "+ bundle.getString("shipment")+" "+ bundle.getString("address")+" "+ bundle.getString("same")+" "+ bundle.getString("as")+" "+ bundle.getString("billing"),""));

                            bcontinue=false;
                            return;                           
                           }
                           if (this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P")
                            && (this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByShiptocode() == null || this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByShiptocode().getB1pxusa1bvxxxxxxxxxxaddrl1() !=null) && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByShiptocode().getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+ bundle.getString("shipment")+" "+ bundle.getString("address")+" "+ bundle.getString("line")+" 1 "+ bundle.getString("empty"),""));
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("may")+" "+ bundle.getString("set")+" "+ bundle.getString("shipment")+" "+ bundle.getString("address")+" "+ bundle.getString("same")+" "+ bundle.getString("as")+" "+ bundle.getString("billing"),""));
                            bcontinue=false;
                            return;                           
                           }
                         //mailto sameas shipto
                         }else{
                           String poTerm= null;
                           if(${cuinvoiceEntityName} !=null && ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}() !=null){
                            poTerm=  ${cuinvoiceEntityName}.get${cuordersEntityName?cap_first}().getC2xxcxxxbv09xxxxxxxxterms();
                           }
                           if (this.instance.getC2xxuxxrbv51xxxxxxxxtype()!=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().equals("P")  && poTerm !=null && !poTerm.contains("Pickup") && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode() ==null)
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+ bundle.getString("billing")+" "+ bundle.getString("address")+", "+ bundle.getString("empty"),""));
                            //bcontinue=false;
                            //return;                           
                           }//we allways need billing address unless pickup
                           if (this.instance.getC2xxuxxrbv51xxxxxxxxtype() !=null && !this.instance.getC2xxuxxrbv51xxxxxxxxtype().contains("P")   && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode() !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode().getB1pxusa1bvxxxxxxxxxxaddrl1() !=null && this.instance.get${customerEntityName?cap_first}().get${addressEntityName?cap_first}ByMailtocode().getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                              FacesMessage.SEVERITY_WARN,bundle.getString("customer")+" "+ bundle.getString("billing")+" "+ bundle.getString("address")+" "+ bundle.getString("line")+" 1 "+ bundle.getString("empty"),""));
                            //bcontinue=false;
                            //return;                           
                           }
                          // if customer or vendor then set associated account, if any
                         <#elseif entityFunction =="cp" && property.name?substring(efS,efE)="20"> 
                           if(${property.name}.get${accountEntityName?cap_first}() != null){
                            ${accountEntityName}Home.setLast${accountEntityName}(${property.name}.get${accountEntityName?cap_first}().getA0xxukwxbvxxxxxxxxxxaccount()); 
                           }
                         <#elseif (entityFunction == "vp" ) && property.name?substring(efS,efE)="30" >
                           if(${property.name}.get${accountEntityName?cap_first}() != null){
                            ${accountEntityName}Home.setLast${accountEntityName}(${property.name}.get${accountEntityName?cap_first}().getA0xxukwxbvxxxxxxxxxxaccount()); 
                           }
                          <#else>
                         </#if>
                           //if some other validation already failed, do not reset it 
                           if(bcontinue){
                            bcontinue=true;
                           }
                         }//end of shiptobill check
	      } catch (NoResultException nre) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("${parentKeyName?substring(eL)?cap_first}"),""));
                 throw new ValidatorException(msg);
              }
         }
         // check again if selfreferencing foreign field ${parentName} ${componentName} jay may not be needed check edit.ftl
        <#if parentName == componentName>
         String jay;
	    public String get${parentName?substring(eL)?cap_first}AsParent() {
		return this.jay;
	    }
	    public void set${parentName?substring(eL)?cap_first}AsParent(String jay) {
		this.jay = jay;
	    }
        </#if>
     <#else>
     // jay added logic for composite properties which could also have by in it
      <#if parentKeyName?substring(0,3) == "id." >
       <#if property.name?contains("By")>
        <#assign modpropertyName=parentName>
	   public void validateAndSelect${parentKeyName?substring(12)?cap_first}${property.name?substring(eL)}(FacesContext context,UIComponent toValidate,Object value) {
             ${property.name}  = null;
       <#else>
        <#assign modpropertyName=property.name>
	   public void validateAndSelect${parentKeyName?substring(15)?cap_first}${property.name?substring(eL)}(FacesContext context,UIComponent toValidate,Object value) {
             ${property.name}  = null;
       </#if>
            String enteredValue = (String) value;
            String jay = toValidate.getAttributes().get("required").toString();
            if (!jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
             return;
            }
            if (jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_WARN,bundle.getString("${parentKeyName?substring(pL)}")+" "+ bundle.getString("no")+" "+ bundle.getString("value"),""));
             bcontinue=false;
             return;
            }
            urlIndex=urlName.indexOf(">>");
            if (urlIndex != -1){
             enteredValue=enteredValue.substring(0,urlIndex);
            }
            ${modpropertyName?cap_first} cc = ${modpropertyName}Home.getInstance();
	      try {
			${modpropertyName?cap_first} ${property.name} = (${modpropertyName?cap_first}) entityManager.createQuery("select cc from ${modpropertyName?cap_first} cc where cc.${parentKeyName} = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code).getSingleResult();
			if (${propertyName} != null ) {
			     // that's fine - It should exist.
                 <#if parentName == componentName>
			   this.instance.set${parentName?cap_first}(${property.name});
                 <#else>
			   this.instance.set${parentName?cap_first}(${property.name});
                 </#if>
		}
	      } catch (NoResultException nre) {
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_WARN,bundle.getString("${parentKeyName?substring(pL)}")+" "+ bundle.getString("not")+" "+ bundle.getString("selected"),""));
		   throw new ValidatorException(msg);
		}
	 }

      </#if>
     </#if>
    <#else>
     <#if compositeKeyList == "fieldnametablenamedbcode" >
	  public void set${parentPojo.identifierProperty.name?cap_first}(Object value) {
		Integer sidValue = (Integer) value;
			if (sidValue == null) {
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("${parentPojo?substring(eL)?cap_first}")+" "+ bundle.getString("not")+" "+ bundle.getString("selected"),""));

			 throw new ValidatorException(msg);
			}
		     ${gentableEntityName}Home.setNxxxiha3rgentableA0xxuobxbxxxxxxxxxxxsid(sidValue);
		     //${parentName}Home.set${parentName?cap_first}${parentPojo.identifierProperty.name?cap_first}(sidValue);


	  }

	public void validateAndSelectTablename(FacesContext context,
			UIComponent toValidate, Object value) {
		String enteredValue = (String) value;
            String jay = toValidate.getAttributes().get("required").toString();
            if (!jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
             return;
            }
            if (jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("table")+" "+ bundle.getString("name")+" "+ bundle.getString("no")+" "+ bundle.getString("value"),""));
             bcontinue=false;
            }
             ${gentableEntityName}  = null;
		${gentableEntityName?cap_first} cc = ${gentableEntityName}Home.getInstance();
		try {
			${gentableEntityName?cap_first} ${gentableEntityName} = (${gentableEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${gentableEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxtablename = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code)
					.getSingleResult();
			if (${gentableEntityName} != null) {
				//throw new ValidatorException(new FacesMessage("Name already exists"));
				// that's fine - It should exist.
			}
		} catch (NoResultException nre) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("gentable")+" "+ bundle.getString("not")+" "+ bundle.getString("selected"),""));


			 throw new ValidatorException(msg);
		}
		// now simulate as if came by select from list ie xxx.page parameter value setting
		// this will do setId(xx) ie set the primrary key(s) in the instance
          <#if keyAutoGen == "Y" >
		${gentableEntityName}Home.set${gentableEntityName?cap_first}A0xxukxxbvxxxxxxxxxxtablename(enteredValue);
          <#else>
		${gentableEntityName}Home.get${gentableEntityName?cap_first}Id().setA0xxuobxbxxxxxxxxxxxsid(enteredValue);
		${gentableEntityName}Home.get${gentableEntityName?cap_first}Id().setA1xxudbxbvxxxxxxxxxxdbcode(nxxxiha2rgendb.getA0xxukxxbvxxxxxxxxxxdbname());
          </#if>
		// now call wire()  as if it was called via xxxEdit.page. wire() will get the instance of this entity using the Id
		// and sets the column value to the foreign key 
		// seems multiple wire() causes problem
		wire();
	}
     <#else>
      //${compositeKeyList}
     </#if>
    </#if>
  </#if>
 </#if>
</#if>
</#foreach>

<#if entityKeyFieldName !="">
  <#if menuAttributesp2 == "1M" || menuAttributesp2 == "1N">
public boolean duplicateClobBlobExists(String entityName,String key,String qualifier,int sequence){
 //clobblob allows same key but different qualifier or seq. example multiple images for an item
 //should be used before calling superdotPersist
	try {
                   if (entityName.equals("blobdata")){
                        List<${componentName?cap_first}> results= entityManager
                         .createQuery(
                          "select cc from ${componentName?cap_first} cc where lower(cc.${entityKeyFieldName}) = :keyOfEntity   AND cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier AND cc.a3xxexnsbvxxxxxxxxxxsequence=:sequence AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                          .setParameter("keyOfEntity", key).setParameter("qualifier", qualifier).setParameter("sequence", sequence).setParameter("owner2", owner2Code)
                          .getResultList();
                        if(!results.isEmpty()){
                         return true;
                        }else{
                         return false;
                        }
                   }
                   if (entityName.equals("clobdata")){
                        List<${componentName?cap_first}> results= entityManager
                         .createQuery(
                          "select cc from ${componentName?cap_first} cc where lower(cc.${entityKeyFieldName}) = :keyOfEntity   AND cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier AND cc.a3xxexnsbvxxxxxxxxxxsequence=:sequence AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                          .setParameter("keyOfEntity", key).setParameter("qualifier", qualifier).setParameter("sequence", sequence).setParameter("owner2", owner2Code)
                          .getResultList();
                        if(!results.isEmpty()){
                         return true;
                        }else{
                         return false;
                        }
                   }
                   return false;
                  } catch (NoResultException e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_WARN,bundle.getString("key")+" "+ key+" "+bundle.getString("error")+" "+bundle.getString("in")+" "+bundle.getString("key")+" "+bundle.getString("exists")+" "+bundle.getString("check")+", "+ bundle.getString("cause")+" "+ e.getMessage(),""));

                   return true;
                  }

 
}
</#if>

public boolean keyExists(String key){
                //key has companyName or lastname+random or companyName or lastname+firstName+random, so if say first 8 chrs match to existing key then possible dupl
                // first 8 chosen rather than 16 to avoid short last and first names having random ss in key 
                // but need to check farther using email if present or phone # 
                // in case of import we need more checking
                String jay="";
                <#if menuAttributesp2 != "1L" >
                 key=key.substring(0,7).toLowerCase();
                </#if>
                 ${componentName?cap_first} cc = this.getInstance();
	try {
                        List<${componentName?cap_first}> results= entityManager
                         .createQuery(
                          "select cc from ${componentName?cap_first} cc where lower(cc.${entityKeyFieldName}) like :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                          .setParameter("keyOfEntity", key+"%").setParameter("owner2", owner2Code)
                          .getResultList();
                        if(!results.isEmpty()){
                         // loop through and pick most likely one ie check last name and first name
                         for (${componentName?cap_first} ${componentName}k : results) {
                          if (${componentName}k != null) {
                           // cannot be sure yet can add other phones later
                           <#if menuAttributesp2 == "20">
                           if(this.initCap()){
                            jay=this.instance.getC1xxuslnbvixxxxxxxxxlastname(); 
                            this.instance.setC1xxuslnbvixxxxxxxxxlastname(Character.toUpperCase(jay.charAt(0)) + jay.substring(1));
                            this.instance.setC2xxu2fnbvixxxxxxxxxfirstname(Character.toUpperCase(this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().charAt(0)) + this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().substring(1)) ;
                           }
                           if(this.instance.getC1xxuslnbvixxxxxxxxxlastname().equals(${componentName}k.getC1xxuslnbvixxxxxxxxxlastname()) &&
                            this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().equals(${componentName}k.getC2xxu2fnbvixxxxxxxxxfirstname()) && 
                            (this.instance.getQ4xxhxxxbv24xxxxxxxximailaddr().equals(${componentName}k.getQ4xxhxxxbv24xxxxxxxximailaddr()) &&
                             this.instance.getP2xxh5phbv27xxxxxxxxphoneh().equals(${componentName}k.getP2xxh5phbv27xxxxxxxxphoneh()))){
                            duplDropped=duplDropped+1;
                            return true; 
                           }
                           </#if>
                           <#if menuAttributesp2 == "30">
                           if(this.initCap()){
                            this.instance.setB3xxuslnbvxxxxxxxxxxlastname(Character.toUpperCase(this.instance.getB3xxuslnbvxxxxxxxxxxlastname().charAt(0)) + this.instance.getB3xxuslnbvxxxxxxxxxxlastname().substring(1));
                            this.instance.setB4xxu2fnbvxxxxxxxxxxfirstname(Character.toUpperCase(this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().charAt(0)) + this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().substring(1));
                           }
                           if(this.instance.getB3xxuslnbvxxxxxxxxxxlastname().equals(${componentName}k.getB3xxuslnbvxxxxxxxxxxlastname()) &&
                            this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().equals(${componentName}k.getB4xxu2fnbvxxxxxxxxxxfirstname()) && 
                            (this.instance.getN4xxhxxrbv24xxxxxxxximailaddr().equals(${componentName}k.getN4xxhxxrbv24xxxxxxxximailaddr()) ||
                            this.instance.getM2xxh5phbv27xxxxxxxxphoneh().equals(${componentName}k.getM2xxh5phbv27xxxxxxxxphoneh()))){
                            duplDropped=duplDropped+1;
                            return true; 
                           }
                           </#if>
                           <#if menuAttributesp2 == "40">
                           if(this.initCap()){
                            this.instance.setB3xxuslnbvixxxxxxxxxlastname(Character.toUpperCase(this.instance.getB3xxuslnbvixxxxxxxxxlastname().charAt(0)) + this.instance.getB3xxuslnbvixxxxxxxxxlastname().substring(1));
                            this.instance.setB4xxu2fnbvxxxxxxxxxxfirstname(Character.toUpperCase(this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().charAt(0)) + this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().substring(1));
                            }
                            if(this.instance.getB3xxuslnbvixxxxxxxxxlastname().equals(${componentName}k.getB3xxuslnbvixxxxxxxxxlastname()) &&
                             this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().equals(${componentName}k.getB4xxu2fnbvxxxxxxxxxxfirstname()) && 
                             (this.instance.getN4xxhxxrbv24xxxxxxxximailaddr().equals(${componentName}k.getN4xxhxxrbv24xxxxxxxximailaddr()) ||
                             this.instance.getM2xxh4phbv27xxxxxxxxphoneh().equals(${componentName}k.getM2xxh4phbv27xxxxxxxxphoneh()))){
                             duplDropped=duplDropped+1;
                             return true; 
                            }
                            </#if>
                            return false;
                           }
                         }
			}
                       } catch (NoResultException nre) {
                         // that's fine - It should not exist.
                         // added extra logic to check other fields like say email exist 
                         <#if menuAttributesp2 == "20">
                          if(this.initCap()){
                           jay=this.instance.getC1xxuslnbvixxxxxxxxxlastname(); 
                           this.instance.setC1xxuslnbvixxxxxxxxxlastname(Character.toUpperCase(jay.charAt(0)) + jay.substring(1));
                           this.instance.setC2xxu2fnbvixxxxxxxxxfirstname(Character.toUpperCase(this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().charAt(0)) + this.instance.getC2xxu2fnbvixxxxxxxxxfirstname().substring(1)) ;
                          }
                         if (importChosen ){
                          // in case names are different but email may be existing in data base
                          if(eMailExists(this.instance.getQ4xxhxxxbv24xxxxxxxximailaddr())){
                           duplDropped=duplDropped+1;
                           return true;
                          }
                         }
                         <#elseif menuAttributesp2 == "30">
                          if(this.initCap()){
                           this.instance.setB3xxuslnbvxxxxxxxxxxlastname(Character.toUpperCase(this.instance.getB3xxuslnbvxxxxxxxxxxlastname().charAt(0)) + this.instance.getB3xxuslnbvxxxxxxxxxxlastname().substring(1));
                           this.instance.setB4xxu2fnbvxxxxxxxxxxfirstname(Character.toUpperCase(this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().charAt(0)) + this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().substring(1));
                          }
                         if (importChosen ){
                          // in case names are different but same email do more checking
                          if(eMailExists(this.instance.getN4xxhxxrbv24xxxxxxxximailaddr())){
                           duplDropped=duplDropped+1;
                           return true;
                          }
                         }
                         <#elseif menuAttributesp2 == "40">
                          if(this.initCap()){
                           this.instance.setB3xxuslnbvixxxxxxxxxlastname(Character.toUpperCase(this.instance.getB3xxuslnbvixxxxxxxxxlastname().charAt(0)) + this.instance.getB3xxuslnbvixxxxxxxxxlastname().substring(1));
                           this.instance.setB4xxu2fnbvxxxxxxxxxxfirstname(Character.toUpperCase(this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().charAt(0)) + this.instance.getB4xxu2fnbvxxxxxxxxxxfirstname().substring(1));
                          }
                         if (importChosen ){
                          // in case names are different but same email do more checking
                          if(eMailExists(this.instance.getN4xxhxxrbv24xxxxxxxximailaddr())){
                           duplDropped=duplDropped+1;
                           return true;
                          }
                         }
                         </#if>
                          
                } catch ( Exception e){
                  // error consider as dupilcate and skip   
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("key")+" "+ key+" "+bundle.getString("error")+" "+bundle.getString("in")+" "+bundle.getString("key")+" "+bundle.getString("exists")+" "+bundle.getString("check")+", "+ bundle.getString("cause")+" "+ e.getMessage(),""));

                  return true;
                }
                return false;

}
</#if>
<#if (menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" ) >
public boolean eMailExists(String eMail){
               ${componentName?cap_first} ${componentName}k  = null;
 	       try {
                <#if menuAttributesp2 == "20">
			${componentName}k = (${componentName?cap_first}) entityManager
					.createQuery(
							"select cc from ${componentName?cap_first} cc where cc.Q4xxhxxxbv24xxxxxxxximailaddr = :eMail AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("eMail", eMail).setParameter("owner2", owner2Code)
					.getSingleResult();
			if (${componentName}k != null) {
                         return true;
			}
                <#elseif menuAttributesp2 == "30">
			${componentName}k = (${componentName?cap_first}) entityManager
					.createQuery(
							"select cc from ${componentName?cap_first} cc where cc.N4xxhxxrbv24xxxxxxxximailaddr = :eMail AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("eMail", eMail).setParameter("owner2", owner2Code)
					.getSingleResult();
			if (${componentName}k != null) {
                         return true;
			}
                <#elseif menuAttributesp2 == "40">
			${componentName}k = (${componentName?cap_first}) entityManager
					.createQuery(
							"select cc from ${componentName?cap_first} cc where cc.N4xxhxxrbv24xxxxxxxximailaddr = :eMail AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("eMail", eMail).setParameter("owner2", owner2Code)
					.getSingleResult();
			if (${componentName}k != null) {
                         return true;
			}
                </#if>
		} catch (NoResultException nre) {
                  //ok
                } catch (NonUniqueResultException e) {
                  // exists
                         return true;
                } catch ( Exception e){
                  // error consider as dupilcate and skip   
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("email")+" "+ eMail+" "+bundle.getString("error")+" "+ bundle.getString("cause")+" "+ e.getMessage(),""));

                  return true;
                }
                return false;
}

</#if>

<#if scheduleStartDateField !=""  >
 //jay remove hard coded property values
	public void validateAndSetseDates() {
		calendare.setTime(this.instance.getB5gxdxsdbvxxxxxxxxxxsdatet());
		if (this.instance.getB7xxexshbvxxxxxxxxxxstimeh() > 0) {
			calendare.set(Calendar.HOUR, this.instance
					.getB7xxexshbvxxxxxxxxxxstimeh());
		}
		if (this.instance.getB8bx0xsmbvxxxxxxxxxxstimem() > 0) {
			calendare.set(Calendar.MINUTE, this.instance
					.getB8bx0xsmbvxxxxxxxxxxstimem());
		}
		if (this.instance.getB8extxsabvxxxxxxxxxxstimeampm() == true) {
			calendare.set(Calendar.AM_PM, Calendar.AM);
		}
		if (this.instance.getB8extxsabvxxxxxxxxxxstimeampm() == false) {
			calendare.set(Calendar.AM_PM, Calendar.PM);
		}
         //  minuteNow = calendare.get(Calendar.MINUTE);
	//	calendare.add(Calendar.MINUTE,(15-(minuteNow % 15)) );
		this.instance.setB5gxdxsdbvxxxxxxxxxxsdatet(calendare.getTime());
                String ssd19=new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(this.instance.getB5gxdxsdbvxxxxxxxxxxsdatet());
            <#if menuAttributesp2 != "9A" && menuAttributesp2 != "9B">
             <#if keyAutoGen == "Y" >

		this.instance.setB2xxuxsxbvxxxxxxxxxxssdatet(ssd19);
             <#else>
		get${scheduleEntityName?cap_first}Id().setB2xxuxsxbvxxxxxxxxxxssdatet(ssd19);
             </#if>
            </#if>
 
		calendare.setTime(this.instance.getB5gxdxsdbvxxxxxxxxxxsdatet());
		// assign duration & unit  fields jay remove hardcoded property name
                 if (this.instance.getB5xxexdhbvxxxxxxxxxxdurationh()>0 ){
                   calendare.add(Calendar.HOUR,this.instance.getB5xxexdhbvxxxxxxxxxxdurationh());
                 }
                 if (this.instance.getB6xx0xdmbvxxxxxxxxxxdurationm()>0 ){
                   calendare.add(Calendar.MINUTE,this.instance.getB6xx0xdmbvxxxxxxxxxxdurationm());
                 }
		this.instance.setB8xxceedbvxxxxxxxxxxedatet(calendare.getTime());

	}

       <#if menuAttributesp2 != "9A" && menuAttributesp2 != "9B" && (activityEntityName?? && activityEntityName?length > eL)>
	public void validateTodoActivityNotnull() {
        <#if keyAutoGen == "Y" >
	 if ((this.instance.get${activityEntityName?cap_first}() != null )
				|| (this.instance.getB1xxhszsbv35xxxxxxxxdescript() != null && this.instance.getB1xxhszsbv35xxxxxxxxdescript().length() != 0 ) ) {
	  bcontinue = true;
         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("both")+" "+ bundle.getString("no")+" "+ bundle.getString("values"),""));
          bcontinue=false;
       
        }
        <#else>
        </#if>
       }
     </#if>
</#if>


<#if (pzcodeField != "")  >
//${pzcodeField}
	public void validatepzcodeField${pzcodeField?substring(12)?cap_first}(FacesContext context,UIComponent toValidate,Object value) {
            String enteredValue = (String) value;
            if ((enteredValue.trim().length() != 0) && (enteredValue.trim().length() != 6)) {
             throw new ValidatorException(new FacesMessage("Not space or six characters"));
            }
    
	}

</#if>
<#if (entityKeyFieldName !="" && entityKeyFieldName?length > pL)  >
//${entityName?lower_case}
	public void validateKeyDuplicate${entityKeyFieldName?substring(pL)?cap_first}(FacesContext context,UIComponent toValidate,Object value) {

            String enteredValue = (String) value;
            ${entityName?lower_case?cap_first} cc = this.getInstance();
            if (this.isManaged()){
             return;
            }
            // if composite natural key like in resource we need multiple field check
            // rate table do not check via jsf
            // check for dup stepname, if dupl and step also dupl then reject in persist logic
            // jay to add
 
	      try {
                      <#if menuAttributesp2 == "1R" >
                        if(this.instance.get${resource_bundleEntityName?cap_first}() == null){
                         return;
                        }
                        int bundleSid=this.instance.get${resource_bundleEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();
			${entityName?lower_case?cap_first} cc1 = (${entityName?lower_case?cap_first}) entityManager.createQuery("select cc from ${entityName?lower_case?cap_first} cc where cc.${entityKeyFieldName} = :keyOfEntity AND cc.${resource_bundleEntityName}.a0xxuobxbxxxxxxxxxxxsid=:bundleSid AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code).setParameter("bundleSid", bundleSid).getSingleResult();

                      <#else>
			${entityName?lower_case?cap_first} cc1 = (${entityName?lower_case?cap_first}) entityManager.createQuery("select cc from ${entityName?lower_case?cap_first} cc where cc.${entityKeyFieldName} = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredValue).setParameter("owner2", owner2Code).getSingleResult();
                      </#if>
			if (cc1 != null ) {
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            FacesMessage.SEVERITY_WARN,bundle.getString("entered")+" "+bundle.getString("key")+" "+ bundle.getString("already")+" "+ bundle.getString("exists"),""));

			 throw new ValidatorException(msg);

			     // that's bad - It should not exist if add ie not managed
			}
	      } catch (NoResultException nre) {
		// Ok		throw new ValidatorException(new FacesMessage("Does not exist"));
              } catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("duplicate")+" "+bundle.getString("key")+" "+bundle.getString("check")+" "+bundle.getString("failed")+" " + e.getMessage(),""));
                throw new ValidatorException(msg);
              }

	}

</#if>
<#if entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci"  || entityFunction=="cp" || entityFunction=="sh"   > 

    /**
    * The following method creates details (children)
    * @param args Unused.
    * @return whether detail was created true or false.
    * item quantity has the stock qty and temquantity holds the qty ordered
    * @exception Application detail instance creation error.
    * called by showtemprunt
    * @see 
    * 
    */
        public boolean createCdetailsetValues() {
          String cdiscT="";
          if (!bcontinue){
             return bcontinue;
           }
           <#if entityFunction=="cq" >
           // detail instance is used because it will persist individually, parent gets overridden
           tShipCode= ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZ9xxtxsolxxxxxxxxxxxshipoption();
           /* applied again using cuinvoiceEtcItemDetailsEntityName not home instance */
           detailMis=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZcxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzlxxavxxxxxxxxxxdelivchrg();
           detailTax1=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}();
           </#if>
           <#if entityFunction=="co" >
           tShipCode= ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZ9xxtxsolxxxxxxxxxxxshipoption();
           detailMis=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZcxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzlxxavxxxxxxxxxxdelivchrg();
           </#if>
           <#if entityFunction=="ci" >
           detailMis=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZcxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzlxxavxxxxxxxxxxdelivchrg();
           </#if>
           <#if entityFunction=="cp" >
            //payments have amountin,deliv n misc crg in details, so save them first
            detailbaseamt=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin();
            if(cartPoStatus.equals("e")){
             detailbaseamt=amountIn;// if from copynsave use invoice detail value, not entered amt
             // add logic to use both to override/adjust invoice values 
            }
            detailMis=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZaxxzmxxavxxxxxxxxxxmiscchrg();
            detailDel=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().getZ9xxzlxxavxxxxxxxxxxdelivchrg();
            //
            detailTax1=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}();
            detailTax2=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}();
            detailTax3=${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}();
           </#if>
           // clear instance to make id null and avoid detach entity(ie already has id) persist, needed before getDefinedInstance 
           ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
           ${cuinvoiceEtcItemDetailsEntityName} = ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance();	
	   if (${cuinvoiceEtcItemDetailsEntityName} == null) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,bundle.getString("details")+" "+ bundle.getString("could")+" "+bundle.getString("not")+" "+bundle.getString("be")+" "+bundle.getString("created"),""));
			bcontinue = false;
                        return bcontinue;
           }else {
	    ${cuinvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);//

            <#if entityFunction=="cq">
              if (this.instance.get${itemEntityName?cap_first}() == null){
		//	moved to persist  //FacesMessages.instance().add("Item not selected yet");
	        //		bcontinue = false;
                return bcontinue;
              } 
              ${cuinvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
              if (cartPoStatus.equals("e")){
               ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
	       ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(newOrdPrice);
              }else{
	      ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemPriceField?cap_first}());
               //needed for all
               ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZ9xxtxsolxxxxxxxxxxxshipoption(tShipCode);
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZcxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzlxxavxxxxxxxxxxdelivchrg(detailDel);


              }
              // if user did not select any checkbox for shipoption
              // need to add validate logic re what is allowed based on item shipcode
              if(${itemEntityName}.getC3fbuxscbvxxxxxxxxxxshipcode().contains("X")){
               ${cuinvoiceEtcItemDetailsEntityName}.setZ9xxtxsolxxxxxxxxxxxshipoption("X");
              }else{
               if(${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption() == null || ${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption().isEmpty()){
                ${cuinvoiceEtcItemDetailsEntityName}.setZ9xxtxsolxxxxxxxxxxxshipoption("S");
               }
              }
            <#elseif entityFunction=="sh" >
              if (${itemEntityName} == null) {
		//	moved to persist  //FacesMessages.instance().add("Item not selected yet");
	        //		bcontinue = false;
                return bcontinue;
              } 
                 // shipment price field is for shipment cost not item price
                 if (cartPoStatus.equals("e")){
                  ${cuinvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
                  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  //${cuinvoiceEtcItemDetailsEntityName}.setZmxxzzfxhhxxxxxxxxxxstatusfl(mshipped);// later
                  //${cuinvoiceEtcItemDetailsEntityName}.setZ5xxuxxrbvxxxxxxxxxxcpono(mshipped);
                  if(this.instance.getTrexuq244xwwqqhxxxxxcuorders() !=null){
                   ${cuinvoiceEtcItemDetailsEntityName}.setZ5xxuxxrbvxxxxxxxxxxcpono(this.instance.getTrexuq244xwwqqhxxxxxcuorders().getA0xxuobxbxxxxxxxxxxxsid());
                  }
                  if(this.instance.get${cuinvoiceEntityName?cap_first}() !=null){
                   ${cuinvoiceEtcItemDetailsEntityName}.setZ6xxuxxrbvxxxxxxxxxxinvoice(this.instance.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
                  }
                 //
                 }else{
                  ${cuinvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});//
                  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  // recalShippingCost returns shipping cost for an item in detailDel
                  recalShippingCost();
                  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(detailDel);
                 }

            <#elseif entityFunction=="co" >
                // can come from extended_persist ie copied entity or from regular persist ie selected entity
                // if from extended then item was already copied from detail we dont need to make sure that this instance has the item entity set before coming here
                if (this.instance.get${itemEntityName?cap_first}() == null){
                 return bcontinue;
                }else{
                 ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                } 
                //added getter/setter to set these values from R3RestClient
                ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZ9xxtxsolxxxxxxxxxxxshipoption(tShipCode);
                ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZcxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
                ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzlxxavxxxxxxxxxxdelivchrg(detailDel);

                // need to copy item price as it is used in showrunt, 
                // only shoppingcart/order supports coupon, sale but quote,order etc all supports price override
                if(!cartPoStatus.equals("e")){
                 cdisc=customIdentity.getDiscountValue();
                 cdiscT=customIdentity.getDiscountType();
                 cselp=fpxxfq1a5xwwqqhxxxxxitem.getB8fbzpxxbvxxxxxxxxxxselprice();
                 if(cdiscT.equals("DC%")){
                  cdisc=cselp.multiply(cdisc).divide(new BigDecimal("100.00"));
                 }
                 newOrdPrice=cselp.subtract(cdisc);
                }//else newOrdPrice was set in extended_persist
	        ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(newOrdPrice);
                 // cartorder does not have entered quantity in orderdetails, so put it there
                 if ((this.instance.getY9xxcxxxbv10xxxxxxxxtype() != null && this.instance.getY9xxcxxxbv10xxxxxxxxtype().equals("cart")) && (cartPoStatus.equals("u") || cartPoStatus.equals("e") || cartPoStatus.equals("o") || cartPoStatus.equals("c"))){
                  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  if(this.restEntity){
                   ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  }else{
                   ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  }
                 }else{
                 //copynsave does not have entered quantity in orderdetails, so put it there
                  if(cartPoStatus.equals("e")){
                   ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  }else{
                   // backoffice orders type also null
                   ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  }
                 }
                ${cuinvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	        ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsUnitFieldName?cap_first}(${itemEntityName}.get${itemUnitField?cap_first}());
                newOrdPrice=cselp.subtract(cdisc);

               if(${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption() == null || ${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption().isEmpty()){
                ${cuinvoiceEtcItemDetailsEntityName}.setZ9xxtxsolxxxxxxxxxxxshipoption("S");
               }
               if (${customerEntityName} == null) {
                if (this.instance.get${customerEntityName?cap_first}() != null){
                 //from cartOrder
                 ${customerEntityName}=this.instance.get${customerEntityName?cap_first}();
                 ${customerEntityName}Home.clearInstance();
                 ${customerEntityName}Home.setInstance(${customerEntityName});
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)}")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));

			 bcontinue = false;
                 return bcontinue;
                }
               }
            <#elseif entityFunction=="ci" >
                // can come from extended_persist ie copied entity or from regular persist ie selected entity
                // if from extended we need to make sure that this instance has the item entity set before coming here
             <#if keyAutoGen == "Y" >
              if (this.instance != null && this.instance.getA0xxuncibvxxxxxxxxxxinvoice() != null){
             <#else>
              if (this.instance != null && this.instance.getId().getA0xxuncibvxxxxxxxxxxinvoice() != null){
             </#if>
               // cuorder means came from copy n save, but nothing spcl here except if e ie extended
              }
              if (${itemEntityName} == null) {
		//	moved to persist  //FacesMessages.instance().add("Item not selected yet");
	        //		bcontinue = false;
                return bcontinue;
              }else{
                 if (cartPoStatus.equals("e")){
                  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                 }else{
                  // needed for all
                  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                 }
              }
              // was getting doubled
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZcxxzmxxavxxxxxxxxxxmiscchrg(new BigDecimal("0.0"));
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzlxxavxxxxxxxxxxdelivchrg(new BigDecimal("0.0"));
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZcxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzlxxavxxxxxxxxxxdelivchrg(detailDel);

              ${cuinvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	      ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsUnitFieldName?cap_first}(${itemEntityName}.get${itemUnitField?cap_first}());
              if (cartPoStatus.equals("e")){
	       ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(newOrdPrice);
              }else{
	       ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemPriceField?cap_first}());
              }
            <#elseif entityFunction=="cp" >
              //detailbaeamt saved above
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZ6xxzxxxavxxxxxxxxxxamountin(detailbaseamt);
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZaxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
              ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZ9xxzlxxavxxxxxxxxxxdelivchrg(detailDel);
              //${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZgxxzlpxxvxxxxxxxxxxlinetotl(detailbaseamt);// linetotl not applicapable if no invoice
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().set${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}(detailTax1);
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().set${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}(detailTax2);
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().set${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}(detailTax3);
               ${cuinvoiceEtcItemDetailsEntityName}Home.getInstance().setZgxxzlpxxvxxxxxxxxxxlinetotl(detailLt);// total referes to invoice totl,

             <#if keyAutoGen == "Y" >
              if (${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.getA0xxuncibvxxxxxxxxxxinvoice() != null){
               // no item for payment
             <#else>
              if (${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.getId().getA0xxuncibvxxxxxxxxxxinvoice() != null){
             </#if> 
              }
              else { 
              }
            </#if>
           }

		return bcontinue;

	}
   <#if  entityFunction == "cq" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateCdetailsetValues() {
	    if (!bcontinue){
             return bcontinue;
            }

            xoxxuq2c4xwwqqhxxxxxcuqdetails = xoxxuq2c4xwwqqhxxxxxcuqdetailsHome.getInstance();	
            if (xoxxuq2c4xwwqqhxxxxxcuqdetails == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("details")+" "+ bundle.getString("could")+" "+bundle.getString("not")+" "+bundle.getString("be")+" "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
            }else{
              xoxxuq2c4xwwqqhxxxxxcuqdetails.setTrexuq233xwwqqhxxxxxcuquote(this.instance);
               // replaced logic here from cuorder
               if (${itemEntityName} == null) {
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from quote
                 if (cartPoStatus.equals("c") && ${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                  ${itemEntityName}=xoxxuq2c4xwwqqhxxxxxcuqdetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cuquote does not have quantity in cuqdetails, so put it there
                 if (!cartPoStatus.equals("c")){
                  xoxxuq2c4xwwqqhxxxxxcuqdetails.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());
                 }
                }else{
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)}")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			 bcontinue = false;
                    return bcontinue;
                }
              } 

              // 
              ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              xoxxuq2c4xwwqqhxxxxxcuqdetails.set${itemEntityName?cap_first}(${itemEntityName});
	      xoxxuq2c4xwwqqhxxxxxcuqdetails.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
	      xoxxuq2c4xwwqqhxxxxxcuqdetails.setZ5xxzpxravxxxxxxxxxxordprice(newOrdPrice);
              if (${customerEntityName} == null) {
                if (this.instance.get${customerEntityName?cap_first}() != null){
                 //from cartOrder
                 ${customerEntityName}=this.instance.get${customerEntityName?cap_first}();
                 ${customerEntityName}Home.clearInstance();
                 ${customerEntityName}Home.setInstance(${customerEntityName});
                }else{
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)}")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
            }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 xoxxuq2c4xwwqqhxxxxxcuqdetails.setZ1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                 if(${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption() == null || ${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption().isEmpty()){
                  ${cuinvoiceEtcItemDetailsEntityName}.setZ9xxtxsolxxxxxxxxxxxshipoption("S");
                 }
           
		 return bcontinue;

	}
     </#if>

   <#if  entityFunction == "co" >
        //method takes customer initiated codcop ie cd(toPay and Delivery or np (toPay and PickUp) orders and make them 
        //ready for back office processing 
        //if shipped/pickup then iterate and update each order detail to pint to current POS order
        // re use the existing terms codcop order and change terms to POS 
        //checkoutPOS puts order status as 16 ie paid and getCurrentCartOrder('pos') wont find it
        //addProductToOrder called by confirm or this method creates a new order instance if current order is null
        //params 2 param1 codcop pickup order, param2 posOrder (null for now to use the existing codcop order)
        //non null param2 tbd existing POS order and merge to it? we can now add new item at POS time)  

	@Transactional
	public String convertCartToPos(String copcodOrderKey,Trexuq244xwwqqhxxxxxcuorders posOrder) {
        overRideValue=null;//used to pass copcodOrderKey but also as item price override

        if(copcodOrderKey == null || copcodOrderKey.isEmpty()){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("order")+" "+copcodOrderKey+" "+ bundle.getString("empty")+", "+bundle.getString("make")+" "+bundle.getString("selection")+" "+bundle.getString("first"),""));
          return null;
        }
        Trexuq244xwwqqhxxxxxcuorders codcopOrder=trexuq244xwwqqhxxxxxcuordersList.getKeyToEntity(copcodOrderKey);

        //for now posOrder coming in should be null, because merge is not allowed 
        if(posOrder == null){
         if(customIdentity.isDebug()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("Current")+" "+bundle.getString("order")+" "+posOrder+" "+ bundle.getString("empty")+", "+bundle.getString("will")+" "+bundle.getString("re-use")+" "+bundle.getString("pickup")+" "+bundle.getString("order")+" "+copcodOrderKey,""));
           //return null;
         }
         try{
          this.clearInstance();
          this.setInstance(codcopOrder);
          //need to use original term to decide no change by this.instance.setC2xxcxxxbv09xxxxxxxxterms("POS");
          this.instance.setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
          this.instance.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());

          superdotupdate();//make codcop order as POS order
         } catch ( Exception e){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,copcodOrderKey+" "+"save"+" "+"as"+" "+"POS"+" "+bundle.getString("failed")+",  "+e.getMessage(),""));
             return null;
         }
         //posOrder=this.getInstance(); does not work need to be loaded via db query or commit. we use getcurrentCartOrder query
         if(fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("pos").size()==0){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("Current")+" "+bundle.getString("order")+" "+copcodOrderKey+" "+bundle.getString("empty")+", "+ bundle.getString("Add")+" "+bundle.getString("error"),""));
           return null;
         }
         posOrder=fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("pos").get(0);
        }//end of top test for posOrder null
        if(posOrder != null && customIdentity.isDebug()){
         int cartItems=trexuq244xwwqqhxxxxxcuordersList.entityDetailedList(posOrder.getA0xxuobxbxxxxxxxxxxxsid()).size();
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_WARN,bundle.getString("Current")+" "+bundle.getString("order")+" "+posOrder.getA0xxuncobvxxxxxxxxxxpurchsno()+" "+ bundle.getString("has")+" "+cartItems+" "+bundle.getString("cart")+" "+bundle.getString("items"),""));
        } 
        //pp > PrePay and Pickup, pd > PrePay and Delivery, np > ToPay and Pickup, cd > ToPay and Delivery    
        if(!codcopOrder.getC2xxcxxxbv09xxxxxxxxterms().contains("ToPay and")){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("order")+" "+copcodOrderKey+" "+ bundle.getString("Term")+" "+codcopOrder.getC2xxcxxxbv09xxxxxxxxterms()+", "+bundle.getString("expected")+" "+bundle.getString("PrePay and Pickup")+"/ "+bundle.getString("PrePay and Delivery")+" "+bundle.getString("or")+" "+ bundle.getString("ToPay and PickUp")+"/ "+bundle.getString("ToPay and Delivery"),""));
          return null;
        } 

        if (codcopOrder.getZcxxzzfxhhxxxxxxxxxxstatusfl() != mshipped){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("order")+" "+copcodOrderKey+" "+ bundle.getString("shipment")+"/"+bundle.getString("pickUp")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("created")+"/ "+" "+bundle.getString("marked")+" "+bundle.getString("shipped")+" "+ bundle.getString("yet")+", "+bundle.getString("use")+" "+bundle.getString("Order")+" "+ bundle.getString("to")+" "+ bundle.getString("Shipment"),""));
          return null;
        }
        
        return "";
       }


   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateCdetailsetValues() {
	    if (!bcontinue){
             return bcontinue;
            }

              xoxxuq2b4xwwqqhxxxxxcuodetails = xoxxuq2b4xwwqqhxxxxxcuodetailsHome.getInstance();	
	      if (xoxxuq2b4xwwqqhxxxxxcuodetails == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,bundle.getString("details")+" "+ bundle.getString("could")+" "+bundle.getString("not")+" "+bundle.getString("be")+" "+bundle.getString("found"),""));
			bcontinue = false;
                 return bcontinue;
	      }else{
	         xoxxuq2b4xwwqqhxxxxxcuodetails.set${entityName}(this.instance);
               if (${itemEntityName} == null) {
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
                 if (cartPoStatus.equals("c") && ${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                  ${itemEntityName}=xoxxuq2b4xwwqqhxxxxxcuodetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                 if (!cartPoStatus.equals("c")){
                  xoxxuq2b4xwwqqhxxxxxcuodetails.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());
                 }
                }else{
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)}")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			 bcontinue = false;
                    return bcontinue;
                }
              } 
               // 
              ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              xoxxuq2b4xwwqqhxxxxxcuodetails.set${itemEntityName?cap_first}(${itemEntityName});
              xoxxuq2b4xwwqqhxxxxxcuodetails.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
                cdisc=customIdentity.getDiscountValue();
                cselp=fpxxfq1a5xwwqqhxxxxxitem.getB8fbzpxxbvxxxxxxxxxxselprice();
                newOrdPrice=cselp.subtract(cdisc);
	      xoxxuq2b4xwwqqhxxxxxcuodetails.setZ5xxzpxravxxxxxxxxxxordprice(newOrdPrice);

              
              if (${customerEntityName} == null) {
                if (this.instance.get${customerEntityName?cap_first}() != null){
                 //from cartOrder
                 ${customerEntityName}=this.instance.get${customerEntityName?cap_first}();
                 ${customerEntityName}Home.clearInstance();
                 ${customerEntityName}Home.setInstance(${customerEntityName});
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)}")+" "+ bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
            }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${cuinvoiceEtcItemDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                 if(${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption() == null || ${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption().isEmpty()){
                  ${cuinvoiceEtcItemDetailsEntityName}.setZ9xxtxsolxxxxxxxxxxxshipoption("S");
                 }
		 return bcontinue;

	}
     </#if>
   <#if  entityFunction == "ci" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateCdetailsetValues() {
	    if (!bcontinue){
             return bcontinue;
            }

                xoxxuq2a4xwwqqhxxxxxcuidetails = xoxxuq2a4xwwqqhxxxxxcuidetailsHome.getInstance();	
		if (xoxxuq2a4xwwqqhxxxxxcuidetails == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("details")+" "+ bundle.getString("could")+" "+bundle.getString("not")+" "+bundle.getString("be")+" "+bundle.getString("located"),""));

			bcontinue = false;
                return bcontinue;
		} else
          {
	          xoxxuq2a4xwwqqhxxxxxcuidetails.set${entityName}(this.instance);
               if (${itemEntityName} == null) {
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
              if (cartPoStatus.equals("c") && ${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                 // 
                 ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  ${itemEntityName}=xoxxuq2a4xwwqqhxxxxxcuidetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                 if (!cartPoStatus.equals("c")){
                  xoxxuq2a4xwwqqhxxxxxcuidetails.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());
                 }
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("${itemEntityName?substring(eL)}")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
              // 
              ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              xoxxuq2a4xwwqqhxxxxxcuidetails.set${itemEntityName?cap_first}(${itemEntityName});
	      xoxxuq2a4xwwqqhxxxxxcuidetails.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
	      xoxxuq2a4xwwqqhxxxxxcuidetails.setZ5xxzpxravxxxxxxxxxxordprice(${itemEntityName}.get${itemPriceField?cap_first}());
              
              if (${customerEntityName} == null) {
                if (this.instance.get${customerEntityName?cap_first}() != null){
                 //from cartOrder
                 ${customerEntityName}=this.instance.get${customerEntityName?cap_first}();
                 ${customerEntityName}Home.clearInstance();
                 ${customerEntityName}Home.setInstance(${customerEntityName});
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("${customerEntityName?substring(eL)}")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
            }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${cuinvoiceEtcItemDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

   <#if  entityFunction == "sh" >
    public String setAsShipped() {// needs to update order/invoice/details as well
     this.instance.set${statusFlagField?cap_first}(mshipped );
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("Shipment")+ " "+bundle.getString("Status")+ " "+bundle.getString("changed")+ " "+bundle.getString("to")+ " "+bundle.getString("Shipped")+ "/ "+bundle.getString("PickUp")+ " "+bundle.getString("Ready"),""));
     this.superdotupdate();
     if(${cuordersEntityName} ==null){
      ${cuordersEntityName}=${cuordersEntityName}List.getSidToEntity(this.instance.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
     }
     if(${cuordersEntityName} !=null){
      ${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(mshipped); // by separate button in shipment
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("Order")+ " "+bundle.getString("Status")+ " "+bundle.getString("changed")+ " "+bundle.getString("to")+ " "+bundle.getString("Shipped")+ "/ "+bundle.getString("PickUp")+ " "+bundle.getString("Ready"),""));
     }
     ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
     ${cuordersEntityName}Home.superdotupdate();

     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_INFO,bundle.getString("Order")+ " "+${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+" "+bundle.getString("ready")+ " "+bundle.getString("for")+ " "+bundle.getString("convert")+ " "+bundle.getString("to")+ " "+bundle.getString("Invoice"),""));

     if(${cuinvoiceEntityName} ==null && this.instance.get${cuinvoiceEntityName?cap_first}() != null){// if not prepaid but cod or cop
      ${cuinvoiceEntityName}=${cuinvoiceEntityName}List.getSidToEntity(this.instance.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
     }
     if(${cuinvoiceEntityName} !=null){
      ${cuinvoiceEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mshipped);// later
      ${cuinvoiceEntityName}Home.setInstance(${cuinvoiceEntityName});
      ${cuinvoiceEntityName}Home.superdotupdate();
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("Invoice")+ " "+bundle.getString("Status")+ " "+bundle.getString("changed")+ " "+bundle.getString("to")+ " "+bundle.getString("Shipped")+ "/ "+bundle.getString("PickUp")+ " "+bundle.getString("Ready"),""));
     }


     return "";
    }



   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateCdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }

           xoxxuq295xwwqqhxxxxxshipmentdetails = xoxxuq295xwwqqhxxxxxshipmentdetailsHome.getInstance();	
		if (xoxxuq295xwwqqhxxxxxshipmentdetails == null) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("not")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		}else
          {
	          xoxxuq295xwwqqhxxxxxshipmentdetails.set${entityName}(this.instance);
               if (${itemEntityName} == null) {
                 // 
                 ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
              if (cartPoStatus.equals("c") && ${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                  ${itemEntityName}=xoxxuq295xwwqqhxxxxxshipmentdetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                }else{
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("${itemEntityName?substring(eL)}")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
              //
              ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
               xoxxuq295xwwqqhxxxxxshipmentdetails.set${itemEntityName?cap_first}(${itemEntityName});
              // recalShippingCost returns shipping cost for an item in detailDel
              recalShippingCost();
              ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(detailDel);

              
               if (${customerEntityName} == null) {
                if (this.instance.get${customerEntityName?cap_first}() != null){
                 //from cartOrder
                 ${customerEntityName}=this.instance.get${customerEntityName?cap_first}();
                 ${customerEntityName}Home.clearInstance();
                 ${customerEntityName}Home.setInstance(${customerEntityName});
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("${itemEntityName?substring(eL)}")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
             }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${cuinvoiceEtcItemDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

   <#if  entityFunction == "cp" >

       public void payPalCapturePayment(String payerid,String guid) throws Exception
       {
           //  make it part of POS copy itemDetailsBrowse and create POS screen
           //following gets invoked by shipmentEdit button since shipment/pickup done in pos
           // creates invoice and then payment via cpaymentHome cartExtended_persist (which calls extended_persist(true) 
           // to update customer, updates invoice, creates payment)
           // check if order was selected, if not give error msg
           // if exists and paypal paid then capture 
           //payment get invoice get order get shipment
             if(this.instance.getA0xxuncpbvxxxxxxxxxxpayment()==null){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Payment")+ " "+bundle.getString("not")+ " "+bundle.getString("done")+ " "+bundle.getString("yet"),""));
               return ;
             }

             Trexuq266xwwqqhxxxxxcuinvoice trexuq266xwwqqhxxxxxcuinvoice=this.instance.getTrexuq266xwwqqhxxxxxcuinvoice();
             if(trexuq266xwwqqhxxxxxcuinvoice == null){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Invoice")+ " "+bundle.getString("not")+ " "+bundle.getString("done")+ " "+bundle.getString("yet"),""));
               return;          
             }
             Trexuq244xwwqqhxxxxxcuorders trexuq244xwwqqhxxxxxcuorders= trexuq266xwwqqhxxxxxcuinvoice.getTrexuq244xwwqqhxxxxxcuorders();           
             if(trexuq266xwwqqhxxxxxcuinvoice == null){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("Orders")+ " "+bundle.getString("not")+ " "+bundle.getString("done")+ " "+bundle.getString("yet"),""));
               return;      
             }
              Boolean usingOrder=true;              

/* was in shipment, we need to adjust for in payment now


             Boolean usingOrder=false;
             Trexuq244xwwqqhxxxxxcuorders jay=this.instance.getTrexuq244xwwqqhxxxxxcuorders();
             ${cuinvoiceEntityName?cap_first} jay2=null;
             if(jay==null){
                  //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                    // FacesMessage.SEVERITY_ERROR,bundle.getString("no")+ " "+bundle.getString("order")+ " "+bundle.getString("selected"),""));
               //return ;// paypal capture means invoice being used for shipment
             }else{
              usingOrder=true;              
              ${cuinvoiceEntityName}=trexuq266xwwqqhxxxxxcuinvoiceList.getSidToEntity(jay.getB4xxuxxrlxxxcxxxxxxxcinvoice());
              jay2=${cuinvoiceEntityName};// 
             }
             if(!usingOrder){
              jay2 = this.instance.get${cuinvoiceEntityName?cap_first}();
             }
             if(jay2==null){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("no")+ " "+bundle.getString("invoice")+ " "+bundle.getString("or")+ " "+bundle.getString("order")+ " "+bundle.getString("found")+ " "+bundle.getString("for")+ " "+bundle.getString("shipment"),""));
               return ;
             }

             // cartExtended_persist calls extended_persist which expects xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin() value
             trexuq277xwwqqhxxxxxcpaymentHome.setFromJsf(false);//use this flag to copy outstanding amt
             trexuq277xwwqqhxxxxxcpayment=trexuq277xwwqqhxxxxxcpaymentHome.cartExtended_persist(${cuinvoiceEntityName});
             if(trexuq277xwwqqhxxxxxcpayment !=null){
              // update shipment zdxxuxxrbvxxxxxxxxxxbarshipcod with payment # , show in checkout history
              this.instance.setZdxxuxxrbvxxxxxxxxxxbarshipcod(trexuq277xwwqqhxxxxxcpayment.getA0xxuncpbvxxxxxxxxxxpayment());
              this.superdotupdate();
             }
             trexuq277xwwqqhxxxxxcpaymentHome.setFromJsf(true);
*/

             if(usingOrder){
              r3Cart.captureRequest(trexuq244xwwqqhxxxxxcuorders.getYexxuznybvxxxxxxxxxxnotes());
             }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Cannot")+ " "+bundle.getString("capture")+ ", "+bundle.getString("no")+ " "+bundle.getString("order")+ " "+bundle.getString("found")+ " "+bundle.getString("for")+ " "+bundle.getString("shipment"),""));
             }
             //captureRequest expects authid which is in order notes and captureRequest method gives messages
                return;
       }



   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateCdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }

           ${cupdetailsEntityName} = ${cupdetailsEntityName}Home.getInstance();	
		if (${cupdetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("not")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		} else
                {
	          ${cupdetailsEntityName}.set${entityName}(this.instance);
              
              if (${customerEntityName} == null) {
                if (this.instance.get${customerEntityName?cap_first}() != null){
                 //from cartOrder
                 ${customerEntityName}=this.instance.get${customerEntityName?cap_first}();
                 ${customerEntityName}Home.clearInstance();
                 ${customerEntityName}Home.setInstance(${customerEntityName});
                 this.instance.set${customerEntityName?cap_first}(${customerEntityName});
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)?cap_first}")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
          }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${cuinvoiceEtcItemDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                 // we need to set type for more items
                 if(this.instance.getB6xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB6xxuxxrbv10xxxxxxxxpaytype().length() == 0){
                  ${cuinvoiceEtcItemDetailsEntityName}.setB6xxuxxrbv10xxxxxxxxpaytype("Cash");
                 }else{
                  ${cuinvoiceEtcItemDetailsEntityName}.setB6xxuxxrbv10xxxxxxxxpaytype(this.instance.getB6xxuxxrbv10xxxxxxxxpaytype());
                 }

		 return bcontinue; // on return persist

	}
     </#if>





</#if>
<#if entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" || entityFunction=="sv"   > 

 <#if entityFunction=="vp">

     public boolean createVendorInvoice(){
    //jay use  ${vinvoiceEntityName} vinvoice entity name and put payment amt in as amount, vendor from vendor drop down
            ${vendorInvoiceEntityName} = ${vendorInvoiceEntityName}Home.getInstance();	

		if (${vendorInvoiceEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("internal")+" "+bundle.getString("invoice")+" "+bundle.getString("could")+" "+bundle.getString("not")+" "+bundle.getString("be")+" "+bundle.getString("created"),""));
			bcontinue = false;
		} else {
                   key="temp";
                 
			   ${vinvoiceEntityName}.set${vendorEntityName?cap_first}(this.instance.get${vendorEntityName?cap_first}());

           }
             return bcontinue;
     }
 </#if>

        //called by showtemprunt
	public boolean createVdetailsetValues() {
     	   if (!bcontinue){
             return bcontinue;
           }
           <#if entityFunction=="vq" >
           // detail is used because it will persist individually, parent gets overridden
           tShipCode= ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZ8xxtxsolxxxxxxxxxxxshipoption();
          /* reinstated */
           detailMis=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZaxxzlxxavxxxxxxxxxxdelivchrg();
           </#if>
           <#if entityFunction=="vo" >
           tShipCode= ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZ8xxtxsolxxxxxxxxxxxshipoption();
           detailMis=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZaxxzlxxavxxxxxxxxxxdelivchrg();
           </#if>
           <#if entityFunction=="vi" >
           detailMis=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZaxxzlxxavxxxxxxxxxxdelivchrg();
           </#if>
           <#if entityFunction=="vp" >
           // look into why in detail, why not in parent
           //payments have amountin,deliv n misc crg in details, so save them first
           detailbaseamt=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin();
           if(cartPoStatus.equals("e")){
            detailbaseamt=amountIn;//
           }
           detailMis=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZbxxzmxxavxxxxxxxxxxmiscchrg();
           detailDel=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZaxxzlxxavxxxxxxxxxxdelivchrg();
           //
           detailTax1=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZcxxzxz1avxxxxxxxxxxtax1amt();
           detailTax2=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZdxxzxz2avxxxxxxxxxxtax2amt();
           detailTax3=${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().getZexxzxz3avxxxxxxxxxxtax3amt();

           </#if>
           //clear instance to make id null and avoid detach entity(ie already has id) persist
           ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();
           ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance();	

		if (${vendorInvoiceEtcItemDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("no}")+" "+bundle.getString("details")+" "+ bundle.getString("created"),""));
			bcontinue = false;
                return bcontinue;
		} else {
            <#if entityFunction=="vp"  >
	        ${vendorInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
             // payment detail lines are not copy of invoice lines 
              //detailbaeamt etc saved above
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZ6xxzxxxavxxxxxxxxxxamountin(detailbaseamt);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZaxxzlxxavxxxxxxxxxxdelivchrg(detailDel);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZcxxzxz1avxxxxxxxxxxtax1amt(detailTax1);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZdxxzxz2avxxxxxxxxxxtax2amt(detailTax2);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZexxzxz3avxxxxxxxxxxtax3amt(detailTax3);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZfxxzlpxxvxxxxxxxxxxlinetotl(detailLt);// total referes to invoice totl,


            <#elseif entityFunction=="vq" >
              if (${itemEntityName} == null) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			//bcontinue = false;
                return bcontinue;
              }
	         ${vendorInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
                 ${vendorInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
		 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemCostField?cap_first}());
                 if (cartPoStatus.equals("e")){
                  ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                 }else{
                  // needed for all
                  ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                 }
                 ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZ8xxtxsolxxxxxxxxxxxshipoption(tShipCode);
                 ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
                 ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZaxxzlxxavxxxxxxxxxxdelivchrg(detailDel);

            <#elseif entityFunction=="vo" >
              if (${itemEntityName} == null) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			//bcontinue = false;
                return bcontinue;
              }
	         ${vendorInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
                 ${vendorInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
		 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemCostField?cap_first}());
                 if (cartPoStatus.equals("e")){
                  ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                 }else{
                   // backoffice orders type also null
                   ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                 }
                 ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZ8xxtxsolxxxxxxxxxxxshipoption(tShipCode);
                 ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
                 ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZaxxzlxxavxxxxxxxxxxdelivchrg(detailDel);
            <#elseif entityFunction=="vi" >
              if (${itemEntityName} == null) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			//bcontinue = false;
                return bcontinue;
              }
	      ${vendorInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
              ${vendorInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	      ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemCostField?cap_first}());
              if (cartPoStatus.equals("e")){
                   ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              }else{
                   ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              }
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZbxxzmxxavxxxxxxxxxxmiscchrg(detailMis);
              ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance().setZaxxzlxxavxxxxxxxxxxdelivchrg(detailDel);

            <#elseif entityFunction=="sv" >
              if (${itemEntityName} == null) {
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
		//bcontinue = false;
                return bcontinue;
              }
	      ${vendorInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
              ${vendorInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	      //${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemCostField?cap_first}());
	      ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(new BigDecimal("0.0"));// look into using detail price in edit
              if (cartPoStatus.equals("e")){
                  ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              }else{
                   ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              }
            <#else>
            </#if>  
            }
		 return bcontinue;

	}

   <#if  entityFunction == "vq" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateVdetailsetValues() {
	    if (!bcontinue){
             return bcontinue;
            }

            xoxxuq3e4xwwqqhxxxxxvendqdetails = xoxxuq3e4xwwqqhxxxxxvendqdetailsHome.getInstance();	
		if (xoxxuq3e4xwwqqhxxxxxvendqdetails == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("details")+" "+bundle.getString("could")+" "+bundle.getString("not")+" "+bundle.getString("be")+" "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		} else {
	        xoxxuq3e4xwwqqhxxxxxvendqdetails.setTrexuq333xwwqqhxxxxxvenquote(this.instance);

             if (trexuq333xwwqqhxxxxxvenquote != null && trexuq333xwwqqhxxxxxvenquote.getA0xxunvqbvxxxxxxxxxxpurchsno() != null){
              // jay item price etc get it from details 
		   // xoxxuq3e4xwwqqhxxxxxvendqdetails.setZ5xxzpxravxxxxxxxxxxordprice(trexuq333xwwqqhxxxxxvenquote.getY4xxzpxxavxxxxxxxxxxordprice());
             }
             else { 
              if (cartPoStatus.equals("c") && ${vendorInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                  ${itemEntityName}=xoxxuq3e4xwwqqhxxxxxvendqdetails.get${itemEntityName?cap_first}();
              }else
              {
               if (${itemEntityName} == null) {
                 // 
                 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
                 if (cartPoStatus.equals("c")){
                  ${itemEntityName}=xoxxuq3e4xwwqqhxxxxxvendqdetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                 if (!cartPoStatus.equals("c")){
                  xoxxuq3e4xwwqqhxxxxxvendqdetails.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());
                 }
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("item")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
              }  
              // 
              ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              xoxxuq3e4xwwqqhxxxxxvendqdetails.set${itemEntityName?cap_first}(${itemEntityName});
	      xoxxuq3e4xwwqqhxxxxxvendqdetails.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
	      xoxxuq3e4xwwqqhxxxxxvendqdetails.setZ5xxzpxravxxxxxxxxxxordprice(${itemEntityName}.get${itemCostField?cap_first}());
              
              if (${vendorEntityName} == null) {
                if (this.instance.get${vendorEntityName?cap_first}() != null){
                 //from cartOrder
                 ${vendorEntityName}=this.instance.get${vendorEntityName?cap_first}();
                 ${vendorEntityName}Home.clearInstance();
                 ${vendorEntityName}Home.setInstance(${vendorEntityName});
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
             }
            }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${vendorInvoiceEtcItemDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

   <#if  entityFunction == "vo" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateVdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }

                xoxxuq3d4xwwqqhxxxxxvendodetails = xoxxuq3d4xwwqqhxxxxxvendodetailsHome.getInstance();	
		if (xoxxuq3d4xwwqqhxxxxxvendodetails == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		} else {
	        xoxxuq3d4xwwqqhxxxxxvendodetails.set${entityName}(this.instance);
             if (trexuq333xwwqqhxxxxxvenquote != null && trexuq333xwwqqhxxxxxvenquote.getA0xxunvqbvxxxxxxxxxxpurchsno() != null){
              // jay item price etc get it from details 
		    //xoxxuq3d4xwwqqhxxxxxvendodetails.setZ5xxzpxravxxxxxxxxxxordprice(trexuq333xwwqqhxxxxxvenquote.getY4xxzpxxavxxxxxxxxxxordprice());
             }
             else { 
              if (cartPoStatus.equals("c") && ${vendorInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                  ${itemEntityName}=xoxxuq3d4xwwqqhxxxxxvendodetails.get${itemEntityName?cap_first}();
              }else
              {
               if (${itemEntityName} == null) {
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
                 if (cartPoStatus.equals("c")){
                  ${itemEntityName}=xoxxuq3d4xwwqqhxxxxxvendodetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                 if (!cartPoStatus.equals("c")){
                  xoxxuq3d4xwwqqhxxxxxvendodetails.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());
                 }
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
              }  
              // 
              ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              xoxxuq3d4xwwqqhxxxxxvendodetails.set${itemEntityName?cap_first}(${itemEntityName});
	      xoxxuq3d4xwwqqhxxxxxvendodetails.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
	      xoxxuq3d4xwwqqhxxxxxvendodetails.setZ5xxzpxravxxxxxxxxxxordprice(${itemEntityName}.get${itemCostField?cap_first}());
              
              if (${vendorEntityName} == null) {
                if (this.instance.get${vendorEntityName?cap_first}() != null){
                 //from cartOrder
                 ${vendorEntityName}=this.instance.get${vendorEntityName?cap_first}();
                 ${vendorEntityName}Home.clearInstance();
                 ${vendorEntityName}Home.setInstance(${vendorEntityName});
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
             }
            }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${vendorInvoiceEtcItemDetailsEntityName}.setA1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>
   <#if  entityFunction == "vi" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateVdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }

           ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance();	
	   if (${vendorInvoiceEtcItemDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
	   }else{
	       ${vendorInvoiceEtcItemDetailsEntityName}.set${entityName}(this.instance);
               if (${itemEntityName} == null) {
                 // 
                 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
              if (cartPoStatus.equals("c") && ${vendorInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                  ${itemEntityName}=${vendorInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                 if (!cartPoStatus.equals("c")){
                  ${vendorInvoiceEtcItemDetailsEntityName}.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());
                 }
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
              // 
              ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              ${vendorInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	      ${vendorInvoiceEtcItemDetailsEntityName}.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
	      ${vendorInvoiceEtcItemDetailsEntityName}.setZ5xxzpxravxxxxxxxxxxordprice(${itemEntityName}.get${itemCostField?cap_first}());
              
              if (${vendorEntityName} == null) {
                if (this.instance.get${vendorEntityName?cap_first}() != null){
                 //from cartOrder
                 ${vendorEntityName}=this.instance.get${vendorEntityName?cap_first}();
                 ${vendorEntityName}Home.clearInstance();
                 ${vendorEntityName}Home.setInstance(${vendorEntityName});
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
            }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${vendorInvoiceEtcItemDetailsEntityName}.setA1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}






     </#if>

   <#if  entityFunction == "sv" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateVdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }

           xoxxuq399xvwwqqhxxxxvshipmendetails = xoxxuq399xvwwqqhxxxxvshipmendetailsHome.getInstance();	
		if (xoxxuq399xvwwqqhxxxxvshipmendetails == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("not")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		}else
          {
	          xoxxuq399xvwwqqhxxxxvshipmendetails.set${entityName}(this.instance);
               if (${itemEntityName} == null) {
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
              if (cartPoStatus.equals("c") && ${vendorInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}()!=null){
                 // 
                 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                  ${itemEntityName}=xoxxuq399xvwwqqhxxxxvshipmendetails.get${itemEntityName?cap_first}();
                 }else{
                  ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 }
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 // cartorder does not have quantity in orderdetails, so put it there
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
               }
              // 
              ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
               xoxxuq399xvwwqqhxxxxvshipmendetails.set${itemEntityName?cap_first}(${itemEntityName});
	          //xoxxuq399xvwwqqhxxxxvshipmendetails.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
		     //xoxxuq399xvwwqqhxxxxvshipmendetails.setZ5xxzpxravxxxxxxxxxxordprice(${itemEntityName}.get${itemCostField?cap_first}());
              
              if (${vendorEntityName} == null) {
                if (this.instance.get${vendorEntityName?cap_first}() != null){
                 //from cartOrder
                 ${vendorEntityName}=this.instance.get${vendorEntityName?cap_first}();
                 ${vendorEntityName}Home.clearInstance();
                 ${vendorEntityName}Home.setInstance(${vendorEntityName});
                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
             }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${vendorInvoiceEtcItemDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

 


   <#if  entityFunction == "vp" >

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateVdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }

           ${vendpdetailsEntityName} = ${vendpdetailsEntityName}Home.getInstance();	
	   if (${vendpdetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_INFO,bundle.getString("detailsd")+ " "+bundle.getString("not")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
	   } else
                {
	          ${vendpdetailsEntityName}.set${entityName}(this.instance);
              
              if (${vendorEntityName} == null) {
                if (this.instance.get${vendorEntityName?cap_first}() != null){
                 //from cartOrder
                 ${vendorEntityName}=this.instance.get${vendorEntityName?cap_first}();
                 ${vendorEntityName}Home.clearInstance();
                 ${vendorEntityName}Home.setInstance(${vendorEntityName});
                 this.instance.set${vendorEntityName?cap_first}(${vendorEntityName});
                }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
          }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${vendorInvoiceEtcItemDetailsEntityName}.setA1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                 // we need to set type for more items
                 if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().length() == 0){
                  ${vendorInvoiceEtcItemDetailsEntityName}.setB6xxuxxrbv10xxxxxxxxpaytype("Cash");
                 }else{
                  ${vendorInvoiceEtcItemDetailsEntityName}.setB6xxuxxrbv10xxxxxxxxpaytype(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype());
                 }


		 return bcontinue; // on return persist

	}

     </#if>
</#if>



<#if entityFunction=="eq" || entityFunction=="eo" || entityFunction=="ei" || entityFunction=="ep"  > 

 <#if entityFunction=="ep">

     public boolean createemployeeInvoice(){
    //jay use  ${vinvoiceEntityName} vinvoice entity name and put payment amt in as amount, employee from employee drop down
            ${employeeInvoiceEntityName} = ${employeeInvoiceEntityName}Home.getInstance();	

		if (${employeeInvoiceEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("interna")+ " "+bundle.getString("invoice")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("created"),""));
			bcontinue = false;
		} else {
                   key="temp";
                 
			   ${vinvoiceEntityName}.set${employeeEntityName?cap_first}(this.instance.get${employeeEntityName?cap_first}());

           }
             return bcontinue;
     }
 </#if>


	public boolean createEdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }
           //clear instance to make id null and avoid detach entity(ie already has id) persist
            ${employeeInvoiceEtcItemDetailsEntityName}Home.clearInstance();
            ${employeeInvoiceEtcItemDetailsEntityName} = ${employeeInvoiceEtcItemDetailsEntityName}Home.getInstance();	

		if (${employeeInvoiceEtcItemDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("created"),""));
			bcontinue = false;
		} else {
                        if (this.instance.get${itemEntityName?cap_first}() == null){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 //bcontinue = false;
                         return bcontinue;
                } 
            <#if entityFunction=="ep">
	        ${employeeInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
             <#if keyAutoGen == "Y" >
		   //${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		   ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
             <#else>
		   ${employeeInvoiceEtcItemDetailsEntityName}Home.get${employeeInvoiceEtcItemDetailsEntityName?cap_first}Id().set${employeeInvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		   ${employeeInvoiceEtcItemDetailsEntityName}Home.get${employeeInvoiceEtcItemDetailsEntityName?cap_first}Id().set${employeeInvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
             </#if>
            <#else>
	       ${employeeInvoiceEtcItemDetailsEntityName}.set${entityName?cap_first}(this.instance);
               ${employeeInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	       ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsUnitFieldName?cap_first}(${itemEntityName}.get${itemUnitField?cap_first}());
	       ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemPriceField?cap_first}());
               // needed for all except payment
               ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());



             <#if keyAutoGen == "Y" >
		   ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
             <#else>
		   ${employeeInvoiceEtcItemDetailsEntityName}Home.get${employeeInvoiceEtcItemDetailsEntityName?cap_first}Id().set${employeeInvoiceEtcItemDetailsID1FieldName?cap_first}(key);
		   ${employeeInvoiceEtcItemDetailsEntityName}Home.get${employeeInvoiceEtcItemDetailsEntityName?cap_first}Id().set${employeeInvoiceEtcItemDetailsID2FieldName?cap_first}(${keysparam});
             </#if>
           </#if>  
            }
		 return bcontinue;

	}

</#if>
  <#if  entityFunction == "eo" >
// updateedetails here

   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateEdetailsetValues() {
            // In more method a new details instance was created
		if (!bcontinue){
             return bcontinue;
            }

           ${emplodetailsEntityName} = ${emplodetailsEntityName}Home.getInstance();	
		if (${emplodetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                 return bcontinue;
		} else
                {
	          ${emplodetailsEntityName}.set${emplordersEntityName?cap_first}(this.instance);
              
              if (${employeeEntityName}ByEmployee == null) {
                if (this.instance.get${employeeEntityName?cap_first}ByEmployee() != null){
                 //from cartOrder
                 ${employeeEntityName}ByEmployee=this.instance.get${employeeEntityName?cap_first}ByEmployee();
                 ${employeeEntityName}Home.clearInstance();
                 ${employeeEntityName}Home.setInstance(${employeeEntityName}ByEmployee);
                 this.instance.set${employeeEntityName?cap_first}ByEmployee(${employeeEntityName}ByEmployee);

                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("employee")+ " "+bundle.getString("agent")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
		  bcontinue = false;
                  return bcontinue;
                }
              }
              if (${itemEntityName} == null) {
                 // 
                 ${employeeinvoiceEtcItemDetailsEntityName}.set${emplodetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
                if (this.instance.get${itemEntityName?cap_first}() != null){
                 //from cartOrder
                 ${itemEntityName}=this.instance.get${itemEntityName?cap_first}();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(${itemEntityName});
                 this.instance.set${itemEntityName?cap_first}(${itemEntityName});
                 ${emplodetailsEntityName}.setZ3xxeqxxbvnxxxxxxxxxqtyordrd(${itemEntityName}.getTempQuantity());


                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              }
          }
              // 
              ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}(${itemEntityName}.getTempQuantity());
              ${employeeInvoiceEtcItemDetailsEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
	      ${employeeInvoiceEtcItemDetailsEntityName}.setZ4xxuuxxbv19xxxxxxxxordunit(${itemEntityName}.get${itemUnitField?cap_first}());
	      ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemPriceField?cap_first}());

                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${emplodetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

  <#if  menuAttributesp2 == "9A" && machineEntityName??  && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
	public boolean createJAdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }
                 ${jobassignmentdetailsEntityName}Home.clearInstance();
                 ${jobassignmentdetailsEntityName}Home.setInstance(${jobassignmentdetailsEntityName});
            ${jobassignmentdetailsEntityName} = ${jobassignmentdetailsEntityName}Home.getInstance();	

		if (${jobassignmentdetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
		} else {
                 if (this.instance.get${machineEntityName?cap_first}() == null){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("machine")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			bcontinue = false;
                        return bcontinue;
                 } 
	         ${jobassignmentdetailsEntityName}.set${entityName?cap_first}(this.instance);
	         ${jobassignmentdetailsEntityName}.set${machineEntityName?cap_first}(${machineEntityName});
	         ${jobassignmentdetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                }
		return bcontinue;

	}



   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateJAdetailsetValues() {
            // In more method a new details instance was created
		if (!bcontinue){
             return bcontinue;
            }

           ${jobassignmentdetailsEntityName} = ${jobassignmentdetailsEntityName}Home.getInstance();	
		if (${jobassignmentdetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		} else
                {
	          ${jobassignmentdetailsEntityName}.set${jobassignmentEntityName?cap_first}(this.instance);
                }
              if (${machineEntityName} == null) {
                if (this.instance.get${machineEntityName?cap_first}() != null){
                 //from cartOrder
                 ${machineEntityName}=this.instance.get${machineEntityName?cap_first}();
                 ${machineEntityName}Home.clearInstance();
                 ${machineEntityName}Home.setInstance(${machineEntityName});
                 ${jobassignmentdetailsEntityName}.set${machineEntityName?cap_first}(${machineEntityName});

                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("machine")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			 bcontinue = false;
                 return bcontinue;
                }
              } 
              else{
                 ${jobassignmentdetailsEntityName}.set${machineEntityName?cap_first}(${machineEntityName});
              }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${jobassignmentdetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
  </#if>

  <#if  menuAttributesp2 == "65" >
        ///check again, these do not seem to get used so remove only ref is showtempt but 65 ie gl does not use showtempt it uses shownet

	public boolean createGLdetailsetValues() {
	   if (!bcontinue){
             return bcontinue;
            }
            ${gentriesDetailsEntityName} = ${gentriesDetailsEntityName}Home.getInstance();	

            if (${gentriesDetailsEntityName} == null) {
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
		bcontinue = false;
           } else {
              if (this.instance.get${accountEntityName?cap_first}() == null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			bcontinue = false;
                        return bcontinue;
              } 
	         ${gentriesDetailsEntityName}.set${entityName?cap_first}(this.instance);
	         ${gentriesDetailsEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
	         ${gentriesDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
           }
		return bcontinue;

	}



   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateGLdetailsetValues() {
            // In more method a new details instance was created
		if (!bcontinue){
             return bcontinue;
            }

           ${gentriesDetailsEntityName} = ${gentriesDetailsEntityName}Home.getInstance();	
		if (${gentriesDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                 return bcontinue;
		} else
                {
	          ${gentriesDetailsEntityName}.set${glentriesEntityName?cap_first}(this.instance);
                }
              if (${accountEntityName} == null) {
                if (this.instance.get${accountEntityName?cap_first}() != null){
                 //from cartOrder
                 ${accountEntityName}=this.instance.get${accountEntityName?cap_first}();
                 ${accountEntityName}Home.clearInstance();
                 ${accountEntityName}Home.setInstance(${accountEntityName});
                 ${gentriesDetailsEntityName}.set${accountEntityName?cap_first}(${accountEntityName});

                }else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
		  bcontinue = false;
                 return bcontinue;
                }
              } 
              else{
                 ${gentriesDetailsEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
              }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${gentriesDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

  <#if  menuAttributesp2 == "89" >
	public boolean createSLdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
            }
            ${scheduleDetailsEntityName} = ${scheduleDetailsEntityName}Home.getInstance();	

	    if (${scheduleDetailsEntityName} == null) {
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
	    } else {
	         ${scheduleDetailsEntityName}.set${entityName?cap_first}(this.instance);

	         ${scheduleDetailsEntityName}.set${employeeEntityName?cap_first}(${employeeEntityName});
	         ${scheduleDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                }
		return bcontinue;

	}



   /**
    * The following method updates existing or  a new instance if more of details (children) 
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateSLdetailsetValues() {
            // In more method a new details instance was created
		if (!bcontinue){
                 return bcontinue;
                }

                ${scheduleDetailsEntityName} = ${scheduleDetailsEntityName}Home.getInstance();	
		if (${scheduleDetailsEntityName} == null) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("details")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                        return bcontinue;
		} else
                {
                }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${scheduleDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
		 return bcontinue;

	}
     </#if>

 <#if entityFunction=="co">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuodetailsEntityName>
    public String moreToCart() {
   ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
   //customer field is disabled so its value will be null unlike item which is not disabled
   ${customerEntityName}Home.getInstance();
   ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.getInstance().get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
   ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();
     totaldel=new BigDecimal("0.0");
     totalmis=new BigDecimal("0.0");
     totalbaseamt=new BigDecimal("0.0");
     moreActive=true;
     nextShow=true;
     //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      //FacesMessage.SEVERITY_INFO,bundle.getString("if")+" "+bundle.getString("add")+ " "+bundle.getString("button")+ " "+bundle.getString("does")+ " "+bundle.getString("not")+" "+bundle.getString("respond")+ ", "+bundle.getString("please")+" "+bundle.getString("select")+" "+bundle.getString("category")+" "+bundle.getString("first"),""));
     return null;

    }
 </#if>

    public String more() {
 <#if entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci"  || entityFunction =="cp"   > 
  <#if entityFunction=="cq">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuqdetailsEntityName>
  </#if>
  <#if entityFunction=="co">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuodetailsEntityName>
  </#if>
  <#if entityFunction=="ci">
  <#assign cuinvoiceEtcItemDetailsEntityName=cuidetailsEntityName>
  </#if>
  <#if entityFunction=="cp">
  <#assign cuinvoiceEtcItemDetailsEntityName=cupdetailsEntityName>
  </#if>
   // force a new Instance & ID otherwise Hibernate will think it is the same detail record
   // but it also removes item if no new item was clicked
  <#if  entityFunction=="cp">
   // save entered amountIn 
    BigDecimal amountInS=xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin();
    xoxxuq284xwwqqhxxxxxcupdetailsHome.clearInstance();
    xoxxuq284xwwqqhxxxxxcupdetailsHome.getInstance().setZ6xxzxxxavxxxxxxxxxxamountin(amountInS);
  <#else> 
   ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
  </#if>

   //customer field is disabled so its value will be null unlike item which is not disabled
   ${customerEntityName}Home.getInstance();
   ${customerEntityName}Home.set${customerEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.getInstance().get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
   ${customerEntityName} = ${customerEntityName}Home.getDefinedInstance();

 <#elseif entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" > 
  <#if entityFunction=="vq">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendqdetailsEntityName>
  </#if>
  <#if entityFunction=="vo">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendorOrderItemDetailsEntityName>
  </#if>
  <#if entityFunction=="vi">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendidetailsEntityName>
  </#if>
  <#if entityFunction=="vp">
  <#assign vendorInvoiceEtcItemDetailsEntityName=vendpdetailsEntityName>
  </#if>

   // force a new Instance & ID otherwise Hibernate will think it is the same detail record
   // but it also removes item if no new item was clicked
   <#if  entityFunction=="vp">
    // save entered amountIn 
    BigDecimal amountInS=xoxxuq3b4xwwqqhxxxxxvendpdetailsHome.getInstance().getZ6xxzxxxavxxxxxxxxxxamountin();
    xoxxuq3b4xwwqqhxxxxxvendpdetailsHome.clearInstance();
    xoxxuq3b4xwwqqhxxxxxvendpdetailsHome.getInstance().setZ6xxzxxxavxxxxxxxxxxamountin(amountInS);
   <#else>
    ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();
   </#if>
   //vendor field is disabled so its value will be null unlike item which is not disabled
   ${vendorEntityName}Home.getInstance();
   ${vendorEntityName}Home.set${vendorEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.getInstance().get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
   ${vendorEntityName} = ${vendorEntityName}Home.getDefinedInstance();
 <#elseif entityFunction=="eq" || entityFunction=="eo" || entityFunction=="ei"  > 
  <#if entityFunction=="eq">
  <#assign employeeInvoiceEtcItemDetailsEntityName=emplqDetailsEntityName>
  </#if>
  <#if entityFunction=="eo">
  <#assign employeeInvoiceEtcItemDetailsEntityName=emplodetailsEntityName>
   // force a new Instance & ID otherwise Hibernate will think it is the same detail record
   // but it also removes item if no new item was clicked
   // two employee ref ByEmployee and ByAgent
   ${employeeInvoiceEtcItemDetailsEntityName}Home.clearInstance();
   ${employeeEntityName}Home.getInstance();
   ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.getInstance().get${employeeEntityName?cap_first}ByEmployee().getA0xxuobxbxxxxxxxxxxxsid());
   ${employeeEntityName}ByEmployee = ${employeeEntityName}Home.getDefinedInstance();

  </#if>
  <#if entityFunction=="ei">
  <#assign employeeInvoiceEtcItemDetailsEntityName=emplidetailsEntityName>
  </#if>
  <#if entityFunction=="ep">
  <#assign employeeInvoiceEtcItemDetailsEntityName=employeePaymentItemDetailsEntityName>
  </#if>
 <#elseif entityFunction=="sh" > 
  <#assign cuinvoiceEtcItemDetailsEntityName=shipmentdetailsEntityName>
   // force a new Instance & ID otherwise Hibernate will think it is the same detail record
   // but it also removes item if no new item was clicked
   ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();

 <#elseif entityFunction=="sv" > 
  <#assign cuinvoiceEtcItemDetailsEntityName=vshipmendetailsEntityName>
   // force a new Instance & ID otherwise Hibernate will think it is the same detail record
             // but it also removes item if no new item was clicked
      ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();

 <#elseif  menuAttributesp2 == "65" >
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
		 ${gentriesDetailsEntityName}Home.clearInstance();

 <#elseif  menuAttributesp2 == "89" >
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
		 ${scheduleDetailsEntityName}Home.clearInstance();

 <#elseif  menuAttributesp2 == "9A" && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
		 ${jobassignmentdetailsEntityName}Home.clearInstance();

 <#elseif  menuAttributesp2 == "9C"  && processattributesEntityName??>
             // force a new Instance & ID otherwise Hibernate will think it is the same detail record
		 ${processattributesEntityName}Home.clearInstance();
 </#if>
    
  // ${menuAttributesp2} now a new item may be selected, so clear the old item values

    <#if  menuAttributesp2 != "65" >
     totaldel=new BigDecimal("0.0");
     totalmis=new BigDecimal("0.0");
    <#else>
     if(totaldel == null){
      totaldel=new BigDecimal("0.0");//if no debit/credit value entered, it is null
     }
     if(totalmis == null){
      totalmis=new BigDecimal("0.0");
     }
    </#if>
     // make a new method describeStatus(int status)
      <#if statusFlagField !=""  >
       if(!isBitSet(this.instance.get${statusFlagField?cap_first}(),_mactive) && this.getLastItemLine() == 2){ 
        if (customIdentity.isDebug()){ 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Further")+ " "+bundle.getString("edit")+ " "+bundle.getString("not")+" "+bundle.getString("allowed")+ ", "+bundle.getString("current")+ " "+bundle.getString("status")+" "+describeStatus(this.instance.get${statusFlagField?cap_first}()),""));
        }  
        return null;
       }
      </#if>
     totalbaseamt=new BigDecimal("0.0");
     moreActive=true;
     nextShow=true;
     if(!restEntity && !cartPoStatus.equals("e")){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("Manual")+ " "+bundle.getString("adjustment")+ " "+bundle.getString("fields")+" "+bundle.getString("like")+ " "+bundle.getString("MiscCharges")+ " "+bundle.getString("under")+" "+bundle.getString("More")+" "+bundle.getString("Fields")+ " "+bundle.getString("can")+ " "+bundle.getString("be")+", "+bundle.getString("used")+" "+bundle.getString("now")+", "+bundle.getString("if")+ " "+bundle.getString("needed")+" "+bundle.getString("before"),""));
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("using")+ " "+bundle.getString("save")+ " "+bundle.getString("next")+" "+bundle.getString("line")+ " "+bundle.getString("button")+" "+bundle.getString("to")+" "+bundle.getString("add")+" "+bundle.getString("this")+" "+bundle.getString("item"),""));
     }
     return null;
    }




    


<#if entityFunction =="vq" || entityFunction =="vo" || entityFunction =="vi" > 
	public boolean checkMatSetVendor() {
          //  checkMat();
		if (!bcontinue){
             return bcontinue;
            }
             ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getInstance();
		 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsUnitFieldName?cap_first}(${itemEntityName}.get${itemUnitField?cap_first}());
		 ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(${itemEntityName}.get${itemCostField?cap_first}());
		 //jay${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}(${itemEntityName}.get${itemPriceField?cap_first}());

             // check instance.set ???
		if (${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}().compareTo(new BigDecimal("0.0")) == 0) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("quantity")+ " "+bundle.getString("value")+ " "+bundle.getString("should")+ " "+bundle.getString("not")+" "+bundle.getString("be")+ " 0 ",""));
			bcontinue = false;
		}
            
         
		return bcontinue;
         

	}
</#if>

    <#if (menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" || menuAttributesp2 = "21" || menuAttributesp2 = "31" ) >
			
	//@Inject
     //needed because of extended where address is needed 
     ${addressEntityName?cap_first} ${addressEntityName};
      private ${addressEntityName?cap_first} ${addressEntityName}2;
      private String houseNo;
      private String addrL1;
      private String addrL2;
      private String city;
      private String provstate;
      private String pzcode;
      private String country;

     public boolean createAddress(){
            // validation added
                       Pattern pattern = Pattern.compile("^$|(^(?i)^[a-z0-9][a-z0-9\\-]{0,10}[a-z0-9]$)");
                       Matcher matcher = pattern.matcher(this.getPzcode());
                       if(!matcher.matches()){
			bcontinue = false;
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_INFO,bundle.getString("invalid")+ " "+bundle.getString("Pzcode")+" "+this.getPzcode()+ ", "+bundle.getString("only character of: a to z, 0 to 9")+ " "+bundle.getString("allowed"),""));
                         return bcontinue;
                       }

                       ${addressEntityName}2 = ${addressEntityName}Home.getInstance();	

		if (${addressEntityName}2 == null) {
                      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("address")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+" "+bundle.getString("created"),""));
			bcontinue = false;
		} else {
 		     ${addressEntityName}2.setB1pxusa1bvxxxxxxxxxxaddrl1(this.getAddrL1());
 		     ${addressEntityName}2.setB2xxub2xbvxxxxxxxxxxaddrl2(this.getAddrL2());
 		     ${addressEntityName}2.setB3xxh2acbv11xxxxxxxxcity(this.getCity());
 		     ${addressEntityName}2.setB4xxhbpxbv12xxxxxxxxprovnstate(this.getProvstate());
 		     ${addressEntityName}2.setB6xxh3azbv14xxxxxxxxpzcode(this.getPzcode());

           }
             return bcontinue;
     }

	public String getHouseNo() {
		return houseNo;
	}

	public void setHouseNo(String houseNo) {
		this.houseNo = houseNo;
	}

	public String getAddrL1() {
		return addrL1;
	}

	public void setAddrL1(String addrL1) {
		this.addrL1 = addrL1;
	}

	public String getAddrL2() {
		return addrL2;
	}

	public void setAddrL2(String addrL2) {
		this.addrL2 = addrL2;
	}

	public String getCity() {
		return city;
	}

	public void setCity(String city) {
		this.city = city;
	}

	public String getProvstate() {
		return provstate;
	}

	public void setProvstate(String provstate) {
		this.provstate = provstate;
	}

	public String getPzcode() {
		return pzcode;
	}

	public void setPzcode(String pzcode) {
		this.pzcode = pzcode;
	}

	public String getCountry() {
		return country;
	}

	public void setCountry(String country) {
		this.country = country;
	}

    </#if>


/*
currentClientClass ${currentClientClass}
*/
<#if currentClientClass !="">
           public String getCurrentClientFieldValue(String p) {
            <#if keyAutoGen == "Y" >
             ${clientEntityName?cap_first} client =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
            <#else>
            ${clientEntityName}Home.get${clientEntityName?cap_first}Id().set${clientClientversion?cap_first}(("01"));
            ${clientEntityName}Home.get${clientEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            ${clientEntityName?cap_first} client =${clientEntityName}Home.getDefinedInstance();
            </#if>
		if (client != null) {
                  if (p.equals("o")){
                    return client.get${clientDivisionnField?cap_first}();
                  }
                  else {
                    if (p.equals("e"))
                     return client.get${clientDepartmentnField?cap_first}();
                    else
                     return client.get${clientCompanynField?cap_first}();
                  }
           }
		else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("client")+ " / "+bundle.getString("parameter")+ " "+bundle.getString("not")+ " "+bundle.getString("not")+" "+bundle.getString("found"),""));

                  picked=false;
                  multipicked=false;
			return null;
			
		}
      }
</#if>
<#if menuAttributesp2 == "56" >
	public boolean getInRegistrationAndCreateUser() {
		return inRegistrationAndCreateUser;
	}

	public void setInRegistrationAndCreateUser(boolean inRegistrationAndCreateUser) {
		this.inRegistrationAndCreateUser = inRegistrationAndCreateUser;
	}
	public String getSubKey() {
		return subKey;
	}

	public void setSubKey(String subKey) {
		this.subKey = subKey;
	}


        String userSkin=null;
	public String getUserSkin() {
		return userSkin;
	}

	public void setUserSkin(String userSkin) {
		this.userSkin = userSkin;
	}

        public void setUserTheme(){
         // nullify temp skin skint so that new skin change take effect
         skinBean.setSkint(null);
         ${userproflEntityName}=${userEntityName}List.getUserProfiles();
         if(${userproflEntityName}==null){
           //create userprofl record
          try{          
           ${userproflEntityName}=${userproflEntityName}Home.getInstance();
           ${userproflEntityName}.set${userEntityName?cap_first}(this.getInstance());
           ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxrow("00");
           ${userproflEntityName}Home.setInstance(${userproflEntityName});
           ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxscrcolor(userSkin);
           ${userproflEntityName}Home.persist();
          } catch (Exception e) {
	    log.severe("Error accessing userprofl "+ e);
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("profile")+ " "+bundle.getString("access")+ " "+bundle.getString("failed")+ " - "+e.getMessage(),""));
          }
         }else{
           ${userproflEntityName}Home.setInstance(${userproflEntityName});
           ${userproflEntityName}.setB1xxuxxrbvxxxxxxxxxxscrcolor(userSkin);
           ${userproflEntityName}Home.update();
         }
         
        }

        public String selfUpdateUser() {
         //userHome instance has values for user and pointer to customer and address which has data
        //setUpdatedMessage(createValueExpression(""));
         this.superUpdate();
         ${customerEntityName}Home.clearInstance();
         ${customerEntityName}Home.setInstance(this.instance.getJxxxuq201xwwqqhxxxxxcustomer());
         ${customerEntityName}Home.superUpdate();

         ${addressEntityName}Home.clearInstance();
         ${addressEntityName}Home.setInstance(this.instance.getJxxxuq201xwwqqhxxxxxcustomer().getFxxxuq111xwwqqhxxxxxaddressByShiptocode());
         ${addressEntityName}Home.superUpdate();
         setChangeDone(true);
         return "superUpdated"; 
        }



	public ${userEntityName?cap_first} getOwnerUserData(String owner) {
        if(owner.length()<4){
         return null;
        }
        String userKey=owner.substring(0,owner.length()-3);
        try {
             ${userEntityName?cap_first} user =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${entityKeyFieldName} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName",userKey)
					.setParameter("owner2", owner2Code)
					.getSingleResult();
          if (user != null){
           return user; 
          }
          else{
           return null;
          }
      
        }
        catch(Exception zzz){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("${componentName}")+" "+bundle.getString("error")+" "+ zzz.getMessage(),""));
          return null;
        }              

     }

    /**
    * The following method deletes temp users created in shopping cart addProductToOrder who dropped out ie alevel null 
    * or users who never activated
    * should also drop temp customer via deleteDetails and temp cuorder created but not abondoned
    * @param args not used
    * @return void
    * @exception instance creation error.
    * @see 
    * function to add create usageby records to capture ip (later geo location ie country,state,city) and how many per
    * location by periods
    * use upto 5 predefined ips(countries) in client table and rest as others, capture cuorder item if any
    */ 
        public Integer deleteStatDropOuts(String action) {
                 //dropout users-dd or dc, inactive signup users-sd/sc, inactive user-ud/uc
		 try { 
                   calendar = Calendar.getInstance();
                   tempCount=0;
                   List<${userEntityName?cap_first}> listofuser=${userEntityName}List.getResultListMaxSet(1200) ;
                   // otherwise list has wrong maxresult
                   ${userEntityName}List.setMaxResultsVal(6);
		   Iterator<${userEntityName?cap_first}> itrg = listofuser.iterator();
		   itrg = listofuser.iterator();
	           while (itrg.hasNext()) {
		     ${userEntityName}li = itrg.next();
                     // alevel null for drop out users 
                     if(${userEntityName}li.getZ2xxcztxlxxxxxxxxxxxstatusfldt()==null){
                      continue;
                     } 
                     calendare.setTime(${userEntityName}li.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                     //dd/dc
                     if(action.equals("dd") || action.equals("dc")){
                      if(action.equals("dd")){
                       calendar.add(Calendar.DATE, -30);//30 days grace , assuming login updates user statusfldt
                      } 
                      if(action.equals("dc")){
                       calendar.add(Calendar.DATE, -20);//20 days grace and another 10 days before delete
                      }

                      if(calendare.before(calendar) && ${userEntityName}li.getC2xxuxuaiv38xxxxxxxxalevel()==null ){
                        //remove profile first jay add logic to remove related customers
                        for (${userproflEntityName?cap_first} glDetail : ${userEntityName}List.entityDetailedList(${userEntityName}li.getA0xxuobxbxxxxxxxxxxxsid())) {
                         if(action.equals("dd")){
                          // flush did not work if in loop ${gentriesDetailsEntityName}Home.remove();
                          deleteDetails(${userEntityName}li.getA0xxuobxbxxxxxxxxxxxsid());
                         }
                        }
                        tempCount=tempCount+1;
                      }
                      ${userEntityName}Home.setInstance(${userEntityName}li);
                      if(action.equals("dd")){
                       ${userEntityName}Home.remove();
                      }
                     }
                     //sd/sc
                     if(action.equals("sd") || action.equals("sc")){
                      if(action.equals("sc")){
                       calendar.add(Calendar.DATE, -10);//10 days grace
                      } 
                      if(action.equals("sc")){
                       calendar.add(Calendar.DATE, -3);//3 days grace
                      } 
                      if(calendare.before(calendar) && (${userEntityName}li.getC9xxuxxxbvxxxxxxxxxxactivationkey() !=null && !${userEntityName}li.getC9xxuxxxbvxxxxxxxxxxactivationkey().isEmpty()) ){
                       //remove profile first jay add logic to remove related customers
                       for (${userproflEntityName?cap_first} glDetail : ${userEntityName}List.entityDetailedList(${userEntityName}li.getA0xxuobxbxxxxxxxxxxxsid())) {
                        if(action.equals("sd")){
                         // flush did not work if in loop ${gentriesDetailsEntityName}Home.remove();
                         deleteDetails(${userEntityName}li.getA0xxuobxbxxxxxxxxxxxsid());
                        }
                        tempCount=tempCount+1;
                       }
                       ${userEntityName}Home.setInstance(${userEntityName}li);
                       if(action.equals("sd")){
                        ${userEntityName}Home.remove();
                       }
                      }
                     }
                     if(action.equals("ud") || action.equals("uc") ){
                      if(action.equals("ud")){
                       calendar.add(Calendar.DATE, -40);//40 days grace , login updates userprofl statusfldt
                      } 
                      if(action.equals("uc")){
                       calendar.add(Calendar.DATE, -30);//30 days grace
                      }
                      //use userprofl date
                      ${userproflEntityName}=${userEntityName}List.getUserProfiles();
                      if(${userproflEntityName} != null){
                       calendare.setTime(${userproflEntityName}.getZ2xxcztxlxxxxxxxxxxxstatusfldt());
                      }
                      if(calendare.before(calendar) && ${userEntityName}li.getZ2xxcztxlxxxxxxxxxxxstatusfldt() !=null ){
                       //remove profile first jay add logic to remove related customers
                       for (${userproflEntityName?cap_first} glDetail : ${userEntityName}List.entityDetailedList(${userEntityName}li.getA0xxuobxbxxxxxxxxxxxsid())) {
                        if(action.equals("ud")){
                         // flush did not work if in loop ${gentriesDetailsEntityName}Home.remove();
                         deleteDetails(${userEntityName}li.getA0xxuobxbxxxxxxxxxxxsid());
                        }
                        tempCount=tempCount+1;
                       }
                       ${userEntityName}Home.setInstance(${userEntityName}li);
                       if(action.equals("ud")){
                        ${userEntityName}Home.remove();
                       }
                      }
                     } 
                   }//end of while
                   if(action.equals("dd")){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("dropout")+" "+bundle.getString("users")+" "+bundle.getString("older")+" "+bundle.getString("than")+ sdf.format(calendar.getTime())+" "+bundle.getString("now")+" "+bundle.getString("deleted"),""));
                    return null;
                   }
                   if(action.equals("dc")){
                    return tempCount;
                   } 
                   if(action.equals("sd")){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("signup")+" "+bundle.getString("users")+" "+bundle.getString("older")+" "+bundle.getString("than")+ sdf.format(calendar.getTime())+" "+bundle.getString("now")+" "+bundle.getString("deleted"),""));
                    return null;
                   }
                   if(action.equals("sc")){
                    return tempCount;
                   } 
                   if(action.equals("ud")){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("inactive")+" "+bundle.getString("users")+" "+bundle.getString("older")+" "+bundle.getString("than")+ sdf.format(calendar.getTime())+" "+bundle.getString("now")+" "+bundle.getString("deleted"),""));
                    return null;
                   }
                   if(action.equals("uc")){
                    return tempCount;
                   } 

		 } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("purge")+" "+bundle.getString("failed")+" "+e.getMessage(),""));
			 // log.severe( "user purge error "+e.getMessage());
 			            bcontinue= false;
                    return null;
     	         }
                 
                 return null;

        
        }




</#if>


/*
currentUserClass ${currentUserClass}
*/
<#if currentUserClass !="" || keyfromclient = "Y" || entityFunction = "va" || menuAttributesp2 == "56" >
	public String getCurrentUserFieldValue(String p) {
            String result="";
            ${userEntityName?cap_first} user=null;
           try{
            // identity can have username from lastlogon, so use customIdentity.getOwner() rather than Identity.instance().getUsername()
            // owner is logonid+cdd ie companydivisiondepartment or sss if no comany hierarchy
            // username is ok and same as logonid if logged in
            <#if keyAutoGen == "Y" >
              user =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName",customIdentity.getUsername())
					.setParameter("owner2", owner2Code)
					.getSingleResult();
            <#else>
            ${userEntityName}Home.get${userEntityName?cap_first}Id().set${userKeyField?cap_first}((customIdentity.getOwner().substring(0,customIdentity.getOwner().length()-3)));
            ${userEntityName}Home.get${userEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            ${userEntityName?cap_first} user =${userEntityName}Home.getDefinedInstance();
            </#if>
            }catch(Exception exc){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+customIdentity.getUsername()+" "+bundle.getString("record")+ " "+bundle.getString("read")+ " "+bundle.getString("failed")+", "+exc.getMessage(),""));
             user=null;
            }

		if (user != null) {
                  if (p.equals("e")){
                    if (user.get${employeeEntityName?cap_first}() != null) { 
                     <#if keyAutoGen == "Y" >
                     result=user.get${employeeEntityName?cap_first}().get${employeeEntityEmployeeFieldName?cap_first}();
                     <#else>
                     result=user.get${employeeEntityName?cap_first}().getId().get${employeeEntityEmployeeFieldName?cap_first}();
                     </#if>
                    }
                  }
                  else {
                   if (p.equals("c")){
                    if (user.get${customerEntityName?cap_first}() != null) { 
                     <#if keyAutoGen == "Y" >
                     result=user.get${customerEntityName?cap_first}().get${customerEntityCustomerFieldName?cap_first}();
                     <#else> 
                     result=user.get${customerEntityName?cap_first}().getId().get${customerEntityCustomerFieldName?cap_first}();
                     </#if>
                    }
                   }
                   else {   
                    if (p.equals("v")){
                     if (user.get${vendorEntityName?cap_first}() != null) { 
                      <#if keyAutoGen == "Y" >
                       result=user.get${vendorEntityName?cap_first}().get${vendorVendor?cap_first}();
                      <#else>
                       result=user.get${vendorEntityName?cap_first}().getId().get${vendorVendor?cap_first}();
                      </#if>   
                     }
                    }
                    else{
                     if (p.equals("l")){
                      if (user.get${clientEntityName?cap_first}() != null) { 
                       <#if keyAutoGen == "Y" >
                        result=user.get${clientEntityName?cap_first}().get${clientEnterprisecompcode?cap_first}();
                       <#else>
                        result=user.get${clientEntityName?cap_first}().getId().get${clientEnterprisecompcode?cap_first}();
                       </#if>   
                      }
                     }
                     <#if menuAttributesp2 == "56">
                     else{
                      if (p.equals("d")){
                         result=user.getY8xxuzdrbvxxxxxxxxxxdocmnt();
                      }
                     }
                     </#if> 
                    }
                   }
                  }
                  if (result.trim().length() == 0) { 
                    return "Select value"; 
                  }
                  else{
                    return result;
                  }
           }
		else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("table")+ " "+bundle.getString("not")+ " "+bundle.getString("accessible"),""));
                  return "Select value"; 
			
		}
      }

</#if>
/*
acperiodClass ${acperiodClass}
*/
<#if acperiodClass !="">
        private ${acperiodEntityName?cap_first} acperiod;
	public String getAcperiodFieldValue(String p) {
            String result="";
            //dont use owner2Code until genApp finished  needs try catch
            try{
            <#if keyAutoGen == "Y" >
             acperiod =(${acperiodEntityName?cap_first}) entityManager
		.createQuery(
		 "select cc from ${acperiodEntityName?cap_first} cc where cc.${acperiodKeyField} = :nKeyName  AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		.setParameter("nKeyName","01").setParameter("owner2", owner2Code)
		.getSingleResult();
            }catch(Exception exc){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("period")+ " "+bundle.getString("01")+ " "+bundle.getString("read")+ " "+bundle.getString("failed")+", "+exc.getMessage(),""));
             acperiod=null;
            }

            <#else>
             ${acperiodEntityName}Home.get${acperiodEntityName?cap_first}Id().set${acperiodKeyField?cap_first}("01");
             ${acperiodEntityName}Home.get${acperiodEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
             ${acperiodEntityName?cap_first} acperiod =${acperiodEntityName}Home.getDefinedInstance();
            </#if>
	    if (acperiod != null) {
                  if (p.equals("cp")){
                    if(acperiod.get${acperiodCurrentPeriodField?cap_first}() != null){
                     return acperiod.get${acperiodCurrentPeriodField?cap_first}();
                    }else{
                     return "12";//assume period 12
                    }
                  }
                  else {
                    if(acperiod.get${acperiodCurrentBusDateField?cap_first}() !=null){
                     return acperiod.get${acperiodCurrentBusDateField?cap_first}().toString();
                    }else{
                      SimpleDateFormat ss = new SimpleDateFormat("yyyy-MM-dd");

                     return ss.format(calendar.getTime()).toString();// assume toDay
                    }
                  }
            }
	    else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("period")+ " "+bundle.getString("table")+ " "+bundle.getString("not")+ " "+bundle.getString("accessible"),""));

                  bcontinue=false;
			return null;
			
           }
      }
	public Date getAcperiodDateFieldValue(String p) {
            String result="";
            <#if keyAutoGen == "Y" >
             ${acperiodEntityName?cap_first} acperiod =(${acperiodEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${acperiodEntityName?cap_first} cc where cc.${acperiodKeyField} = :nKeyName  AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01").setParameter("owner2", owner2Code)
					.getSingleResult();

            <#else>
             ${acperiodEntityName}Home.get${acperiodEntityName?cap_first}Id().set${acperiodKeyField?cap_first}("01");
             ${acperiodEntityName}Home.get${acperiodEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
             ${acperiodEntityName?cap_first} acperiod =${acperiodEntityName}Home.getDefinedInstance();
            </#if>
		if (acperiod != null) {
                  if (p.equals("cbd")){
                    return acperiod.get${acperiodCurrentBusDateField?cap_first}();
                  }
                  else{
			   return null;
                  }
           }
		else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("accounting")+ " "+bundle.getString("period")+ " "+bundle.getString("table")+ " "+bundle.getString("not")+" "+bundle.getString("accessible"),""));

                  bcontinue=false;
			return null;
			
		}
      }

</#if>

	public void setShowKeyFields() {
	}
        //cartPoPicked is a flag to allow/suppress key generation and is set to true in cartpersist if po already exists  
        private boolean cartPoPicked=false;
        private boolean restEntity =false;
     <#if ( keyfromclient == "Y" ) || currentClientClass = "Y" || menuAttributesp2 == "89">
	private boolean picked = false;
	private boolean multipicked = false;

     <#else>
     // vendor invoice uses key from supplier , add more logic to handle it
	private boolean picked = false;
	private boolean multipicked = false;

    </#if>
     //jay document purpose of using last and show. last may be to reuse what was used recently
     // and show may be for dynamic rendering look at useraux as well 
     // note the lastItemEntity is used in forum to hold replyTo , others are not used
	private boolean bcontinue = true;
	private boolean moreActive = false;
	private boolean includeNext = false;
/*The following needs to be defined only if we need an instance of an entity which is not already generated via default seam gen. example if the entity is not a foreign key like Journal entity.
For the Foreign key instance, use the variables used in wire() where a getInstance is issued.For others use the variable defined below and issue a getInstance later.
*/
<#if acperiodClass == "Y" && userHomeCandidate != "Y" >
	@Inject
	${acperiodEntityName?cap_first}Home ${acperiodEntityName}Home;
</#if>
<#if currentClientClass !="" || keyfromclient = "Y" || entityFunction = "va" >
	@Inject
	${clientEntityName?cap_first}Home ${clientEntityName}Home;
</#if>
     <#if ( currentUserClass == "Y")>
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
    </#if>
<#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci"  || entityFunction == "cp" || entityFunction == "sh" >
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
	@Inject
	${cuinvoiceEtcItemDetailsEntityName?cap_first}Home ${cuinvoiceEtcItemDetailsEntityName}Home;
      private ${cuinvoiceEtcItemDetailsEntityName?cap_first} ${cuinvoiceEtcItemDetailsEntityName};
</#if>
<#if entityFunction == "vq" || entityFunction == "vo" || entityFunction == "vi"  || entityFunction == "vp" || entityFunction == "sv">
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
	@Inject
	${vendorInvoiceEtcItemDetailsEntityName?cap_first}Home ${vendorInvoiceEtcItemDetailsEntityName}Home;
      private ${vendorInvoiceEtcItemDetailsEntityName?cap_first} ${vendorInvoiceEtcItemDetailsEntityName};
</#if>
<#if entityFunction == "eq" || entityFunction == "eo" || entityFunction == "ei"  || entityFunction == "ep" >
	@Inject
	${userEntityName?cap_first}Home ${userEntityName}Home;
	@Inject
	${employeeInvoiceEtcItemDetailsEntityName?cap_first}Home ${employeeInvoiceEtcItemDetailsEntityName}Home;
      private ${employeeInvoiceEtcItemDetailsEntityName?cap_first} ${employeeInvoiceEtcItemDetailsEntityName};
</#if>


<#if entityFunction =="ci"  || entityFunction == "cp" || entityFunction == "vi"  || entityFunction == "va"  || entityFunction == "vp"  || menuAttributesp2 == "65"  || menuAttributesp2 == "60"> 
	@Inject
	${journalEntityName?cap_first}Home ${journalEntityName}Home;
      private ${journalEntityName?cap_first} jpjournal ;
</#if>

<#if entityFunction =="ci"  || entityFunction == "vi"  || entityFunction == "va"> 
	@Inject
	${accountEntityName?cap_first}Home ${accountEntityName}Home;
      private ${accountEntityName?cap_first} ${accountEntityName};
</#if>

      private Integer lastItemLine=new Integer(0);
      //@Begin(join=true)

	public BigDecimal getKeyedQuantity() {
		return keyedQuantity;
	}

	public void setKeyedQuantity(BigDecimal keyedQuantity) {
		this.keyedQuantity = keyedQuantity;
      }

	public BigDecimal getTotalbaseamt() {
		return totalbaseamt;
	}

	public void setTotalbaseamt(BigDecimal totalbaseamt) {
		this.totalbaseamt = totalbaseamt;
	}
        //
	public BigDecimal getChange() {
		return change;
	}

	public void setChange(BigDecimal change) {
		this.change = change;
	}

	public BigDecimal getTotalmis() {
		return totalmis;
	}

	public void setTotalmis(BigDecimal totalmis) {
		this.totalmis = totalmis;
	}

	public void setDetailMis(BigDecimal detailMis) {
		this.detailMis = detailMis;
	}

	public void setDetailDel(BigDecimal detailDel) {
		this.detailDel = detailDel;
	}

	public void setDetailTax1(BigDecimal detailTax1) {
		this.detailTax1 = detailTax1;
	}


	public void setTotaltax1(BigDecimal totaltax1) {
		this.totaltax1 = totaltax1;
	}

	public BigDecimal getTotaltax1() {
		return totaltax1;
	}

	public void setTotalamountTotal(BigDecimal amountTotal) {
		this.amountTotal = amountTotal;
	}

	public BigDecimal getTotalamountTotal() {
		return amountTotal;
	}

	public void setTotalqtyTotal(BigDecimal qtyTotal) {
		this.qtyTotal = qtyTotal;
	}

	public BigDecimal getTotalqtyTotal() {
		return qtyTotal;
	}
	public void setTotaltax2(BigDecimal totaltax2) {
		this.totaltax2 = totaltax2;
	}

	public BigDecimal getTotaltax2() {
		return totaltax2;
	}

	public void setTotaltax3(BigDecimal totaltax3) {
		this.totaltax3 = totaltax3;
	}

	public BigDecimal getTotaltax3() {
		return totaltax3;
	}

	public BigDecimal getTotaldel() {
		return totaldel;
	}

	public void setTotaldel(BigDecimal totaldel) {
		this.totaldel = totaldel;
	}

	public BigDecimal getTotalqty() {
		return totalqty;
	}
	public void setTotalqty(BigDecimal totalqty) {
		this.totalqty = totalqty;
	}

      public Integer getLastItemLine() {
       return lastItemLine;
      }

	public void setLastItemLine(Integer lastItemLine) {

		this.lastItemLine = lastItemLine;
	}

//jay look into automating the below logic using related property values
// getShow does not seem to be used?? may be future security
// The below is useed to handle foreign fields which are dropdown and the value cannot point to instance.foreign entity
// since the entity does not exist yet if create, list works
// enhance remembering last value by using userprofile table the way row and option value is used
<#if ids != "notdefinedxxxxxxxxx" && idsType?contains("tring")>
	private boolean show${componentName} = false;
        <#if menuAttributesp2 == "1L" >
	 private String  last${componentName} = "m";
        <#else>
	 private String  last${componentName} = " ";
        </#if>
	 private String  last${componentName}P = " ";
	public boolean getShow${componentName}() {
		return this.show${componentName};
	}
	public void setShow${componentName}(boolean show${componentName}) {
		 this.show${componentName}=show${componentName};
	}

	public String getLast${componentName}() {
                if(this.instance !=null && this.instance.get${ids?cap_first}() !=null){
                 last${componentName}= this.instance.get${ids?cap_first}();
                }
		return this.last${componentName};
	}

	public void setLast${componentName}(String last${componentName}) {
		 this.last${componentName}=last${componentName};
	}
	public String getLast${componentName}P() {
                //if(this.instance !=null && this.instance.get${entityName}().get${ids?cap_first}() !=null){
                 //last${componentName}P= this.instance.get${entityName}().get${ids?cap_first}();
                //}
		return this.last${componentName}P;
	}

	public void setLast${componentName}P(String last${componentName}) {
		 this.last${componentName}P=last${componentName};
	}

</#if>
<#if menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" >
        /*
         method used by xxList in getResultList
        */

	public ${employeeEntityName?cap_first} getCurrentUserToEmployee() {
            ${employeeEntityName?cap_first} result=null;
            ${userEntityName?cap_first} user =null;
            try{
             user =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName",customIdentity.getUsername())
					.setParameter("owner2", owner2Code)
					.getSingleResult();
         } catch ( NoResultException nre){
          user=null;
         } catch ( Exception e){
          user=null;
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("to")+" "+bundle.getString("employee")+" "+bundle.getString("error")+" "+bundle.getString("for")+customIdentity.getUsername()+"- "+e.getMessage(), ""));
         }
         if (user != null && (user.getC4xxuxupivxxxxxxxxxxcurrpw().equals("dummyfbPW") || user.getC2xxuxuaiv38xxxxxxxxalevel()==null)) {
           return null;// doesnt have employee record
         }
         

		if (user != null) {
                    if (user.get${employeeEntityName?cap_first}() != null) { 
                     result=user.get${employeeEntityName?cap_first}();
                    }
		    else{
                          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("related")+ " "+bundle.getString("employee")+ " "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                          return null; 
	           }
               }
	       else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                return null; 
	      }
              return result;

     }

	public ${customerEntityName?cap_first} getCurrentUserToCustomer() {
            ${customerEntityName?cap_first} result=null;
            ${userEntityName?cap_first} user =null;
            try{
             user =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName",customIdentity.getUsername())
					.setParameter("owner2", owner2Code)
					.getSingleResult();
         } catch ( NoResultException nre){
          user=null;
         } catch ( Exception e){
          user=null;
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("to")+" "+bundle.getString("employee")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
         }

		if (user != null) {
                    if (user.get${customerEntityName?cap_first}() != null) { 
                     result=user.get${customerEntityName?cap_first}();
                    }
		    else{
                     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("related")+ " "+bundle.getString("customer")+ " "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                     return null; 
		         }
                }
		else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                return null; 
		}
                return result;

     }





</#if>

<#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || menuAttributesp2 ="20" || menuAttributesp2 = "30"||menuAttributesp2="40" >
     // It is called by createInstance to get the current user's foreign entity like employee,customer or vendor 
	public void getCurrentUserToEmployeeValue(String p) {
            String result="";
            ${userEntityName?cap_first} user=null;
		try {
                     <#if keyAutoGen == "Y" >
                      user =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName",customIdentity.getUsername())
					.setParameter("owner2", owner2Code)
					.getSingleResult();
                     <#else>
                      ${userEntityName}Home.get${userEntityName?cap_first}Id().set${userKeyField?cap_first}((customIdentity.getOwner()));
                      ${userEntityName}Home.get${userEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                      ${userEntityName?cap_first} user =${userEntityName}Home.getDefinedInstance();
                     </#if> 
		} catch (NoResultException nre) {
			//throw new ValidatorException(new FacesMessage("Does not exist"));
		}
                
		if (user != null) {
                  if (p.equals("e")){
                    if (user.get${employeeEntityName?cap_first}() != null) { 
                     <#if keyAutoGen == "Y" >
                     result=user.get${employeeEntityName?cap_first}().get${employeeEntityEmployeeFieldName?cap_first}();
                     <#else>
                     result=user.get${employeeEntityName?cap_first}().getId().get${employeeEntityEmployeeFieldName?cap_first}();
                     </#if> 
                    }
                  }
                  else {
                   if (p.equals("c")){
                    if (user.get${customerEntityName?cap_first}() != null) { 
                     <#if keyAutoGen == "Y" >
                     result=user.get${customerEntityName?cap_first}().get${customerEntityCustomerFieldName?cap_first}();
                     <#else>
                     result=user.get${customerEntityName?cap_first}().getId().get${customerEntityCustomerFieldName?cap_first}();
                     </#if>
                    }
                   }
                   else {              
                    if (user.get${vendorEntityName?cap_first}() != null) { 
                     <#if keyAutoGen == "Y" >
                     result=user.get${vendorEntityName?cap_first}().get${vendorVendor?cap_first}();
                     <#else>
                     result=user.get${vendorEntityName?cap_first}().getId().get${vendorVendor?cap_first}();
                     </#if>
                    }
                   }
                  }
                  if (result.trim().length() == 0) { 
                  //  return "Select value"; 
                  }
                  else{
                  //  return result;
		${employeeEntityName?cap_first} cc = ${employeeEntityName}Home.getInstance();
		try {
			${employeeEntityName?cap_first} cc1 = (${employeeEntityName?cap_first}) entityManager
					.createQuery(
                     <#if keyAutoGen == "Y" >
							"select cc from ${employeeEntityName?cap_first} cc where cc.a0xxuktxbvxxxxxxxxxxemployee = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                     <#else>
							"select cc from ${employeeEntityName?cap_first} cc where cc.a0xxuktxbvxxxxxxxxxxemployee = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                     </#if> 
					.setParameter("keyOfEntity", result).setParameter("owner2", owner2Code)
					.getSingleResult();
			if (cc1 != null) {
				//throw new ValidatorException(new FacesMessage("Name already exists"));
				// that's fine - It should exist.
			}
		} catch (NoResultException nre) {
			//throw new ValidatorException(new FacesMessage("Does not exist"));
		}
		// now simulate as if came by select from list ie xxx.page parameter value setting
		// this will do setId(xx)
                     <#if keyAutoGen == "Y" >
                     <#else>
		            ${employeeEntityName}Home.get${employeeEntityName?cap_first}Id().setA0xxuktxbvxxxxxxxxxxemployee(result);
                     </#if>
                     
                  }
           }
	   else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                 // return "Select value"; 
			
	  }
      }

</#if>

<#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci" || entityFunction == "cp" || entityFunction == "sh"  >
     public void showtemprunt(){
      // this method is called by cuordersEdit every time item changes whats the impact on performance ??
      // should the logic be more intelligent and just adjust the item related change in createcdetatail or have separate short logic
      // if extended, quote etc will not be null
      bcontinue=true;


      createCdetailsetValues() ;//but does not set detail totals

      this.showrunt();// detail totals and parent totals for current item (no harm but check if parent part not needed) 
      //showrunt() calls setParent if entity already exisa, so bypass if needed
      /* showrunt calls setParent if entity exists , also look into why set/update parent clearing detail values
            if(!bcontinue){
             return "";
            }
      if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() ==null){
      setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());// set parent totals from detail totals
      }
      */
     }

    //called by showtemprunt for customer txns, sets bcontinue
    public void showrunt()
      {
      //add logic to check whether item/customer already exists under its predecessor ie quote,order etc
      // showrunt does not iterate, it uses the current detail and updates totals
      // iteration can happen in calling module like  updatedetaillsAll via update but in all cases it points
      // to current detail item.
      // in both updates and add either or both qty and item can change or remain unchanged so subtracting and 
      // adding the current detail (with change/no change) will always work, except we need to subtract the prev 
      // qtyord, qtyord changes directly by user 
      //tbd check item type. If AD-D or AD-M then treat value as detailDel or detailMisc not as item cost
      if(this.instance==null){ 
       return;// Edit viewAction calls this 
      }
      <#if entityFunction=="cp"  >
             totalbaseamt = new BigDecimal("0.0");
             totalmis = new BigDecimal("0.0");
             totaldel = new BigDecimal("0.0");
             totalqty = new BigDecimal("0.0");
             totaltax1= new BigDecimal("0.0");
             totaltax2= new BigDecimal("0.0");
             totaltax3= new BigDecimal("0.0");
             amountTotal = new BigDecimal("0.0");
             qtyTotal= new BigDecimal("0.0");///remove
             totalqty= new BigDecimal("0.0");///added
             detailLt = new BigDecimal("0.0");
             //can come here if list/edit of existing entity w details, skip if from save
             //setParent loops through all details and recalculates parent totals
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
       // eqv to check for item in ci,co 
       if (${customerEntityName} == null){
        bcontinue=false;
        return;
       }


             if (this.instance != null) {
              //if invoice was chosen then show amt due
              //check if an invoice already outstanding for this customer
              if (this.instance.get${customerEntityName?cap_first}() != null){
               // call cuinvoiceList.getFlaggedAsList(minvoiced)
               // for loop to check against customer and if match give msg
               int count=0;
               temps="";
               int sid1=0;// avoid lazy loading compare failure
               int sid2=0;
               for (${cuinvoiceEntityName?cap_first} outStandingList : ${cuinvoiceEntityName}List.getFlaggedAsList(minvoiced)) {     
                sid1=this.instance.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();
                sid2=outStandingList.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();
                if( sid1==sid2  ){ 
                 temps=temps+" ["+outStandingList.getA0xxuncibvxxxxxxxxxxinvoice()+": "+"amount "+outStandingList.getZ2xxzyprlxxxxxxxxxxxamountostndt()+"/"+outStandingList.getZ1xxztprlxxxxxxxxxxxamounttotal()+"] ";     
                 count=count+1;
                }
               }
               if (count > 0){
                if (countB ==0){
                 countB++;
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("Now")+", "+count+" "+bundle.getString("outstanding")+" "+bundle.getString("invoice")+"(s) "+" "+bundle.getString("for")+" "+bundle.getString("selected")+" "+bundle.getString("customer")+" "+this.instance.get${customerEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxcustomer(),""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("shown")+" "+bundle.getString("as")+" "+bundle.getString("invoice")+" "+bundle.getString("#")+": "+bundle.getString("outstanding")+" / "+bundle.getString("total")+" "+bundle.getString("amount")+",      "+temps,""));
                }
               }else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_WARN,bundle.getString("Now")+", "+bundle.getString("no")+" "+bundle.getString("outstanding")+" "+bundle.getString("invoice")+"(s) "+" "+bundle.getString("for")+" "+bundle.getString("selected")+" "+bundle.getString("customer")+" "+this.instance.get${customerEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxcustomer(),""));
               }
              }
              <#if keyAutoGen == "Y" >
              if (${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.getA0xxuncibvxxxxxxxxxxinvoice() != null){
               if(!${cuinvoiceEntityName}.getA0xxuncibvxxxxxxxxxxinvoice().equals("temps")){
                temps=${cuinvoiceEntityName}.getA0xxuncibvxxxxxxxxxxinvoice();
              <#else>
               if (${cuinvoiceEntityName} != null && ${cuinvoiceEntityName}.getId().getA0xxuncibvxxxxxxxxxxinvoice() != null){
                if(!${cuinvoiceEntityName}.getId().getA0xxuncibvxxxxxxxxxxinvoice().equals("temps")){
                 temps=${cuinvoiceEntityName}.getId().getA0xxuncibvxxxxxxxxxxinvoice();
              </#if>
                 //get the outstanding amount from invoice, payment details will have amount in
                 if(${cuinvoiceEntityName}.getZ2xxzyprlxxxxxxxxxxxamountostndt().compareTo(BigDecimal.ZERO) >0){
                  detailbaseamt=${cuinvoiceEntityName}.getZ2xxzyprlxxxxxxxxxxxamountostndt();
                 }else{
                  detailbaseamt= amountIn; 
                 }
                 ${cupdetailsEntityName}.setZ6xxzxxxavxxxxxxxxxxamountin(detailbaseamt);
                 if(cartPoStatus.equals("e")){
    	  ${cupdetailsEntityName}.setZ6xxzxxxavxxxxxxxxxxamountin(amountIn);
                 }
                ${cupdetailsEntityName}.setZbxxzxz1avxxxxxxxxxxtax1amt(detailTax1);//
                ${cupdetailsEntityName}.setZgxxzlpxxvxxxxxxxxxxlinetotl(amountIn);
                }
               }
              //no invoice involved
              else {
               /// skip adding same instance
               if(!nextShow){
                return;
               }
               amountIn=xoxxuq284xwwqqhxxxxxcupdetails.getZ6xxzxxxavxxxxxxxxxxamountin();// if direct payment
               // cart order to payment added
               if (trexuq244xwwqqhxxxxxcuorders != null && trexuq244xwwqqhxxxxxcuorders.getA0xxuncobvxxxxxxxxxxpurchsno() != null){
                detailbaseamt=xoxxuq284xwwqqhxxxxxcupdetails.getZ6xxzxxxavxxxxxxxxxxamountin();
               }else{
                detailbaseamt=xoxxuq284xwwqqhxxxxxcupdetails.getZ6xxzxxxavxxxxxxxxxxamountin();//existing payment logic no invoice/order
               }
               // allow adding tax, deliv etc 
               detailMis  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}();
               if ( detailDel.compareTo(new BigDecimal("0.0")) == 0 ){
                detailDel  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}();
               } 
               detailTax1  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}();
               detailTax2  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}();
               detailTax3  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}();
              }
                // in customer payment discount is expns like misc to business and amt in is after discount applied
                if (trexuq244xwwqqhxxxxxcuorders != null && trexuq244xwwqqhxxxxxcuorders.getA0xxuncobvxxxxxxxxxxpurchsno() != null){
                 this.instance.setD1xxzyprlxxxxxxxxxxxamountin(amountIn);//
                }else{
                 this.instance.setD1xxzyprlxxxxxxxxxxxamountin(detailbaseamt);//
                } 
       	        detailLt = detailLt.add(detailbaseamt);
                if(discountType.equals("pe") && this.instance.getB3xxzixrbvxxxxxxxxxxdiscount().compareTo(new BigDecimal("0.0")) != 0){
                 detailLt= detailLt.add(detailLt.multiply(this.instance.getB3xxzixrbvxxxxxxxxxxdiscount()).divide(new BigDecimal("100.00")));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("discount")+" "+bundle.getString("of")+" "+detailLt.multiply(this.instance.getB3xxzixrbvxxxxxxxxxxdiscount()).divide(new BigDecimal("100.00"))+" "+bundle.getString("applied")+" "+bundle.getString("in")+" "+bundle.getString("posting"),""));
                }else{
                 detailLt= detailLt.add(this.instance.getB3xxzixrbvxxxxxxxxxxdiscount());
                }
                detailLt = detailLt.add(detailDel);
                detailLt = detailLt.add(detailMis);
                detailLt = detailLt.add(detailTax1);
                detailLt = detailLt.add(detailTax2);
                detailLt = detailLt.add(detailTax3);

	        //setTotalamountTotal(amountTotal.add(amountIn));//  setparent call above already set this
            if (cartPoStatus.equals("u")){
             // u means remove, so dont add the details which will get removed later in the logic
            }else{
             if (cartPoStatus.equals("c")){
              // update setparent called but detail linetotl not set there and following gets invoked for 1st line
              ${cuinvoiceEtcItemDetailsEntityName}.setZgxxzlpxxvxxxxxxxxxxlinetotl(amountIn);//
             }else{
              setTotalbaseamt(totalbaseamt.add(detailbaseamt));
	      ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsLineTotalFieldName?cap_first}(amountIn);
	      //setTotalamountTotal(amountTotal.add(amountIn));// commented , setparent call above already set this
	      //setTotalqtyTotal(qtyTotal.add(detailQty));// comment  setparent call above already set this
	      //setTotalqtyTotal(totalqty.add(detailQty));
              qtyOrdPrev=detailQty;// save the values here
              detailLtO=detailLt;
              detailbaseamtO=detailbaseamt;
             }
           }
              setTotalamountTotal(amountTotal.add(detailLt));// uncommented
          }

      <#elseif entityFunction=="sh"  >
       //show shipping/delivery charges only note qtyTotal & qtyOrdPrev is being used to hold prev shipping cost
       //detailDel now has shipping cost based on type but flat rate 
       //first subtract current ie existing detail value
       // extended goes through each detail and does not redo same detail
       if (!cartPoStatus.equals("e")){
        totalbaseamt = totalbaseamt.subtract(detailbaseamtO);
        detailQty = detailQty.subtract(qtyOrdPrev);
        amountTotal = amountTotal.subtract(detailbaseamtO);
        qtyTotal = qtyTotal.subtract(qtyOrdPrev);//remove
        totalqty = totalqty.subtract(qtyOrdPrev);///added
       }
       //if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() !=null){  new so id is null but has other values
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
       //}
       // eqv to check for item in ci,co 
       if (${customerEntityName} == null){
        bcontinue=false;
        return;
       }

       //then add current detail value which may be same or has changed if item is different
       recalShippingCost();//returns shipping cost in detailbaseamt look into qty impact assume same cost for now
       totalbaseamt = totalbaseamt.add(detailbaseamt);
       setTotalamountTotal(amountTotal.add(totalbaseamt));
       if(xoxxuq295xwwqqhxxxxxshipmentdetails.getZ3xxeqxxbvnxxxxxxxxxqtyshipped() != null){
        detailQty=xoxxuq295xwwqqhxxxxxshipmentdetails.getZ3xxeqxxbvnxxxxxxxxxqtyshipped();
       }
       setTotalqtyTotal(qtyTotal.add(detailQty));///
       //setTotalqtyTotal(totalqty.add(detailQty));///
       qtyOrdPrev=detailQty;// save the values here
       detailbaseamtO=detailbaseamt;
      <#else>
       // for co,cq and ci
       <#if entityFunction == "co" || entityFunction == "cq" || entityFunction == "ci"  > // subtract current detail values
       ///instead of below use updateParentFrom for more reliable values
       /// also enhance updateParentFrom logic to not persist if recalculated totals did not change
             totalbaseamt = new BigDecimal("0.0");
             totalmis = new BigDecimal("0.0");
             totaldel = new BigDecimal("0.0");
             totalqty = new BigDecimal("0.0");
             totaltax1= new BigDecimal("0.0");
             totaltax2= new BigDecimal("0.0");
             totaltax3= new BigDecimal("0.0");
             amountTotal = new BigDecimal("0.0");
             qtyTotal= new BigDecimal("0.0");
             totalqty= new BigDecimal("0.0");
             //can come here if list/edit of existing entity w details, skip if from save
             if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() !=null){
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
             }

       </#if> 
       /// skip adding same instance
       if(!nextShow){
        return;
       }

       // recalculate detail values change or no change 
       // for tax purposes use current detail item , instance item has the last detail and tax may not apply
       ${itemEntityName}=${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}();
       detailLt = new BigDecimal("0.0");
       detailbaseamt = new BigDecimal("0.0");
       // note client tax1code is tax1 vendor registration number and it means tax1 applies unless overridden at item/customer level
       // for item or customer default value is false and means apply tax and if changed to true means override with false
       client=r3RestClient.getClient();
       if (client !=null && client.getV6xxuxz1bvxxxxxxxxxxtax1code() !=null && !client.getV6xxuxz1bvxxxxxxxxxxtax1code().isEmpty()){
        applyTax1=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1() !=null && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1()){
         applyTax1=false;
        }
        if (${customerEntityName} !=null && ${customerEntityName}.getY6xxfxz1bvxxxxxxxxxxtax1() !=null && ${customerEntityName}.getY6xxfxz1bvxxxxxxxxxxtax1()){
         applyTax1=false;
        }
       }
       if (client !=null && client.getV7xxuxz2bvxxxxxxxxxxtax2code() !=null && !client.getV7xxuxz2bvxxxxxxxxxxtax2code().isEmpty()){
        applyTax2=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2()!=null && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2()){
         applyTax2=false;
        }
        if (${customerEntityName} !=null && ${customerEntityName}.getY7xxfxz2bvxxxxxxxxxxtax2() !=null && ${customerEntityName}.getY7xxfxz2bvxxxxxxxxxxtax2()){
         applyTax2=false;
        }
       }
       if (client !=null && client.getV8xxuxz3bvxxxxxxxxxxtax3code() !=null && !client.getV8xxuxz3bvxxxxxxxxxxtax3code().isEmpty()){
        applyTax3=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3() !=null && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3()){
         applyTax3=false;
        }
        if (${customerEntityName} !=null && ${customerEntityName}.getY8xxfxz3bvxxxxxxxxxxtax3() !=null && ${customerEntityName}.getY8xxfxz3bvxxxxxxxxxxtax3()){
         applyTax3=false;
        }
       }

       // add logic to overide applyTax checking customer  added tax on shipment/handling
       // option row1 for tax on item,row2 for tax on shipment and row3 for tax on handling charge  check for empty not null
       Collection<String> vs =null;
       Iterator<String> iterator = null;
       String valueS=null;
       try{
        if (applyTax1){ 
         vs = yrxxch511xhhxxhxxxxxoptionsList.getoptionsFieldList("24",04).values();  
         iterator = vs.iterator();    
         int i=0;
         while( iterator.hasNext() ){//each next gets next element
          i=i+1;
          valueS=iterator.next();
          if(i==1){
           tax1RateValue=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));         
           continue;
          }
          if(i==2){
           tax1RateValueS=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));
           continue;
          }
          if(i==3){
           tax1RateValueH=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));
           continue;
          }
          break;
         }
        }
        if (applyTax2){ 
         vs = yrxxch511xhhxxhxxxxxoptionsList.getoptionsFieldList("24",04).values();  
         iterator = vs.iterator();    
         int i=0;
         while( iterator.hasNext() ){//each next gets next element
          i=i+1;
          valueS=iterator.next();
          if(i==1){
           tax2RateValue=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));         
           continue;
          }
          if(i==2){
           tax2RateValueS=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));
           continue;
          }
          if(i==3){
           tax2RateValueH=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));
           continue;
          }
          break;
         }
        }
        if (applyTax3){ 
         vs = yrxxch511xhhxxhxxxxxoptionsList.getoptionsFieldList("24",04).values();  
         iterator = vs.iterator();    
         int i=0;
         while( iterator.hasNext() ){//each next gets next element
          i=i+1;
          valueS=iterator.next();
          if(i==1){
           tax3RateValue=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));         
           continue;
          }
          if(i==2){
           tax3RateValueS=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));
           continue;
          }
          if(i==3){
           tax3RateValueH=valueS.isEmpty()?BigDecimal.ZERO:new BigDecimal(valueS).multiply(new BigDecimal(".01"));
           continue;
          }
          break;
         }
        }

       } catch ( Exception e){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_WARN,bundle.getString("tax")+" "+bundle.getString("value")+" "+e.getMessage(),""));
         bcontinue=false;
         return ;
       }
           // add and edit both have logic to change item instance price to overridevalue
           // here it uses details entity item price/cost which was copied from item entity at createc/vdetails 
           // added logic to adjust price/cost here because add/update happens after createc/vdetails
           if ((priceOverRide != null && priceOverRide.compareTo(BigDecimal.ZERO)!=0) || (overRideValue !=null && !overRideValue.isEmpty())){
            if (this.overRideOk()){
             // priceoverRide applies to only one line and its item
             ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(priceOverRide);
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_WARN,bundle.getString("Price")+" "+bundle.getString("override")+" "+bundle.getString("of")+" "+priceOverRide+" "+bundle.getString("applied"),""));
              priceOverRide=BigDecimal.ZERO;//sets it to zero so that other line items are not affected
              overRideValue="";//reset it back to default and avoid using 0 price

            }else{
             bcontinue=false;
             return;
            }
           }
            // change co,ci,cp edit as well, like price override it applies to only one line and its item
            //needs more work, may be change at total level with a note after conversion?
            //make sure not to change posting amount, it should initially remain in item currency
            // posting > updateAccount has logic to convert to merchant/Banking rate if needed
           <#if entityFunction == "ci">
            BigDecimal convRate=BigDecimal.valueOf(${clientEntityName}List.getKeyToEntity("01").getP4xxzxxrbvxxxxxxxxxxshibaradj()).movePointLeft(2);
            if(convRate.compareTo(BigDecimal.ZERO)==0){// initial value one
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_WARN,bundle.getString("Item")+"/ "+bundle.getString("Merchant")+" "+bundle.getString("currency")+" "+bundle.getString("Rate")+" "+bundle.getString("Zero")+", "+bundle.getString("continuing")+" "+bundle.getString("as")+" "+bundle.getString("if")+" "+bundle.getString("One.")+" "+bundle.getString("Check")+" "+bundle.getString("Client")+" "+bundle.getString("Record"),""));
              convRate = BigDecimal.ONE;
            }
            if(currConv && convRate.compareTo(BigDecimal.ZERO)!=0 && ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}() != null){
             ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}(
              ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}().multiply(customIdentity.getConvRate()) );
            }  
           </#if>
            if(${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("AD-D")){ //
             detailbaseamt=BigDecimal.ZERO;//AD-D adj deliv
             detailMis  = BigDecimal.ZERO;
             detailDel  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}()==null ? new BigDecimal("0.00"): (${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}()).multiply(
	      ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}() ==null ? new BigDecimal("0.00"): (${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}()) );
            }
            if(${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("AD-M")){ 
             detailbaseamt=BigDecimal.ZERO;//adj misc
             detailDel  = BigDecimal.ZERO;
             detailMis  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}()==null ? new BigDecimal("0.00"): (${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}()).multiply(
	      ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}() ==null ? new BigDecimal("0.00"): (${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}()) );
            }else{//normal case
             detailbaseamt=${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}()==null ? new BigDecimal("0.00"): (${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsPriceFieldName?cap_first}()).multiply(
	     ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}() ==null ? new BigDecimal("0.00"): (${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}()) );
             detailMis  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}();
             if ( detailDel.compareTo(new BigDecimal("0.0")) == 0 ){
              detailDel  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}();
             } 
            }
            detailQty  = ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}();

            if (applyTax1){ 
             if(restEntity){
              //detailTax1 already set
             }else{
               detailTax1 = detailbaseamt.multiply(tax1RateValue);
               detailTax1 = detailTax1.add(detailDel.multiply(tax1RateValueS));// see options
               detailTax1 = detailTax1.add(detailMis.multiply(tax1RateValueH));
             }
            }
            if (applyTax2){ 
               detailTax2 = detailbaseamt.multiply(tax2RateValue);
               detailTax2 = detailTax2.add(detailDel.multiply(tax2RateValueS));// see options
               detailTax2 = detailTax2.add(detailMis.multiply(tax2RateValueH));
            }
            if (applyTax3){ 
             detailTax3 = detailbaseamt.multiply(tax3RateValue);
            }
            // added ci for shipping cost, 
            <#if entityFunction == "cq" || entityFunction == "co" || entityFunction == "ci">
              recalShippingCost(); //showrunt needs shipping values and detailDel will have shipping cost
            </#if>
	    ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsBaseAmountFieldName?cap_first}(detailbaseamt);
            if (applyTax1){ 
 		  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsTax1FieldName?cap_first}(detailTax1);
            }
            if (applyTax2){ 
		  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsTax2FieldName?cap_first}( detailTax2 );
            }
            if (applyTax3){ 
		  ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsTax3FieldName?cap_first}( detailTax3 );
            }
	    ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsDeliveryFieldName?cap_first}(detailDel);
           <#if entityFunction == "ci">
                // in customer invoice discount is expns like misc to business and discount reduces baseamt

                if(discountType.equals("pe") && this.instance.getC5xxzixrbxxxxxxxxxxxdiscounp().compareTo(new BigDecimal("0.0")) != 0){
                 detailbaseamt= detailbaseamt.subtract(detailbaseamt.multiply(this.instance.getC5xxzixrbxxxxxxxxxxxdiscounp()).divide(new BigDecimal("100.00")));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("discount")+" "+bundle.getString("of")+" "+detailbaseamt.multiply(this.instance.getC5xxzixrbxxxxxxxxxxxdiscounp()).divide(new BigDecimal("100.00"))+" "+bundle.getString("applied"),""));

                }else{
                 detailbaseamt= detailbaseamt.subtract(this.instance.getC5xxzixrbxxxxxxxxxxxdiscounp());
                }
           </#if>
       	   detailLt = detailLt.add(detailbaseamt);
           if (applyTax1){ 
       	    detailLt = detailLt.add(detailTax1);
             // totaltax1 applies to cuorder level dont use it here ??
             //totaltax1=this.instance.get${tax1Field?cap_first}();
          
 	        //setTotaltax1(totaltax1.add(detailTax1));
           }
           if (applyTax2){ 
       	    detailLt = detailLt.add(detailTax2);
             //totaltax2=this.instance.get${tax2Field?cap_first}();
	        //setTotaltax2(totaltax2.add(detailTax2));
           }
           if (applyTax3){ 
       	    detailLt = detailLt.add(detailTax3);
             //totaltax3=this.instance.get${tax3Field?cap_first}();
	        //setTotaltax3(totaltax3.add(detailTax3));
           }
       	   detailLt = detailLt.add(detailMis);
       	   detailLt = detailLt.add(detailDel);
            // add it back to totals to show revised value change or no change
            if (cartPoStatus.equals("u")){
             // u means remove, so dont add the details which will get removed later in the logic
            }else{
             if (cartPoStatus.equals("c")){
              // update setparent called but detail linetotl not set there and following gets invoked for 1st line
              ${cuinvoiceEtcItemDetailsEntityName}.setZgxxzlpxxvxxxxxxxxxxlinetotl(detailLt);
             }else{
              setTotalbaseamt(totalbaseamt.add(detailbaseamt));
	      setTotalmis(totalmis.add(detailMis ==null ? new BigDecimal("0.00"):detailMis));
              setTotaldel(totaldel.add(detailDel == null ? new BigDecimal("0.00"):detailDel));
              setTotalqty(totalqty.add(detailQty == null ? new BigDecimal("0.00"):detailQty));
              setTotaltax1(totaltax1.add(detailTax1 == null ? new BigDecimal("0.00"):detailTax1));
              setTotaltax2(totaltax2.add(detailTax2 == null ? new BigDecimal("0.00"):detailTax2));
              setTotaltax3(totaltax3.add(detailTax3 == null ? new BigDecimal("0.00"):detailTax3));
	      ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsLineTotalFieldName?cap_first}(detailLt);
	      setTotalamountTotal(amountTotal.add(detailLt));//, setparent call above already set this
	      setTotalqtyTotal(qtyTotal.add(detailQty));// setparent call above already set this
	      //setTotalqtyTotal(totalqty.add(detailQty));
              qtyOrdPrev=detailQty;// save the values here
              detailLtO=detailLt;
              detailbaseamtO=detailbaseamt;
             }
           }
      </#if>
    }

    <#if entityFunction == "co"  || entityFunction == "cq" || entityFunction == "ci" || entityFunction=="sh">
     public void recalShippingCost()// added ci
     {
     //${itemEntityName}.getC3xxuxxrbvxxxxxxxxxxshipcode() will be used to show shipping options offerred for this item
     // checkedData+checkedSize 4ch+1ch
     // ie ss or es or px etc for standard express pick up etc if multiple then sspx 2 chs each option
     // rate1f table entry will hold cost for each ship code as well ie get ship option from transaction, then search in
     // item for a match for sizes (an item will have one entry for size) and use the 2 chs to search in rate table
     // replace hardcoded fieldName jay add logic to use delivery mode from item and initialize detail shipoption
     // to show default shipment, also dont allow other options. if no ship option in item then no restriction
     // if Not applicable ie X as ship option then dont, rate should be ignored and the page should not include ship cost line
       if (${itemEntityName} == null){
        bcontinue=false;
        return;
       }
       if(${itemEntityName}.getC6xxusxrbv16xxxxxxxxtype().equals("SI-DG")){
        return;
       }
      String shipSubCode="";//based on standard size and delivery
      String shipSubCodeM="";// based on matcode 
      try{
       if(this.restEntity){
        return;
       }
     /*  need logic confirm shipcode P, X etc. Do we not allow shipping  if P?
       if(${itemEntityName}.getC3fbuxscbvxxxxxxxxxxshipcode() ==null || ${itemEntityName}.getC3fbuxscbvxxxxxxxxxxshipcode().contains("X")){
        // if shipcode has x then shipping not applicable, so make detailDel zero unless has some value 
        if ( detailDel == null ){
         detailDel = BigDecimal.ZERO;
        }
        return;
       }
     */

       iShipCode="";//size of item
       tShipCode="";//shipment mode for item
       if (${itemEntityName}.getC3fbuxscbvxxxxxxxxxxshipcode().isEmpty()){
        iShipCode="S";//small size
       }else{
        iShipCode=${itemEntityName}.getC3fbuxscbvxxxxxxxxxxshipcode().length()>1?${itemEntityName}.getC3fbuxscbvxxxxxxxxxxshipcode().substring(1,2):"S";// size is the 2nd ch from left
        if(iShipCode.equals("X")){
         iShipCode="S";//small
        }
       } 
       //xxxxxshiptype()  specifies both size and type of delivery and used if item info not directly avaiable like order > ship or order > invoice
       //shiptype may also have 2 chrs ie tshipcode+ishipcode. If ishipcode is empty then use 2 chrs or give a msg and override 2nd chr with ishipcode ch
       <#if entityFunction=="sh" || entityFunction=="ci">
        tShipCode="S";//shipping mode is 1st ch from left, standard shipping
        <#if entityFunction=="ci">
         if (this.getInstance().getC2xxuxxrbv51xxxxxxxxshiptype() !=null && !this.getInstance().getC2xxuxxrbv51xxxxxxxxshiptype().isEmpty()){
          tShipCode= this.getInstance().getC2xxuxxrbv51xxxxxxxxshiptype();
         }
        <#else>
         if (this.getInstance().getC2xxuxxrbv51xxxxxxxxtype() !=null && !this.getInstance().getC2xxuxxrbv51xxxxxxxxtype().isEmpty()){
          tShipCode= this.getInstance().getC2xxuxxrbv51xxxxxxxxtype();
         }
        </#if>
       <#else>        
       if (${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption() ==null || ${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption().isEmpty()){
        tShipCode="S";//standard shipping
       }else{
        tShipCode= ${cuinvoiceEtcItemDetailsEntityName}.getZ9xxtxsolxxxxxxxxxxxshipoption();
       } 
       </#if>
       // item may have shipping code but quote/order tshipCode says not applicable or pickup then also return
       //revisit 
       if(tShipCode.contains("P")){
       }
       if(tShipCode.equals("X")){
         tShipCode="S";//if no match use standard otherwise no table entry error for XS
       }
       // check deiveryandPayBy chosen by customer and adhust shipment cost
       if(yxxxch522xhhxxhxxxxxclientList.getClientPayBySelected().equals("pd")
          || yxxxch522xhhxxhxxxxxclientList.getClientPayBySelected().equals("cd")){
         tShipCode="S";  //delivery or cod needs shipment     
       }    

       if(yxxxch522xhhxxhxxxxxclientList.getClientPayBySelected().equals("np")
         || yxxxch522xhhxxhxxxxxclientList.getClientPayBySelected().equals("pp")){
         tShipCode="P"; //no delivery but optional Pickup cost or pickup discount  , rate should have entries for misc charge??       
       }    
       if(!iShipCode.isEmpty()){//use size from Item not from dropDown list
        tShipCode=tShipCode.substring(0,1);
       }
       shipSubCode=tShipCode+iShipCode;//standard deliv or pickup +small
       BigDecimal itemShipCost = BigDecimal.ZERO;
      } catch (Exception ex) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("recalculate")+" "+bundle.getString("shipping")+" "+" "+bundle.getString("cost")+" "+bundle.getString("error")+" " +ex.getMessage(),""));
                    bcontinue=false;
                    return ;
      }
      boolean inPOS=false;
      <#if menuAttributesp2 == "24">
      // POS mostly no shipment but we need to handle exceptions and for say furniture stores
      // So if order term is POS then check if rate table has any entry for the item code. If any then use its value
      //also added item type AD-D and AD-M with price 1.0 and use qty to adjust delivery and Misc and use posting account
       if(${cuinvoiceEtcItemDetailsEntityName}.get${cuordersEntityName?cap_first}().getC2xxcxxxbv09xxxxxxxxterms() !=null
        && ${cuinvoiceEtcItemDetailsEntityName}.get${cuordersEntityName?cap_first}().getC2xxcxxxbv09xxxxxxxxterms().equals("POS")){
        inPOS=true;
        shipSubCodeM=${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}().getA0xxukixbxxxxxxxxxxxmatcode();//needs entry in rate table
       }
      </#if>
       //for non POS co,ci etc allow shipping/delivery rate for individual item basis ie override standard rate 
       // in POS po, do not use standard rate ie no deliv charge
       if(!inPOS){
        shipSubCodeM=${cuinvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}().getA0xxukixbxxxxxxxxxxxmatcode();
        try {
                ${rate1fEntityName?cap_first} ${rate1fEntityName} =null;
	List<${rate1fEntityName?cap_first}> results =  entityManager
	.createQuery("select cc from ${rate1fEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxusertype=:useCode  and cc.b1xxuxxrbvxxxxxxxxxxprodtype=:usageIn and cc.b2xxuxxrbv51xxxxxxxxstepname=:useSubCode and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
	.setParameter("useCode", "CS")
	.setParameter("usageIn", "P")
	.setParameter("useSubCode", shipSubCodeM)
                  .setParameter("owner2", owner2Code)
	.getResultList();
                           if(!results.isEmpty()){
                            ${rate1fEntityName} = results.get(0);// allow for -ve or 0 qty 
                            //detailDel=detailDel.add(yxxxuq591xwwqqhxxxxxrate1f.getB4xxcxxrbvxxxxxxxxxxvalue());// value will go into instance
                            if(detailQty.compareTo(BigDecimal.ZERO)<0){
                             detailDel=(yxxxuq591xwwqqhxxxxxrate1f.getB4xxcxxrbvxxxxxxxxxxvalue());// value will go into instance
                             detailDel=detailDel.negate();
                            }else{
                             if(detailQty.compareTo(BigDecimal.ZERO)==0){
                              detailDel=BigDecimal.ZERO;// for comments or miscchrge/deliv chrgs adjustment
                             }else{//>0
                              detailDel=(yxxxuq591xwwqqhxxxxxrate1f.getB4xxcxxrbvxxxxxxxxxxvalue());// value will go into instance
                             }
                            }
                           }
                           else{
                            bcontinue=true;//ignore if no rate override by itemcode, use standard rate
                           }

        } catch (Exception ex) {
          log.severe("Error reading rate table stepname for overide "+shipSubCodeM+" "+ ex.getMessage());

          bcontinue=true;//ignore if no rate override by itemcode, use standard rate
        }
       }
       try {
                ${rate1fEntityName?cap_first} ${rate1fEntityName} =null;
	List<${rate1fEntityName?cap_first}> results =  entityManager
	.createQuery("select cc from ${rate1fEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxusertype=:useCode  and cc.b1xxuxxrbvxxxxxxxxxxprodtype=:usageIn and cc.b2xxuxxrbv51xxxxxxxxstepname=:useSubCode and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
	.setParameter("useCode", "CS")
	.setParameter("usageIn", "P")
	.setParameter("useSubCode", shipSubCode)
                  .setParameter("owner2", owner2Code)
	.getResultList();
                           if(!results.isEmpty()){
                            ${rate1fEntityName} = results.get(0);// allow for -ve or 0 qty do not add to detailDel
                            //detailDel=detailDel.add(yxxxuq591xwwqqhxxxxxrate1f.getB4xxcxxrbvxxxxxxxxxxvalue());// value will go into instance
                            if(detailQty.compareTo(BigDecimal.ZERO)<0){
                             detailDel=(yxxxuq591xwwqqhxxxxxrate1f.getB4xxcxxrbvxxxxxxxxxxvalue());// value will go into instance
                             detailDel=detailDel.negate();
                            }else{
                             if(detailQty.compareTo(BigDecimal.ZERO)==0){
                              detailDel=BigDecimal.ZERO;// for comments or miscchrge/deliv chrgs adjustment
                             }else{//>0
                              detailDel=(yxxxuq591xwwqqhxxxxxrate1f.getB4xxcxxrbvxxxxxxxxxxvalue());// value will go into instance
                             }
                            }
                           }
                           else{
                            <#if menuAttributesp2 == "24">
                            if(inPOS){
                             return;//shipcost is 0.0
                            }
                            </#if>
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_ERROR,bundle.getString("shipment")+" "+bundle.getString("rate")+" "+bundle.getString("entry")+" "+bundle.getString("stepName")+" "+shipSubCode+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
                            bcontinue=false;
                            return ;
                           }

       } catch (Exception ex) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Error")+" "+bundle.getString("rate")+" "+bundle.getString("entry")+" "+bundle.getString("stepName")+" "+shipSubCode+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+ex.getMessage(),""));
          bcontinue=false;
          return ;
       }



     }
    </#if>

  /**
    * The following customer related method sets entity values from variables holding totals  and persists entity
    * called by persist
    * @param args Unused.
    * @return void
    * @exception Application detail instance creation error.
    * @see 
    * does some status and date setting which should be moved to persist ??
    */
    public void persistrunt()
      {
     <#if entityFunction=="sh">
       this.instance.set${qtyField?cap_first}(qtyTotal);
       ///this.instance.set${qtyField?cap_first}(totalqty);
       this.instance.set${statusFlagField?cap_first}(mactive);// later
     <#else>
       this.instance.set${qtyField?cap_first}(qtyTotal);
       ///this.instance.set${qtyField?cap_first}(totalqty);
       this.instance.set${priceField?cap_first}(totalbaseamt);
       this.instance.set${miscchrgField?cap_first}(totalmis);
       this.instance.set${deliveryField?cap_first}(totaldel);
       this.instance.set${tax1Field?cap_first}(totaltax1);
       this.instance.set${tax2Field?cap_first}(totaltax2);
       this.instance.set${tax3Field?cap_first}(totaltax3);
       <#if entityFunction =="cp"  >
       this.instance.set${amountTotalField?cap_first}(amountTotal);
       this.instance.setD1xxzyprlxxxxxxxxxxxamountin(totalamountin);
       this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal.subtract(totalamountin));
       <#else>
       this.instance.set${amountTotalField?cap_first}(amountTotal);
       </#if>
       this.instance.set${qtyField?cap_first}(qtyTotal);
       ///this.instance.set${qtyField?cap_first}(totalqty);
       this.instance.set${statusFlagDField?cap_first}(calendar.getTime());
     </#if>

       <#if entityFunction=="cq"  >
       //Agent (Employee) no agent for shopping cart customer
       if(customIdentity.getOwnerSid()!=0){
        ${employeeEntityName}Home.clearInstance(); 
        ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid( customIdentity.getOwnerSid() ); 
        ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
        if(${employeeEntityName} != null){
         this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
        }
       }
       this.instance.set${statusFlagField?cap_first}(mquoted);
       this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
       this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);
       ///this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(totalqty);

       <#elseif entityFunction=="co"  >
        // make carted PO paid only when payment is confirmed ? check payment logic, restEntity means already set
        if (!restEntity){
         if(cartPoStatus.equals("o") || cartPoStatus.equals("c") || cartPoStatus.equals("u")){
          this.instance.set${statusFlagField?cap_first}(mordered);
         }else{
          this.instance.set${statusFlagField?cap_first}(mordered);
         }
        }
       if(customIdentity.getOwnerSid()!=0){
        ${employeeEntityName}Home.clearInstance(); 
        ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid( customIdentity.getOwnerSid() ); 
        ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
        if(${employeeEntityName} != null){
         //set Id to inform hibernate it exists
         ${employeeEntityName}.setA0xxuobxbxxxxxxxxxxxsid(customIdentity.getOwnerSid());
         this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
        }
       }
       this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
       this.instance.setZ3xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);
       <#elseif entityFunction=="ci"  >
        this.instance.set${statusFlagField?cap_first}(minvoiced);
        // jay check why detailLt is used
        //this.instance.set${amountTotalField?cap_first}(detailLt);
        if(customIdentity.getOwnerSid()!=0){
         ${employeeEntityName}Home.clearInstance(); 
         ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid( customIdentity.getOwnerSid() ); 
         ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
         if(${employeeEntityName} != null){
          this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
         }
        }
        this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
        this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);
       <#elseif entityFunction=="cp"  >
        if(this.instance.getB6xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB6xxuxxrbv10xxxxxxxxpaytype().length() == 0){
            this.instance.setB6xxuxxrbv10xxxxxxxxpaytype("Cash");
        }
          // cash or manual chq
        this.instance.setZ1xxztprlxxxxxxxxxxxamounttotal(totalamountin);//jun21 keep it simple add running totl later 
        this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(new BigDecimal("0.0"));//
    

        if (this.instance.getZ6xxcxxrlxxxxxxxxxxxpaybydate() == null){
         this.instance.setZ6xxcxxrlxxxxxxxxxxxpaybydate(currbusdate);
        } 
        this.instance.set${statusFlagField?cap_first}(mpaid);

       </#if>

       bcontinue=true;
    }


</#if>
<#if  entityFunction == "vq"  || entityFunction == "vo" || entityFunction == "vi"  >

	public void getCurrentUserToEmployeeValue(String p) {
            String result="";
                  <#if keyAutoGen == "Y" >
            ${userEntityName?cap_first} user = null;
            try{
             user =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName",customIdentity.getUsername())
					.setParameter("owner2", owner2Code)
					.getSingleResult();
         } catch ( NoResultException nre){
          user=null;
         } catch ( Exception e){
          user=null;
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("to")+" "+bundle.getString("employee")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
         }

                  <#else>
            ${userEntityName}Home.get${userEntityName?cap_first}Id().set${userKeyField?cap_first}((customIdentity.getUsername()));
            ${userEntityName}Home.get${userEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            ${userEntityName?cap_first} user =${userEntityName}Home.getDefinedInstance();
                  </#if> 
		if (user != null) {
                  if (p.equals("e")){
                    if (user.get${employeeEntityName?cap_first}() != null) { 
                  <#if keyAutoGen == "Y" >
                     result=user.get${employeeEntityName?cap_first}().get${employeeEntityEmployeeFieldName?cap_first}();
                  <#else> 
                     result=user.get${employeeEntityName?cap_first}().getId().get${employeeEntityEmployeeFieldName?cap_first}();
                  </#if>
                    }
                  }
                  else {
                   if (p.equals("c")){
                    if (user.get${customerEntityName?cap_first}() != null) { 
                  <#if keyAutoGen == "Y" >
                     result=user.get${customerEntityName?cap_first}().get${customerEntityCustomerFieldName?cap_first}();
                  <#else>
                     result=user.get${customerEntityName?cap_first}().getId().get${customerEntityCustomerFieldName?cap_first}();
                  </#if> 
                    }
                   }
                   else {              
                    if (user.get${vendorEntityName?cap_first}() != null) { 
                  <#if keyAutoGen == "Y" >
                     result=user.get${vendorEntityName?cap_first}().get${vendorVendor?cap_first}();
                  <#else> 
                     result=user.get${vendorEntityName?cap_first}().getId().get${vendorVendor?cap_first}();
                  </#if>
                    }
                   }
                  }
                  if (result.trim().length() == 0) { 
                  //  return "Select value"; 
                  }
                  else{
                  //  return result;
		${employeeEntityName?cap_first} cc = ${employeeEntityName}Home.getInstance();
		try {
			${employeeEntityName?cap_first} cc1 = (${employeeEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${employeeEntityName?cap_first} cc where cc.a0xxuktxbvxxxxxxxxxxemployee = :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("keyOfEntity", result).setParameter("owner2", owner2Code)
					.getSingleResult();
			if (cc1 != null) {
				//throw new ValidatorException(new FacesMessage("Name already exists"));
				// that's fine - It should exist.
			}
		} catch (NoResultException nre) {
			//throw new ValidatorException(new FacesMessage("Does not exist"));
		}
		// now simulate as if came by select from list ie xxx.page parameter value setting
		// this will do setId(xx)
                  <#if keyAutoGen == "Y" >
                  <#else>
		${employeeEntityName}Home
				.get${employeeEntityName?cap_first}Id().setA0xxuktxbvxxxxxxxxxxemployee(result);
                  </#if>

                  }
           }
		else{
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("user")+ " "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                 // return "Select value"; 
			
		}
      }

</#if>
    <#if entityFunction =="va"  > 
     private boolean preprintedchqno = true;//
	public boolean isPreprintedchqno() {
		return preprintedchqno;
	}

	public void setPreprintedchqno(boolean preprintedchqno) {
		this.preprintedchqno= preprintedchqno;
	}

    </#if>


<#if  entityFunction == "vq"  || entityFunction == "vo" || entityFunction == "vi" || entityFunction == "vp" || entityFunction == "va" || entityFunction == "sv"  >
     public void showtemprunt(){
      bcontinue=true;
 <#if  entityFunction == "va" >
   chqAmount=this.instance.getB5xx0xxrbvxxxxxxxxxxchqamt();
   verboses();
   this.instance.setZ1xxuxxxlvxxxxxxxxxxamtverbos(chqVerbose);
 <#else>
      createVdetailsetValues() ;// but no totals

      this.showrunt();// detail totals
            if(!bcontinue){
             return ;
            }
      /* 
      if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() ==null){
      setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());// set parent totals from detail totals
      }
      */
 </#if>
     }

    //called by showtemprunt for vendor txns,sets bcontinue
    public void showrunt()
    {
      // showrunt does not iterate, it uses the current detail and updates totals
      if(this.instance==null){ 
       return;// Edit viewAction calls this 
      }

      <#if entityFunction=="vp">
             //
            if(${vendpdetailsEntityName}==null){
             return;
            }

          //if (currentDetailLine== 1){
             // 
             totalbaseamt = new BigDecimal("0.0");
             totalmis = new BigDecimal("0.0");
             totaldel = new BigDecimal("0.0");
             totalqty = new BigDecimal("0.0");
             totaltax1= new BigDecimal("0.0");
             totaltax2= new BigDecimal("0.0");
             totaltax3= new BigDecimal("0.0");
             amountTotal = new BigDecimal("0.0");
             qtyTotal= new BigDecimal("0.0");///remove
             totalqty= new BigDecimal("0.0");///added
             detailLt = new BigDecimal("0.0");
              //if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() !=null){  instance exists bit sid is still null
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
              //}
       if (${vendorEntityName} == null){
        bcontinue=false;
        return;
       }

	     if (this.instance != null) {
              //if invoice was chosen then show amt due
              //check if an invoice already outstanding from this vendor
              if (this.instance.get${vendorEntityName?cap_first}() != null){
               // call vendorInvoiceList.getFlaggedAsList(minvoiced)
               // for loop to check against vendor and if match give msg
               int count=0;
               temps="";
               int sid1=0;// avoid lazy loading compare failure
               int sid2=0;
               for (${vendorInvoiceEntityName?cap_first} outStandingList : ${vendorInvoiceEntityName}List.getFlaggedAsList(minvoiced)) {     
                sid1=this.instance.get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();
                sid2=outStandingList.get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();
                if( sid1== sid2  ){ 
                 temps=temps+" ["+outStandingList.getA0xxunvibvxxxxxxxxxxinvoice()+": "+"amount "+outStandingList.getZ1xxzyprlxxxxxxxxxxxamountostndt()+"/"+outStandingList.getB3xxztprlxxxxxxxxxxxamounttotal()+"] ";     
                 count=count+1;
                }
               }
               if (count > 0){
                if (countB ==0){
                 countB++;
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("Now")+", "+count+" "+bundle.getString("outstanding")+" "+bundle.getString("invoice")+"(s) ",""));

                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("shown")+" "+bundle.getString("as")+" "+bundle.getString("invoice")+" "+bundle.getString("#")+": "+bundle.getString("outstanding")+"/"+bundle.getString("total")+" "+bundle.getString("amount")+", "+temps,""));
                }
               }else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_WARN,bundle.getString("Now")+", "+bundle.getString("No")+" "+bundle.getString("outstanding")+" "+bundle.getString("invoice")+"(s) "+" "+bundle.getString("for")+" "+bundle.getString("selected")+" "+bundle.getString("vendor")+" "+this.instance.get${vendorEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxvendor(),""));
               }
              }

              <#if keyAutoGen == "Y" >
              if (${vinvoiceEntityName} != null && ${vinvoiceEntityName}.getA0xxunvibvxxxxxxxxxxinvoice() != null){
               if(!${vinvoiceEntityName}.getA0xxunvibvxxxxxxxxxxinvoice().equals("temps")){
                temps=${vinvoiceEntityName}.getA0xxunvibvxxxxxxxxxxinvoice();
              <#else>
              if (${vinvoiceEntityName} != null && ${vinvoiceEntityName}.getId().getA0xxunvibvxxxxxxxxxxinvoice() != null){
               if(!${vinvoiceEntityName}.getId().getA0xxunvibvxxxxxxxxxxinvoice().equals("temps")){
                temps=${vinvoiceEntityName}.getId().getA0xxunvibvxxxxxxxxxxinvoice();
              </#if>
                 if(${vinvoiceEntityName}.getZ1xxzyprlxxxxxxxxxxxamountostndt().compareTo(BigDecimal.ZERO) >0){
                  detailbaseamt=${vinvoiceEntityName}.getZ1xxzyprlxxxxxxxxxxxamountostndt();
                 }else{
                  detailbaseamt= amountIn; 
                 }

     		${vendpdetailsEntityName}.setZ6xxzxxxavxxxxxxxxxxamountin(detailbaseamt);
                if(cartPoStatus.equals("e")){
     		 ${vendpdetailsEntityName}.setZ6xxzxxxavxxxxxxxxxxamountin(amountIn);
                }
		${vendpdetailsEntityName}.setZcxxzxz1avxxxxxxxxxxtax1amt(detailTax1);//
    		${vendpdetailsEntityName}.setZfxxzlpxxvxxxxxxxxxxlinetotl(amountIn);// needed by venartha

               }
              }
              // no invoice involved
              else {
              if(!nextShow){
               return;
              }
               amountIn=${vendpdetailsEntityName}.getZ6xxzxxxavxxxxxxxxxxamountin();// if direct payment
               detailbaseamt=${vendpdetailsEntityName}.getZ6xxzxxxavxxxxxxxxxxamountin();
               // allow adding tax, deliv etc 
               detailMis  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}();
               if ( detailDel.compareTo(new BigDecimal("0.0")) == 0 ){
                detailDel  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}();
               } 
               detailTax1  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}();
               detailTax2  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}();
               detailTax3  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}();

	      }
                this.instance.setD1xxzyprlxxxxxxxxxxxamountin(detailbaseamt);
       	        detailLt = detailLt.add(detailbaseamt);
                if(discountType.equals("pe") && this.instance.getB4xxzixrbvxxxxxxxxxxdiscount().compareTo(new BigDecimal("0.0")) != 0){
                 detailLt= detailLt.add(detailLt.multiply(this.instance.getB4xxzixrbvxxxxxxxxxxdiscount()).divide(new BigDecimal("100.00")));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("discount")+" "+bundle.getString("of")+" "+detailLt.multiply(this.instance.getB4xxzixrbvxxxxxxxxxxdiscount()).divide(new BigDecimal("100.00"))+" "+bundle.getString("applied")+" "+bundle.getString("in")+" "+bundle.getString("posting"),""));
                }else{
                 detailLt= detailLt.add(this.instance.getB4xxzixrbvxxxxxxxxxxdiscount());
                }
                detailLt = detailLt.add(detailDel);
                detailLt = detailLt.add(detailMis);
                detailLt = detailLt.add(detailTax1);
                detailLt = detailLt.add(detailTax2);
                detailLt = detailLt.add(detailTax3);

                if (cartPoStatus.equals("u")){
                 // u means remove, so dont add the details which will get removed later in the logic
                }else{
                 if (cartPoStatus.equals("c")){
                  // update setparent called but detail linetotl not set there and following gets invoked for 1st line
                  ${vendorInvoiceEtcItemDetailsEntityName}.setZfxxzlpxxvxxxxxxxxxxlinetotl(amountIn);//
                 }else{
                  setTotalbaseamt(totalbaseamt.add(detailbaseamt));
 	          ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsLineTotalFieldName?cap_first}(amountIn);//
	          //setTotalamountTotal(amountTotal.add(amountIn));// setparent call above already set this

                  qtyOrdPrev=detailQty;// save the values here
                  detailLtO=detailLt;
                  detailbaseamtO=detailbaseamt;
                 }
               }


	        setTotalamountTotal(amountTotal.add(detailLt));// already set in setparent, not true  uncommented
              }//instance not null

      <#elseif entityFunction=="va">
      <#elseif entityFunction=="sv">
       // instance value set in persistruntt but totals are done here using detail values
       if (!cartPoStatus.equals("e")){
        totalbaseamt = totalbaseamt.subtract(detailbaseamtO);
        detailQty = detailQty.subtract(qtyOrdPrev);
        amountTotal = amountTotal.subtract(detailbaseamtO);
        qtyTotal = qtyTotal.subtract(qtyOrdPrev);//remove
        totalqty = totalqty.subtract(qtyOrdPrev);///added
       }
       if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() !=null){
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
       }
       if (${vendorEntityName} == null){
        bcontinue=false;
        return;
       }


      <#else>
      //for vq,vo,vi
       if (${itemEntityName} == null){
        bcontinue=false;
        return;
       }
           <#if entityFunction == "vo" || entityFunction == "vq" || entityFunction == "vi"  >
              // subtract current detail values
              // the old values will be reset to 0s once next item is selected via more, other wise subtract/add is done to allow reload 
               // we now clear the details and reload only the keyed in data so use variable values
              ///instead of below use updateParentFrom for more reliable values
              /// also enhance updateParentFrom logic to not persist if recalculated totals did not change
             totalbaseamt = new BigDecimal("0.0");
             totalmis = new BigDecimal("0.0");
             totaldel = new BigDecimal("0.0");
             totalqty = new BigDecimal("0.0");
             totaltax1= new BigDecimal("0.0");
             totaltax2= new BigDecimal("0.0");
             totaltax3= new BigDecimal("0.0");
             amountTotal = new BigDecimal("0.0");
             qtyTotal= new BigDecimal("0.0");
             detailLt = new BigDecimal("0.0");

              if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() !=null){
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
              }

           </#if> 
           if (${itemEntityName} == null){
            bcontinue=false;
            return;
           }
       /// skip adding same instance
       if(!nextShow){
        return;
       }


       detailLt = new BigDecimal("0.0");
       detailbaseamt = new BigDecimal("0.0");

       // client may not pay tax to vendor if tax excemtion certificate exists in client record
       // for tax purposes use current detail item , instance item has the last detail and tax may not apply
       ${itemEntityName}=${vendorInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}();
/*
       if (tax1Cert !=null && !tax1Cert.isEmpty() && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1()){
        applyTax1=true;
       }else{
        applyTax1=false;
       }
       if (tax2Cert !=null && !tax2Cert.isEmpty() && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2()){
        applyTax2=true;
       }else{
        applyTax2=false;
       }
       if (tax3Cert !=null && !tax3Cert.isEmpty() && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3()){
        applyTax3=true;
       }else{
        applyTax3=false;
       }
*/
       // if vendor cannot use client checking used for customer tax, we can use client row2
       // for now use same criteria since gst/vat means tax for both customer and client but client can claim back
       client=r3RestClient.getClient();

       if (client !=null && client.getV6xxuxz1bvxxxxxxxxxxtax1code() !=null && !client.getV6xxuxz1bvxxxxxxxxxxtax1code().isEmpty()){
        applyTax1=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1() !=null && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1()){
         applyTax1=false;
        }
       }
       if (client !=null && client.getV7xxuxz2bvxxxxxxxxxxtax2code() !=null && !client.getV7xxuxz2bvxxxxxxxxxxtax2code().isEmpty()){
        applyTax2=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2() !=null && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2()){
         applyTax2=false;
        }
       }
       if (client !=null && client.getV8xxuxz3bvxxxxxxxxxxtax3code() !=null  && !client.getV8xxuxz3bvxxxxxxxxxxtax3code().isEmpty()){
        applyTax3=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3() !=null && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3()){
         applyTax3=false;
        }
       }


       // add logic to overide applyTax checking vendor  added tax on shipment/handling
       // option row1 for tax on item,row2 for tax on shipment and row3 for tax on handling charge
       // tax1, tax2 can have 3 rows ie item,shipment or handling tax3 for now only for item
       try{
        if (applyTax1){ 
         tax1RateValue=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax1RateValueS=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax1RateValueH=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
        }
        if (applyTax2){ 
         tax2RateValue=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",05).values().
                    iterator().next()==null?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax2RateValueS=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",05).values().
                    iterator().next()==null?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax2RateValueH=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",05).values().
                    iterator().next()==null?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
        }
        if (applyTax3){ 
         tax3RateValue=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",06).values().
                    iterator().next()==null?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
        }


       } catch ( Exception e){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_WARN,bundle.getString("tax")+" "+bundle.getString("value")+" "+e.getMessage(),""));
                bcontinue=false;

           return ;
       }

       // details have only one field for price/cost
       if (overRideValue !=null && !overRideValue.isEmpty()){
            if (this.overRideOk()){
             ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}(priceOverRide);
            }
       }

       if (this.instance != null){
            detailbaseamt=${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsPriceFieldName?cap_first}().multiply(
			${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
            detailMis  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}();
            detailQty  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}();
            if ( detailDel.compareTo(new BigDecimal("0.0")) == 0 ){
             detailDel  = ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}();
            }
            if (applyTax1){ 
             detailTax1 = detailbaseamt.multiply(tax1RateValue);
               detailTax1 = detailTax1.add(detailDel.multiply(tax1RateValueS));// see options
               detailTax1 = detailTax1.add(detailMis.multiply(tax1RateValueH));
            }
            if (applyTax2){ 
             detailTax2 = detailbaseamt.multiply(tax2RateValue);
               detailTax2 = detailTax2.add(detailDel.multiply(tax2RateValueS));// see options
               detailTax2 = detailTax2.add(detailMis.multiply(tax2RateValueH));
            }
            if (applyTax3){ 
             detailTax3 = detailbaseamt.multiply(tax3RateValue);
            }
	    ${vendorInvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsBaseAmountFieldName?cap_first}(detailbaseamt);

       if (applyTax1){ 
		${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsTax1FieldName?cap_first}(detailbaseamt.multiply(
			tax1RateValue));
       }
       if (applyTax2){ 
		${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsTax2FieldName?cap_first}(detailbaseamt.multiply(
			tax2RateValue));
       }
       if (applyTax3){ 
		${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsTax3FieldName?cap_first}(detailbaseamt.multiply(
			tax3RateValue));
       }
		${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsDeliveryFieldName?cap_first}(detailDel);
		${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}(detailMis);
		${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}(detailbaseamt);

           <#if entityFunction == "vi">
                if(discountType.equals("pe") && this.instance.getC1xxzixrbvxxxxxxxxxxdiscounp().compareTo(new BigDecimal("0.0")) != 0){
                 detailbaseamt= detailbaseamt.subtract(detailbaseamt.multiply(this.instance.getC1xxzixrbvxxxxxxxxxxdiscounp()).divide(new BigDecimal("100.00")));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("discount")+" "+bundle.getString("of")+" "+detailbaseamt.multiply(this.instance.getC1xxzixrbvxxxxxxxxxxdiscounp()).divide(new BigDecimal("100.00"))+" "+bundle.getString("applied"),""));

                }else{
                 detailbaseamt= detailbaseamt.subtract(this.instance.getC1xxzixrbvxxxxxxxxxxdiscounp());
                }
           </#if>
       	detailLt = detailLt.add(detailbaseamt);

            if (applyTax1){ 
       	 detailLt = detailLt.add(detailTax1);
            }
            if (applyTax2){ 
       	 detailLt = detailLt.add(detailTax2);
            }
            if (applyTax3){ 
       	 detailLt = detailLt.add(detailTax3);
            }
       	detailLt = detailLt.add(detailMis);
       	detailLt = detailLt.add(detailDel);

            // add it back to totals to show revised value, change or no change
            if (cartPoStatus.equals("u")){
             // u means remove, so dont add the details which will get removed later in the logic
            }else{
             if (cartPoStatus.equals("c")){
              // update setparent called but detail linetotl not set there and following gets invoked for 1st line
              ${vendorInvoiceEtcItemDetailsEntityName}.setZfxxzlpxxvxxxxxxxxxxlinetotl(detailLt);// jay remove hardcoding
             }else{
              //setTotalbaseamt(totalbaseamt.add(detailbaseamt));
	      setTotalmis(totalmis.add(detailMis ==null ? new BigDecimal("0.00"):detailMis));
              setTotaldel(totaldel.add(detailDel == null ? new BigDecimal("0.00"):detailDel));
              setTotalqty(totalqty.add(detailQty == null ? new BigDecimal("0.00"):detailQty));
              setTotaltax1(totaltax1.add(detailTax1 == null ? new BigDecimal("0.00"):detailTax1));
              setTotaltax2(totaltax2.add(detailTax2 == null ? new BigDecimal("0.00"):detailTax2));
              setTotaltax3(totaltax3.add(detailTax3 == null ? new BigDecimal("0.00"):detailTax3));
 	      ${vendorInvoiceEtcItemDetailsEntityName}.set${vendorInvoiceEtcItemDetailsLineTotalFieldName?cap_first}(detailLt);
	      setTotalamountTotal(amountTotal.add(detailLt));//, setparent call above already set this
	      setTotalqtyTotal(qtyTotal.add(detailQty));
              qtyOrdPrev=detailQty;// save the values here
              detailLtO=detailLt;
              detailbaseamtO=detailbaseamt;
             }
            }
         }
      </#if>
    }
  /**
    * The following vendor related method sets entity values from variables holding totals  and persists entity
    * called by persist
    * @param args Unused.
    * @return void
    * @exception Application detail instance creation error.
    * @see 
    * does some status and date setting which should be moved to persist ??
    */

    public void persistrunt() {
     <#if entityFunction=="va">
        this.instance.set${statusFlagField?cap_first}(mordered);
     <#elseif entityFunction=="sv">
      this.instance.set${qtyField?cap_first}(qtyTotal);
      this.instance.set${statusFlagField?cap_first}(mshipped);
     <#else>
      //jay add try logic
      this.instance.set${priceField?cap_first}(totalbaseamt);
      this.instance.set${miscchrgField?cap_first}(totalmis);
      this.instance.set${deliveryField?cap_first}(totaldel);
      this.instance.set${tax1Field?cap_first}(totaltax1);
      this.instance.set${tax2Field?cap_first}(totaltax2);
      this.instance.set${tax3Field?cap_first}(totaltax3);
      <#if entityFunction =="vp"  >
       this.instance.set${amountTotalField?cap_first}(amountTotal);
       this.instance.setD1xxzyprlxxxxxxxxxxxamountin(totalamountin);
       this.instance.setZ1xxzyprlxxxxxxxxxxxamountostndt(amountTotal.subtract(totalamountin));
      <#else>
       this.instance.set${amountTotalField?cap_first}(amountTotal);
      </#if>
      //this.instance.set${qtyField?cap_first}(${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}());
      this.instance.set${qtyField?cap_first}(qtyTotal);
      // jay use totalamt below
     </#if>

     <#if entityFunction=="vq"  >
      this.instance.set${statusFlagField?cap_first}(mquoted);
       if(customIdentity.getOwnerSid()!=0){
        ${employeeEntityName}Home.clearInstance(); 
        ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid( customIdentity.getOwnerSid() ); 
        ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
        if(${employeeEntityName} != null){
         this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
        }
       }
      this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
      this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);

     <#elseif entityFunction=="vo"  >
        this.instance.set${statusFlagField?cap_first}(mordered);
       if(customIdentity.getOwnerSid()!=0){
        ${employeeEntityName}Home.clearInstance(); 
        ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid( customIdentity.getOwnerSid() ); 
        ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
        if(${employeeEntityName} != null){
         this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
        }
       }
      this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
      this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);
     <#elseif entityFunction=="vi"  >
      this.instance.set${statusFlagField?cap_first}(minvoiced);
      this.instance.setZ1xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
      this.instance.setZ3xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);
     <#elseif entityFunction=="vp"  >
        if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().length() == 0){
            this.instance.setB5xxuxxrbv10xxxxxxxxpaytype("Cash");
        }
        this.instance.setB3xxxxxrlxxxxxxxxxxxcheqdate(currbusdate);
        //jay add logic to get terms from related invoice if any
        this.instance.setC1xxxxxrlxxxxxxxxxxxpaymentduedate(currbusdate);
        if (this.instance.getZ6xxcxxrlxxxxxxxxxxxpaybydate() == null){
            this.instance.setZ6xxcxxrlxxxxxxxxxxxpaybydate(currbusdate);
        } 
        if(!isBitSet(this.instance.get${statusFlagField?cap_first}(),_mclosed)){// venartha may have closed it
         this.instance.set${statusFlagField?cap_first}(mpaid);
        }
	   if (${vendorEntityName} != null) {
	    ${vendpdetailsEntityName}.set${vendorEntityName?cap_first}(${vendorEntityName});
	   }
         ${vendpdetailsEntityName}.setB6xxuxxrbv10xxxxxxxxpaytype( this.instance.getB5xxuxxrbv10xxxxxxxxpaytype());
         if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().toUpperCase().startsWith("C") ||this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().toUpperCase().startsWith("M")) {  
          // cash or manual chq
          this.instance.setB3xxztprlxxxxxxxxxxxamounttotal(amountTotal);//
          this.instance.setZ1xxzyprlxxxxxxxxxxxamountostndt(new BigDecimal("0.0"));
         }
         else{
          //amountOutstanding is used by generatechq in venartha
          this.instance.setB3xxztprlxxxxxxxxxxxamounttotal(amountTotal);
          this.instance.setZ1xxzyprlxxxxxxxxxxxamountostndt(this.instance.getD1xxzyprlxxxxxxxxxxxamountin());
         }
        this.instance.setB3xxztprlxxxxxxxxxxxamounttotal(totalamountin);//jun21 keep it simple add running totl later 
        this.instance.setZ1xxzyprlxxxxxxxxxxxamountostndt(new BigDecimal("0.0"));//


     </#if>
     bcontinue=true;
    }

</#if>


<#if  entityFunction == "eo" >
     public void showtemprunt(){
      bcontinue=true;
      createEdetailsetValues() ;


      this.showrunt();
            if(!bcontinue){
             return ;
            }
     }

    public void showrunt()
    {
      //jay future
      if(this.instance==null){ 
       return;// Edit viewAction calls this 
      }

             totalbaseamt = new BigDecimal("0.0");
             totalmis = new BigDecimal("0.0");
             totaldel = new BigDecimal("0.0");
             totalqty = new BigDecimal("0.0");
             totaltax1= new BigDecimal("0.0");
             totaltax2= new BigDecimal("0.0");
             totaltax3= new BigDecimal("0.0");
             amountTotal = new BigDecimal("0.0");
             qtyTotal= new BigDecimal("0.0");
             totalqty= new BigDecimal("0.0");
             //can come here if list/edit of existing entity w details, skip if from save
             if(this.instance.getA0xxuobxbxxxxxxxxxxxsid() !=null){
               setParentTotalsFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
             }

                                      
       /// skip adding same instance
       if(!nextShow){
        return;
       }
       ${itemEntityName}=${employeeInvoiceEtcItemDetailsEntityName}.get${itemEntityName?cap_first}();

       if (${itemEntityName} == null){
        bcontinue=false;
        return;
       }
       detailLt = new BigDecimal("0.0");
       detailbaseamt = new BigDecimal("0.0");//
       client=r3RestClient.getClient();

       if (client !=null && client.getV6xxuxz1bvxxxxxxxxxxtax1code() !=null && !client.getV6xxuxz1bvxxxxxxxxxxtax1code().isEmpty()){
        applyTax1=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1() !=null && ${itemEntityName}.getC7fbfxz1bvxxxxxxxxxxtax1()){
         applyTax1=false;
        }
        if (${employeeEntityName}ByEmployee !=null && ${employeeEntityName}ByEmployee.getC1xxfxz1bxxxxxxxxxxxtax1() !=null && ${employeeEntityName}ByEmployee.getC1xxfxz1bxxxxxxxxxxxtax1()){
         applyTax1=false;
        }
       }
       if (client !=null && client.getV7xxuxz2bvxxxxxxxxxxtax2code() !=null && !client.getV7xxuxz2bvxxxxxxxxxxtax2code().isEmpty()){
        applyTax2=true;
        //override 
        if (${itemEntityName} !=null && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2() !=null && ${itemEntityName}.getC8fbfxz2bvxxxxxxxxxxtax2()){
         applyTax2=false;
        }
        if (${employeeEntityName}ByEmployee !=null && ${employeeEntityName}ByEmployee.getZ2xxfxz2bxxxxxxxxxxxtax2() !=null && ${employeeEntityName}ByEmployee.getZ2xxfxz2bxxxxxxxxxxxtax2()){
         applyTax2=false;
        }
       }
       if (client !=null && client.getV8xxuxz3bvxxxxxxxxxxtax3code() !=null && !client.getV8xxuxz3bvxxxxxxxxxxtax3code().isEmpty()){
        applyTax3=true;
        //override
        if (${itemEntityName} !=null && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3() !=null && ${itemEntityName}.getY6fbfxz3bvxxxxxxxxxxtax3()){
         applyTax3=false;
        }
        if (${employeeEntityName}ByEmployee !=null && ${employeeEntityName}ByEmployee.getZ3xxfxz3bxxxxxxxxxxxtax3() !=null && ${employeeEntityName}ByEmployee.getZ3xxfxz3bxxxxxxxxxxxtax3()){
         applyTax3=false;
        }
       }


       // add logic to overide applyTax checking employee
       try{
        if (applyTax1){ 
         tax1RateValue=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax1RateValueS=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax1RateValueH=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
        }
        if (applyTax2){ 
         tax2RateValue=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",05).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax2RateValueH=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",05).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
         tax2RateValueH=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",05).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
        }
        if (applyTax3){ 
         tax3RateValue=new BigDecimal(${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",06).values().
                    iterator().next().isEmpty()?"0.0":${optionsEntityName}List.getoptionsFieldList("${menuAttributesp2}",04).values().iterator().next()).multiply(new BigDecimal(".01"));
        }
       } catch ( Exception e){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("error")+ " "+bundle.getString("exception")+ " "+e.getMessage(),""));
           return ;
       }


           if (this.instance != null){
             detailbaseamt=${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsPriceFieldName?cap_first}()==null ? new BigDecimal("0.00"): (${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsPriceFieldName?cap_first}()).multiply(
		  ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}() ==null ? new BigDecimal("0.00"): (${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}()) );
            detailMis  = ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsMiscelleneousFieldName?cap_first}();
            detailQty  = ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}();
             if ( detailDel.compareTo(new BigDecimal("0.0")) == 0 ){
              detailDel  = ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}() == null ? new BigDecimal("0.00"): ${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}();
             } 
            if (applyTax1){ 
             detailTax1 = detailbaseamt.multiply(tax1RateValue);
            }
            if (applyTax2){ 
             detailTax2 = detailbaseamt.multiply(tax2RateValue);
            }
            if (applyTax3){ 
             detailTax3 = detailbaseamt.multiply(tax3RateValue);
            }
	    ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsBaseAmountFieldName?cap_first}(detailbaseamt);
            if (applyTax1){ 
 		  ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsTax1FieldName?cap_first}(detailTax1);
            }
            if (applyTax2){ 
		  ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsTax2FieldName?cap_first}( detailTax2 );
            }
            if (applyTax3){ 
		  ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsTax3FieldName?cap_first}( detailTax3 );
            }
		 ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsDeliveryFieldName?cap_first}(detailDel);
       	   detailLt = detailLt.add(detailbaseamt);
           if (applyTax1){ 
       	    detailLt = detailLt.add(detailTax1);
           }
           if (applyTax2){ 
       	    detailLt = detailLt.add(detailTax2);
           }
           if (applyTax3){ 
       	    detailLt = detailLt.add(detailTax3);
           }
       	   detailLt = detailLt.add(detailMis);
       	   detailLt = detailLt.add(detailDel);
            // add it back to totals to show revised value change or no change
            if (cartPoStatus.equals("u")){
             // u means remove, so dont add the details which will get removed later in the logic
            }else{
             if (cartPoStatus.equals("c")){
              // update setparent called but detail linetotl not set there and following gets invoked for 1st line
              ${employeeInvoiceEtcItemDetailsEntityName}.setZgxxzlpxxvxxxxxxxxxxlinetotl(detailLt);
             }else{
              setTotalbaseamt(totalbaseamt.add(detailbaseamt));
	      setTotalmis(totalmis.add(detailMis ==null ? new BigDecimal("0.00"):detailMis));
              setTotaldel(totaldel.add(detailDel == null ? new BigDecimal("0.00"):detailDel));
              setTotalqty(totalqty.add(detailQty == null ? new BigDecimal("0.00"):detailQty));
              setTotaltax1(totaltax1.add(detailTax1 == null ? new BigDecimal("0.00"):detailTax1));
              setTotaltax2(totaltax2.add(detailTax2 == null ? new BigDecimal("0.00"):detailTax2));
              setTotaltax3(totaltax3.add(detailTax3 == null ? new BigDecimal("0.00"):detailTax3));
	      ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsLineTotalFieldName?cap_first}(detailLt);
	      setTotalamountTotal(amountTotal.add(detailLt));
	      setTotalqtyTotal(qtyTotal.add(detailQty));
              qtyOrdPrev=detailQty;// save the value here
             } 
            }
           }
    }
    public void persistrunt()
      {
      //jay add try logic
      this.instance.set${priceField?cap_first}(totalbaseamt);
      this.instance.set${miscchrgField?cap_first}(totalmis);
      this.instance.set${deliveryField?cap_first}(totaldel);
      this.instance.set${tax1Field?cap_first}(totaltax1);
      this.instance.set${tax2Field?cap_first}(totaltax2);
      this.instance.set${tax3Field?cap_first}(totaltax3);
      this.instance.set${amountTotalField?cap_first}(amountTotal);
      //this.instance.set${qtyField?cap_first}(${employeeInvoiceEtcItemDetailsEntityName}.get${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}());
      this.instance.set${qtyField?cap_first}(qtyTotal);
      bcontinue=true;
       <#if entityFunction=="eq"  >
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mactive);
       <#elseif entityFunction=="eo"  >
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mactive);
        this.instance.setZ2xxzyprlxxxxxxxxxxxamountostndt(amountTotal);
        this.instance.setZ4xxzyqrlxxxxxxxxxxxqtyostndt(qtyTotal);
       <#elseif entityFunction=="ei"  >
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mpartial);
       <#elseif entityFunction=="ep"  >
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mpaid);
       </#if>

      }

</#if>

<#if  menuAttributesp2 == "9A" >
     public void showtemprunt(){
      bcontinue=true;
     <#if machineEntityName??  && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
       createJAdetailsetValues() ;
    </#if>


      this.showrunt();
            if(!bcontinue){
             return ;
            }
     }

    public void showrunt()
    {
      //jay future

           if (this.instance != null){
           }
    }
    public void persistrunt()
      {
      //jay add try logic
      bcontinue=true;
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mactive);

      }

</#if>

<#if  menuAttributesp2 == "9C" >
     public void showtemprunt(){
      bcontinue=true;
      createAdetailsetValues() ;


      this.showrunt();
            if(!bcontinue){
             return ;
            }
     }

    public void showrunt()
    {
      //jay future

           if (this.instance != null){
           }
    }
    public void persistrunt()
      {
      //jay add try logic
      bcontinue=true;
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mactive);

      }

</#if>


<#if  menuAttributesp2 == "65" >
     public void showtemprunt(){
      bcontinue=true;
      createGLdetailsetValues() ;


      this.showrunt();
            if(!bcontinue){
             return ;
            }
     }

    public void showrunt()
    {
      //jay future

           if (this.instance != null){
           }
    }
    public void persistrunt()
      {
      //jay add try logic
      bcontinue=true;
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mactive);

      }

</#if>

<#if  menuAttributesp2 == "89" >
     public void showtemprunt(){
      bcontinue=true;
      createSLdetailsetValues() ;


      this.showrunt();
            if(!bcontinue){
             return ;
            }
     }

    public void showrunt()
    {
      //jay future

           if (this.instance != null){
           }
    }
    public void persistrunt()
      {
      //jay add try logic
      bcontinue=true;
        this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mactive);

      }

</#if>

<#if  entityFunction == "va" >
    /**
    * used to convert chqAmount numeric to test string to show on a chq
    * chqAmount comes a free format, needs to be xformed to xxx.yy format, for the verbose to work
    * NumberFormat.getCurrencyInstance(locale) is used 
    * chqVerbose=o+s+oc o is int value of chqAmt, oc is nn/100 from numberFormat of chqAmt
    * variable ls will be currency formatted for locale like $56.90 or other currency 
    * @param args -none
    * not as parameters, but chqamt is a variable and 
    * 
    * @return void, but value is held in variable chqVerbose
    * @exception none 
    * @see 
    */
     public void verboses(){
     String is="";
     String oc="";
     String o="";
     Integer I=0;
     Integer II=0;
     Integer mt=0;
     // mts contains payment amount
     String t[][]=new String[20][4]; 
     t[1][2]=" One ";
     t[2][2]=" Two ";
     t[3][2]=" Three ";
     t[4][2]=" Four ";
     t[5][2]=" Five ";
     t[6][2]=" Six ";
     t[7][2]=" Seven ";
     t[8][2]=" Eight ";
     t[9][2]=" Nine ";
     t[10][2]=" Ten ";
     t[11][2]=" Eleven ";
     t[12][2]=" Twelve ";
     t[13][2]=" Thirteen ";
     t[14][2]=" Fourteen ";
     t[15][2]=" Fifteen ";
     t[16][2]=" Sixteen " ;
     t[17][2]=" Seventeen ";
     t[18][2]=" Eighteen ";
     t[19][2]=" Nineteen ";


     t[1][3]=" XXXXX ";
     t[2][3]=" Twenty ";
     t[3][3]=" Thirty ";
     t[4][3]=" Forty ";
     t[5][3]=" Fifty ";
     t[6][3]=" Sixty ";
     t[7][3]=" Seventy ";
     t[8][3]=" Eighty ";
     t[9][3]=" Ninety ";

     //getCurrencyInstance(locale) default US ??
     is=NumberFormat.getCurrencyInstance().format(chqAmount);

     oc=is.substring(is.length()-2,is.length())+"/100";
     o="";
     I=chqAmount.intValue();
     if (I > 0 && I < 20){
      //  take care of 10s ie eleven
      o=t[I][2];  
     }
     if (I >20 && I < 100){
      if ((I % 10) != 0){
       o=t[(I/10)][3]+t[I % 10][2];
      }
      else{
       o=t[(I/10)][3];
      }
     }

     if (I >99 && I < 1000){
      o=t[(I/100)][2]+" Hundred ";
      I=I % 100;
      if (I >20 && I < 100){
       if ((I % 10)!=0){
        o=o+t[(I/10)][3]+t[(I % 10)][2];
       }
       else{
        o=o+t[(I/10)][3];
       }
      }
      if (I > 0 && I < 20){
       o=o+t[I][2];  // take care of 10s ie eleven 
      }
     }

     if (I >999 && I < 100000){  // hundred thousand
      II=I ;
      I=(I/1000);
      if (I > 0 && I < 20){
       o=t[I][2]+" Thousand ";  // take care of 10s ie eleven 
      }

      if (I >20 && I < 100){
       if ((I % 10)!=0){
        o=t[(I/10)][3]+t[(I % 10)][2]+" Thousand ";
       }
       else{
        o=t[(I/10)][3]+" Thousand ";
       }
      }

      I=(II % 1000);
      if (I > 99){
       o=o+t[(I/100)][2]+" Hundred ";
      }
      I=(I % 100);
      if (I >20 && I < 100){
       if ((I % 10)!=0){
        o=o+t[(I/10)][3]+t[(I % 10)][2];
       }
       else{
         o=o+t[(I/10)][3];
       }
      }
      if (I > 0 && I < 20){
       o=o+t[I][2];  // take care of 10s ie eleven 
      }

     }
     mt=o.length();
     mt=mt+10;
     mt=82-o.length()-oc.length();  // 82 is max length in label layout  
     if (mt < 0){
      mt=0;
     }
     char[] chars = new char[mt];
     Arrays.fill(chars, '-');
     String s = new String(chars);
     chqVerbose=o+s+oc;
     return;
}
    /**
    * used by venarhaEdit enter data for a manual chq already done or to be done. After fact payment record 
    * is created and closed, if needed, otherwise existing payment record updated as closed and a manual venartha record created 
    * @param args -none
    * not as parameters, but chqamt, chqnumber and advise 1,2,3 are entered values
    * 
    * chqnumber should match to what is written on the manual chq for reconcilation ide client held value
    * venatha instance is persisted 
    * after persist chqAmt is passed to posting and negated and posted to AP/APP(payable) and AP/APB(bank)
    * @return void
    * @exception iterator error
    * if vendor(s) does not have any payment due then return 
    * todo use subreport to print address and remove temp fix to have addfess in Adv line3
    * @see 
    */

     public void createManualChq(){
      // instance values entered, vendor value is validated
            chqAmount=this.instance.getB5xx0xxrbvxxxxxxxxxxchqamt();//if all chqamount comes from vpayment
            if ( chqAmount.compareTo(new BigDecimal("0.0")) <= 0 ){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("amount")+" "+bundle.getString("zero")+" "+bundle.getString("or")+" "+bundle.getString("less")+" "+bundle.getString("is")+" "+bundle.getString("invalid"),""));

                 bcontinue=false;
                 return ;
            }
            if ( this.instance.getA0xxukvabvxxxxxxxxxxchqnumber() == null || this.instance.getA0xxukvabvxxxxxxxxxxchqnumber().isEmpty() ){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("cheq")+" "+bundle.getString("number")+" "+bundle.getString("missing"),""));
                 bcontinue=false;
                 return ;
            }
            targetVendor=${vendorEntityName}Home.getLast${parentName}P();
            //this.instance.get${vendorEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxvendor();
            if(targetVendor.equals("all")){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("vendor")+" "+bundle.getString("all")+" "+bundle.getString("not")+" "+bundle.getString("valid")+", "+bundle.getString("for")+" "+bundle.getString("manual")+" "+bundle.getString("chq"),""));

                 bcontinue=false;
                 return ;
            }

            // jay add vendor address in venartha record instead of temp soln of using adv l3
            verboses();
            this.instance.setZ1xxuxxxlvxxxxxxxxxxamtverbos(chqVerbose);
            ${vendorEntityName}Home.clearInstance();
            ${vendorEntityName}Home.set${vendorEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(this.instance.get${vendorEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
	    ${vendorEntityName} = ${vendorEntityName}Home.getDefinedInstance();
            String jcnm="";
            if(${vendorEntityName} != null){
             if(${vendorEntityName}.getD1xxu3cnbvxxxxxxxxxxvendorascompanyname() !=null && !${vendorEntityName}.getD1xxu3cnbvxxxxxxxxxxvendorascompanyname().isEmpty()){ 
              jcnm=${vendorEntityName}.getD1xxu3cnbvxxxxxxxxxxvendorascompanyname();
             }else{
              jcnm=${vendorEntityName}.getB4xxu2fnbvxxxxxxxxxxfirstname()+" "+${vendorEntityName}.getB3xxuslnbvxxxxxxxxxxlastname();
             }
             this.instance.setC3xxuxxxbvxxxxxxxxxxadvisel3(jcnm);
            }
            postingAmount=this.instance.getB5xx0xxrbvxxxxxxxxxxchqamt();
            vendorChqPosting();
               // get a match for a payment for this vendor, for this amount and payment type M chq
               int count=0;
               int outStandingCount=0;
		try {
                   List<${vpaymentEntityName?cap_first}> listofPayments=${vpaymentEntityName}List.getPaymentDueByVendorList(targetVendor,true) ;
		   Iterator<${vpaymentEntityName?cap_first}> itr = listofPayments.iterator();
		   while (itr.hasNext()) {
		    ${vpaymentEntityName}li = itr.next();
                    count=count+1;
                    //chqAmount=;
                    if(${vpaymentEntityName}li.getB5xxuxxrbv10xxxxxxxxpaytype().equals("m")){
                     if (chqAmount.compareTo(${vpaymentEntityName}li.getZ1xxzyprlxxxxxxxxxxxamountostndt())  == 1 ){
                      outStandingCount=outStandingCount+1;
                      break;
                     }
                    } 
                   } 
		} catch (Exception e) {
			log.severe("status field iterator error " + e.getMessage());
		}
            if(outStandingCount >0){
                    //verboses(); already done
                    ${vpaymentEntityName}li.setZ1xxzyprlxxxxxxxxxxxamountostndt(BigDecimal.ZERO);
                    ${vpaymentEntityName}li.setZaxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
                    ${vpaymentEntityName}li.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                    ${vpaymentEntityName}Home.clearInstance();
                    ${vpaymentEntityName}Home.setInstance(${vpaymentEntityName}li);
                    ${vpaymentEntityName}Home.update();
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                       FacesMessage.SEVERITY_INFO,bundle.getString("existing")+" "+bundle.getString("payment")+" "+${vpaymentEntityName}li.getA0xxunvpbvxxxxxxxxxxpayment()+" "+bundle.getString("updated"),""));
            }else{
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("No")+" "+bundle.getString("existing")+" "+bundle.getString("payment")+" "+bundle.getString("matching")+" "+bundle.getString("amount")+" "+chqAmount+" "+bundle.getString("for")+" "+bundle.getString("manual")+" "+bundle.getString("chq")+" "+bundle.getString("found"),""));

             //make after fact VendorPaymentEntry() and close it;
             ${vpaymentEntityName}=${vpaymentEntityName}Home.getInstance();
             ${vpaymentEntityName}.set${vendorEntityName?cap_first}(this.instance.get${vendorEntityName?cap_first}());
             ${vpaymentEntityName}.setD1xxzyprlxxxxxxxxxxxamountin(chqAmount);
             ${vpaymentEntityName}.setB3xxztprlxxxxxxxxxxxamounttotal(chqAmount);
             ${vpaymentEntityName}.setB3xxxxxrlxxxxxxxxxxxcheqdate(currbusdate);
             ${vpaymentEntityName}.setC1xxxxxrlxxxxxxxxxxxpaymentduedate(currbusdate);
             ${vpaymentEntityName}.setZ6xxcxxrlxxxxxxxxxxxpaybydate(currbusdate);
             ${vpaymentEntityName}.setB5xxuxxrbv10xxxxxxxxpaytype("m");
             ${vpaymentEntityName}.setZ1xxzyprlxxxxxxxxxxxamountostndt(BigDecimal.ZERO);
             ${vpaymentEntityName}.setZaxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
             ${vpaymentEntityName}.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             ${vpaymentEntityName}Home.persist();
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("Created")+" "+bundle.getString("new")+" "+bundle.getString("payment")+" "+bundle.getString("record"),""));
            }
            this.persist();//instance already populated, persist venartha at end
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("Created")+" "+bundle.getString("new")+" "+bundle.getString("manual")+" "+bundle.getString("chq")+" "+this.instance.getA0xxukvabvxxxxxxxxxxchqnumber(),""));

     }
    /**
    * used by venarhaEdit enter data for a chq(s) to be printed for vendor payments already done
    * but issue one chq for a vendor after adding all due payments
    * @param args -none
    * not as parameters, but chqamt, chqnumber and advise 1,2,3 are entered values
    *
    * vendor value can be specific value or all 
    * If generate then chqnumber should remain blank and 1 gets added to client held next chq number. 
    * If needed, a value can be entered to match with preprinted chq number or override client held value
    * venatha instance is persisted and chqAmt is passed to posting and negated and posted to AP/APP(payable) and AP/APB(bank)
    * After persist, chqAmt is again passed to posting and negated and posted to AP/APP(payable) and AP/APB(bank)
    * @return void
    * @exception iterator error
    * if vendor(s) does not have any payment due then return with warning msg
    * if not all ie specific vendor then like manual chq search for payment, if not found create after fact payment
    * and venartha chq record to be printed 
    * todo use subreport to print address and remove temp fix to have addfess in Adv line3
    * @see 
    */

     public void generateMergedCheques(){
      mergedPayment=true;
      generateCheques();
      mergedPayment=false;
     }


    /**
    * used by venarhaEdit enter data for a chq(s) to be printed for vendor payments already done
    * @param args -none
    * not as parameters, but chqamt, chqnumber and advise 1,2,3 are entered values
    * mergedPayment is a flag set by generateMergedCheques() as true
    * vendor value can be specific value or all 
    * If generate then chqnumber should remain blank and 1 gets added to client held next chq number. 
    * If needed, a value can be entered to match with preprinted chq number or override client held value
    * venatha instance is persisted and chqAmt is passed to posting and negated and posted to AP/APP(payable) and AP/APB(bank)
    * After persist, chqAmt is again passed to posting and negated and posted to AP/APP(payable) and AP/APB(bank)
    * @return void
    * @exception iterator error
    * if vendor(s) does not have any payment due then return with warning msg
    * if not all ie specific vendor then like manual chq search for payment, if not found create after fact payment
    * and venartha chq record to be printed 
    * todo use subreport to print address and remove temp fix to have addfess in Adv line3
    * @see 
    */

     public void generateCheques(){
            targetVendor=${vendorEntityName}Home.getLast${parentName}P();
               int count=0;
               int outStandingCount=0;
               BigDecimal mergedTotal = BigDecimal.ZERO;
               String lastVendor="";
               //targetVendor="all";  now a value in drop down list
		try {
                List<${vpaymentEntityName?cap_first}> listofPayments=${vpaymentEntityName}List.getPaymentDueByVendorList(targetVendor,true) ;
		   Iterator<${vpaymentEntityName?cap_first}> itr = listofPayments.iterator();
		   while (itr.hasNext()) {
		    ${vpaymentEntityName}li = itr.next();
                    count=count+1;
                    //if all then all vendor unpaid payments otherwise one or more unpaid payments for that vendor
                    // use amounttotal not outstanding, payment means no outstanding amount but close it
                    chqAmount=${vpaymentEntityName}li.getB3xxztprlxxxxxxxxxxxamounttotal();
                    ${vpaymentEntityName}li.setZaxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
                    ${vpaymentEntityName}li.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                    ${vpaymentEntityName}Home.clearInstance();
                    ${vpaymentEntityName}Home.setInstance(${vpaymentEntityName}li);
                    ${vpaymentEntityName}Home.update();
                    if(mergedPayment){
                     mergedTotal=mergedTotal.add(chqAmount);//always add, in case we need it 
                     //could be a single entry for a vendor or 2nd or more for a vendor
                     if(${vpaymentEntityName}li.get${vendorEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxvendor().equals(lastVendor)){
                      // 2nd or more
                      if(itr.hasNext()){
                       continue;
                      }else{
                       chqAmount=mergedTotal;//end of a vendor
                       mergedTotal = BigDecimal.ZERO;// reset for next vendor and persist below
                      }
                     }else{
                      //end of previous vendor or a single entry vendor
                      if(lastVendor.isEmpty()){
                       if(itr.hasNext()){
                        continue;
                       }
                      }
                      chqAmount=mergedTotal;//end of a vendor
                      mergedTotal = BigDecimal.ZERO;// reset for next vendor
                     }
                    }//already merged or one chq for one payment
                    outStandingCount=outStandingCount+1;
                    verboses();
                    ${vpaymentEntityName}li.setZ1xxzyprlxxxxxxxxxxxamountostndt(BigDecimal.ZERO);
                    ${vpaymentEntityName}li.setZaxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
                    ${vpaymentEntityName}li.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                    ${vpaymentEntityName}Home.clearInstance();
                    ${vpaymentEntityName}Home.setInstance(${vpaymentEntityName}li);
                    ${vpaymentEntityName}Home.update();
                    this.instance.setB5xx0xxrbvxxxxxxxxxxchqamt(chqAmount);
                    this.instance.setZ1xxuxxxlvxxxxxxxxxxamtverbos(chqVerbose);
                    this.instance.set${statusFlagField?cap_first}(this.instance.get${statusFlagField?cap_first}()|mpaid);
                    //for generatechq we need to generate the key value, unless user puts a value in chq number
                    // added logic in getNextP to check if venartha, then use entered chq no as next chqno
                    this.instance.set${ids?cap_first}(this.getNextp());
                    this.instance.set${vendorEntityName?cap_first}(${vpaymentEntityName}li.get${vendorEntityName?cap_first}());
                    // jay need to add address from vendor and common advise info for all generated chqs
                    //  temp fix put ventor name/company name in adhise l3 and report will use it. prop fix is to use subdataset in report 
                    this.persist();// create chq
                    // separate method and edit manual vs generate???
                    // check update on payment statusfl is happening or not 
                    if(!bcontinue){
                     return;
                    }
                    //this.clearInstance();  why its here, instance is gone but needed in journal
                    postingAmount=chqAmount;
                    vendorChqPosting();
                    lastVendor=${vpaymentEntityName}li.get${vendorEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxvendor();
		   }//end of while
		} catch (Exception e) {
		    log.severe("venarthaEdit error " + e.getMessage());
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("Generate")+" "+ bundle.getString("chq(s)")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                    return;
                  
		}
                if (count == 0){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("Now")+", "+bundle.getString("no")+" "+bundle.getString("outstanding")+" "+" "+bundle.getString("payment"),""));
                 return;
                }
                if (outStandingCount> 0){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("Now")+", "+outStandingCount+" "+bundle.getString("cheque")+"(s) "+bundle.getString("done")+"/"+count+" "+bundle.getString("payment")+" "+bundle.getString("due")+" "+bundle.getString("entries"),""));
                 return;
                }
      
     }



</#if>


    <#if ( keyfromclient == "Y" )>
	public boolean isPicked() {
		return picked;
	}

	public void setPicked(boolean picked) {
		this.picked= picked;
	}
	public boolean isMultipicked() {
		return multipicked;
	}
    <#else>
	public boolean isPicked() {
		return picked;
	}
	public void setPicked(boolean picked) {
		this.picked= picked;
	}
	public boolean isMultipicked() {
		return multipicked;
	}

    </#if>

	public boolean isMoreActive() {
		return moreActive;
	}
      <#if (entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci" || entityFunction=="cp" ||  entityFunction=="sh"
       || entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" ||  entityFunction=="sv"
       || entityFunction=="eo")> 

	public boolean isNextShow() {
		return nextShow;
	}
	public void setNextShow(boolean nextShow) {
		this.nextShow= nextShow;
	}
	public boolean isRestEntity() {
		return restEntity;
	}
	public void setRestEntity(boolean restEntity) {
		this.restEntity= restEntity;
	}
</#if>
	public boolean isEntityUpdated() {
		return entityUpdated;
	}


	public boolean isEntityDeleted() {
		return entityDeleted;
	}
     public Date getCurrentTime() {
        return new Date();
     }


<#if keyfromclient = "Y" || entityFunction=="va">
// This reads & updates all the needed keys from client File. Different variables will hold the key values
// This is called once at the begining of the Persist routine. The keys are to be skipped if aborted. 
// The primarary key variable is key, others are arseq etc
          public String getNextp() {
            getCurrentUserFieldValue("l");// failing if POS square how paypal working??
            <#if keyAutoGen == "Y" >
             ${clientEntityName?cap_first} client =null;
            try{
             client =(${clientEntityName?cap_first}) entityManager
			.createQuery(
			"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
			.setParameter("nKeyName","01")
			.setParameter("owner2", owner2Code)
			.getSingleResult();
         } catch ( NoResultException nre){
          client=null;
         } catch ( Exception e){
          client=null;
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("client")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
         }
            <#else>
             ${clientEntityName}Home.get${clientEntityName?cap_first}Id().set${clientClientversion?cap_first}(("01"));
             ${clientEntityName}Home.get${clientEntityName?cap_first}Id().setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
             ${clientEntityName?cap_first} client =${clientEntityName}Home.getDefinedInstance();
            </#if> 
            if (client != null) {
             ${clientEntityName}Home.setId( client.getA0xxuobxbxxxxxxxxxxxsid() );
             client = ${clientEntityName}Home.getDefinedInstance();

                  // first check whether Client Table is locked for Bus Date maintenance
                  // remove hard coded property names
                   int mstatusfl=client.getZexxzzfxhhxxxxxxxxxxstatusfl();
                   if (isBitSet(mstatusfl, _mpartial)){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("parameter")+ " / "+bundle.getString("client")+ " "+bundle.getString("table")+" "+bundle.getString("is")+" "+bundle.getString("now")+" "+bundle.getString("closed")+" "+bundle.getString("for")+" "+bundle.getString("maintenance")+", "+bundle.getString("try")+" "+bundle.getString("little")+" "+bundle.getString("later"),""));
                    //picked=false;
                    //multipicked=false;
	  return null;
                   }
                   Date currBusdate=client.getY3xxcxxrlxxxxxxxxxxxcurrbusdat(); //not used
                   String currBusdatestr=currBusdate.toString();
                   tax1Cert=client.getV6xxuxz1bvxxxxxxxxxxtax1code();
                   tax2Cert=client.getV7xxuxz2bvxxxxxxxxxxtax2code();
                   tax3Cert=client.getV8xxuxz3bvxxxxxxxxxxtax3code();
                  <#assign clientnField="">
                  <#if !(customerqnField=="")>
                    <#assign clientnField=clientCustomerqnField>
                  </#if>
                  <#if !(customeronField=="")>
                    <#assign clientnField=clientCustomeronField>
                  </#if>
                  <#if !(customerinField=="")>
                    <#assign clientnField=clientCustomerinField>
                  </#if>
                  <#if !(customerpnField=="")>
                    <#assign clientnField=clientCustomerpnField>
                  </#if>
                  <#if !(vendorqnField=="")>
                    <#assign clientnField=clientVendorqnField>
                  </#if>
                  <#if !(vendoronField=="")>
                    <#assign clientnField=clientVendoronField>
                  </#if>
                  <#if !(vendorinField=="")>
                    <#assign clientnField=clientVendorinvoicen>
                  </#if>
                  <#if !(vendorpnField=="")>
                    <#assign clientnField=clientVendorpnField>
                  </#if>
                  <#if !(vendorcnField=="")>
                    <#assign clientnField=clientVendorcnField>
                  </#if>
                  <#if !(allocateJobnField=="")>
                    <#assign clientnField=clientAllocateJobnField>
                  </#if>
                  <#if !(shipmentnField=="")>
                    <#assign clientnField=clientShipmentnField>
                  </#if>
                  <#if !(glentriesnField=="")>
                    <#assign clientnField=clientGlentriesnField>
                  </#if>
                  <#if !(employeeonField=="")>
                    <#assign clientnField=clientEmployeeonField>
                  </#if>
                  <#if clientnField =="">
                    return "";
                  <#else>
	   mnsorder=client.get${clientnField?cap_first}();
                   <#if entityFunction=="va">
                    if(this.instance.getA0xxukvabvxxxxxxxxxxchqnumber() ==null || this.instance.getA0xxukvabvxxxxxxxxxxchqnumber().isEmpty()){
                     mnsorder=mnsorder+1;
                    }else{
                     if (this.instance.getA0xxukvabvxxxxxxxxxxchqnumber().length()!=0){
                      try{
                       mnsorder=Integer.parseInt(this.instance.get${ids?cap_first}());
                      } catch (Exception e) {
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_INFO,"invalid starting chq number: " + e.getMessage(),""));
                        bcontinue=false;
                        return null;
                      }
                     }else{
                      mnsorder=mnsorder+1;//should not happen but
                     }
                    }
                   <#else>
                    mnsorder=mnsorder+1;
                   </#if>
                   client.set${clientnField?cap_first}(mnsorder);
                   <#if !(customeronField=="")>
                    int cuorderCount=client.getL7xxzxxrbvxxxxxxxxxxcustolen();
                    cuorderCount=cuorderCount+1; 
                    client.setL7xxzxxrbvxxxxxxxxxxcustolen(cuorderCount);
                   </#if>
                   <#if entityFunction =="ci" || entityFunction =="cp"  >
                    glSeqn=client.getU3xxzwplbvxxxxxxxxxxglseq();
                    glSeqn=glSeqn+1;
                    client.setU3xxzwplbvxxxxxxxxxxglseq(glSeqn);
                   <#elseif entityFunction =="vi" ||entityFunction =="vp" >
                    glSeqn=client.getU3xxzwplbvxxxxxxxxxxglseq();
                    glSeqn=glSeqn+1;
                    client.setU3xxzwplbvxxxxxxxxxxglseq(glSeqn);
                   <#elseif menuAttributesp2 == "65" >
                    glSeqn=client.getU3xxzwplbvxxxxxxxxxxglseq();
                    glSeqn=glSeqn+1;
                    client.setU3xxzwplbvxxxxxxxxxxglseq(glSeqn);
                   <#elseif entityFunction =="pa" >
	    paSeqn=client.getU6xxzwpabvxxxxxxxxxxpaseq();
                    paSeqn=paSeqn+1;
                    client.setU6xxzwpabvxxxxxxxxxxpaseq(paSeqn);
                   <#elseif entityFunction =="jo" >
	    joSeqn=client.getV3xxzwpjbvxxxxxxxxxxjoseq();
                    joSeqn=joSeqn+1;
                    client.setV3xxzwpjbvxxxxxxxxxxjoseq(joSeqn);
                   </#if>   
                   ${clientEntityName}Home.setInstance(client);
                   ${clientEntityName}Home.allowUpdate();
                   String msonorde=""+mnsorder;
                   int mponolen=7;
                   String padding = new String();
                   int padlen=-1;
                   int len = Math.abs(mponolen) - msonorde.length();
                   if (len < 1) return msonorde.toString();
                    for (int i = 0 ; i < len ; ++i)
                     padding = padding + '0';
                    return (padlen < 0 ? padding + msonorde : msonorde + padding); 
                  </#if>
                  // postgtresql has lpad(column, size, '0') which can be used in order by 
           }
	else{
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("parameter")+ " / "+bundle.getString("client")+ " "+bundle.getString("table")+" "+bundle.getString("for")+" "+bundle.getString("next")+" "+bundle.getString("number")+" "+bundle.getString("not")+" "+bundle.getString("accessible"),""));
                   picked=false;
                   multipicked=false;
	 return null;
	}
      }
</#if>


<#if entityFunction =="ci" >
  /* credit/debit rules
  * Asset A/C                    =     Liability+Equity A/Cs
  * + ie increase record by debit     +ie  Increase by credit
  * - ie decrease       by credit     - ie  decrease by debit
  * Expenxe                      =     Revenue
  * + ie increase       by debit        + increase as credit
  * -                   by credit       -          as debit    
  */
	public boolean cuinvoicePosting() {

		try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
                           <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                           <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                           </#if>
					.setParameter("accIntegrationModule", "AR")
					.setParameter("accIntegrationUsage", "ARR")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }//list results never empty??
                           else{
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ARARR "+getIntegrationAccountSet()+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
                            bcontinue=false;
                            return false;
                           }

              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ARARR "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                 postingAmount=detailLt;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }

		 updateAccount();
                //jay add credit logic where if credit entry then make it -ve there or enter -ve amt in invoice

		try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
                                 <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                                 <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                                 </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "CRE")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
                <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
                <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
                </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ASCRE "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                 postingAmount=detailbaseamt;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		 updateAccount();
            if (applyTax1){ 
		 try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
                            <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                            <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                            </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "TX1")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
               <#if keyAutoGen == "Y" >
                accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ASTX1 "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                 postingAmount=detailTax1;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		 updateAccount();
            }
            if (applyTax2){ 
		try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if> 
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "TX2")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
                  <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
                  <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
                  </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ASTX2 "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                 postingAmount=detailTax2;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
   		 updateAccount();
            }
            if (applyTax3){ 
		try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if> 
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "TX3")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
                  <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
                  <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
                  </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ASTX3 "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                 postingAmount=detailTax2;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
   		 updateAccount();
            }

		try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>         
					.setParameter("accIntegrationModule", "AR")
					.setParameter("accIntegrationUsage", "ARV")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ARARV "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                postingAmount=detailDel;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();

		try {
                ${acintegrEntityName?cap_first} acintegr =null;
			List<${acintegrEntityName?cap_first}> results =  entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>         
					.setParameter("accIntegrationModule", "AR")
					.setParameter("accIntegrationUsage", "ARM")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            acintegr = results.get(0);
                           }
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if>
		} catch (Exception ex) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ARARM "+getIntegrationAccountSet()+" "+bundle.getString("error")+" "+ex.getMessage(),""));
                            bcontinue=false;
			return false;
		}
                postingAmount=detailMis;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();

          // now in case of discount applied post against Misc APM
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APM")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailLt.multiply(this.instance.getC5xxzixrbxxxxxxxxxxxdiscounp()).divide(new BigDecimal("100.00"));
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();

		return true;
	}

</#if>


<#if entityFunction =="cp" >
	public boolean customerPaymentPosting() {
          // jay where is the logic to handle payment against invoice??
          // any payment type will update the revenue (or asset) account chosen or customer default gl a/c chosen
          // via integrset field or customer default glac
          if(${accountEntityName} == null ){
           //no glac ac manually selected
		  if (${customerEntityName} != null) {
                   // check if a default glac exists for this vendor
                   accountn=null;
                   if(${customerEntityName}.get${accountEntityName?cap_first}() !=null){
                    accountn=${customerEntityName}.get${accountEntityName?cap_first}().getA0xxukwxbvxxxxxxxxxxaccount();
                   }  
                   if(accountn == null){
		    try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
                        <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                        <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                        </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "CRE")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                                        .setParameter("owner2", owner2Code)
					.getSingleResult();
                        <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
                        <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
                        </#if>
		    } catch (NoResultException ex) {
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("integration")+ " "+bundle.getString("set")+" ASCRE "+getIntegrationAccountSet()+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
			return false;
		    }
                   }
                   checkAccount();
            }
            else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("customer")+ " "+bundle.getString("related")+ " "+bundle.getString("account")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("or")+" "+bundle.getString("does")+" "+bundle.getString("not")+" "+bundle.getString("exist"),""));
                bcontinue=false;
			return false;
            }
          }
          else{
               if (${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount() != null){
                accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
               }
               else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+" "+bundle.getString("or")+" "+bundle.getString("does")+" "+bundle.getString("not")+" "+bundle.getString("exist"),""));
                bcontinue=false;
               }
          }

          postingAmount=detailbaseamt; // revenue goes up but asset a/c goes down
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
          
          if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("E")){
             postingAmount=postingAmount.negate(); // for A or E credit means -ve value   
          }       

	     updateAccount();
          // now in case of non invoice payment chq/cash all will update ARB (bank) account
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AR")
					.setParameter("accIntegrationUsage", "ARB")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if> 
		 } catch (NoResultException ex) {
			return false;
	      }
                postingAmount=detailbaseamt; // bank a/c goes up
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
        
          // add more logic to chek flag etc see addcuinv.prg
          // now in case of discount applied post against Misc APM
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APM")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailLt.multiply(this.instance.getB3xxzixrbvxxxxxxxxxxdiscount()).divide(new BigDecimal("100.00"));
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
		return true;
	}

</#if>

<#if entityFunction =="vi" >
	public boolean vendorInvoicePosting() {
           //jay add a foreign field account in vinvoice like vpayment so that expense account can be selected 
           // to override default expense or liability account unlike customer invoice there is no generic expns a/c
          // also check type of a/c to make the amt -ve 
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and cc.id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and cc.id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APP")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();

               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
			divcode = acintegr.get${accountEntityName?cap_first}().getId().get${accountDivcode?cap_first}();
			depcode = acintegr.get${accountEntityName?cap_first}().getId().get${accountDepcode?cap_first}();
               </#if>
		} catch (NoResultException ex) {
			return false;
		}
                // should be base not base+ other payable ike taxes
                postingAmount=detailLt;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
// investigate further re as cre in case of viposting
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "CEX")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailbaseamt;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
            if (applyTax1){ 
		 try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
              <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
              <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
              </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "TX1")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if>
		 } catch (NoResultException ex) {
			return false;
		 }
                 postingAmount=detailTax1;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
                 // reduce tax payable 
                 postingAmount=postingAmount.negate(); //liability  goes down will become debit
		 updateAccount();
            }
            if (applyTax2){ 
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
              <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
              <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
              </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "TX2")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else> 
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if> 
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailTax2;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
                 // reduce tax payable 
                 postingAmount=postingAmount.negate(); //liability  goes down will become debit
		updateAccount();
            }
            if (applyTax3){ 
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
              <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
              <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
              </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APV")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailDel;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
                 // reduce tax payable 
                 postingAmount=postingAmount.negate(); //liability  goes down will become debit
		updateAccount();
            }
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APM")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailMis;
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
          // now in case of discount applied post against Misc APM
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APM")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailLt.multiply(this.instance.getC1xxzixrbvxxxxxxxxxxdiscounp()).divide(new BigDecimal("100.00"));
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();



		return true;
	}

</#if>


<#if entityFunction =="vp" >
	public boolean vendorPaymentPosting() {
         // logic missing for payment against invoice ???
         // update the payable control a/c or expense a/c if cash payment 
         // payable a/c can come from vendor integrset default or from account manually keyed in or vendor default glac 
         //postingAmount=detailbaseamt or chqamount

           // any payment will affect expns posting now but if cash etc then bank asset now
           //                                               if check then APP now later in venartha (chq) APP vs Bank asset
         if(${accountEntityName} == null ){
             //no glac ac manually selected
	     if (${vendorEntityName} == null && this.instance.get${vendorEntityName?cap_first}() !=null) {
              ${vendorEntityName}= this.instance.get${vendorEntityName?cap_first}();
             }
	     if (${vendorEntityName} != null ) {
                   // check if a default glac exists for this vendor
                   accountn=null;
                   if(${vendorEntityName}.get${accountEntityName?cap_first}() !=null){
                    accountn=${vendorEntityName}.get${accountEntityName?cap_first}().getA0xxukwxbvxxxxxxxxxxaccount();
                   }
                   if(accountn == null){
                    // get account from acintegration set of the vendor via getIntegrationAccountSet
		    try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
                    <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                    <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                    </#if>
					.setParameter("accIntegrationModule", "AS")
					.setParameter("accIntegrationUsage", "CEX")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                                        .setParameter("owner2", owner2Code)
					.getSingleResult();
                    <#if keyAutoGen == "Y" >
			 accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
                    <#else> 
			 accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
                    </#if> 
		    } catch (NoResultException ex) {
			return false;
		    }
                   }
                   checkAccount();
              }
              else{//no vendor
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("related")+ " "+bundle.getString("account")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("or")+" "+bundle.getString("does")+" "+bundle.getString("not")+" "+bundle.getString("exist"),""));
                   bcontinue=false;
              }
           }
           else{//account selected by user
               if (${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount() != null){
                accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
               }
               else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+" "+bundle.getString("or")+" "+bundle.getString("does")+" "+bundle.getString("not")+" "+bundle.getString("exist"),""));
                bcontinue=false;
               }
           }
           postingAmount=detailbaseamt; // revenue goes up but asset a/c goes down 
           //account normally will be expns but can be other type
           if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("L") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("I")){
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
             postingAmount=postingAmount.negate(); // for A or E credit means -ve value   
	     updateAccount();
             // now put it back to original value to be used by cash/bank account which allways applies negate 
             postingAmount=postingAmount.negate();
           }       
           else{
            //postingAmount stays same for A or E since expense will go up (down if credit)
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		 updateAccount();
         }

         if(this.instance.getB5xxuxxrbv10xxxxxxxxpaytype() == null || this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().toUpperCase().startsWith("C") 
                   ||this.instance.getB5xxuxxrbv10xxxxxxxxpaytype().toUpperCase().startsWith("M")) {  
             ////////////cash/manual che/draft ie expns vs bank posting immediate settlement
           //now post the other side ie asset/bank goes down
		try {
		    ${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
		     "select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
		     "select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APB")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code) 
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=postingAmount.negate(); //asset ie bank a/c goes down will become credit
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }

		updateAccount();

         }else{
           ///////// not cash/manual chq ie paid via chq etc ie not immediate
           //two step posting. expns up deb (done above) vs APP payable up cr  later in venartha APP down deb  vs bank down cr
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APP")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if> 
		} catch (NoResultException ex) {
			return false;
		}
                //postingAmount=detailbaseamt or chqamount
                //postingAmount=postingAmount.negate(); //liability nned to go up ie cr
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
         }


          //    common       
                // add more logic to chek flag etc see addcuinv.prg
                // check if bank posting already has the discount taken into 
                // now in case of discount applied post against Misc APM
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APM")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                postingAmount=detailLt.multiply(this.instance.getB4xxzixrbvxxxxxxxxxxdiscount()).divide(new BigDecimal("100.00"));
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();




		return true;
	}

</#if>
<#if entityFunction =="va" >
	public boolean vendorChqPosting() {
                // APP liability goes down via debit and asset bank goes down via credit
                // expns already taken care of in payment
		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APP")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code)
					.getSingleResult();
               <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
               <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
               </#if> 
		} catch (NoResultException ex) {
			return false;
           }
                postingAmount=postingAmount.negate(); //liability  goes down will become debit
                // skip posting zeroe amount
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
		updateAccount();
                postingAmount=postingAmount.negate();//put back, we can check for 0.0

          //    AP integration cash/Banking  accounts  applies if  full payment or partial payment done

		try {
			${acintegrEntityName?cap_first} acintegr = (${acintegrEntityName?cap_first}) entityManager
					.createQuery(
               <#if keyAutoGen == "Y" >
							"select cc from ${acintegrEntityName?cap_first} cc where cc.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               <#else>
							"select cc from ${acintegrEntityName?cap_first} cc where cc.id.a2xxukwmbvxxxxxxxxxxmoduleid=:accIntegrationModule  and id.a3xxukw8bvxxxxxxxxxxusagecode=:accIntegrationUsage and id.a4xxukw9bvxxxxxxxxxxsetsid=:accIntegrationSet and cc.id.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
               </#if>
					.setParameter("accIntegrationModule", "AP")
					.setParameter("accIntegrationUsage", "APB")
					.setParameter("accIntegrationSet", getIntegrationAccountSet())
                           .setParameter("owner2", owner2Code) 
					.getSingleResult();
              <#if keyAutoGen == "Y" >
			accountn = acintegr.get${accountEntityName?cap_first}().get${accountAccount?cap_first}();
              <#else>
			accountn = acintegr.get${accountEntityName?cap_first}().getId().get${accountAccount?cap_first}();
              </#if>
		} catch (NoResultException ex) {
			return false;
		}
                if (postingAmount.compareTo(new BigDecimal("0.0")) == 0 ){
                 return true;
                }
                postingAmount=postingAmount.negate(); // asset ie bank a/c goes down will become credit
		updateAccount();


           // add more logic to chek flag etc see addcuinv.prg


		return true;
	}

</#if>


<#if entityFunction =="cq"  > 
            public boolean updateitemeCustomer(){
             return true;
            }
</#if>

<#if entityFunction =="co"  > 
    public boolean updateitemeCustomer(){
     if (${itemEntityName} != null) {
	${itemEntityName}.setB9xxzxxxlvxxxxxxxxxxspricold(${itemEntityName}.get${itemPriceField?cap_first}() == null ? BigDecimal.ZERO : ${itemEntityName}.get${itemPriceField?cap_first}());
        if (${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().compareTo(BigDecimal.ZERO)==0 && ${itemEntityName}.get${itemPriceField?cap_first}().compareTo(BigDecimal.ZERO)==0){
	 ${itemEntityName}.setF3xxzxxxlvxxxxxxxxxxavgprice((${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().add(${itemEntityName}.get${itemPriceField?cap_first}())).divide(new                    
                BigDecimal("2.0")));
        } 
        ${itemEntityName}.setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}.getZ7xxzxxxlvxxxxxxxxxxcuordqty() == null ? BigDecimal.ONE :${itemEntityName}.getZ7xxzxxxlvxxxxxxxxxxcuordqty().add(${cuinvoiceEtcItemDetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
        try {
               ${itemEntityName}Home.clearInstance();
               ${itemEntityName}Home.setInstance(${itemEntityName});
          ${itemEntityName}Home.allowUpdate();
          return true;
	} catch (Exception e) {
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));

                  bcontinue=false;
			return bcontinue;
	}
     }
     else{
         return false;
     }
    }
</#if>



<#if entityFunction =="ci" || entityFunction =="cp"> 

  	      public String getIntegrationAccountSet() {
             if ( (${customerEntityName} == null || ${customerEntityName}.get${customerEntityIntegrationSetFieldName?cap_first}() == null)||
                    (${customerEntityName}.get${customerEntityIntegrationSetFieldName?cap_first}().trim().length()==0) ){
             return "DEFAULT";
             }
             else {
             return ${customerEntityName}.get${customerEntityIntegrationSetFieldName?cap_first}().toUpperCase();
	       }
            }
</#if>

<#if entityFunction =="vi" || entityFunction =="vp" || entityFunction =="va"> 

  	      public String getIntegrationAccountSet() {
             if ( (${vendorEntityName}==null ||${vendorEntityName}.get${vendorIntegrationset?cap_first}() == null)||
                    (${vendorEntityName}.get${vendorIntegrationset?cap_first}().trim().length()==0) ){
              return "DEFAULT";
             }
             else {
              return ${vendorEntityName}.get${vendorIntegrationset?cap_first}().toUpperCase();
	       }
           }
</#if>

<#if menuAttributesp2 == "60"> 

  	      public String getIntegrationAccountSet() {
             return "DEFAULT";
            }
</#if>

<#if entityFunction =="ci" >
            public boolean updateitemeCustomer(){
		 if (${itemEntityName} != null) {
              
		    ${itemEntityName}.setB9xxzxxxlvxxxxxxxxxxspricold(${itemEntityName}.get${itemPriceField?cap_first}() == null ? BigDecimal.ZERO : ${itemEntityName}.get${itemPriceField?cap_first}());
                if (${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().compareTo(BigDecimal.ZERO)==0 && ${itemEntityName}.get${itemPriceField?cap_first}().compareTo(BigDecimal.ZERO)==0)
		    ${itemEntityName}.setF3xxzxxxlvxxxxxxxxxxavgprice((${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().add(${itemEntityName}.get${itemPriceField?cap_first}())).divide(new                    
                BigDecimal("2.0")));
               ${itemEntityName}.setZbxxzxxxlvxxxxxxxxxxcuinvqty(${itemEntityName}.getZbxxzxxxlvxxxxxxxxxxcuinvqty() == null ? BigDecimal.ONE :${itemEntityName}.getZbxxzxxxlvxxxxxxxxxxcuinvqty().add(${cuinvoiceEtcItemDetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
              try {
               ${itemEntityName}Home.clearInstance();
               ${itemEntityName}Home.setInstance(${itemEntityName});
               ${itemEntityName}Home.allowUpdate();
                return true;
		  } catch (Exception e) {
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
             }
             else{
              return false;
             }
            }
</#if>

<#if entityFunction =="cp"  > 
            // payment does not involve item
            public boolean updateitemeCustomer(){
             return true;
             
            }
</#if>

<#if entityFunction =="sh" >
            public boolean updateitemeCustomer(){
	    if (${itemEntityName} != null) {
              
	      ${itemEntityName}.setB9xxzxxxlvxxxxxxxxxxspricold(${itemEntityName}.get${itemPriceField?cap_first}() == null ? BigDecimal.ZERO : ${itemEntityName}.get${itemPriceField?cap_first}());
              if (${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().compareTo(BigDecimal.ZERO)==0 && ${itemEntityName}.get${itemPriceField?cap_first}().compareTo(BigDecimal.ZERO)==0)
		    ${itemEntityName}.setF3xxzxxxlvxxxxxxxxxxavgprice((${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().add(${itemEntityName}.get${itemPriceField?cap_first}())).divide(new                    
                BigDecimal("2.0")));
              // shipment detail contains qty shipped
              // force entity load
              BigDecimal currentQty=${itemEntityName}.get${itemQtyField?cap_first}();
              //${itemEntityName}.set${itemQtyField?cap_first}(${itemEntityName}.get${itemQtyField?cap_first}() == null ? BigDecimal.ONE :${itemEntityName}.get${itemQtyField?cap_first}().subtract(${cuinvoiceEtcItemDetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyshipped()));
              ${itemEntityName}.setB0xxziqxlvxxsaxxxxxxquantity(${itemEntityName}.getB0xxziqxlvxxsaxxxxxxquantity() == null ? BigDecimal.ONE :${itemEntityName}.getB0xxziqxlvxxsaxxxxxxquantity().subtract(${itemEntityName}.getTempQuantity()));
              ${itemEntityName}.setZcxxzxxxlvxxxxxxxxxxcushiqty(${itemEntityName}.getZcxxzxxxlvxxxxxxxxxxcushiqty() == null ? BigDecimal.ONE :${itemEntityName}.getZcxxzxxxlvxxxxxxxxxxcushiqty().add(${itemEntityName}.getTempQuantity()));
              try {
               ${itemEntityName}Home.clearInstance();
               ${itemEntityName}Home.setInstance(${itemEntityName});
               ${itemEntityName}Home.allowUpdate();
                return true;
		   } catch (Exception e) {
                     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		   }
             }
             else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("not")+" "+bundle.getString("selected")+" "+bundle.getString("or")+" "+bundle.getString("does")+" "+" "+bundle.getString("not")+" "+bundle.getString("exist"),""));
              return false;
             }
            }
</#if>

<#if entityFunction =="vq"  > 
            public boolean updateitemeVendor(){
             return true;
            }
</#if>

<#if entityFunction =="vo"  > 
            public boolean updateitemeVendor(){
	     if (${itemEntityName} != null) {
               //jay should not affect avg sel price, update avail date
	       ${itemEntityName}.setB9xxzxxxlvxxxxxxxxxxspricold(${itemEntityName}.get${itemCostField?cap_first}() == null ? BigDecimal.ZERO : ${itemEntityName}.get${itemCostField?cap_first}());
               if (${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().compareTo(BigDecimal.ZERO)==0 && ${itemEntityName}.get${itemCostField?cap_first}().compareTo(BigDecimal.ZERO)==0)
		   ${itemEntityName}.setF3xxzxxxlvxxxxxxxxxxavgprice((${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().add(${itemEntityName}.get${itemCostField?cap_first}())).divide(new                    
                BigDecimal("2.0")));
               ${itemEntityName}.setZ8xxzxxxlvxxxxxxxxxxvenorqty(${itemEntityName}.getZ8xxzxxxlvxxxxxxxxxxvenorqty() == null ? BigDecimal.ONE :${itemEntityName}.getZ8xxzxxxlvxxxxxxxxxxvenorqty().add(new BigDecimal("1.0")));
               ${itemEntityName}.setY5xxcxxrlxxxxxxxxxxxdatetorenew(this.instance.getB1xxcxxxbvxxxxxxxxxxdelvdatet());   
     
              try {
               ${itemEntityName}Home.clearInstance();
               ${itemEntityName}Home.setInstance(${itemEntityName});
               ${itemEntityName}Home.allowUpdate();
                return true;
	      } catch (Exception e) {
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));

                  bcontinue=false;
			return bcontinue;
	     }   
             }
             else{
              return false;
             }
            }
</#if>

<#if entityFunction =="vi"  > 
            public boolean updateitemeVendor(){
		 if (${itemEntityName} != null) {
		   ${itemEntityName}.setB9xxzxxxlvxxxxxxxxxxspricold(${itemEntityName}.get${itemCostField?cap_first}() == null ? BigDecimal.ZERO : ${itemEntityName}.get${itemCostField?cap_first}());
               if (${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().compareTo(BigDecimal.ZERO)==0 && ${itemEntityName}.get${itemCostField?cap_first}().compareTo(BigDecimal.ZERO)==0)
		   ${itemEntityName}.setF3xxzxxxlvxxxxxxxxxxavgprice((${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().add(${itemEntityName}.get${itemCostField?cap_first}())).divide(new                    
              BigDecimal("2.0")));
               ${itemEntityName}.setZbxxzxxxlvxxxxxxxxxxcuinvqty(${itemEntityName}.getZbxxzxxxlvxxxxxxxxxxcuinvqty() == null ? BigDecimal.ONE :${itemEntityName}.getZbxxzxxxlvxxxxxxxxxxcuinvqty().add(new BigDecimal("1.0")));
              try {
               ${itemEntityName}Home.setInstance(${itemEntityName});

               ${itemEntityName}Home.allowUpdate();
                return true;
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));

                  bcontinue=false;
			return bcontinue;
		  }   
             }
             else{
              return false;
             }
            }
</#if>

<#if entityFunction =="vp"  > 
            // payment does not involve item
            public boolean updateitemeVendor(){
             return true;
            }
</#if>

<#if entityFunction =="sv"  > 
            public boolean updateitemeVendor(){
		 if (${itemEntityName} != null) {
		   ${itemEntityName}.setB9xxzxxxlvxxxxxxxxxxspricold(${itemEntityName}.get${itemCostField?cap_first}() == null ? BigDecimal.ZERO : ${itemEntityName}.get${itemCostField?cap_first}());
               if (${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().compareTo(BigDecimal.ZERO)==0 && ${itemEntityName}.get${itemCostField?cap_first}().compareTo(BigDecimal.ZERO)==0)
		   ${itemEntityName}.setF3xxzxxxlvxxxxxxxxxxavgprice((${itemEntityName}.getB9xxzxxxlvxxxxxxxxxxspricold().add(${itemEntityName}.get${itemCostField?cap_first}())).divide(new                    
               BigDecimal("2.0")));
               ${itemEntityName}.set${itemQtyField?cap_first}(${itemEntityName}.get${itemQtyField?cap_first}() == null ? BigDecimal.ONE :${itemEntityName}.get${itemQtyField?cap_first}().add(${vendorInvoiceEtcItemDetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyshipped()));
               ${itemEntityName}.setZdxxzxxxlvxxxxxxxxxxvenshqty(${itemEntityName}.getZdxxzxxxlvxxxxxxxxxxvenshqty() == null ? BigDecimal.ONE :${itemEntityName}.getZdxxzxxxlvxxxxxxxxxxvenshqty().add(${vendorInvoiceEtcItemDetailsEntityName}.getZ3xxeqxxbvnxxxxxxxxxqtyshipped()));

              try {
               ${itemEntityName}Home.clearInstance();
               ${itemEntityName}Home.setInstance(${itemEntityName});
               ${itemEntityName}Home.allowUpdate();
                return true;
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${itemEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }   
             }
             else{
              return false;
             }
            }
</#if>

<#if entityFunction =="ci"   > 

            public boolean updateCustomer(){
             if (${customerEntityName} != null) {
                  this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
		  ${customerEntityName}.setZ6xxuxxxbexxxxxxxxxxlastinvoic(this.instance.getA0xxuncibvxxxxxxxxxxinvoice());
		  ${customerEntityName}.setZ1xxzrpxlexxxxxxxxxxcusttotl(${customerEntityName}.getZ1xxzrpxlexxxxxxxxxxcusttotl()==null?totalbaseamt:${customerEntityName}.getZ1xxzrpxlexxxxxxxxxxcusttotl().add(totalbaseamt));
		  ${customerEntityName}.setZ2xxzrqxlexxxxxxxxxxcusttqty(${customerEntityName}.getZ2xxzrqxlexxxxxxxxxxcusttqty()==null?(${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}()) :${customerEntityName}.getZ2xxzrqxlexxxxxxxxxxcusttqty().add((${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}())) );
		  ${customerEntityName}.setZ2xxzrqxlexxxxxxxxxxcusttqty(${customerEntityName}.getZ2xxzrqxlexxxxxxxxxxcusttqty()==null?(${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}()) :${customerEntityName}.getZ2xxzrqxlexxxxxxxxxxcusttqty().add((${cuinvoiceEtcItemDetailsEntityName}.get${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}())) );
             <#if statusFlagDField !=""  >
             // remove hardcoded customer statusfldt by using EntityStatusField statusField being checked is not customer status fld
             ${customerEntityName}.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>

              try {
               ${customerEntityName}Home.clearInstance();
               ${customerEntityName}Home.setInstance(${customerEntityName});
               ${customerEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
              return true;
             }else{
              return false;
             }
            }
</#if>
<#if entityFunction =="cq"   > 
            public boolean updateCustomer(){
             if (${customerEntityName} != null) {
              this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
             <#if statusFlagDField !=""  >
             ${customerEntityName}.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>

             }
             //jay is update missing here
		   return bcontinue;
            }
</#if>

<#if entityFunction =="co"   > 
            public boolean updateCustomer(){
             //totl etc refers to invoice
	     if (${customerEntityName} != null) {
              this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
	      ${customerEntityName}.setZ5xxutlolexxxxxxxxxxlastorder(this.instance.getA0xxuncobvxxxxxxxxxxpurchsno());
              <#if statusFlagDField !=""  >
               ${customerEntityName}.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
              </#if>

              try {
               ${customerEntityName}Home.setInstance(${customerEntityName});
               ${customerEntityName}Home.allowUpdate();
		   } catch (Exception e) {
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		   }
              return true;
             }else{
              return false;
             }
            } 
</#if>
<#if entityFunction =="sh"   > 
            public boolean updateCustomer(){
             if (${customerEntityName} != null) {
//              delivery charge ??? here this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
             <#if statusFlagDField !=""  >
             ${customerEntityName}.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>

             }
		   return bcontinue;
            }
</#if>

<#if entityFunction =="cp"   > 
            public boolean updateCustomer(){
	     if (${customerEntityName} != null) {
              this.setEMailingAddress(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
              //totals refer to invoice
	      ${customerEntityName}.setZ7xxzxxxlexxxxxxxxxxlastpaymnq(this.instance.getZ1xxztprlxxxxxxxxxxxamounttotal());
             <#if statusFlagDField !=""  >
              ${customerEntityName}.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>
              try {
               ${customerEntityName}Home.setInstance(${customerEntityName});
               ${customerEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${customerEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
             return true;
             }else{
              return false;
             }
            }
</#if>


<#if entityFunction =="vi"   > 
            public boolean updateVendor(){
		 if (${vendorEntityName} != null) {
		  ${vendorEntityName}.setZ8xxuvlilvxxxxxxxxxxlastinvoic(this.instance.getA0xxunvibvxxxxxxxxxxinvoice());
		  ${vendorEntityName}.setZ1xxzvpxlvxxxxxxxxxxvendtotl(${vendorEntityName}.getZ1xxzvpxlvxxxxxxxxxxvendtotl()==null?totalbaseamt:${vendorEntityName}.getZ1xxzvpxlvxxxxxxxxxxvendtotl().add(totalbaseamt));
		  ${vendorEntityName}.setZ2xxzvpxlvxxxxxxxxxxvendtqty(${vendorEntityName}.getZ2xxzvpxlvxxxxxxxxxxvendtqty()==null?(${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}()) :${vendorEntityName}.getZ2xxzvpxlvxxxxxxxxxxvendtqty().add((${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}())) );
             <#if statusFlagDField !=""  >
             ${vendorEntityName}.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>
              try {
               ${vendorEntityName}Home.setInstance(${vendorEntityName});
               ${vendorEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${vendorEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
              return true;
             }else{
              return false;
             } 
            }
</#if>

<#if entityFunction =="vq"   > 
            public boolean updateVendor(){
		 if (${vendorEntityName} != null) {
		  ${vendorEntityName}.setZ7xxuvlqlvxxxxxxxxxxlastquote(this.instance.getA0xxunvqbvxxxxxxxxxxpurchsno());
             <#if statusFlagDField !=""  >
             ${vendorEntityName}.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>
              try {
               ${vendorEntityName}Home.setInstance(${vendorEntityName});
               ${vendorEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${vendorEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
              return true;
             }else{
              return false;
             } 
            }
</#if>

<#if entityFunction =="vo"   > 
            public boolean updateVendor(){
		 if (${vendorEntityName} != null) {
		  ${vendorEntityName}.setZ7xxuvlolvxxxxxxxxxxlastorder(this.instance.getA0xxunvobvxxxxxxxxxxpurchsno());
             <#if statusFlagDField !=""  >
             ${vendorEntityName}.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>
              try {
               ${vendorEntityName}Home.setInstance(${vendorEntityName});
               ${vendorEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${vendorEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
              return true;
             }else{
              return false;
             } 
            }
</#if>

<#if entityFunction =="vp"   > 
            public boolean updateVendor(){
		 if (${vendorEntityName} != null) {
		  ${vendorEntityName}.setZ9xxzvlplvxxxxxxxxxxlastpaymq(this.instance.getB3xxztprlxxxxxxxxxxxamounttotal());
		  ${vendorEntityName}.setZ1xxzvpxlvxxxxxxxxxxvendtotl(${vendorEntityName}.getZ1xxzvpxlvxxxxxxxxxxvendtotl()==null?totalbaseamt:${vendorEntityName}.getZ1xxzvpxlvxxxxxxxxxxvendtotl().add(totalbaseamt));
		  ${vendorEntityName}.setZ2xxzvpxlvxxxxxxxxxxvendtqty(${vendorEntityName}.getZ2xxzvpxlvxxxxxxxxxxvendtqty()==null?(${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}()) :${vendorEntityName}.getZ2xxzvpxlvxxxxxxxxxxvendtqty().add((${vendorInvoiceEtcItemDetailsEntityName}.get${vendorInvoiceEtcItemDetailsQtyFieldName?cap_first}())) );
             <#if statusFlagDField !=""  >
             ${vendorEntityName}.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>
              try {
               ${vendorEntityName}Home.setInstance(${vendorEntityName});
               ${vendorEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${vendorEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
              return true;
             }else{
              return false;
             } 
            }
</#if>
<#if entityFunction =="sv"   > 
            public boolean updateVendor(){
		 if (${vendorEntityName} != null) {
		  // delivery charge ??${vendorEntityName}.setZ9xxzvlplvxxxxxxxxxxlastpaymq(this.instance.getB3xxztprlxxxxxxxxxxxamounttotal());
             <#if statusFlagDField !=""  >
             ${vendorEntityName}.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
             </#if>
              try {
               ${vendorEntityName}Home.setInstance(${vendorEntityName});
               ${vendorEntityName}Home.allowUpdate();
		  } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${vendorEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		  }
              return true;
             }else{
              return false;
             } 
            }
</#if>


<#if entityFunction =="ci"  > 
            public boolean updateCustomerOrder(){
            return true;
            }

</#if>
            public boolean addAnyAttachment(){
            return true;
            }
            public boolean updateShipmentOrPickUp(){
            return true;
            }



<#if entityFunction == "ci" || entityFunction == "cp" || menuAttributesp2 == "65" || menuAttributesp2 == "60">
	public boolean updateAccount() {

            String jay;
           <#if menuAttributesp2 == "65">
            /// for glenries, wire() already got an id for account, so clear it , for others it gets cleared at end of this method
            yxxxch601xwwqqhxxxxxaccountHome.clearInstance();
           </#if>
	    checkAccount();
            if (!bcontinue) {
             return bcontinue;
            }
          <#if entityFunction == "ci" || entityFunction == "cp">
            // multi currency support added. posting converts and uses merchant/banking currency
            //if invoicing etc uses diff currency it should not change the posting amount
           <#if entityFunction == "ci"> 
            if(!currConv){// checkbox in invoiceEdit to indicate use merchant currency
             if(customIdentity.getConvRate() != null || customIdentity.getConvRate().compareTo(new BigDecimal("1.0")) != 0){
              postingAmount=postingAmount.multiply(customIdentity.getConvRate());
             }
            }
           <#else>
             if(customIdentity.getConvRate() != null || customIdentity.getConvRate().compareTo(new BigDecimal("1.0")) != 0){
              postingAmount=postingAmount.multiply(customIdentity.getConvRate());
             } 
           </#if>
          </#if>

           <#if menuAttributesp2 == "65">
            // if 65 ie glentries then period for adjustment may not be default ie current period, so change it during updateAccount 
            int saveCurrentPeriod = currentPeriod;
            currentPeriod = Integer.parseInt(this.instance.get${perioddatesEntityName?cap_first}().getA0xxukwpbv47xxxxxxxxperiod());
            if (currentPeriod < 1 || currentPeriod > 14 ){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("period")+ " "+bundle.getString("chosen")+ " "+currentPeriod+" "+bundle.getString("is")+" "+bundle.getString("invalid"),""));
             bcontinue=false;
		 return bcontinue;

            }
           </#if>
           <#if menuAttributesp2 == "27">
            // if cp ie customer patment then period for adjustment may not be default ie current period, so change it during updateAccount 
            int saveCurrentPeriod = currentPeriod;
            currentPeriod = this.instance.getC9xxpxiravxxxxxxxxxxpostingperiod();
            if (currentPeriod < 1 || currentPeriod > 14 ){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("period")+ " "+bundle.getString("chosen")+ " "+currentPeriod+" "+bundle.getString("is")+" "+bundle.getString("invalid"),""));
             bcontinue=false;
		 return bcontinue;

           }
           </#if>
		switch (currentPeriod) {
			//    replace actual with actual+(mt),p1 with p1+(mt),statdate with date(),stattime with time()
			case 01 :
				${accountEntityName}.setZ7xxzw1xlvxxxxxxxxxxp1(${accountEntityName}.getZ7xxzw1xlvxxxxxxxxxxp1().compareTo(BigDecimal.ZERO) == 0 
						? postingAmount
						: ${accountEntityName}.getZ7xxzw1xlvxxxxxxxxxxp1().add(postingAmount));
				break;
			case 02 :
				${accountEntityName}.setZ8xxzw2xlvxxxxxxxxxxp2(${accountEntityName}.getZ8xxzw2xlvxxxxxxxxxxp2().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZ8xxzw2xlvxxxxxxxxxxp2().add(postingAmount));
				break;
			case 03 :
				${accountEntityName}.setZ9xxzw3xlvxxxxxxxxxxp3(${accountEntityName}.getZ9xxzw3xlvxxxxxxxxxxp3().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZ9xxzw3xlvxxxxxxxxxxp3().add(postingAmount));
				break;
			case 04 :
				${accountEntityName}.setZaxxzw4xlvxxxxxxxxxxp4(${accountEntityName}.getZaxxzw4xlvxxxxxxxxxxp4().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZaxxzw4xlvxxxxxxxxxxp4().add(postingAmount));
				break;
			case 05 :
				${accountEntityName}.setZbxxzw5xlvxxxxxxxxxxp5(${accountEntityName}.getZbxxzw5xlvxxxxxxxxxxp5().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZbxxzw5xlvxxxxxxxxxxp5().add(postingAmount));
				break;
			case 06 :
				${accountEntityName}.setZcxxzw6xlvxxxxxxxxxxp6(${accountEntityName}.getZcxxzw6xlvxxxxxxxxxxp6().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZcxxzw6xlvxxxxxxxxxxp6().add(postingAmount));
				break;
			case 07 :
				${accountEntityName}.setZdxxzw7xlvxxxxxxxxxxp7(${accountEntityName}.getZdxxzw7xlvxxxxxxxxxxp7().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZdxxzw7xlvxxxxxxxxxxp7().add(postingAmount));
				break;
			case 8 :
				${accountEntityName}.setZexxzw8xlvxxxxxxxxxxp8(${accountEntityName}.getZexxzw8xlvxxxxxxxxxxp8().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZexxzw8xlvxxxxxxxxxxp8().add(postingAmount));
				break;
			case 9 :
				${accountEntityName}.setZfxxzw9xlvxxxxxxxxxxp9(${accountEntityName}.getZfxxzw9xlvxxxxxxxxxxp9().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZfxxzw9xlvxxxxxxxxxxp9().add(postingAmount));
				break;
			case 10 :
				${accountEntityName}.setZgxxzw10lvxxxxxxxxxxp10(${accountEntityName}.getZgxxzw10lvxxxxxxxxxxp10().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZgxxzw10lvxxxxxxxxxxp10().add(postingAmount));
				break;
			case 11 :
				${accountEntityName}.setZhxxzw11lvxxxxxxxxxxp11(${accountEntityName}.getZhxxzw11lvxxxxxxxxxxp11().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZhxxzw11lvxxxxxxxxxxp11().add(postingAmount));
				break;
			case 12 :
				${accountEntityName}.setZixxzw12lvxxxxxxxxxxp12(${accountEntityName}.getZixxzw12lvxxxxxxxxxxp12().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZixxzw12lvxxxxxxxxxxp12().add(postingAmount));
				break;
			case 13 :
				${accountEntityName}.setZjxxzw13lvxxxxxxxxxxp13(${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13().add(postingAmount));
				break;
			case 14 :
				${accountEntityName}.setZkxxzw14lvxxxxxxxxxxp14(${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14().add(postingAmount));
				break;
		}
                 // we may need logic in trial bal etc reporting to check current vs fiscal year and subtract
                 //period 13,14 from total
		 ${accountEntityName}.setB4xxzwaxlvxxxxxxxxxxactual(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual().compareTo(BigDecimal.ZERO)  == 0
		  ? postingAmount	: ${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual().add(postingAmount));
		 ${accountEntityName}.setZ6xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
		 try {
                  ${accountEntityName}Home.setInstance(${accountEntityName});
                  ${accountEntityName}Home.allowUpdate();
		 } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${accountEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		 }

       BigDecimal mdebit=BigDecimal.ZERO;
       BigDecimal mcredit=BigDecimal.ZERO;
       if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("E")){
        // 0 means equal, 1 means greater ie positive
        if (postingAmount.compareTo(BigDecimal.ZERO)==1){
         mdebit=mdebit.add(postingAmount);
        }
        else{
         mcredit=mcredit.subtract(postingAmount);
        }
       }
       else{
        if (postingAmount.compareTo(BigDecimal.ZERO)==1){
         mcredit=mcredit.add(postingAmount);
        }
        else{
         mdebit=mdebit.subtract(postingAmount);
        }
       }
		bcontinue = true;
		jpjournal = ${journalEntityName}Home.getInstance();
		if (jpjournal == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("journal")+ " "+bundle.getString("does")+ " "+bundle.getString("not")+" "+bundle.getString("exist"),""));
			bcontinue = false;
		}
            else{
             subarSeqn=subarSeqn+1;
            <#if keyAutoGen == "Y" >
		  //jpjournal.setA0xxujpshvxxxxxxxxxxspostdate(calendar.getTime().toString().substring(0,25));
             <#if menuAttributesp2 == "65">
                   jpjournal.setB3xxujjtbvxxxxxxxxxxjrnltype("GL");
		   jpjournal.setB6xxzkjsbvxxxxxxxxxxjnlseqs("" + glSeqn+"-"+subarSeqn);
                   jay=jpjournal.getB6xxzkjsbvxxxxxxxxxxjnlseqs().replace("-",""); 
		   jpjournal.setB5cczjsibvxxxxxxxxxxjnlseq(Integer.parseInt(jay));
             <#else>
                   jpjournal.setB3xxujjtbvxxxxxxxxxxjrnltype("AR");
		   jpjournal.setB6xxzkjsbvxxxxxxxxxxjnlseqs("" + glSeqn+"-"+subarSeqn);
                   jay=jpjournal.getB6xxzkjsbvxxxxxxxxxxjnlseqs().replace("-",""); 
		   jpjournal.setB5cczjsibvxxxxxxxxxxjnlseq(Integer.parseInt(jay));

             </#if>
            <#else>
		  jpjournal.getId().setA0xxujpshvxxxxxxxxxxspostdate(calendar.getTime().toString().substring(0,25));
             <#if menuAttributesp2 == "65">
              jpjournal.getId().setB3xxujjtbvxxxxxxxxxxjrnltype("GL");
             <#else>
              jpjournal.getId().setB3xxujjtbvxxxxxxxxxxjrnltype("AR");
             </#if>
		  jpjournal.getId().setB6xxzkjsbvxxxxxxxxxxjnlseqs("" + glSeqn+"-"+subarSeqn);
                   jay=jpjournal.getId().getB6xxzkjsbvxxxxxxxxxxjnlseqs().replace("-",""); 
		   jpjournal.getId().setB5cczjsibvxxxxxxxxxxjnlseq(Integer.parseInt(jay));

            </#if>
             jpjournal.setC1xxzwppbvpxxxxxxxxxperiod(currentPeriod);
             jpjournal.setB1xxcjpdhvxxxxxxxxxxpostdate(currbusdate);
             jpjournal.setA0xxujpshvxxxxxxxxxxspostdate(currbusdate.toString().substring(0,25));
             jpjournal.setC4xxuwkxbvxxxxxxxxxxaccount(accountn);
             jpjournal.setC5xxzwdxlvxxxxxxxxxxdebit(mdebit);
             jpjournal.setC6xxzwrxlvxxxxxxxxxxcredit(mcredit);
             <#if entityFunction == "ci"  > 
              jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript("I"+this.instance.get${customerEntityName?cap_first}().get${customerCompanyName?cap_first}()+
                this.instance.get${customerEntityName?cap_first}().get${customerLastName?cap_first}()+" "+this.instance.get${customerEntityName?cap_first}().get${customerFirstName?cap_first}() );
              jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(this.instance.getA0xxuncibvxxxxxxxxxxinvoice()+" "+this.instance.getY4xxuxxrbvxxxxxxxxxxref1code());
             <#elseif  entityFunction == "cp"  > 
              jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript("P"+this.instance.get${customerEntityName?cap_first}().get${customerCompanyName?cap_first}()+
                this.instance.get${customerEntityName?cap_first}().get${customerLastName?cap_first}()+" "+this.instance.get${customerEntityName?cap_first}().get${customerFirstName?cap_first}() );
              jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(this.instance.getA0xxuncpbvxxxxxxxxxxpayment());
             <#elseif menuAttributesp2 == "65">
              jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(this.instance.getB3xxuxxrbvxxxxxxxxxxrefcode());
              jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript("G"+this.instance.getB1xxuzsxbvxxxxxxxxxxdescript());
             </#if>          
              jpjournal.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);

		 try {
              ${journalEntityName}Home.persist();
		 } catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${journalEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("or")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		 }
             
             // prepare for a new instance persist
             ${journalEntityName}Home.clearInstance();
            <#if keyAutoGen == "Y" >
	       //xlrxeh65journalHome.set${journalEntityName?cap_first}Id(new ${journalEntityName?cap_first}Id());
            <#else>
	       ${journalEntityName}Home.set${journalEntityName?cap_first}Id(new ${journalEntityName?cap_first}Id());
            </#if>
            } 
            //prepare for another account/accountId persist
		${accountEntityName}Home.clearInstance();
            <#if keyAutoGen == "Y" >
		//${accountEntityName}.set${accountEntityName?cap_first}Id(new ${accountEntityName?cap_first}Id());
            <#else>
		${accountEntityName}Home.set${accountEntityName?cap_first}Id(new ${accountEntityName?cap_first}Id());
            </#if>
           <#if menuAttributesp2 == "65">
            currentPeriod = saveCurrentPeriod;
           </#if>
		return bcontinue;
  }
</#if>

<#if entityFunction == "vi" || entityFunction == "vp" || entityFunction =="va">
	public boolean updateAccount() {
                String jay;
		checkAccount();
		if (!bcontinue) {
			return bcontinue;
		}
           <#if menuAttributesp2 == "38">
            // if vp ie vendor patment then period for adjustment may not be default ie current period, so change it during updateAccount 
            int saveCurrentPeriod = currentPeriod;
            currentPeriod = this.instance.getC2xxpxeravxxxxxxxxxxpostingperiod();
            if (currentPeriod < 1 || currentPeriod > 14 ){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("period")+ " "+bundle.getString("chosen")+ " "+currentPeriod+" "+bundle.getString("is")+" "+bundle.getString("invalid"),""));
            bcontinue=false;
		 return bcontinue;

            }
           </#if>
		switch (currentPeriod) {
			//    replace actual with actual+(mt),p1 with p1+(mt),statdate with date(),stattime with time()
			case 01 :
				${accountEntityName}.setZ7xxzw1xlvxxxxxxxxxxp1(${accountEntityName}.getZ7xxzw1xlvxxxxxxxxxxp1().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZ7xxzw1xlvxxxxxxxxxxp1().add(postingAmount));
				break;
			case 02 :
				${accountEntityName}.setZ8xxzw2xlvxxxxxxxxxxp2(${accountEntityName}.getZ8xxzw2xlvxxxxxxxxxxp2().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZ8xxzw2xlvxxxxxxxxxxp2().add(postingAmount));
				break;
			case 03 :
				${accountEntityName}.setZ9xxzw3xlvxxxxxxxxxxp3(${accountEntityName}.getZ9xxzw3xlvxxxxxxxxxxp3().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZ9xxzw3xlvxxxxxxxxxxp3().add(postingAmount));
				break;
			case 04 :
				${accountEntityName}.setZaxxzw4xlvxxxxxxxxxxp4(${accountEntityName}.getZaxxzw4xlvxxxxxxxxxxp4().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZaxxzw4xlvxxxxxxxxxxp4().add(postingAmount));
				break;
			case 05 :
				${accountEntityName}.setZbxxzw5xlvxxxxxxxxxxp5(${accountEntityName}.getZbxxzw5xlvxxxxxxxxxxp5().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZbxxzw5xlvxxxxxxxxxxp5().add(postingAmount));
				break;
			case 06 :
				${accountEntityName}.setZcxxzw6xlvxxxxxxxxxxp6(${accountEntityName}.getZcxxzw6xlvxxxxxxxxxxp6().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZcxxzw6xlvxxxxxxxxxxp6().add(postingAmount));
				break;
			case 07 :
				${accountEntityName}.setZdxxzw7xlvxxxxxxxxxxp7(${accountEntityName}.getZdxxzw7xlvxxxxxxxxxxp7().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZdxxzw7xlvxxxxxxxxxxp7().add(postingAmount));
				break;
			case 8 :
				${accountEntityName}.setZexxzw8xlvxxxxxxxxxxp8(${accountEntityName}.getZexxzw8xlvxxxxxxxxxxp8().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZexxzw8xlvxxxxxxxxxxp8().add(postingAmount));
				break;
			case 9 :
				${accountEntityName}.setZfxxzw9xlvxxxxxxxxxxp9(${accountEntityName}.getZfxxzw9xlvxxxxxxxxxxp9().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZfxxzw9xlvxxxxxxxxxxp9().add(postingAmount));
				break;
			case 10 :
				${accountEntityName}.setZgxxzw10lvxxxxxxxxxxp10(${accountEntityName}.getZgxxzw10lvxxxxxxxxxxp10().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZgxxzw10lvxxxxxxxxxxp10().add(postingAmount));
				break;
			case 11 :
				${accountEntityName}.setZhxxzw11lvxxxxxxxxxxp11(${accountEntityName}.getZhxxzw11lvxxxxxxxxxxp11().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZhxxzw11lvxxxxxxxxxxp11().add(postingAmount));
				break;
			case 12 :
				${accountEntityName}.setZixxzw12lvxxxxxxxxxxp12(${accountEntityName}.getZixxzw12lvxxxxxxxxxxp12().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZixxzw12lvxxxxxxxxxxp12().add(postingAmount));
				break;
			case 13 :
				${accountEntityName}.setZjxxzw13lvxxxxxxxxxxp13(${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZjxxzw13lvxxxxxxxxxxp13().add(postingAmount));
				break;
			case 14 :
				${accountEntityName}.setZkxxzw14lvxxxxxxxxxxp14(${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14().compareTo(BigDecimal.ZERO)  == 0
						? postingAmount
						: ${accountEntityName}.getZkxxzw14lvxxxxxxxxxxp14().add(postingAmount));
				break;
		}
		 ${accountEntityName}.setB4xxzwaxlvxxxxxxxxxxactual(${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual().compareTo(BigDecimal.ZERO)  == 0
		  ? postingAmount	: ${accountEntityName}.getB4xxzwaxlvxxxxxxxxxxactual().add(postingAmount));
		 ${accountEntityName}.setZ6xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
		 try {
               ${accountEntityName}Home.setInstance(${accountEntityName});
              ${accountEntityName}Home.allowUpdate();
		 } catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${accountEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		 }
             /* credit/debit rules
              * Asset A/C                    =     Liability+Equity A/Cs
              * + ie increase record by debit     +ie  Increase by credit
              * - ie decrease       by credit     - ie  decrease by debit
              * Expenxe                      =     Revenue
              * + ie increase       by debit        + increase as credit
              * -                   by credit       -          as debit    
              */
       BigDecimal mdebit=BigDecimal.ZERO;
       BigDecimal mcredit=BigDecimal.ZERO;
       if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("E")){
        // 0 means equal, 1 means greater ie positive
        if (postingAmount.compareTo(BigDecimal.ZERO)==1){
         mdebit=mdebit.add(postingAmount);
        }
        else{
         mcredit=mcredit.subtract(postingAmount);
        }
       }
       else{
        if (postingAmount.compareTo(BigDecimal.ZERO)==1){
         mcredit=mcredit.add(postingAmount);
        }
        else{
         mdebit=mdebit.subtract(postingAmount);
        }
       }
		bcontinue = true;
		jpjournal = ${journalEntityName}Home.getInstance();
		if (jpjournal == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("journal")+ " "+bundle.getString("does")+ " "+bundle.getString("not")+" "+bundle.getString("exist"),""));
			bcontinue = false;
		}
            else{
             subapSeqn=subapSeqn+1;
            <#if keyAutoGen == "Y" >
		  //jpjournal.setA0xxujpshvxxxxxxxxxxspostdate(calendar.getTime().toString().substring(0,25));
                  jpjournal.setB3xxujjtbvxxxxxxxxxxjrnltype("AP");
		  jpjournal.setB6xxzkjsbvxxxxxxxxxxjnlseqs("" + glSeqn+"-"+subapSeqn);
                  jay=jpjournal.getB6xxzkjsbvxxxxxxxxxxjnlseqs().replace("-",""); 
		  jpjournal.setB5cczjsibvxxxxxxxxxxjnlseq(Integer.parseInt(jay));
            <#else>
		  jpjournal.getId().setA0xxujpshvxxxxxxxxxxspostdate(calendar.getTime().toString().substring(0,25));
                  jpjournal.getId().setB3xxujjtbvxxxxxxxxxxjrnltype("AP");
		  jpjournal.getId().setB6xxzkjsbvxxxxxxxxxxjnlseqs("" + glSeqn+"-"+subapSeqn);
                  jay=jpjournal.getId().getB6xxzkjsbvxxxxxxxxxxjnlseqs().replace("-",""); 
		  jpjournal.getId().setB5cczjsibvxxxxxxxxxxjnlseq(Integer.parseInt(jay));

            </#if> 
             jpjournal.setC1xxzwppbvpxxxxxxxxxperiod(currentPeriod);
             jpjournal.setB1xxcjpdhvxxxxxxxxxxpostdate(currbusdate);
             jpjournal.setA0xxujpshvxxxxxxxxxxspostdate(currbusdate.toString().substring(0,25));
             jpjournal.setC4xxuwkxbvxxxxxxxxxxaccount(accountn);
             jpjournal.setC5xxzwdxlvxxxxxxxxxxdebit(mdebit);
             jpjournal.setC6xxzwrxlvxxxxxxxxxxcredit(mcredit);
             <#if entityFunction == "vi"  > 
              jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript(this.instance.get${vendorEntityName?cap_first}().get${vendorCompanyName?cap_first}()+
                this.instance.get${vendorEntityName?cap_first}().get${vendorLastName?cap_first}()+" "+this.instance.get${vendorEntityName?cap_first}().get${vendorFirstName?cap_first}() );
              jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(this.instance.getA0xxunvibvxxxxxxxxxxinvoice()+" "+this.instance.getY4xxuxxrbvxxxxxxxxxxref1typ());
             <#elseif  entityFunction == "vp"  > 
              jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript(this.instance.get${vendorEntityName?cap_first}().get${vendorCompanyName?cap_first}()+
                this.instance.get${vendorEntityName?cap_first}().get${vendorLastName?cap_first}()+" "+this.instance.get${vendorEntityName?cap_first}().get${vendorFirstName?cap_first}() );
              jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(this.instance.getA0xxunvpbvxxxxxxxxxxpayment());
             <#elseif entityFunction == "va">
              jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(this.instance.getA0xxukvabvxxxxxxxxxxchqnumber());
              jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript(this.instance.get${vendorEntityName?cap_first}().get${vendorCompanyName?cap_first}()+
                this.instance.get${vendorEntityName?cap_first}().get${vendorLastName?cap_first}()+" "+this.instance.get${vendorEntityName?cap_first}().get${vendorFirstName?cap_first}() );
             </#if>          
              jpjournal.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);

             //jpjournal.setC7xxuwfxrbvxxxxxxxxxxreference(xxx);
             //jpjournal.setC8xxuzsxbvxxxxxxxxxxdescript(customer + inv + inv# );
             //jpjournal.setZ1xxzzfxhhxxxxxxxxxxstatusfl(status open, closed);

		 try {
              ${journalEntityName}Home.persist();
		 } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${journalEntityName?substring(eL)?cap_first}")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+bundle.getString("because")+" "+bundle.getString("of")+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("or")+" "+e.getMessage(),""));
                  bcontinue=false;
			return bcontinue;
		 }
             
             // prepare for a new instance persist
             ${journalEntityName}Home.clearInstance();
              <#if keyAutoGen == "Y" >
	       //xlrxeh65journalHome.set${journalEntityName?cap_first}Id(new ${journalEntityName?cap_first}Id());
              <#else>
	       ${journalEntityName}Home.set${journalEntityName?cap_first}Id(new ${journalEntityName?cap_first}Id());
              </#if>
            } 
            //prepare for another account/accountId persist
		${accountEntityName}Home.clearInstance();
            <#if keyAutoGen == "Y" >
		//${accountEntityName}Home.set${accountEntityName?cap_first}Id(new ${accountEntityName?cap_first}Id());
            <#else>
		${accountEntityName}Home.set${accountEntityName?cap_first}Id(new ${accountEntityName?cap_first}Id());
            </#if>

		return bcontinue;
  }
</#if>

<#if entityFunction == "ci" || entityFunction == "cp" || entityFunction == "vi" || entityFunction == "vp" || userHomeCandidate = "Y"
       || menuAttributesp2 == "65" || menuAttributesp2 == "60"  || entityFunction == "va">
	     public boolean checkAccount() {
		bcontinue = true;
          try{
            <#if keyAutoGen == "Y" >
			           ${accountEntityName} = (${accountEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${accountEntityName?cap_first} cc where cc.  a0xxukwxbvxxxxxxxxxxaccount=:accountv and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  ")
					.setParameter("accountv", accountn).setParameter("owner2", owner2Code)
					.getSingleResult();

            <#else>
		  ${accountEntityName}Home.get${accountEntityName?cap_first}Id().set${accountAccount?cap_first}(accountn);
             // jay replace below two with non null values if other than THIS
		  ${accountEntityName} = ${accountEntityName}Home.getDefinedInstance();
            </#if>
		 if (${accountEntityName} == null) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+accountn+" "+bundle.getString("does")+ " "+bundle.getString("not")+" "+bundle.getString("exist"),""));
			bcontinue = false;
		 }
            <#if userHomeCandidate = "Y">
            <#else>
           <#-- redundand code, account instance already exists and seems to cause returning null if account already was slected
                just setInstance
             ${accountEntityName}Home.set${accountEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid( ${accountEntityName}.getA0xxuobxbxxxxxxxxxxxsid() ); 
	        ${accountEntityName} = ${accountEntityName}Home.getDefinedInstance();
           -->
             ${accountEntityName}Home.clearInstance();
             ${accountEntityName}Home.setInstance(${accountEntityName});
 
            </#if>
     		} catch (Exception e) {
			log.severe(" check account error "+accountn + e.getMessage());
			bcontinue = false;
           }

		 return bcontinue;
	}

</#if>

<#if statusFlagField != "">

public void markAll() {
 // this needs to be here rather than xxxList bean because of persitence
 try {
                List<${componentName?cap_first}> listofStatus=${componentName}List.getResultList() ;
	Iterator<${componentName?cap_first}> itr = listofStatus.iterator();
	while (itr.hasNext()) {
	  ${componentName}li = itr.next();
                    ${componentName}li.set${statusFlagField?cap_first}(${componentName}li.get${statusFlagField?cap_first}()|mmark);
	}
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("marking")+ " "+bundle.getString("done"),""));
 } catch (Exception e) {
	log.severe("Mark iterator error " + e.getMessage());
 }
 
}
	public void unmarkAll() {
		// this needs to be here rather than xxxList bean because of persitence
		try {
			List<${componentName?cap_first}> listofStatus = ${componentName}List
					.getResultList();
			Iterator<${componentName?cap_first}> itr = listofStatus.iterator();
			while (itr.hasNext()) {
				${componentName}li = itr.next();
				${componentName}li.set${statusFlagField?cap_first}(${componentName}li
						.get${statusFlagField?cap_first}()
						& _mmark);
			}
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("un")+" "+bundle.getString("marking")+ " "+bundle.getString("done"),""));
		} catch (Exception e) {
			log.severe("UnMark iterator error " + e.getMessage());
		}

	}

	public void toggleRowEditable(${idType} id) {
          set${idName}(id);
		getDefinedInstance();
		if (this.instance != null) {
			if (!isBitSet(this.instance.get${statusFlagField?cap_first}(), _mclosed)) {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						& ~(1<<_mconsign));
			} else {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						| mconsign);
			}

                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("edit")+ " "+bundle.getString("toggle")+ " "+bundle.getString("done"),""));

		} else {
			log.severe("toggleRowEditable error-this.instance null value ");
		}
	}


	public void toggleRowDeleteable(${idType} id) {
           set${idName}(id);
		getDefinedInstance();
		if (this.instance != null) {
			if (isBitSet(this.instance.get${statusFlagField?cap_first}(), _mdel)) {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						& ~(1<<_mdel));
			} else {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						| mdel);
			}

                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+ " "+bundle.getString("toggle")+ " "+bundle.getString("done"),""));

		} else {
			log.severe("toggleRowDeleteable error-this.instance null value ");
		}
	}


public boolean gethideAllMarked() {
 if (hideChosen){
                return true;
 }
 else {
             return false;
 }
}

public void sethideAllMarked(boolean chosen){
      this.hideChosen=chosen;
     }




public void deleteAllHidden() {
           // this needs to be here because of perstence
           // jay add more logic to check association ie referential integrity
                Integer count=0;

 try {
                List<${componentName?cap_first}> listofStatus=${componentName}List.getResultList() ;
	Iterator<${componentName?cap_first}> itr = listofStatus.iterator();
         while (itr.hasNext()) {
	  ${componentName}li = itr.next();
                  if(isBitSet(${componentName}li.get${statusFlagField?cap_first}(),_mmark)){
                   count++;
                  }
                  
			}
                listofStatus=${componentName}List.getResultList() ;
			itr = listofStatus.iterator();
			while (itr.hasNext()) {
			  ${componentName}li = itr.next();
                  if(isBitSet(${componentName}li.get${statusFlagField?cap_first}(),_mmark)){
		        // ${componentName}li.remove();
                  }
          }
 } catch (Exception e) {
    log.severe(" status field iterator error " + e.getMessage());
 }

}
 public void copyAllMarked() {
 // rename it to copyAllFlagged 
  //${keyMaxLength}

      try{
        // jay should reuse ComponentName rather than many variables like   itemChecked, listofstatus takes memory
        String oldKey="";
        String oldDescr="";
        int index = 0;
        for (${componentName?cap_first} itemChecked : ${componentName}List.getResultList()) {
            this.clearInstance();
            if (checked.get(index)) {
                entityManager.detach(itemChecked);
                      itemChecked.setA0xxuobxbxxxxxxxxxxxsid(null);
                      <#if ids != "notdefinedxxxxxxxxx" && idsType?contains("tring") >
                       // add copy(1) etc using a variable to natural key field assign natural key itemChecked.setdollar{keyField?cap_first}(null);
                       oldKey=itemChecked.get${ids?cap_first}();
                       if (oldKey.length()+5 <= ${keyMaxLength}){
                        oldKey=oldKey.substring(0,oldKey.length()-5);
                        itemChecked.set${ids?cap_first}(oldKey+"-copy");
                       }
                       else{
                        itemChecked.set${ids?cap_first}("c"+oldKey.substring(1));
                       } 
                       <#if descriptField != "">
                        oldDescr=itemChecked.get${descriptField?cap_first}();
                        if (oldDescr.length()+5 > ${descrMaxLength}){
                         oldDescr=oldDescr.substring(0,oldDescr.length()-5);
                        }
                        itemChecked.set${descriptField?cap_first}(oldDescr+"-copy");
                       </#if>
                      </#if>
                      itemChecked.set${statusFlagField?cap_first}(0);
                      itemChecked.set${statusFlagField?cap_first}(itemChecked.get${statusFlagField?cap_first}()| mcopy);
                      <#if statusFlagDField !="">
                       itemChecked.set${statusFlagDField?cap_first}(calendar.getTime());
                      </#if>
                      <#if ownerField !="">
                       itemChecked.set${ownerField?cap_first}(ownerCode);
                      </#if>
                      this.setInstance(itemChecked);
                      //is this a copy of SYSTEM record
                      if (this.instance.getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")){
                       this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                      }
                     this.persist();
                      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copy")+ " "+bundle.getString("done"),""));

            }
            index++;
        }

        checked.clear(); 
      }
      catch ( Exception e){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("update")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }

 }

 public void updateAllFlagged() {
 // this needs to be here because of perstence jay5 enhance this using getallflagged 
        int index = 0;

      try{
        // jay should reuse ComponentName rather than many variables like   itemChecked, listofstatus takes memory
        for (${componentName?cap_first} itemChecked : ${componentName}List.getResultList()) {
            this.clearInstance();
            if (checked.get(index)) {
                this.setInstance(itemChecked);
                this.update();
            }
            index++;
        }

        checked.clear(); 
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("update")+ " "+bundle.getString("done"),""));

      }
      catch ( Exception e){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("update")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


    }

	public void writeAsIcalText() {
		// this needs to be here because of perstence jay5 enhance this using getallflagged 

      try{
        // jay should reuse ComponentName rather than many variables like   itemChecked, listofstatus takes memory
        int index = 0;
        for (${componentName?cap_first} itemChecked : ${componentName}List.getResultList()) {
            this.clearInstance();
            if (checked.get(index)) {
                this.setInstance(itemChecked);
                //this.update() put logic here
            }
            index++;
        }

        checked.clear(); 
      }
      catch ( Exception e){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("update")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


    }
  <#if statusFlagDField !="" && statusFlagField !="" >
   public void deleteAllRecentCopied() {
      // uses todays date and stausfl 2 so includes imported, scope is group members,item,customer etc 
      int index=0;
      try{
        index=0;
        count=0;
        calendar.add(Calendar.DATE, -5);
        Date toDay = calendar.getTime();
        for (${componentName?cap_first} itemChecked : ${componentName}List.getFlaggedAsList(mcopy)) {
            //
            this.clearInstance();
            // extra check needed if duplicate keys need to check using sid?
            if (isBitSet(itemChecked.get${statusFlagField?cap_first}(),_mcopy)
             && itemChecked.get${statusFlagDField?cap_first}().after( toDay)) {
             this.setInstance(itemChecked);
	     superdotremove();
             count++;


            }
            index++;
        }
             timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+count+", "+bundle.getString("of")+" "+index+" "+"at"+" "+timeStamp,""));
             this.clearInstance();
      }
      catch ( Exception e){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("delete")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


   }

   public void closeRecord(${entityName?cap_first} entity) {

      String key="";    
      //not all entities have key value 
      try{
            this.clearInstance();
            this.setInstance(entity);
            this.instance.set${statusFlagField?cap_first}(mclosed);
            superdotupdate();//dont change statusfldt
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("Marked")+" "+bundle.getString("as")+" "+bundle.getString("closed")+", "+" "+bundle.getString("key")+" "+key,""));

      }catch ( Exception e){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Status")+ " "+bundle.getString("update")+ " "+bundle.getString("error")+ ", "+bundle.getString("key")+" "+key+" "+e.getMessage(),""));
      }


   }


   public void closeOldRecords(int days) {
      // uses todays date 
      int index=0;
      try{
        index=0;
        count=0;
        Date toDay = calendar.getTime();
        for (${componentName?cap_first} itemChecked : ${componentName}List.getOldByList(days)) {
            //
            this.clearInstance();
            if (!isBitSet(itemChecked.get${statusFlagField?cap_first}(),_mclosed)){
             itemChecked.set${statusFlagField?cap_first}(mclosed);
             this.setInstance(itemChecked);
	     superdotupdate();//dont change statusfldt
             count++;
            }
            index++;
        }
             timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+count+", "+bundle.getString("of")+" "+index+" "+"at"+" "+timeStamp,""));

      }
      catch ( Exception e){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("delete")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


   }
   public void csvZapOldRecords(int days) {
      // uses todays date 
      int index=0;
      try{
        index=0;
        count=0;
        Date toDay = calendar.getTime();
        for (${componentName?cap_first} itemChecked : ${componentName}List.getOldByList(days)) {
            // if we produce csv then they can be downloaded to local machine
            this.clearInstance();
            itemChecked.set${statusFlagField?cap_first}(mclosed);
             this.setInstance(itemChecked);
	     superdotremove();//give msg about creating csv to download
             count++;

            index++;
        }
             timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("updated")+" "+count+", "+bundle.getString("of")+" "+index+" "+"at"+" "+timeStamp,""));

      }
      catch ( Exception e){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("delete")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


   }


  </#if>


   public void deleteAllFlagged() {
  // this needs to be here because of perstence jay5 enhance this using getallflagged 
      int index=0;
      try{
        // jay should reuse ComponentName rather than many variables like   itemChecked, listofstatus takes memory
        for (${componentName?cap_first} itemChecked : ${componentName}List.getResultList()) {
            if (checked.get(index)) {
             index++;
            }
        }
        if(index > 5){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("Please")+" "+bundle.getString("select")+" "+bundle.getString("upto")+" "+bundle.getString("five"),""));
             return;
        }
        index=0;
        count=0;
        for (${componentName?cap_first} itemChecked : ${componentName}List.getResultList()) {
            // restrict to 5 at a time to avoid UT000047 excceding max parameters 
            this.clearInstance();
            // extra check needed if duplicate keys need to check using sid?
            if (checked.get(index)) {
            <#if (entityFunction=="cq" || entityFunction=="co" || entityFunction=="ci" || entityFunction=="cp" ||  entityFunction=="sh"
             || entityFunction=="vq" || entityFunction=="vo" || entityFunction=="vi" || entityFunction=="vp" ||  entityFunction=="sv"
             || entityFunction=="eo" || menuAttributesp2 == "65" || menuAttributesp2 == "56" || menuAttributesp2 == "89" || menuAttributesp2 == "9A"
             || menuAttributesp2 == "92" || menuAttributesp2=="1G"|| entityFunction=="16" || entityFunction=="1r" || menuAttributesp2 == "1G" || menuAttributesp2 == "1A")  >
             //delete details if any first
             <#if menuAttributesp2 == "92">
              ///92(itemjob) details are 9A, so deleteDetails for 92 removes 9A (jobassignment and its details) 
              deleteDetails(itemChecked.getA0xxuobxbxxxxxxxxxxxsid());
             <#else>
              deleteDetails(itemChecked.getA0xxuobxbxxxxxxxxxxxsid());
             </#if>
            </#if>

             this.setInstance(itemChecked);
	     superdotremove();
             count++;

             <#if menuAttributesp2 == "1A" >
              /* delete clob or blob as they will be orphan 
                 they are not constrain so can be removed now
              */

                //delete all clob/blob whose from key matches the item docmnt value like B/A/Cnnnnnnnn
                List<${blobdataEntityName?cap_first}> results = entityManager
		 .createQuery(
			"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "FPXXFQ1A5XWWQQHXXXXXITEM").setParameter("blobdatafromkey", this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1))
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","1").getResultList();
		if(!results.isEmpty() ){
                 //blob/clob are not constrained as foreign entity to item, so just remove it
                 try{
                  ${blobdataEntityName}Home.clearInstance();
                  ${blobdataEntityName}Home.setInstance(results.get(0));
                  ${blobdataEntityName}Home.superdotremove();
                  countB++;
                 }catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("binary")+" "+bundle.getString("data")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                 }  
                }  
                try{
                 List<${clobdataEntityName?cap_first}> resultsc = entityManager
		 .createQuery(
			"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "FPXXFQ1A5XWWQQHXXXXXITEM").setParameter("blobdatafromkey", this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1))
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","1").getResultList();
		  if(!resultsc.isEmpty() ){
                   //blob/clob are not constrained as foreign entity to item, so just remove it
                   ${clobdataEntityName}Home.clearInstance();
                   ${clobdataEntityName}Home.setInstance(resultsc.get(0));
                   ${clobdataEntityName}Home.superdotremove();
                   countB++;
                  }   
                 }catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                  return ; 
                 }  
   
             </#if> 


            }
            index++;
        }
        checked.clear(); 
             timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("deleted")+" "+count+" "+bundle.getString("selected")+" "+"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("and")+" "+bundle.getString("related")+" "+countB+" "+bundle.getString("and")+" "+bundle.getString("details")+" "+countD+" "+bundle.getString("entries")+" "+"at"+" "+timeStamp,""));

      }
      catch ( Exception e){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+ " "+bundle.getString("delete")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


   }




     public void deleteDetails(Integer sid) {
      try{

        // get all details for this sid as parent, use entityLessStatusDetailedList not entityDetailedList to get all includind -1
       <#if entityFunction=="cq" >
        for (${cuqdetailsEntityName?cap_first} detail : ${cuquoteEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${cuqdetailsEntityName}Home.setInstance(detail);
	    ${cuqdetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="co">
        for (${cuodetailsEntityName?cap_first} detail : ${cuordersEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${cuodetailsEntityName}Home.setInstance(detail);
	    ${cuodetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="ci">
        for (${cuidetailsEntityName?cap_first} detail : ${cuinvoiceEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${cuidetailsEntityName}Home.setInstance(detail);
	    ${cuidetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="sh">
        for (${shipmentdetailsEntityName?cap_first} detail : ${shipmentEntityName}List.entityLessStatusDetailedList(sid,-2)) {//-2 means any value ie not -1 or >0
            ${shipmentdetailsEntityName}Home.setInstance(detail);
	    ${shipmentdetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="cp">
        for (${cupdetailsEntityName?cap_first} detail : ${cpaymentEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${cupdetailsEntityName}Home.setInstance(detail);
	    ${cupdetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="vq">
        for (${vendqdetailsEntityName?cap_first} detail : ${venquoteEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${vendqdetailsEntityName}Home.setInstance(detail);
	    ${vendqdetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="vo">
        for (${vendodetailsEntityName?cap_first} detail : ${vendordersEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${vendodetailsEntityName}Home.setInstance(detail);
	    ${vendodetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="vi">
        for (${vendidetailsEntityName?cap_first} detail : ${vinvoiceEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${vendidetailsEntityName}Home.setInstance(detail);
	    ${vendidetailsEntityName}Home.remove();
            entityManager.flush();
        }
       <#elseif entityFunction=="sv">
        for (${vshipmendetailsEntityName?cap_first} detail : ${vshipmenEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${vshipmendetailsEntityName}Home.setInstance(detail);
	    ${vshipmendetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif entityFunction=="vp">
        for (${vendpdetailsEntityName?cap_first} detail : ${vpaymentEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${vendpdetailsEntityName}Home.setInstance(detail);
	    ${vendpdetailsEntityName}Home.remove();
            entityManager.flush();
        }
       <#elseif entityFunction=="eo">
        for (${emplodetailsEntityName?cap_first} detail : ${emplordersEntityName}List.entityLessStatusDetailedList(sid,-2)) {
            ${emplodetailsEntityName}Home.setInstance(detail);
	    ${emplodetailsEntityName}Home.remove();
            entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "60">
        for (${gentriesDetailsEntityName?cap_first} detail : ${glentriesEntityName}List.entityDetailedList(sid)) {
             ${gentriesDetailsEntityName}Home.setInstance(detail);
	     ${gentriesDetailsEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "65">
        for (${gentriesDetailsEntityName?cap_first} detail : ${glentriesEntityName}List.entityDetailedList(sid)) {
             ${gentriesDetailsEntityName}Home.setInstance(detail);
	     ${gentriesDetailsEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "56">
        //has userprofl and customer etc
        for (${userproflEntityName?cap_first} detail : ${userEntityName}List.entityDetailedList(sid)) {
             ${userproflEntityName}Home.setInstance(detail);
	     ${userproflEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "89">
        for (${scheduleDetailsEntityName?cap_first} detail : ${scheduleEntityName}List.entityLessStatusDetailedList(sid,-2)) {
             ${scheduleDetailsEntityName}Home.setInstance(detail);
	     ${scheduleDetailsEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "9A" && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
        for (${jobassignmentdetailsEntityName?cap_first} detail : ${jobassignmentEntityName}List.entityDetailedList(sid)) {
             ${jobassignmentdetailsEntityName}Home.setInstance(detail);
	     ${jobassignmentdetailsEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "1G">
        for (${groupmembersEntityName?cap_first} detail : ${membersgroupEntityName}List.entityDetailedList(sid)) {
             ${groupmembersEntityName}Home.setInstance(detail);
	     ${groupmembersEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2 == "1A">
        for (${itemEntityName?cap_first} detail : ${itemEntityName}List.entityDetailedList(sid)) {
             ${itemEntityName}Home.setInstance(detail);
	     ${itemEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }
       <#elseif menuAttributesp2=="92" && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)>
       ///92(itemjob) details are 9A, so remove 9A (jobassignment and its details 
        for (${jobassignmentEntityName?cap_first} jobassignments : ${itemjobEntityName}List.entityJobassignmentsList(sid)) {
             //delete jobassignmentdetails for this
             ${jobassignmentEntityName}Home.deleteDetails(jobassignments.getA0xxuobxbxxxxxxxxxxxsid());
             //then delete jobassignment itself
             ${jobassignmentEntityName}Home.setInstance(jobassignments);
	     ${jobassignmentEntityName}Home.remove();
             entityManager.flush();
            countD++;
        }

       </#if> 
      

      }
      catch ( Exception e){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("detail")+ " "+bundle.getString("remove")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }
    }



 public void toggleAllFlagged() {
 // this needs to be here because of perstence jay5 enhance this using getallflagged 
      try{
        // jay should reuse ComponentName rather than many variables like   itemChecked, listofstatus takes memory
        for (${componentName?cap_first} itemChecked : ${componentName}List.getResultList()) {
            this.clearInstance();
            if (checked.get(itemChecked.getA0xxuobxbxxxxxxxxxxxsid())) {
                this.setInstance(itemChecked);
			if (isBitSet(this.instance.get${statusFlagField?cap_first}(), _mmark)) {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						& ~(1<<_mmark));
			} else {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						| mmark);
             
			}
                this.update();
            }
        }
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("marking")+ " / "+bundle.getString("un")+" "+bundle.getString("marking")+ " "+bundle.getString("done"),""));
        checked.clear(); 
      }
      catch ( Exception e){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("checked")+ " "+bundle.getString("items")+" "+ " "+bundle.getString("update")+ " "+bundle.getString("error")+" "+e.getMessage(),""));
      }


 }




	public void toggleRowMarked(Integer id) {
           set${idName}(id);
		getDefinedInstance();
		if (this.instance != null) {
			if (isBitSet(this.instance.get${statusFlagField?cap_first}(), _mmark)) {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						& ~(1<<_mmark));
                     // unmark should reset del and update tags as well
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						& ~(1<<_mdel));
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						& ~(1<<_mconsign));
			} else {
				this.instance.set${statusFlagField?cap_first}(this.instance
						.get${statusFlagField?cap_first}()
						| mmark);
             
			}
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("marking")+ " / "+bundle.getString("un")+bundle.getString("marking")+ " "+bundle.getString("done"),""));
		} else {
			log.severe("markThis error-this.instance null value,id is "+id);
		}

	}



</#if>


<#if documentField != "" >
 public void downloadThis(${idType} id) {
           // made changes needed for jsf2.2, zd means data in clob/blob ex item,customer zb means blob and za means clob
         try{

	   // mime type
           String mime="";
           String extension="";
           set${idName}(id);
           this.setInstance(getDefinedInstance()); 
           <#if documentField?substring(5,7) == "zd" >
           if(this.instance.get${documentField?cap_first}().length()==1){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("data"),""));

            return;
           }
                key=this.instance.get${documentField?cap_first}();
                // need to get blobdatatype
                extension =this.getBlobdataType("${entityName?upper_case}",key,"1",1);
           <#elseif documentField?substring(5,7) == "zb">
           if(this.instance.get${documentField?cap_first}()==null){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("data"),""));

            return;
           }
                //blob itself
                extension =this.instance.getA4xxexxxbvxxxxxxxxxxtype();
           <#else>
           if(this.instance.get${documentField?cap_first}()==null){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("data"),""));
            return;
           }
           extension =this.instance.getA4xxexxxbvxxxxxxxxxxtype();
           </#if>
           //need to stripoff asis from type
           if(extension != null && extension.contains("asis")){
            extension=extension.substring(4);
           }
    FacesContext fc = FacesContext.getCurrentInstance();
    ExternalContext ec = fc.getExternalContext();

    ec.responseReset(); // Some JSF component library or some Filter might have set some headers in the buffer beforehand. We want to get rid of them, else it may collide.

    OutputStream output = ec.getResponseOutputStream();
			if ("bmp".equals(extension)) {
				mime = "image/bmp";
			} else if ("jpg".equals(extension)) {
				mime = "image/jpeg";
			} else if ("gif".equals(extension)) {
				mime = "image/gif";
			} else if ("png".equals(extension)) {
				mime = "image/png";
			} else if ("xml".equals(extension)) {
				mime = "text/xml";
			} else if ("doc".equals(extension)) {
				mime = "application/msword";
                                resp.setHeader("Cache-Control", "Public");  
			} else if ("txt".equals(extension)) {
				mime = "text/plain";
			} else if ("html".equals(extension)) {
				mime = "text/html";
			} else if ("pdf".equals(extension)) {
				mime = "application/pdf";
			} else if ("xls".equals(extension)) {
				mime = "application/vnd.ms-excel";
                                resp.setHeader("Cache-Control", "Public");  
			} else if ("ppt".equals(extension)) {
				mime = "application/vnd.ms-powerpoint";
                                resp.setHeader("Cache-Control", "Public");  
			} else if ("mp3".equals(extension)) {
				mime = "audio/mpeg";
			} else if ("mp4".equals(extension)) {
				mime = "video/mp4";
			} else {
				mime = "image/unknown";
			}

       <#if documentField?substring(5,7) == "zd" >
          
          // add logic to figure out text data or binary data, may need to look into data header first ??

		byte[] bytes = null;

		bytes = this.getBlobdata("${entityName?upper_case}",key,"1",1);
           if(bytes == null){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("no")+" "+bundle.getString("data")+" "+bundle.getString("found"),""));
             return;
           }

                String fileName="mydownload." + extension;
    ec.setResponseContentType(mime); // Check http://www.iana.org/assignments/media-types for all types. Use if necessary ExternalContext#getMimeType() for auto-detection based on filename.
    ec.setResponseContentLength(bytes.length); // Set it with the file size. This header is optional. It will work if it's omitted, but the download progress will be unknown.
    ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); // The Save As popup magic is done here. You can give it any file name you want, this only won't work in MSIE, it will use current request URL as file name instead.
    OutputStream outputStream = ec.getResponseOutputStream();
		outputStream.write(bytes, 0, bytes.length);
		outputStream.flush();
		outputStream.close();
    fc.responseComplete();

         }catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,"${componentName?substring(eL)?cap_first}"+ " "+bundle.getString("key")+" "+bundle.getString("error")+" "+ e.getMessage(),""));
           log.severe("list download error " + e.getCause());
         }


       <#elseif documentField?substring(5,7) == "zb" >
          byte[] bytes = null;

          bytes=this.instance.get${documentField?cap_first}();
           if(bytes == null){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("no")+" "+bundle.getString("data")+" "+bundle.getString("found"),""));
             return;
           }
                String fileName="mydownload." + extension;
    ec.setResponseContentType(mime); // Check http://www.iana.org/assignments/media-types for all types. Use if necessary ExternalContext#getMimeType() for auto-detection based on filename.
    ec.setResponseContentLength(bytes.length); // Set it with the file size. This header is optional. It will work if it's omitted, but the download progress will be unknown.
    ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); // The Save As popup magic is done here. You can give it any file name you want, this only won't work in MSIE, it will use current request URL as file name instead.
    OutputStream outputStream = ec.getResponseOutputStream();
		outputStream.write(bytes, 0, bytes.length);
		outputStream.flush();
		outputStream.close();
    fc.responseComplete();
         }catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("key")+" "+bundle.getString("error")+" "+e.getMessage(),""));

         }

       <#else>
          set${idName}(id);
           this.setInstance(getDefinedInstance()); 

          byte[] bytes = null;

           bytes=this.instance.get${documentField?cap_first}().getBytes("UTF-8");
           if(bytes == null){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("no")+" "+bundle.getString("data")+" "+bundle.getString("found"),""));
             return;
           }
                String fileName="mydownload." + extension;
    ec.setResponseContentType(mime); // Check http://www.iana.org/assignments/media-types for all types. Use if necessary ExternalContext#getMimeType() for auto-detection based on filename.
    ec.setResponseContentLength(bytes.length); // Set it with the file size. This header is optional. It will work if it's omitted, but the download progress will be unknown.
    ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); // The Save As popup magic is done here. You can give it any file name you want, this only won't work in MSIE, it will use current request URL as file name instead.
    OutputStream outputStream = ec.getResponseOutputStream();
		outputStream.write(bytes, 0, bytes.length);
		outputStream.flush();
		outputStream.close();
    fc.responseComplete();
         }catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("key")+" "+bundle.getString("error")+" "+bundle.getString("cause")+" "+e.getMessage(),""));
         }
       </#if> 

      


 }

</#if>
  <#if menuAttributesp2 == "1I" >
    /**
    * The following method initializes scandate record and creates/reuses physical count/serialnumbers records
    * to store 
    * called by countAlias  and countItem
    * @param args start and enddate of physical stock counting/scan window 
    * @return String
    * @exception IOException
    * @see 
    */  
    public String setup(Date start,Date end){	
     List<Xlrxuq1iixwwqqhexxxxscandate> results=null;
     Xlrxuq1iixwwqqhexxxxscandate scandate=null;
     Fxxxuq1ffxwwqqhefxxxserialnumbers serial=null;
       int items=0;
       int itemsb=0;
     SimpleDateFormat ss = new SimpleDateFormat("yyyy-MM-dd");

     try{
      fpxxfq1a5xwwqqhxxxxxitemList.setMaxResultsVal(50000); //tbd for this and others put pagination to avoid memory 
      //copy Item qty unless 0 to corresponding serialnumbers b2xxcxxrlxxxxxxxxxxxquanrecd. tbd allow range
      for (Fpxxfq1a5xwwqqhxxxxxitem item : fpxxfq1a5xwwqqhxxxxxitemList.getResultList()) {
       items=items+1;
       if(item.getB0xxziqxlvxxsaxxxxxxquantity().compareTo(BigDecimal.ZERO)==0){
        continue;
       }
       Integer sid=item.getA0xxuobxbxxxxxxxxxxxsid();
       String sidS=sid+"";
       String strLeftPad = String.format("%8s", sidS).replace(" " , "0");
       serial=fxxxuq1ffxwwqqhefxxxserialnumbersList.getKeyToEntity(strLeftPad);
       if( serial==null){
        //First time,create one time (baseline) with quanrecrd as then item quantity, serialno as item sid and type as null
        fxxxuq1ffxwwqqhefxxxserialnumbersHome.clearInstance();
        serial=fxxxuq1ffxwwqqhefxxxserialnumbersHome.getInstance();
        serial.setB1xxuxxrbvxxxxxxxxxxmatcode(item.getA0xxukixbxxxxxxxxxxxmatcode());
        serial.setB2xxcxqrlxxxxxxxxxxxquanrecd(item.getB0xxziqxlvxxsaxxxxxxquantity());
        serial.setA0xxukxxbvxxxxxxxxxxserialno(String.format("%08d", sid));
        serial.setYcxxuxxrbvxxxxxxxxxxtype(null);// to indicate reset and differ from a/m/s value
        fxxxuq1ffxwwqqhefxxxserialnumbersHome.setInstance(serial);//sid is null
        fxxxuq1ffxwwqqhefxxxserialnumbersHome.superdotpersist();
       }else{
        //2nd or subsequent stock taking window reuse records but recreate a new base line with the current item quantity
        // Ideally stock taking should be taken in a perod when business activity does not change item qty, but not always possible
       // this base line taken at the start allows for variance checking using phy qty vs base qty+qty received from vendor(vshipment)
       // minus qty shipped (shipment) during stock start and end date and time.
       // look into creating a new report showing against each sid/matcode qty received and qty shipped during the current stock period.
        serial.setB1xxuxxrbvxxxxxxxxxxmatcode(item.getA0xxukixbxxxxxxxxxxxmatcode());
        serial.setYcxxuxxrbvxxxxxxxxxxtype(null);// to indicate reset and change from type as a(sku)/m(matcode)/s(serial for erp)
        serial.setB2xxcxqrlxxxxxxxxxxxquanrecd(item.getB0xxziqxlvxxsaxxxxxxquantity());
        serial.setA0xxukxxbvxxxxxxxxxxserialno(String.format("%08d", sid));
        fxxxuq1ffxwwqqhefxxxserialnumbersHome.clearInstance();
        fxxxuq1ffxwwqqhefxxxserialnumbersHome.setInstance(serial);//sid has value
        fxxxuq1ffxwwqqhefxxxserialnumbersHome.superUpdate();

       }
       itemsb=itemsb+1;
      
      }//for loop
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Items")+" "+bundle.getString("checked")+" "+items+", "+bundle.getString("created")+" "+bundle.getString("baseline")+" "+bundle.getString("records")+", "+itemsb+". "+bundle.getString("Excluded")+" "+bundle.getString("records") +" "+bundle.getString("with") +" "+bundle.getString("zero")+" "+bundle.getString("quantity"),""));

      results=xlrxuq1iixwwqqhexxxxscandateList.getResultList();//get all, should be one only unless ERP needs 2nd one
     
      if(results.size() == 0  ){
       //create one time ie persist
       this.clearInstance();
       scandate=this.getInstance();
       scandate.setA0xxukxrlvxxxxxxxxxxsdsatetimeofscan(ss.format(start).toString());
       scandate.setB1xxcsxraxxxxxxxxxxxdatetimeofscan(start);
       scandate.setZ1xxcxxrlvxxxxxxxxxxlastdate(end);
       this.setInstance(scandate);
       this.superdotpersist();
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Stock")+" "+bundle.getString("taking")+" "+bundle.getString("setup")+" "+bundle.getString("done"),""));
       return "";
      }
      if(results.size() > 0){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Multiple")+" "+bundle.getString("Date")+" "+bundle.getString("range")+" "+bundle.getString("records")+", "+bundle.getString("using")+" "+bundle.getString("first")+" "+bundle.getString("one")+". "+bundle.getString("Use")+" "+bundle.getString("Scandate")+" "+bundle.getString("List")+" "+bundle.getString("to")+" "+bundle.getString("delete")+" "+bundle.getString("the")+" "+bundle.getString("rest"),""));

       //update existing one
       this.clearInstance();
       scandate=results.get(0);
       scandate.setA0xxukxrlvxxxxxxxxxxsdsatetimeofscan(ss.format(start).toString());
       scandate.setB1xxcsxraxxxxxxxxxxxdatetimeofscan(start);
       scandate.setZ1xxcxxrlvxxxxxxxxxxlastdate(end);

       this.setInstance(scandate);//sid should have existing value
       this.superUpdate();
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Stock")+" "+bundle.getString("taking")+" "+bundle.getString("setup")+" "+bundle.getString("done")+", "+bundle.getString("start")+" "+ss.format(start).toString()+" "+bundle.getString("end")+" "+ss.format(end).toString(),""));
       return "";
      }
     }catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Stock")+" "+bundle.getString("taking")+" "+bundle.getString("setup")+" "+bundle.getString("error")+", "+e.getMessage(),""));

             return "";
     }  

     return "";
    }



  </#if>


// same as checking for "1B"
<#if bt != "">

          BigDecimal vTotals=new BigDecimal("0.0");
          BigDecimal bvTotals=new BigDecimal("0.0");
          BigDecimal vP1=new BigDecimal("0.0");
          BigDecimal bvP1=new BigDecimal("0.0");
          BigDecimal vP2=new BigDecimal("0.0");
          BigDecimal bvP2=new BigDecimal("0.0");
          BigDecimal vP3=new BigDecimal("0.0");
          BigDecimal bvP3=new BigDecimal("0.0");
          BigDecimal vP4=new BigDecimal("0.0");
          BigDecimal bvP4=new BigDecimal("0.0");
          BigDecimal vP5=new BigDecimal("0.0");
          BigDecimal bvP5=new BigDecimal("0.0");
          BigDecimal vP6=new BigDecimal("0.0");
          BigDecimal bvP6=new BigDecimal("0.0");
          BigDecimal vP7=new BigDecimal("0.0");
          BigDecimal bvP7=new BigDecimal("0.0");
          BigDecimal vP8=new BigDecimal("0.0");
          BigDecimal bvP8=new BigDecimal("0.0");
          BigDecimal vP9=new BigDecimal("0.0");
          BigDecimal bvP9=new BigDecimal("0.0");
          BigDecimal vP10=new BigDecimal("0.0");
          BigDecimal bvP10=new BigDecimal("0.0");
          BigDecimal vP11=new BigDecimal("0.0");
          BigDecimal bvP11=new BigDecimal("0.0");
          BigDecimal vP12=new BigDecimal("0.0");
          BigDecimal bvP12=new BigDecimal("0.0");
          BigDecimal vPn=new BigDecimal("0.0");
          BigDecimal bvPn=new BigDecimal("0.0");


    /**
    * The following method creates new records , if needed, and loads data from transactions data into periods
    * add logic to check last load date vs transaction date to bypass unnecessary load
    * iterate through say cuorders sorted by statusdate and agent,get agent keyvalue,if not exists create usagebyperiods record 
    * w key coakkk or coqkkk or or cobkkk  or cqbkkk, co for customer order, a order, q quote, b budget/target kkk agent or owner2
    * and add amount or quantity into periods and persist at end of one agent's data 
    * Besides agents (employee) sales data, it also adds target/budget for agent and for organation  
    * @param args String type value can be coa or coq etc to decide on entity and what to do
    * @return none.
    * @exception query,
    * @see 
    * 
    */

     public String loadSalesData(){
         int icount=0;
	 try {

           //${cuordersEntityName}List.setMaxResults(1200);
           String agentKey="";
           String agentLFName="";
           detailLt = new BigDecimal("0.0");
           BigDecimal oamountTotal = new BigDecimal("0.0");
           boolean updateFlag=false;
            List<${cuordersEntityName?cap_first}> listofcuorders=${cuordersEntityName}List.getResultListMaxSet(1200) ;
            if(listofcuorders.size()==0){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("List")+" "+bundle.getString("empty"),""));
             return "";
            }
	    Iterator<${cuordersEntityName?cap_first}> itr = listofcuorders.iterator();
	   while (itr.hasNext()) {
	      ${cuordersEntityName} = itr.next();
              if(${cuordersEntityName}.get${employeeEntityName?cap_first}()==null){
               continue;
              } 
              ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuordersEntityName}.get${employeeEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
	      ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
              agentKey=${employeeEntityName}.getA0xxuktxbvxxxxxxxxxxemployee();
              detailLt=${cuordersEntityName}.getZ1xxztprlxxxxxxxxxxxamounttotal()==null ? new BigDecimal("0.00"): ${cuordersEntityName}.getZ1xxztprlxxxxxxxxxxxamounttotal();
              oamountTotal=oamountTotal.add(detailLt);
              calendar.setTime(${cuordersEntityName}.getC1xxcxxxbxxxxxxxxxxxodatet());
              currentPeriod = calendar.get(Calendar.MONTH)+1;
              switch (currentPeriod) {
			case 1 :
                     vP1=vP1.add(detailLt);
				break;
			case 2 :
                     vP2=vP2.add(detailLt);
				break;
			case 3 :
                     vP3=vP3.add(detailLt);
				break;
			case 4 :
                     vP4=vP4.add(detailLt);
				break;
			case 5 :
                     vP5=vP5.add(detailLt);
				break;
			case 6 :
                     vP6=vP6.add(detailLt);
				break;
			case 7 :
                     vP7=vP7.add(detailLt);
				break;
			case 8 :
                     vP8=vP8.add(detailLt);
				break;
			case 9 :
                     vP9=vP9.add(detailLt);
				break;
			case 10 :
                     vP10=vP10.add(detailLt);
				break;
			case 11 :
                     vP11=vP11.add(detailLt);
				break;
			case 12 :
                     vP12=vP12.add(detailLt);
				break;
              }
	      try {
                //order actual value for agent
                ${usagebyperiodsEntityName?cap_first} usagebyperiods =null;
			List<${usagebyperiodsEntityName?cap_first}> results =  entityManager
			.createQuery(
			"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.  a0xxukupbvxxxxxxxxxxusagetrackerid=:usagekey  and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
			.setParameter("usagekey", "coa"+agentKey)
                        .setParameter("owner2", owner2Code)
			.getResultList();
                           if(!results.isEmpty()){
                            this.instance = results.get(0);
                            updateFlag=true;
                           }
                           else{
                            this.clearInstance();
	                    this.instance=this.getInstance();
                            this.instance.setA0xxukupbvxxxxxxxxxxusagetrackerid("coa"+agentKey);
                            this.instance.setA1xxuszsbxxxxxxxxxxxdescript(agentKey);
                            updateFlag=false;
                           }
                            this.instance.set${a1?cap_first}(vP1);
                            this.instance.set${a2?cap_first}(vP2);
                            this.instance.set${a3?cap_first}(vP3);
                            this.instance.set${a4?cap_first}(vP4);
                            this.instance.set${a5?cap_first}(vP5);
                            this.instance.set${a6?cap_first}(vP6);
                            this.instance.set${a7?cap_first}(vP7);
                            this.instance.set${a8?cap_first}(vP8);
                            this.instance.set${a9?cap_first}(vP9);
                            this.instance.set${aa?cap_first}(vP10);
                            this.instance.set${ab?cap_first}(vP11);
                            this.instance.set${ac?cap_first}(vP12);
                            this.instance.setE4xxzatrbvxxxxxxxxxxperiodtotals(amountTotal);
                            this.instance.setZixxzzfxhhxxxxxxxxxxstatusfl(-1);
                            if(bcontinue){
                             if(updateFlag){
                              this.superdotupdate();
                             }
                             else{
                              this.superdotpersist();
                             }
                            }

            } catch (Exception ex) {
	         log.severe( ex.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("${usagebyperiodsEntityName?substring(eL)}")+" "+bundle.getString("error")+" "+ex.getMessage(), ""));

 	         bcontinue= false;
	    } //jan 15 019 added budget/target used in dashboard or sales report

              //quote budget value for organization
              agentKey=owner2Code;
	      try {
                ${usagebyperiodsEntityName?cap_first} usagebyperiods =null;
			List<${usagebyperiodsEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.  a0xxukupbvxxxxxxxxxxusagetrackerid=:usagekey  and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("usagekey", "cqb"+agentKey)
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            this.instance = results.get(0);
                            updateFlag=true;
                           }
                           else{
                            this.clearInstance();
	                    this.instance=this.getInstance();
                            this.instance.setA0xxukupbvxxxxxxxxxxusagetrackerid("cqb"+agentKey);
                            this.instance.setA1xxuszsbxxxxxxxxxxxdescript(agentKey);
                            updateFlag=false;//once initialized, the values can be manually updated
                            //following can be removed since no order will have owner2 as agent
                            this.instance.set${a1?cap_first}(vP1);
                            this.instance.set${a2?cap_first}(vP2);
                            this.instance.set${a3?cap_first}(vP3);
                            this.instance.set${a4?cap_first}(vP4);
                            this.instance.set${a5?cap_first}(vP5);
                            this.instance.set${a6?cap_first}(vP6);
                            this.instance.set${a7?cap_first}(vP7);
                            this.instance.set${a8?cap_first}(vP8);
                            this.instance.set${a9?cap_first}(vP9);
                            this.instance.set${aa?cap_first}(vP10);
                            this.instance.set${ab?cap_first}(vP11);
                            this.instance.set${ac?cap_first}(vP12);
                            this.instance.setE4xxzatrbvxxxxxxxxxxperiodtotals(amountTotal);
                           }
                            this.instance.setZixxzzfxhhxxxxxxxxxxstatusfl(-1);
                            if(bcontinue){
                             if(updateFlag){
                              this.superdotupdate();
                             }
                             else{
                              this.superdotpersist();// not to override key value from descript
                             }
                            }

            } catch (Exception ex) {
	         log.severe( ex.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("${usagebyperiodsEntityName?substring(eL)}")+" "+bundle.getString("error")+" "+ex.getMessage(), ""));

 	         bcontinue= false;
	    }//do the overall budget/target
              //order budget value for organization
              agentKey=owner2Code;
	      try {
                ${usagebyperiodsEntityName?cap_first} usagebyperiods =null;
			List<${usagebyperiodsEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.  a0xxukupbvxxxxxxxxxxusagetrackerid=:usagekey  and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("usagekey", "cob"+agentKey)
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            this.instance = results.get(0);
                            updateFlag=true;
                           }
                           else{
                            this.clearInstance();
	                    this.instance=this.getInstance();
                            this.instance.setA0xxukupbvxxxxxxxxxxusagetrackerid("cob"+agentKey);
                            this.instance.setA1xxuszsbxxxxxxxxxxxdescript(agentKey);
                            updateFlag=false;//once initialized, the values can be manually updated
                            this.instance.set${a1?cap_first}(vP1);
                            this.instance.set${a2?cap_first}(vP2);
                            this.instance.set${a3?cap_first}(vP3);
                            this.instance.set${a4?cap_first}(vP4);
                            this.instance.set${a5?cap_first}(vP5);
                            this.instance.set${a6?cap_first}(vP6);
                            this.instance.set${a7?cap_first}(vP7);
                            this.instance.set${a8?cap_first}(vP8);
                            this.instance.set${a9?cap_first}(vP9);
                            this.instance.set${aa?cap_first}(vP10);
                            this.instance.set${ab?cap_first}(vP11);
                            this.instance.set${ac?cap_first}(vP12);
                            this.instance.setE4xxzatrbvxxxxxxxxxxperiodtotals(amountTotal);
                           }
                            this.instance.setZixxzzfxhhxxxxxxxxxxstatusfl(-1);
                            if(bcontinue){
                             if(updateFlag){
                              this.superdotupdate();
                             }
                             else{
                              this.superdotpersist();
                             }
                            }
              icount++;


            } catch (Exception ex) {
	         log.severe( ex.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("${usagebyperiodsEntityName?substring(eL)}")+" "+bundle.getString("error")+" "+ex.getMessage(), ""));

 	         bcontinue= false;
	    }


           }//end of while
	 } catch (Exception e) {
	  log.severe( e.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("loadSalesData")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
 	  bcontinue= false;
	 }
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Load")+" / "+bundle.getString("refresh")+" "+bundle.getString("done")+" "+bundle.getString("for")+" "+icount,""));

         return "usagebyperiodsList.wflow?faces-redirect=true";// to refresh page

     }
    /**
    * The following method creates new records , if needed, and loads data from transactions data into periods
    * add logic to check last load date vs transaction date to bypass unnecessary load
    * iterate through say cuorders sorted by statusdate and agent,get agent keyvalue,if not exists create usagebyperiods record 
    * w key coakkk or coqkkk or or cobkkk co for customer order, a order, q quote, b budget/target kkk agent or owner2
    * and add amount or quantity into periods and persist at end of one agent's data 
    * Besides agents (employee) sales data, it also adds target/budget for agent and for organation  
    * @param args String type value can be coa or coq etc to decide on entity and what to do
    * @return none.
    * @exception query,
    * @see 
    * 
    */

     public void loadQuotesData(){
	 try {

           //${cuordersEntityName}List.setMaxResults(1200);
           String agentKey="";
           String agentLFName="";
           detailLt = new BigDecimal("0.0");
           BigDecimal oamountTotal = new BigDecimal("0.0");
           boolean updateFlag=false;
            List<${cuquoteEntityName?cap_first}> listofcuorders=${cuquoteEntityName}List.getResultListMaxSet(1200) ;
            if(listofcuorders.size()==0){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("List")+" "+bundle.getString("empty"),""));
             return;
            }
	    Iterator<${cuquoteEntityName?cap_first}> qitr = listofcuorders.iterator();
	   while (qitr.hasNext()) {
	      ${cuquoteEntityName} = qitr.next();
              if(${cuquoteEntityName}.get${employeeEntityName?cap_first}()==null){
               continue;
              } 
              ${employeeEntityName}Home.set${employeeEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(${cuquoteEntityName}.get${employeeEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
	      ${employeeEntityName} = ${employeeEntityName}Home.getDefinedInstance();
              agentKey=${employeeEntityName}.getA0xxuktxbvxxxxxxxxxxemployee();
              detailLt=${cuquoteEntityName}.getZ1xxztprlxxxxxxxxxxxamounttotal()==null ? new BigDecimal("0.00"): ${cuquoteEntityName}.getZ1xxztprlxxxxxxxxxxxamounttotal();
              oamountTotal=oamountTotal.add(detailLt);
              calendar.setTime(${cuquoteEntityName}.getB8xxcxxrlxxxxxxxxxxxodatet());
              currentPeriod = calendar.get(Calendar.MONTH)+1;
              switch (currentPeriod) {
			case 1 :
                     vP1=vP1.add(detailLt);
				break;
			case 2 :
                     vP2=vP2.add(detailLt);
				break;
			case 3 :
                     vP3=vP3.add(detailLt);
				break;
			case 4 :
                     vP4=vP4.add(detailLt);
				break;
			case 5 :
                     vP5=vP5.add(detailLt);
				break;
			case 6 :
                     vP6=vP6.add(detailLt);
				break;
			case 7 :
                     vP7=vP7.add(detailLt);
				break;
			case 8 :
                     vP8=vP8.add(detailLt);
				break;
			case 9 :
                     vP9=vP9.add(detailLt);
				break;
			case 10 :
                     vP10=vP10.add(detailLt);
				break;
			case 11 :
                     vP11=vP11.add(detailLt);
				break;
			case 12 :
                     vP12=vP12.add(detailLt);
				break;
              }
	      try {
                ${usagebyperiodsEntityName?cap_first} usagebyperiods =null;
			List<${usagebyperiodsEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.  a0xxukupbvxxxxxxxxxxusagetrackerid=:usagekey  and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("usagekey", "cqa"+agentKey)
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            this.instance = results.get(0);
                            updateFlag=true;
                           }
                           else{
                            this.clearInstance();
	                    this.instance=this.getInstance();
                            this.instance.setA0xxukupbvxxxxxxxxxxusagetrackerid("cq"+agentKey);
                            this.instance.setA1xxuszsbxxxxxxxxxxxdescript(agentKey);
                            updateFlag=false;
                           }
                            this.instance.set${a1?cap_first}(vP1);
                            this.instance.set${a2?cap_first}(vP2);
                            this.instance.set${a3?cap_first}(vP3);
                            this.instance.set${a4?cap_first}(vP4);
                            this.instance.set${a5?cap_first}(vP5);
                            this.instance.set${a6?cap_first}(vP6);
                            this.instance.set${a7?cap_first}(vP7);
                            this.instance.set${a8?cap_first}(vP8);
                            this.instance.set${a9?cap_first}(vP9);
                            this.instance.set${aa?cap_first}(vP10);
                            this.instance.set${ab?cap_first}(vP11);
                            this.instance.set${ac?cap_first}(vP12);
                            this.instance.setE4xxzatrbvxxxxxxxxxxperiodtotals(amountTotal);
                            this.instance.setZixxzzfxhhxxxxxxxxxxstatusfl(-1);
                            if(bcontinue){
                             if(updateFlag){
                              this.superdotupdate();
                             }
                             else{
                              this.superdotpersist();
                             }
                            }

            } catch (Exception ex) {
	         log.severe( ex.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("${usagebyperiodsEntityName?substring(eL)}")+" "+bundle.getString("error")+" "+ex.getMessage(), ""));

 	         bcontinue= false;
	    } //jan 15 019 added budget/target used in dashboard or sales report
	      try {
                ${usagebyperiodsEntityName?cap_first} usagebyperiods =null;
			List<${usagebyperiodsEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.  a0xxukupbvxxxxxxxxxxusagetrackerid=:usagekey  and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("usagekey", "cqb"+agentKey)
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            this.instance = results.get(0);
                            updateFlag=true;
                           }
                           else{
                            this.clearInstance();
	                    this.instance=this.getInstance();
                            this.instance.setA0xxukupbvxxxxxxxxxxusagetrackerid("cqb"+agentKey);
                            this.instance.setA1xxuszsbxxxxxxxxxxxdescript(agentKey);
                            updateFlag=false;//once initialized, the values can be manually updated
                            this.instance.set${a1?cap_first}(vP1);
                            this.instance.set${a2?cap_first}(vP2);
                            this.instance.set${a3?cap_first}(vP3);
                            this.instance.set${a4?cap_first}(vP4);
                            this.instance.set${a5?cap_first}(vP5);
                            this.instance.set${a6?cap_first}(vP6);
                            this.instance.set${a7?cap_first}(vP7);
                            this.instance.set${a8?cap_first}(vP8);
                            this.instance.set${a9?cap_first}(vP9);
                            this.instance.set${aa?cap_first}(vP10);
                            this.instance.set${ab?cap_first}(vP11);
                            this.instance.set${ac?cap_first}(vP12);
                            this.instance.setE4xxzatrbvxxxxxxxxxxperiodtotals(amountTotal);
                           }
                            this.instance.setZixxzzfxhhxxxxxxxxxxstatusfl(-1);
                            if(bcontinue){
                             if(updateFlag){
                              this.superdotupdate();
                             }
                             else{
                              this.superdotpersist();// not to override key value from descript
                             }
                            }

            } catch (Exception ex) {
	         log.severe( ex.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("${usagebyperiodsEntityName?substring(eL)}")+" "+bundle.getString("error")+" "+ex.getMessage(), ""));

 	         bcontinue= false;
	    }//do the overall budget/target
              agentKey=owner2Code;
	      try {
                ${usagebyperiodsEntityName?cap_first} usagebyperiods =null;
			List<${usagebyperiodsEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.  a0xxukupbvxxxxxxxxxxusagetrackerid=:usagekey  and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("usagekey", "cqb"+agentKey)
                           .setParameter("owner2", owner2Code)
					.getResultList();
                           if(!results.isEmpty()){
                            this.instance = results.get(0);
                            updateFlag=true;
                           }
                           else{
                            this.clearInstance();
	                    this.instance=this.getInstance();
                            this.instance.setA0xxukupbvxxxxxxxxxxusagetrackerid("cqb"+agentKey);
                            this.instance.setA1xxuszsbxxxxxxxxxxxdescript(agentKey);
                            updateFlag=false;//once initialized, the values can be manually updated
                            this.instance.set${a1?cap_first}(vP1);
                            this.instance.set${a2?cap_first}(vP2);
                            this.instance.set${a3?cap_first}(vP3);
                            this.instance.set${a4?cap_first}(vP4);
                            this.instance.set${a5?cap_first}(vP5);
                            this.instance.set${a6?cap_first}(vP6);
                            this.instance.set${a7?cap_first}(vP7);
                            this.instance.set${a8?cap_first}(vP8);
                            this.instance.set${a9?cap_first}(vP9);
                            this.instance.set${aa?cap_first}(vP10);
                            this.instance.set${ab?cap_first}(vP11);
                            this.instance.set${ac?cap_first}(vP12);
                            this.instance.setE4xxzatrbvxxxxxxxxxxperiodtotals(amountTotal);
                           }
                            this.instance.setZixxzzfxhhxxxxxxxxxxstatusfl(-1);
                            if(bcontinue){
                             if(updateFlag){
                              this.superdotupdate();
                             }
                             else{
                              this.superdotpersist();
                             }
                            }
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("Load")+" / "+bundle.getString("refresh")+" "+bundle.getString("done"),""));

            } catch (Exception ex) {
	         log.severe( ex.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("${usagebyperiodsEntityName?substring(eL)}")+" "+bundle.getString("error")+" "+ex.getMessage(), ""));

 	         bcontinue= false;
	    }


           }//end of while
	 } catch (Exception e) {
	  log.severe( e.getMessage());
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("loadSalesData")+" "+bundle.getString("error")+" "+e.getMessage(), ""));
 	  bcontinue= false;
	 }

     }






    /**
    * The following method recalculates the total for 12 periods by adding each period
    * for this instance ie child.
    * @param args Unused.
    * @return none.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
     public void recalculateTotalThis(){
                // each amountTotal is a new object
                // amountTotal refers to actual period values total for current instance (child)
                amountTotal = BigDecimal.ZERO;
			amountTotal = amountTotal.add(this.instance.get${a1?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a2?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a3?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a4?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a5?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a6?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a7?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a8?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${a9?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${aa?cap_first}());
			amountTotal = amountTotal.add(this.instance.get${ab?cap_first}());
		     amountTotal = amountTotal.add(this.instance.get${ac?cap_first}());
                this.instance.set${at?cap_first}(amountTotal);

                // totalbaseamt refers to budget total for current instance (child)
                totalbaseamt= BigDecimal.ZERO;
			totalbaseamt = totalbaseamt.add(this.instance.get${b1?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b2?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b3?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b4?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b5?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b6?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b7?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b8?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${b9?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${ba?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${bb?cap_first}());
			totalbaseamt = totalbaseamt.add(this.instance.get${bc?cap_first}());
                this.instance.set${bt?cap_first}(totalbaseamt);
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("Recalculation")+" "+bundle.getString("done"),""));
     }



    /**
    * The following method recalculates the total for 12 periods by adding each period
    * and then if a rollup instance is involved it will add each period to the rollup.
    * @param args Unused.
    * @return none.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
     // jay added logic to do this add for siblings
     public void recalculateTotalDeep(){
       try{
 	   List<Fxxxuq1bhxwwqqhxxxxxusagebyperiods> results = 
		        getEntityManager().createQuery(
		         "select cc from Fxxxuq1bhxwwqqhxxxxxusagebyperiods cc where (cc.jxxxuq53dxwwqqhxxxxxrollupgroup=:rollUp AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2) order by cc.a0xxuobxbxxxxxxxxxxxsid")
		          .setParameter("rollUp", this.instance.getJxxxuq53dxwwqqhxxxxxrollupgroup()).setParameter("owner2", owner2Code).getResultList();  

        if(!results.isEmpty()){
         for (Fxxxuq1bhxwwqqhxxxxxusagebyperiods cc1 : results) {
           vTotals= vTotals.add(cc1.get${at?cap_first}());
           bvTotals= bvTotals.add(cc1.get${bt?cap_first}());
           vP1= vP1.add(cc1.get${a1?cap_first}());
           bvP1= bvP1.add(cc1.get${b1?cap_first}());
           vP2= vP2.add(cc1.get${a2?cap_first}());
           bvP2= bvP2.add(cc1.get${b2?cap_first}());
           vP3= vP3.add(cc1.get${a3?cap_first}());
           bvP3= bvP3.add(cc1.get${b3?cap_first}());
           vP4= vP4.add(cc1.get${a4?cap_first}());
           bvP4= bvP4.add(cc1.get${b4?cap_first}());
           vP5= vP5.add(cc1.get${a5?cap_first}());
           bvP5= bvP5.add(cc1.get${b5?cap_first}());
           vP6= vP6.add(cc1.get${a6?cap_first}());
           bvP6= bvP6.add(cc1.get${b6?cap_first}());
           vP7= vP7.add(cc1.get${a7?cap_first}());
           bvP7= bvP7.add(cc1.get${b7?cap_first}());
           vP8= vP8.add(cc1.get${a8?cap_first}());
           bvP8= bvP8.add(cc1.get${b8?cap_first}());
           vP9= vP9.add(cc1.get${a9?cap_first}());
           bvP9= bvP9.add(cc1.get${b9?cap_first}());
           vP10= vP10.add(cc1.get${aa?cap_first}());
           bvP10= bvP10.add(cc1.get${ba?cap_first}());
           vP11= vP11.add(cc1.get${ab?cap_first}());
           bvP11= bvP11.add(cc1.get${bb?cap_first}());
           vP12= bvP12.add(cc1.get${ac?cap_first}());
           bvP12= bvP12.add(cc1.get${bc?cap_first}());
           vPn= vPn.add(cc1.getR4xxzadrbvxxxxxxxxxxperiodn());
           bvPn= bvPn.add(cc1.getR3xxzbdrbvxxxxxxxxxxperiodnb());
         }
         // now ypdate rollupEntity instance w totals from siblings and this
                
                
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB4xxzatrbvxxxxxxxxxxperiodtotals(vTotals);
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB5xxza1rbvxxxxxxxxxxperiod1actual( vP1 );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB6xxza2rbvxxxxxxxxxxperiod2(vP2  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB7xxza3rbvxxxxxxxxxxperiod3(vP3  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB8xxza4rbvxxxxxxxxxxperiod4(vP4 );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB9xxza5rbvxxxxxxxxxxperiod5(vP5 );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBaxxza6rbvxxxxxxxxxxperiod6(vP6  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBbxxza7rbvxxxxxxxxxxperiod7(vP7  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBcxxza8rbvxxxxxxxxxxperiod8(vP8  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBdxxza9rbvxxxxxxxxxxperiod9(vP9  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBexxzaarbvxxxxxxxxxxperiod10(vP10  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBfxxzabrbvxxxxxxxxxxperiod11(vP11  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBgxxzacrbvxxxxxxxxxxperiod12(vP12  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBhxxzxxrbvxxxxxxxxxxperiodn(vPn  );

                jxxxuq53dxwwqqhxxxxxrollupgroup.setB4xxzbtrbvxxxxxxxxxxperiodtotalsb(bvTotals);
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB5xxzb1rbvxxxxxxxxxxperiod1budget(bvP1);
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB6xxzb2rbvxxxxxxxxxxperiod2b(bvP2  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB7xxzb3rbvxxxxxxxxxxperiod3b(bvP3  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB8xxzb4rbvxxxxxxxxxxperiod4b(bvP4 );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setB9xxzb5rbvxxxxxxxxxxperiod5b(bvP5 );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBaxxzb6rbvxxxxxxxxxxperiod6b(bvP6  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBbxxzb7rbvxxxxxxxxxxperiod7b(bvP7  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBcxxzb8rbvxxxxxxxxxxperiod8b(bvP8  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBdxxzb9rbvxxxxxxxxxxperiod9b(bvP9  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBexxzbarbvxxxxxxxxxxperiod10b(bvP10  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBfxxzbbrbvxxxxxxxxxxperiod11b(bvP11  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBgxxzbcrbvxxxxxxxxxxperiod12b(bvP12  );
                jxxxuq53dxwwqqhxxxxxrollupgroup.setBhxxzcarbvxxxxxxxxxxperiodnb(bvPn  );
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("Recalculation")+" "+bundle.getString("done"),""));

        } 
       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("list")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
           return; 
       }
      




     }


</#if>



	
<#if documentField != "" >

	public String getCleaned(String strHTML) {
         String cleanedHTML = Jsoup.clean(strHTML, Whitelist.none());  
         String text= cleanedHTML.replace("&nbsp;"," "); 
         text= text.replace("&amp;","&"); 
         return text;
        }



     // it seems you cannot call the following get methods directly from clob or blob home, so local method are
     // created , otherwise compile error about calling non static method
    /**
    * The following method gets clobdata and for geeral usage
    * if both a site and SYSTEM records exist, site record is returned 
    * Return value if null will show drop down menu, otherwise the content
    * @param 5 args String table,keyWPrefix,String keyQualifier,int keySequence,int size
    * @return String
    * @exception No Record Exists
    * @see "getClobdata(String theme,String vendor,String table,String keyWPrefix,String keyQualifier,int keySequence,int size) for theme content"
    * 
    */

     public String getClobdata(String table,String keyWPrefix,String keyQualifier,int keySequence,int size) {
           String actualTable=table;
           if(keyWPrefix.length() > 0){
            slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
          String qualifier = keyQualifier;
          int sequence = keySequence;
           try {
               ${clobdataEntityName?cap_first} clobdata=null;
		    List<${clobdataEntityName?cap_first}> results =  entityManager
					.createQuery(
							"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :clobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  ")
					.setParameter("clobdatafromtable", actualTable).setParameter(
							"clobdatafromkey", slobkeyhash).setParameter(
							"clobdataqualifier", qualifier).setParameter(
							"clobdatasequence", sequence).setParameter("owner2", owner2Code).getResultList();
                if(!results.isEmpty()){
                 if ( !results.get(0).getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")) {
                  clobdata= results.get(0);
                 }else{
                  if (results.size() > 1){
                   clobdata= results.get(1);
                  }else{
                   clobdata= results.get(0);
                  }
                 }
                 if(clobdata==null){
                  return null; 
                 }
                }
                else{
                 return null;
                }
                if(clobdata.getB1xxuzaxbvxxxxxxxxxxdata()==null){
                 return null;
                }
                else{
                 int dl=clobdata.getB1xxuzaxbvxxxxxxxxxxdata().length();
                 if (dl > size){
	  return clobdata.getB1xxuzaxbvxxxxxxxxxxdata().substring(0,size);
                 }else {
	  return clobdata.getB1xxuzaxbvxxxxxxxxxxdata();
                 }
                } 
           } catch (NoResultException nre) {
             return null;
          } catch (Exception e) {
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_INFO,bundle.getString("clobdata")+ " "+bundle.getString("unexpcted")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
             return null;
          }
     }

    /**
    * The following method gets clobdata from SYSTEM if qualifier matches theme name 
    * No logic yet to use vendor and clob type hdr
    * Quick check and return null if no SYSTEM record for the key, if key exists then key qualifier part is
    * changed to theme name and searched again. If found String data returned (why two passes?) 
    * @param 7 args String theme,vendor,table,keyWPrefix,String keyQualifier,int keySequence,int size
    * theme comes from session variable value skinBean.previewTh
    * @return byte[] image stream
    * @exception No Record Exists
    * @see "getClobdata(String table,String keyWPrefix,String keyQualifier,int keySequence,int size) for non theme content"
    * 
    */


     public String getClobdata(String theme,String vendor,String table,String keyWPrefix,String keyQualifier,int keySequence,int size) {
           String actualTable=table;
           if(theme.isEmpty()){
            theme="Service-Lan";
           }
           if(vendor.isEmpty()){
            vendor="3R";
           }
           
           if(keyWPrefix.length() > 0){
	     	 slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
		String qualifier = keyQualifier;
		int sequence = keySequence;
                //first check if any system record exists for the key.if txt not hdr then change qualifier to theme
                // and search again 
		try {
                 Yxxxuq1m1xwwqqqxxxxxclobdata clobdata=null;
		    List<Yxxxuq1m1xwwqqqxxxxxclobdata> results =  entityManager
					.createQuery(
							"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier LIKE :clobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :clobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
					.setParameter("clobdatafromtable", actualTable).setParameter(
							"clobdatafromkey", slobkeyhash).setParameter(
							"clobdataqualifier", qualifier).setParameter(
							"clobdatasequence", sequence).setParameter("owner2", "SYSTEM").getResultList();

	} catch (NoResultException nre) {
	return null;
	} catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("text")+ " "+bundle.getString("data")+ " "+bundle.getString("unexpcted")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
	return null;
	}
                // if HDR then dont show anything, may be in future. if TXT show vendor theme if any otherwise null
                // if multiple returns last one, enhance logic to avoid first 10 ?? chrs being same
                if(qualifier.equals("HDR")){
                 return null;
                }
                //qualifier=theme.substring(0,10)+"%"; can have same first 10 
                qualifier=theme;// 
		try {
                 Yxxxuq1m1xwwqqqxxxxxclobdata clobdata=null;
		    List<Yxxxuq1m1xwwqqqxxxxxclobdata> results =  entityManager
					.createQuery(
							"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier LIKE :clobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :clobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
					.setParameter("clobdatafromtable", actualTable).setParameter(
							"clobdatafromkey", slobkeyhash).setParameter(
							"clobdataqualifier", qualifier).setParameter(
							"clobdatasequence", sequence).setParameter("owner2", "SYSTEM").getResultList();
                if(!results.isEmpty()){
                 if ( !results.get(0).getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")) {
                  clobdata= results.get(0);
                 }else{
                  if (results.size() > 1){
                   clobdata= results.get(1);
                  }else{
                   clobdata= results.get(0);
                  }
                 }
                 if(clobdata==null){
                  return null; 
                 }
                }
                else{
                 return null;
                }
                if(clobdata.getB1xxuzaxbvxxxxxxxxxxdata()==null){
                 return null;
                }
                else{
                 int dl=clobdata.getB1xxuzaxbvxxxxxxxxxxdata().length();
                 if (dl > size){
			  return clobdata.getB1xxuzaxbvxxxxxxxxxxdata().substring(0,size);
                 }else {
			  return clobdata.getB1xxuzaxbvxxxxxxxxxxdata();
                 }
                } 
		} catch (NoResultException nre) {
			return null;
		} catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("text")+ " "+bundle.getString("data")+ " "+bundle.getString("unexpcted")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
		   return null;
		}
	}

    /**
    * The following method used by non faces env like servlet or rest and needs set the owner2Code SYSTEM or new site etc
    * @param args String table,keyWPrefix,String keyQualifier,int keySequence,String owner2Code
    * @return byte[] image stream
    * @exception None 
    * @see 
    * 
    */

     public byte[] getBlobdata(String table,String keyWPrefix,String keyQualifier,int keySequence,String owner2Code) {
         this.owner2Code=owner2Code;
         return getBlobdata(table,keyWPrefix,keyQualifier,keySequence); 
        }


    /**
    * The following method gets blobdata from both user for a specific key
    * @param args String table,keyWPrefix,String keyQualifier,int keySequence
    * @return byte[] image stream
    * @exception No Record Exists 
    * @see 
    * 
    */

	public byte[] getBlobdata(String table,String keyWPrefix,String keyQualifier,int keySequence) {
           String actualTable=table;
           if(keyWPrefix.length() > 0){
	     	 slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
		String qualifier = keyQualifier;
		int sequence = keySequence;

		try {
               ${blobdataEntityName?cap_first} blobdata=null;
		    List<${blobdataEntityName?cap_first}> results = entityManager
					.createQuery(
							"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :blobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  ")
					           .setParameter("blobdatafromtable", actualTable).setParameter(
							"blobdatafromkey", slobkeyhash).setParameter(
							"blobdataqualifier", qualifier).setParameter(
							"blobdatasequence", sequence).setParameter("owner2", owner2Code).getResultList();
                if(!results.isEmpty()){
                 if ( !results.get(0).getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")) {
                  return results.get(0).getB1xxuzbxbvxxxxxxxxxxdata();
                 }else{
                  if (results.size() > 1){
                   return results.get(1).getB1xxuzbxbvxxxxxxxxxxdata();
                  }else{
                   return results.get(0).getB1xxuzbxbvxxxxxxxxxxdata();
                  }
                 }
                }else{
                 // use bkgr color richSkin.headerGradientColor if no image supplied , which is default
                  return null; 
                }
         } catch (NoResultException e) {
               return null;
	 } catch (Exception e) {
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("unexpcted")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
               return null;
         }
	}

/**
 get system blobs, harcode qualifier using theme, owner2 as SYSTEM. add vendor matching blob type ??
*/
	public byte[] getBlobdata(String theme,String vendor,String table,String keyWPrefix,String keyQualifier,int keySequence) {
           String actualTable=table;
           if(theme.isEmpty()){
            theme="Service-Lan";
           }
           if(vendor.isEmpty()){
            vendor="3R";
           }
           if(keyWPrefix.length() > 0){
	     	 slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
		String qualifier = keyQualifier;
                //qualifier=theme.substring(0,10)+"%";
                qualifier=theme;

		int sequence = keySequence;

		try {
               ${blobdataEntityName?cap_first} blobdata=null;
		    List<${blobdataEntityName?cap_first}> results = entityManager
					.createQuery(
							"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier LIKE :blobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :blobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  ")
					           .setParameter("blobdatafromtable", actualTable).setParameter(
							"blobdatafromkey", slobkeyhash).setParameter(
							"blobdataqualifier", qualifier).setParameter(
							"blobdatasequence", sequence).setParameter("owner2", "SYSTEM").getResultList();
                if(!results.isEmpty()){
                 if ( !results.get(0).getZzxxu2oxxhxxxxxxxxxxowner2().equals("SYSTEM")) {
                  return results.get(0).getB1xxuzbxbvxxxxxxxxxxdata();
                 }else{
                  if (results.size() > 1){
                   return results.get(1).getB1xxuzbxbvxxxxxxxxxxdata();
                  }else{
                   return results.get(0).getB1xxuzbxbvxxxxxxxxxxdata();
                  }
                 }
                }else{
                 // use bkgr color richSkin.headerGradientColor if no image supplied , which is default
                  return null; 
                }
         } catch (NoResultException e) {
               return null;
	 } catch (Exception e) {
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("unexpcted")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
               return null;
         }
	}


	public String getBlobdataType(String table,String keyWPrefix, String keyQualifier, int keySequence) {
           //  type like jpg etc not formal mime type
           //String table="${entityName?upper_case}";
           String actualTable=table;
           if(keyWPrefix.length() > 0){
	     	 slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
		String qualifier = keyQualifier;
		int sequence = keySequence;

		${blobdataEntityName?cap_first} blobdata;

		try {
			blobdata = (${blobdataEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :blobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("blobdatafromtable", actualTable).setParameter(
							"blobdatafromkey", slobkeyhash).setParameter(
							"blobdataqualifier", qualifier).setParameter(
							"blobdatasequence", sequence).setParameter("owner2", owner2Code).getSingleResult();
			return blobdata.getA4xxexxxbvxxxxxxxxxxtype();
		} catch (NoResultException nre) {
			return null;
		} catch (NonUniqueResultException e) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("${componentName?substring(eL)}")+" "+bundle.getString("key")+" "+slobkeyhash+" "+bundle.getString("error")+" "+e.getMessage(),""));
                 return null;
		}
	}
 
     //jay look into changing the name to just getDataTypeMime as it applies to both clob and blob
	public String getBlobdataTypeMime(String table,String keyWPrefix, String keyQualifier, int keySequence) {
           // mime type
           String mime="x";
           String extension="";
           //String table="${entityName?upper_case}";
           String actualTable=table;
           if(keyWPrefix == null  || keyWPrefix.length() < 2){
            return mime;
           }
           if(keyWPrefix.length() > 0){
	     	 slobkeyhash = keyWPrefix.substring(1);
           }else{
            return null;
           }
		String qualifier = keyQualifier;
		int sequence = keySequence;

		${blobdataEntityName?cap_first} blobdata;

		try {
		    List<${blobdataEntityName?cap_first}> results = entityManager
					.createQuery(
							"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and a3xxexnsbvxxxxxxxxxxsequence = :blobdatasequence and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("blobdatafromtable", actualTable).setParameter(
							"blobdatafromkey", slobkeyhash).setParameter(
							"blobdataqualifier", qualifier).setParameter(
							"blobdatasequence", sequence).setParameter("owner2", owner2Code).getResultList();
                if(!results.isEmpty()){
                 blobdata=results.get(0);
                 extension =blobdata.getA4xxexxxbvxxxxxxxxxxtype();
                }else{
                 return mime;
                } 
			if ("bmp".equals(extension)) {
				mime = "image/bmp";
			} else if ("jpg".equals(extension)) {
				mime = "image/jpeg";
			} else if ("gif".equals(extension)) {
				mime = "image/gif";
			} else if ("png".equals(extension)) {
				mime = "image/png";
			} else if ("xml".equals(extension)) {
				mime = "text/xml";
			} else if ("doc".equals(extension)) {
				mime = "application/msword";
			} else if ("txt".equals(extension)) {
				mime = "text/plain";
			} else if ("txt".equals(extension)) {
				mime = "text/plain";
			} else if ("pdf".equals(extension)) {
				mime = "application/pdf";
			} else if ("xls".equals(extension)) {
				mime = "application/vnd.ms-excel";
			} else if ("ppt".equals(extension)) {
				mime = "application/vnd.ms-powerpoint";
			} else if ("mp3".equals(extension)) {
				mime = "audio/mpeg";
			} else {
				mime = "image/unknown";
			}

			return mime;
		} catch (NoResultException nre) {
			return null;
		}
	}




 public int getSize() {
  <#if menuAttributesp2 == "1N">
   if (this.getFiles().size()>0){
    return this.getFiles().size();
  <#else>
   if (${blobdataEntityName}Home.getFiles().size()>0){
   return ${blobdataEntityName}Home.getFiles().size();
  </#if>
  }else 
  {
   return 0;
  }
 }

 public static String padRight(String s, int n) {
  // s is string, n number of padding 
  //format(String format, Object... args) 
  //%[argument number] [flags] [width] [.precision] type
  return String.format("%1$-" + n + "s", s);
 }
 public static String padLeft(String s, int n) {
    return String.format("%1$" + n + "s", s);  
}

 <#if (messagingCandidate = "Y")>    
	public String getClobTruncateddata(String data,int size) {
            int dl=data.length();
                if (dl > size){
			 return data.substring(0,size);
                }else {
			 return data;
                }

	}
 </#if>

    

  <#if (menuAttributesp2?contains("20") || menuAttributes?contains("30")||menuAttributes?contains("40") ) >
     <#if (menuAttributesp2?contains("20"))>
     public String doGraphCalls(){
           int i=0;
           int j=0;
           int dayToAdd=1;
   
           String caller="Caller";
           long customerCount=0;
           long customerCountDaily=0;
           calendar=Calendar.getInstance();
           calendar.add(Calendar.DATE, dayToAdd);
           calendar.set(Calendar.HOUR_OF_DAY, 9);
           calendar.set(Calendar.MINUTE, 0);
           calendar.set(Calendar.SECOND, 0);
           calendar.set(Calendar.MILLISECOND, 0);
		try {
                //${customerEntityName}List.setMaxResults(1200);
                List<${customerEntityName?cap_first}> listofCustomers=${customerEntityName}List.getResultListMaxSet(1200) ;
                // sort by target once setOrderColumn works
                // i is used to distribute to callers like 1,2,3 if 3 is how many callers again 1,2,3 untill all customers covered
                customerCount= ${customerEntityName}List.getResultCount() ;
                customerCountDaily= howManyCallers*maxCallsPerDay ;

			Iterator<${customerEntityName?cap_first}> itrA = listofCustomers.iterator();
			while (itrA.hasNext()){ 
                  if (i> howManyCallers){
                   i=0;
                   calendar.add(Calendar.MINUTE, 30);
                  }                   
                  i=i+1;
                  if (j>customerCountDaily){
                   //dayToAdd=dayToAdd+1;
                   calendar.add(Calendar.DATE, dayToAdd);
                   j=0;
                  }
                  j=j+1;
			  ${customerEntityName} = itrA.next();
                  if((${customerEntityName}.getP1xxh4pobv27xxxxxxxxphoneo() != null && ${customerEntityName}.getP1xxh4pobv27xxxxxxxxphoneo().isEmpty()) && (${customerEntityName}.getP2xxh5phbv27xxxxxxxxphoneh() !=null && ${customerEntityName}.getP2xxh5phbv27xxxxxxxxphoneh().isEmpty())
                   && (${customerEntityName}.getP3xxhxxxbv27xxxxxxxxphonec() !=null &&${customerEntityName}.getP3xxhxxxbv27xxxxxxxxphonec().isEmpty())){
                   continue;
                  }
                  ${customerEntityName}.setYexxuxxybvxxxxxxxxxxbywho(caller+i);
                  ${customerEntityName}.setYfxxcxxybvxxxxxxxxxxnxtcontact(calendar.getTime());
                  ${customerEntityName}.setYgxxuxxybv30xxxxxxxxvia("call");
                  ${customerEntityName}Home.setInstance(${customerEntityName});
                  ${customerEntityName}Home.allowUpdate();

                }
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("call")+" "+bundle.getString("list")+" "+bundle.getString("created"),""));

                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("click")+" "+bundle.getString("calendar")+" "+bundle.getString("view"),""));
                 bcontinue= true;
             } catch (Exception e) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("call")+" "+bundle.getString("list")+" "+bundle.getString("error")+" "+e.getMessage(),""));

           }
    
      return "";
     
     }
     private Integer maxCallsPerDay=10;
     private Integer howManyCallers=2;
     private String targetBy="D";
     private String overrideCallList="N";
     
     public Integer getMaxCallsPerDay() {
      return maxCallsPerDay;
     }
     public void setMaxCallsPerDay(Integer maxCallsPerDay) { 
      this.maxCallsPerDay = maxCallsPerDay;
     }

     public Integer getHowManyCallers() {
      return howManyCallers;
     }
     public void setHowManyCallers(Integer howManyCallers) { 
      this.howManyCallers = howManyCallers;
     }

     public String getTargetBy() {
      return targetBy;
     }
     public void setTargetBy(String targetBy) { 
      this.targetBy = targetBy;
     }
     public String getOverrideCallList() {
      return overrideCallList;
     }
     public void setOverrideCallList(String overrideCallList) { 
      this.overrideCallList = overrideCallList;
     }

     </#if>

     //String winput="Quick Tray"; using pt:
     String winput="";
	public void setWizardInput(String winput) {
		this.winput = winput;
	}

	public String getWizardInput() {

		return winput;
	}
     //jay remove hardcoding later     
     // the long string nneds to be delimeted by regex [,\\s]+  meaning either comma or white spaces 
     public String parseAndPost(){
      String delims = "[ ,\\s]+";
      String jay="";
      String jayOld="";
      Boolean flSwitch=false;
      int jj=0;
      int tLen=0;
      // depending on input split can produce many tokens ie more than 9
      String[] tokens = new String[20];
      tokens = winput.trim().split(delims);
      tLen=tokens.length;
      if (tLen < 3){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("needs")+ " "+bundle.getString("atleast")+" "+bundle.getString("first")+ " "+bundle.getString("and")+" "+bundle.getString("last")+" "+bundle.getString("name")+" "+bundle.getString("and")+" "+bundle.getString("phone")+" "+bundle.getString("number"),""));
       return "";
      }
      if (tLen > 19){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("too")+ " "+bundle.getString("many")+ " "+bundle.getString("words")+", "+bundle.getString("use")+ " "+bundle.getString("less")+ " "+bundle.getString("than")+ " 20 ",""));
       return "";
      }
      // now analyse the tokens and build target
      // make a few passes like pass 1 to check for digits meaning address or zip code
      // or add logic to check if rd, drive,mews etc after addrl1 , postal code  has space etc and correct
      <#if menuAttributesp2?contains("30")>
       jj=0;
       if(jj >= tLen) return "";
       if(!tokens[0].equals("-")){
        jay=tokens[0].replace("+"," ");
        if(jay.startsWith("/l")){
         flSwitch=true;
         jay=jay.substring(2);
         this.instance.set${vendorLastName?cap_first}(jay);
        }
        else{
         this.instance.set${vendorFirstName?cap_first}(jay);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[1].equals("-")){
        jay=tokens[1].replace("+"," ");
        if(flSwitch){
         this.instance.set${vendorFirstName?cap_first}(jay);
        }
        else{
         this.instance.set${vendorLastName?cap_first}(jay);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[2].equals("-")){
        jay=tokens[2].replace("+"," ");
        this.instance.set${vendorPhoneH?cap_first}(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[3].equals("-")){
        jay=tokens[3].replace("+"," ");
        this.setHouseNo(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[4].equals("-")){
        jay=tokens[4].replace("+"," ");
       }
       this.setAddrL1(this.getHouseNo()+" "+jay);
       jj=5;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        jayOld=jay;
        jay=jay.toLowerCase();
        if(jay.startsWith("rd")||jay.startsWith("road")||jay.startsWith("ave")||jay.startsWith("avenue")||jay.startsWith("blvd")
          ||jay.startsWith("boulevard")||jay.startsWith("mews")||jay.startsWith("st")||jay.startsWith("street")){
          this.setAddrL1(this.getAddrL1()+" "+jayOld);
          jj=jj+1;
          if(jj >= tLen) return "";
          if(!tokens[jj].equals("-")){
           jay=tokens[jj].replace("+"," ");
           this.setCity(jay);
          }
        }
        else{
         this.setCity(jayOld);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setProvstate(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setPzcode(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setCountry(jay);
       }
       return null;
      <#elseif menuAttributesp2?contains("20")> 
       jj=0;
       if(jj >= tLen) return "";
       if(!tokens[0].equals("-")){
        jay=tokens[0].replace("+"," ");
        if(jay.startsWith("/l")){
         flSwitch=true;
         jay=jay.substring(2);
         this.instance.set${customerLastName?cap_first}(jay);
        }
        else{
         this.instance.set${customerFirstName?cap_first}(jay);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[1].equals("-")){
        jay=tokens[1].replace("+"," ");
        if(flSwitch){
         this.instance.set${customerFirstName?cap_first}(jay);
        }
        else{
         this.instance.set${customerLastName?cap_first}(jay);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[2].equals("-")){
        jay=tokens[2].replace("+"," ");
        this.instance.set${customerPhoneH?cap_first}(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[3].equals("-")){
        jay=tokens[3].replace("+"," ");
        this.setHouseNo(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[4].equals("-")){
        jay=tokens[4].replace("+"," ");
       }
       this.setAddrL1(this.getHouseNo()+" "+jay);
       jj=5;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        jayOld=jay;
        jay=jay.toLowerCase();
        if(jay.startsWith("rd")||jay.startsWith("road")||jay.startsWith("ave")||jay.startsWith("avenue")||jay.startsWith("blvd")
          ||jay.startsWith("boulevard")||jay.startsWith("mews")||jay.startsWith("st")||jay.startsWith("street")){
          this.setAddrL1(this.getAddrL1()+" "+jayOld);
          jj=jj+1;
          if(jj >= tLen) return "";
          if(!tokens[jj].equals("-")){
           jay=tokens[jj].replace("+"," ");
           this.setCity(jay);
          }
        }
        else{
         this.setCity(jayOld);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setProvstate(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setPzcode(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setCountry(jay);
       }
       return null;
      <#elseif menuAttributesp2?contains("40")>
       jj=0;
       if(jj >= tLen) return "";
       if(!tokens[0].equals("-")){
        jay=tokens[0].replace("+"," ");
        if(jay.startsWith("/l")){
         flSwitch=true;
         jay=jay.substring(2);
         this.instance.set${employeeLastName?cap_first}(jay);
        }
        else{
         this.instance.set${employeeFirstName?cap_first}(jay);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[1].equals("-")){
        jay=tokens[1].replace("+"," ");
        if(flSwitch){
         this.instance.set${employeeFirstName?cap_first}(jay);
        }
        else{
         this.instance.set${employeeLastName?cap_first}(jay);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[2].equals("-")){
        jay=tokens[2].replace("+"," ");
        this.instance.set${employeePhoneH?cap_first}(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[3].equals("-")){
        jay=tokens[3].replace("+"," ");
        this.setHouseNo(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[4].equals("-")){
        jay=tokens[4].replace("+"," ");
       }
       this.setAddrL1(this.getHouseNo()+" "+jay);
       jj=5;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        jayOld=jay;
        jay=jay.toLowerCase();
        if(jay.startsWith("rd")||jay.startsWith("road")||jay.startsWith("ave")||jay.startsWith("avenue")||jay.startsWith("blvd")
          ||jay.startsWith("boulevard")||jay.startsWith("mews")||jay.startsWith("st")||jay.startsWith("street")){
          this.setAddrL1(this.getAddrL1()+" "+jayOld);
          jj=jj+1;
          if(jj >= tLen) return "";
          if(!tokens[jj].equals("-")){
           jay=tokens[jj].replace("+"," ");
           this.setCity(jay);
          }
        }
        else{
         this.setCity(jayOld);
        }
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setProvstate(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setPzcode(jay);
       }
       jj=jj+1;
       if(jj >= tLen) return "";
       if(!tokens[jj].equals("-")){
        jay=tokens[jj].replace("+"," ");
        this.setCountry(jay);
       }
       return null;
      </#if> 
     }
  </#if>   



 public String clearUploadData() {
   <#if menuAttributesp2 == "1N">
  if(this.getFiles() !=null){
   ${blobdataEntityName}Home.getFiles().clear();
  <#else>
  if(${blobdataEntityName}Home.getFiles() !=null){
   ${blobdataEntityName}Home.getFiles().clear();
   </#if>
   setUploadsAvailable(1);
  }
  return null;
 }

 public long getTimeStamp(){
  return System.currentTimeMillis();
 }


 public int getUploadsAvailable() {
  return uploadsAvailable;
 }

 public void setUploadsAvailable(int uploadsAvailable) {
  this.uploadsAvailable = uploadsAvailable;
 }

 public boolean isAutoUpload() {
 return autoUpload;
 }

 public void setAutoUpload(boolean autoUpload) {
  this.autoUpload = autoUpload;
 }

 public boolean isUseFlash() {
 return useFlash;
 }

 public void setUseFlash(boolean useFlash) {
 this.useFlash = useFlash; 
 }




	public boolean getButtonPressed() {

		if (buttonPressed){
                return true;
           }
		else {
             return false;
          }
     }

     public void setButtonPressed(boolean pressed){
      this.buttonPressed=pressed;
     }


	public String getButtonPressedLabel() {

          return buttonPressedLabel;
     }

     public void setButtonPressedLabel(){
     }

     public String getupLoadPurpose() {

          return upLoadPurpose;
     }

     public void setupLoadPurpose(String upLoadPurpose){
      this.upLoadPurpose=upLoadPurpose;
     }

     public int getuseSeq() {

          return useSeq;
     }

     public void setuseSeq(int useSeq){
      this.useSeq=useSeq;
     }
	public String getdiscountType() {

          return discountType;
     }

     public void setupDiscountType(String discountType){
      this.discountType=discountType;
     }

	public int getUploadsDoneCount() {

          return uploadsDoneCount;
     }

     public void setUploadsDoneCount(){
     }

     public void makeButtonPressed(){
      if (buttonPressedLabel.equals("+ Upload")){
       this.buttonPressed=true;
       this.buttonPressedLabel="- Upload";
      }
      else{
       this.buttonPressed=false;
       this.buttonPressedLabel="+ Upload";
      }
     }

     public void makeButtonPressedPlusB(){
      Integer maxAttach=5;
      makeButtonPressed();
      /**
       used by basketOut,basketOutCast and in mailingSend
      */
      // 3r-attachment records are reused seq 1 to max say 5. if record count = max then get oldest record and update that record
      // if record count is less than max then add a record and set seq to record count+1 
      // since records are reused within a client, we need to change owner to restrict view as needed in case item mgmt
      // but can be ignored for mailing attachment
      // also in jsf render the attachment records    
                 temps=file.getMime();
			 if ("image/bmp".equals(temps)) {
				lobDataType = "bmp";
			 } else if ("image/jpeg".equals(temps)) {
				lobDataType = "jpg";
			 } else if ("image/gif".equals(temps)) {
				lobDataType = "gif";
			 } else if ("image/png".equals(temps)) {
				lobDataType = "png";
			 } else if ("text/xml".equals(temps)) {
				lobDataType = "xml";
			 } else if ("application/msword".equals(temps)) {
				lobDataType = "doc";
			 } else if ("text/plain".equals(temps)) {
				lobDataType = "txt";
			 } else if ("text/html".equals(temps)) {
				lobDataType = "html";
			 } else if ("application/pdf".equals(temps)) {
				lobDataType = "pdf";
			 } else if ("application/vnd.ms-excel".equals(temps)) {
				lobDataType = "xls";
			 } else if ("application/vnd.ms-powerpoint".equals(temps)) {
				lobDataType = "ppt";
			 } else if ("audio/mpeg".equals(temps)) {
				lobDataType = "mp3";
			 } else if ("video/mp4".equals(temps)) {
				lobDataType = "mp4";
			 } else {
				lobDataType = "unkn";
			 }
      if (lobDataType.equals("txt") || lobDataType.equals("xml") || lobDataType.equals("html")) {
       makeButtonPressedPlusC();
       return;
      }       

      if(${blobdataEntityName}List.getAttachCount() == maxAttach){
       ${blobdataEntityName}=${blobdataEntityName}List.getOldest();
       ${blobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(${blobdataEntityName}Home.getFiles().get(0).getName());
       ${blobdataEntityName}.setB1xxuzbxbvxxxxxxxxxxdata(file.getData());
       ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
       ${blobdataEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
       ${blobdataEntityName}Home.setInstance(${blobdataEntityName});
       // ready to persist, use superUpdate
       ${blobdataEntityName}Home.superUpdate();
       clearUploadData();
      }else{
       ${blobdataEntityName}Home.clearInstance();
       ${blobdataEntityName}=${blobdataEntityName}Home.getInstance();
       //already has blobdata and PIC
       ${blobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey("3R-ATTACHMENT-1-C");
       ${blobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence( ${blobdataEntityName}List.getAttachCount()+1);
                <#if menuAttributesp2 == "1N">
       ${blobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(this.getFiles().get(0).getName());
                <#else>
       ${blobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(${blobdataEntityName}Home.getFiles().get(0).getName());
                </#if>
       ${blobdataEntityName}.setB1xxuzbxbvxxxxxxxxxxdata(file.getData());
       ${blobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
       ${blobdataEntityName}Home.persist();
       clearUploadData();
      }
     }
     public void makeButtonPressedPlusC(){
      Integer maxAttach=5;
      makeButtonPressed();
      // 3r-attachment records are reused seq 1 to max say 5. if record count = max then get oldest record and update that record
      // if record count is less than max then add a record and set seq to record count+1 
      // also in jsf render the attachment records    
      if(${clobdataEntityName}List.getAttachCount() == maxAttach){
       ${clobdataEntityName}=${clobdataEntityName}List.getOldest();
                <#if menuAttributesp2 == "1N">
       ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(this.getFiles().get(0).getName());
                <#else>
       ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(${blobdataEntityName}Home.getFiles().get(0).getName());
                </#if>
       ${clobdataEntityName}.setB1xxuzaxbvxxxxxxxxxxdata(new String(file.getData()));
       ${clobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
       ${clobdataEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
       ${clobdataEntityName}Home.update();
       clearUploadData();
      }else{
       ${clobdataEntityName}Home.clearInstance();
       ${clobdataEntityName}=${clobdataEntityName}Home.getInstance();
       //already has clobdata but not qualifier since it could be TXT or HDR
       ${clobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
       ${clobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey("3R-ATTACHMENT-1-C");
       ${clobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(${clobdataEntityName}List.getAttachCount()+1);
                <#if menuAttributesp2 == "1N">
       ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(this.getFiles().get(0).getName());
                <#else>
       ${clobdataEntityName}.setY3xxuxznbvxxxxxxxxxxnotes(${blobdataEntityName}Home.getFiles().get(0).getName());
                </#if>
                   String uploadedText=file.getText();
                   String jay=uploadedText;
                   try{
                    uploadedText=this.sanitize(uploadedText);//
                    uploadedText=jay;
                   } catch ( Exception e){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_INFO," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
                    return;
                   }
                   ${clobdataEntityName}.set${clobdataentityDataFieldName?cap_first}(uploadedText);

       ${clobdataEntityName}.setA4xxexxxbvxxxxxxxxxxtype(lobDataType);
       ${clobdataEntityName}Home.persist();
       clearUploadData();
      }
     }



</#if>

 public String sanitizeApply(String unsafe) throws IOException{
         String safe = Jsoup.clean(unsafe, Whitelist.relaxed().addTags("iframe").addAttributes("p", "style"));
         return unsafe;

 }

    /**
    * The following method sanitizes ie drops unwanted html tags to reduce xss attack 
    * called by xxxlist.send (email)  and clobdataEdit and theme pages etc
    * @param args unsafe data entered by untrusted user 
    * @return safe string
    * @exception IOException
    * @see 
    *  use sanitize wherever clbdata is used or in future used 
    *  default is is ignore sanitize but added a new method sanitizeApply
    */  

 public String sanitize(String unsafe) throws IOException{
         //String safe = Jsoup.clean(unsafe, Whitelist.relaxed().addTags("iframe").addAttributes("p", "style"));
         return unsafe;

 }

/*      addTags for tag, addAttributes for attribute within a specific tag only
	.addTags("meta", "title", "script", "iframe")
	.addAttributes("meta", "charset")
	.addAttributes("iframe", "src")
	.addProtocols("iframe", "src", "http", "https");
*/

<#if (messagingCandidate = "Y") && (clobDataClass =="Y")>    

	public String getStartk1() {
		return startk1;
	}

	public void setStartk1(String startk1) {
		this.startk1 = startk1;
	}

	public String getEndk1() {
		return endk1;
	}

	public void setEndk1(String endk1) {
		this.endk1 = endk1;
	}

	public String getStartk2() {
		return startk2;
	}

	public void setStartk2(String startk2) {
		this.startk2 = startk2;
	}

	public String getEndk2() {
		return endk2;
	}

	public void setEndk2(String endk2) {
		this.endk2 = endk2;
	}
	public String getStartk3() {
		return startk3;
	}

	public void setStartk3(String startk3) {
		this.startk3 = startk3;
	}

	public String getEndk3() {
		return endk3;
	}

	public void setEndk3(String endk3) {
		this.endk3 = endk3;
	}

	public void submitRequest(List<String> listofKeys) {
      String table = "${entityName?upper_case}";
	 String dockey = "";
	 String qualifier = "REQUEST";
      
      try {
       Iterator<String> itr = listofKeys.iterator();
        while(itr.hasNext()){
         dockey=itr.next();
	    submitEachRequest(table,dockey,qualifier);
        }
  	 } catch (Exception e) {
			log.severe("jmssend keys iterator error " + e.getMessage());
	 }
     }


	public void submitEachRequest(String table,String key,String qualifier) {
    
		 ${clobdataEntityName?cap_first} clobdata;
            boolean baseReplyExists=true;
            boolean replyExists=true;

		try {
			log.info("jmssend entry");
			try {
				clobdata = (${clobdataEntityName?cap_first}) entityManager
						.createQuery(
                  <#if keyAutoGen == "Y" >
								"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier ")
                  <#else>
								"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier ")
                  </#if>                
						.setParameter("clobdatafromtable", table).setParameter(
								"clobdatafromkey", key).setParameter(
								"clobdataqualifier", qualifier)
						.getSingleResult();
				msg = clobdata.getB1xxuzaxbvxxxxxxxxxxdata();
			} catch (NoResultException nre) {
				bcontinue=false;
				throw new ValidatorException(new FacesMessage(
						qualifier+" data Does not exist" + nre.getMessage()));
			}
			try {
				clobdata = (${clobdataEntityName?cap_first}) entityManager
				.createQuery(
                  <#if keyAutoGen == "Y" >
						"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier ")
                  <#else>
						"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier ")
                  </#if>
				.setParameter("clobdatafromtable", table).setParameter(
						"clobdatafromkey", key).setParameter(
						"clobdataqualifier", qualifier+"REPLY")
				.getSingleResult();
                        replyExists=true;
				bcontinue=true;
//				bcontinue=false;
//				throw new ValidatorException(new FacesMessage(
//						qualifier+" REPLY data already exists-delete it first or set as update  " ));

			} catch (NoResultException nre) {
				bcontinue=true;
                        replyExists=false;
			}
			try {
				clobdata = (${clobdataEntityName?cap_first}) entityManager
				.createQuery(
                  <#if keyAutoGen == "Y" >
						"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and id.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier ")
                  <#else>
						"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:clobdatafromkey and cc.a2xxuxxxbv50xxxxxxxxqualifier=:clobdataqualifier ")
                  </#if>
				.setParameter("clobdatafromtable", table).setParameter(
						"clobdatafromkey", key).setParameter(
						"clobdataqualifier", qualifier+"BASEREPLY")
				.getSingleResult();
				msgb = clobdata.getB1xxuzaxbvxxxxxxxxxxdata();
                        baseReplyExists=true;
			} catch (NoResultException nre) {
				bcontinue=true;
                        baseReplyExists=false;

//				throw new ValidatorException(new FacesMessage(
//						qualifier+" BASEREPLY data Does not exist" + nre.getMessage()));
			}
                  if (!bcontinue){
            	 return;
                  }
			msgb = clobdata.getB1xxuzaxbvxxxxxxxxxxdata();

    		      ${clobdataEntityName?cap_first} clobdata2 = new ${clobdataEntityName?cap_first}(); 
			this.setInstance(clobdata2);


			//			 String msg = "<?xml version='1.0' encoding='UTF-8'?><Envelope envelopeId='EMI' majorVersion='1' minorVersion='3'><Header><TransactionBlk actor='NEXT' majorVersion='1' minorVersion='2' mustUnderstand='1' name='StdTransBlk'><OriginatorNm>JAYTEST</OriginatorNm><ServiceNm>GetARAccount</ServiceNm><SrvcMajVersionNbr>1</SrvcMajVersionNbr><SrvcMinVersionNbr>1</SrvcMinVersionNbr><MsgPatternTypeCd>RR</MsgPatternTypeCd><MsgTypeCd>I</MsgTypeCd><MsgNm>GetARAccountRequest</MsgNm></TransactionBlk><SecurityBlk actor='NEXT' majorVersion='1' minorVersion='1' mustUnderstand='1' name='StdSecurityBlk'><SAMLBlk><Assertion AssertionID='' IssueInstant='dateTime' Issuer='urn:aexp.com:applName' MajorVersion='1' MinorVersion='0'><AttributeStatement><Subject><NameIdentifier Format='urn.aexp.com:security:RACF' NameQualifier='urn:aexp.com:security'>XA3721A</NameIdentifier></Subject><Attribute AttributeName='' AttributeNamespace=''><AttributeValue/></Attribute></AttributeStatement></Assertion></SAMLBlk></SecurityBlk></Header><Body><Request><Identifier><CardNbr>376063452291002</CardNbr></Identifier><OptionParameters><EchoInd>Y</EchoInd><AddrFmtInd>Y</AddrFmtInd></OptionParameters><FilterParameters><MktCd>MEX</MktCd><CardInfoGrpReqInd>A</CardInfoGrpReqInd></FilterParameters></Request></Body></Envelope>";
			String qcfLookup = "java:MyConnectionFactory";
			String qLookup = "queue/MyQueue";
			String rqLookup = "queue/MyReplyQueue";
			String messageID = null;
			InitialContext ic = new InitialContext();

			ConnectionFactory cf = (ConnectionFactory) ic.lookup(qcfLookup);
			Destination d;
			d = (Destination) ic.lookup(qLookup);
			Destination rd;
			rd = (Destination) ic.lookup(rqLookup);
			Connection c;
			c = cf.createConnection("NB8805A", " ");
			c.start();
			Session s = c.createSession(false, 1);
			MessageProducer pr = s.createProducer(d);
			javax.jms.Message m = s.createTextMessage(msg);
			m.setStringProperty("JMSXUserID", "NB8805A");
			log.info("about to jmssend " + msg);
			m.setStringProperty("JMS_IBM_MQMD_UserIdentifier", "NB8805A");
			m.setJMSReplyTo(rd);
			m.setJMSTimestamp(System.currentTimeMillis());
			log.info("getJMSTimestamp >>>>. " + m.getJMSTimestamp());

			pr.send(m);
			messageID = m.getJMSMessageID();
			String selector = "JMSCorrelationID = '" + messageID + "'";
			MessageConsumer co = s.createConsumer(rd, selector);
			TextMessage mr = (TextMessage) co.receive(1000L);
			log.info("getText >>>>. " + mr.getText());
			log.info("getJMSTimestamp >>>>. " + mr.getJMSTimestamp());
                  <#if keyAutoGen == "Y" >
			//this.instance.setA0xxukcdlvxxxxxxxxxxfromtable(table);
			//this.instance.setA1xxuxxxbv49xxxxxxxxfromkey(key);
			//this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"REPLY");
                  <#else>
			this.get${clobdataEntityName?cap_first}Id().setA0xxukcdlvxxxxxxxxxxfromtable(table);
			this.get${clobdataEntityName?cap_first}Id().setA1xxuxxxbv49xxxxxxxxfromkey(key);
			this.get${clobdataEntityName?cap_first}Id().setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"REPLY");
			this.instance.setId(get${clobdataEntityName?cap_first}Id());
                  </#if>
                  this.instance.setB1xxuzaxbvxxxxxxxxxxdata(mr.getText());
                  if (replyExists){
                   update();
                  }
                  else {  
                   persist();
                  }
                  if (!baseReplyExists){
                  <#if keyAutoGen == "Y" >
			 this.instance.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"BASEREPLY");
                  <#else>
			 this.get${clobdataEntityName?cap_first}Id().setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"BASEREPLY");
                  </#if> 
                   persist();
                  }
 			this.compareXmls(msgb, mr.getText());
			pr.close();
			co.close();
			s.close();
			c.close();
		} catch (Exception e) {
			log.severe("jmssend error " + e.getMessage());
		}
	}
	public void compareXmls(String msgc,String msg2) {

		try {
			Diff diff = new Diff(msgc, msg2);
                  log.info("Similar? "+diff.similar());
                  log.info("Identical? "+diff.identical());

			DetailedDiff detDiff = new DetailedDiff(diff);
                  log.info("Detailed Difference, if any");
			List differences = detDiff.getAllDifferences();
			for (Object object : differences) {
				Difference difference = (Difference)object;
                        log.info(difference);
			}

		} catch (SAXException e) {
			log.severe("SAX error " + e.getMessage());
		} catch (IOException e) {
			log.severe("IO error " + e.getMessage());
		}
	}


</#if>

<#if (messagingCandidate = "Y") && (blobDataClass =="Y")>    

	public String getStartk1() {
		return startk1;
	}

	public void setStartk1(String startk1) {
		this.startk1 = startk1;
	}

	public String getEndk1() {
		return endk1;
	}

	public void setEndk1(String endk1) {
		this.endk1 = endk1;
	}

	public String getStartk2() {
		return startk2;
	}

	public void setStartk2(String startk2) {
		this.startk2 = startk2;
	}

	public String getEndk2() {
		return endk2;
	}

	public void setEndk2(String endk2) {
		this.endk2 = endk2;
	}
	public String getStartk3() {
		return startk3;
	}

	public void setStartk3(String startk3) {
		this.startk3 = startk3;
	}

	public String getEndk3() {
		return endk3;
	}

	public void setEndk3(String endk3) {
		this.endk3 = endk3;
	}
     // jay needs change to cater for non xml non text data 
	public void submitRequest(List<String> listofKeys) {
      String table = "${entityName?upper_case}";
	 String dockey = "";
	 String qualifier = "REQUEST";
      
      try {
       Iterator<String> itr = listofKeys.iterator();
        while(itr.hasNext()){
         dockey=itr.next();
	    submitEachRequest(table,dockey,qualifier);
        }
  	 } catch (Exception e) {
			log.severe("jmssend keys iterator error " + e.getMessage());
	 }
     }


	public void submitEachRequest(String table,String key,String qualifier) {
    
		 ${blobdataEntityName?cap_first} blobdata;
            boolean baseReplyExists=true;
            boolean replyExists=true;

		try {
			log.info("jmssend entry");
			try {
				blobdata = (${blobdataEntityName?cap_first}) entityManager
						.createQuery(
								"select cc from ${blobdataEntityName?cap_first} cc where cc.id.a0xxukcdlvxxxxxxxxxxfromtable=:blobdatafromtable and id.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and id.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier ")
						.setParameter("blobdatafromtable", table).setParameter(
								"blobdatafromkey", key).setParameter(
								"blobdataqualifier", qualifier)
						.getSingleResult();
			 bmsg = blobdata.getB1xxuzbxbvxxxxxxxxxxdata();
			} catch (NoResultException nre) {
				bcontinue=false;
				throw new ValidatorException(new FacesMessage(
						qualifier+" data Does not exist" + nre.getMessage()));
			}
			try {
				blobdata = (${blobdataEntityName?cap_first}) entityManager
				.createQuery(
						"select cc from ${blobdataEntityName?cap_first} cc where cc.id.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and id.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and id.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier ")
				.setParameter("blobdatafromtable", table).setParameter(
						"blobdatafromkey", key).setParameter(
						"blobdataqualifier", qualifier+"REPLY")
				.getSingleResult();
                        replyExists=true;
				bcontinue=true;
//				bcontinue=false;
//				throw new ValidatorException(new FacesMessage(
//						qualifier+" REPLY data already exists-delete it first or set as update  " ));

			} catch (NoResultException nre) {
				bcontinue=true;
                        replyExists=false;
			}
			try {
				blobdata = (${blobdataEntityName?cap_first}) entityManager
				.createQuery(
						"select cc from ${blobdataEntityName?cap_first} cc where cc.id.a0xxukcdlvxxxxxxxxxxfromtable=:blobdatafromtable and id.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and id.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier ")
				.setParameter("blobdatafromtable", table).setParameter(
						"blobdatafromkey", key).setParameter(
						"blobdataqualifier", qualifier+"BASEREPLY")
				.getSingleResult();
			      bmsgb = blobdata.getB1xxuzbxbvxxxxxxxxxxdata();
                        baseReplyExists=true;
			} catch (NoResultException nre) {
				bcontinue=true;
                        baseReplyExists=false;

//				throw new ValidatorException(new FacesMessage(
//						qualifier+" BASEREPLY data Does not exist" + nre.getMessage()));
			}
                  if (!bcontinue){
            	 return;
                  }
			 bmsgb = blobdata.getB1xxuzbxbvxxxxxxxxxxdata();

    		      ${blobdataEntityName?cap_first} blobdata2 = new ${blobdataEntityName?cap_first}(); 
			this.setInstance(blobdata2);


			//			 String msg = "<?xml version='1.0' encoding='UTF-8'?><Envelope envelopeId='EMI' majorVersion='1' minorVersion='3'><Header><TransactionBlk actor='NEXT' majorVersion='1' minorVersion='2' mustUnderstand='1' name='StdTransBlk'><OriginatorNm>JAYTEST</OriginatorNm><ServiceNm>GetARAccount</ServiceNm><SrvcMajVersionNbr>1</SrvcMajVersionNbr><SrvcMinVersionNbr>1</SrvcMinVersionNbr><MsgPatternTypeCd>RR</MsgPatternTypeCd><MsgTypeCd>I</MsgTypeCd><MsgNm>GetARAccountRequest</MsgNm></TransactionBlk><SecurityBlk actor='NEXT' majorVersion='1' minorVersion='1' mustUnderstand='1' name='StdSecurityBlk'><SAMLBlk><Assertion AssertionID='' IssueInstant='dateTime' Issuer='urn:aexp.com:applName' MajorVersion='1' MinorVersion='0'><AttributeStatement><Subject><NameIdentifier Format='urn.aexp.com:security:RACF' NameQualifier='urn:aexp.com:security'>XA3721A</NameIdentifier></Subject><Attribute AttributeName='' AttributeNamespace=''><AttributeValue/></Attribute></AttributeStatement></Assertion></SAMLBlk></SecurityBlk></Header><Body><Request><Identifier><CardNbr>376063452291002</CardNbr></Identifier><OptionParameters><EchoInd>Y</EchoInd><AddrFmtInd>Y</AddrFmtInd></OptionParameters><FilterParameters><MktCd>MEX</MktCd><CardInfoGrpReqInd>A</CardInfoGrpReqInd></FilterParameters></Request></Body></Envelope>";
			String qcfLookup = "java:MyConnectionFactory";
			String qLookup = "queue/MyQueue";
			String rqLookup = "queue/MyReplyQueue";
			String messageID = null;
			InitialContext ic = new InitialContext();

			ConnectionFactory cf = (ConnectionFactory) ic.lookup(qcfLookup);
			Destination d;
			d = (Destination) ic.lookup(qLookup);
			Destination rd;
			rd = (Destination) ic.lookup(rqLookup);
			Connection c;
			c = cf.createConnection("NB8805A", " ");
			c.start();
			Session s = c.createSession(false, 1);
			MessageProducer pr = s.createProducer(d);
			javax.jms.Message m = s.createTextMessage(msg);
			m.setStringProperty("JMSXUserID", "NB8805A");
			log.info("about to jmssend " + msg);
			m.setStringProperty("JMS_IBM_MQMD_UserIdentifier", "NB8805A");
			m.setJMSReplyTo(rd);
			m.setJMSTimestamp(System.currentTimeMillis());
			log.info("getJMSTimestamp >>>>. " + m.getJMSTimestamp());

			pr.send(m);
			messageID = m.getJMSMessageID();
			String selector = "JMSCorrelationID = '" + messageID + "'";
			MessageConsumer co = s.createConsumer(rd, selector);
			TextMessage mr = (TextMessage) co.receive(1000L);
			log.info("getText >>>>. " + mr.getText());
			log.info("getJMSTimestamp >>>>. " + mr.getJMSTimestamp());
                  <#if keyAutoGen == "Y" >
			//this.setA0xxukbdlvxxxxxxxxxxfromtable(table);
			//this.setA1xxuxxxbv49xxxxxxxxfromkey(key);
			//this.setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"REPLY");
                  <#else>
			this.get${blobdataEntityName?cap_first}Id().setA0xxukbdlvxxxxxxxxxxfromtable(table);
			this.get${blobdataEntityName?cap_first}Id().setA1xxuxxxbv49xxxxxxxxfromkey(key);
			this.get${blobdataEntityName?cap_first}Id().setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"REPLY");
			this.instance.setId(get${blobdataEntityName?cap_first}Id());
                   </#if>
                  //jay fix it this.instance.setB1xxuzbxbvxxxxxxxxxxdata(mr.getText());
                  if (replyExists){
                   update();
                  }
                  else {  
                   persist();
                  }
                  if (!baseReplyExists){
                  <#if keyAutoGen == "Y" >
			 //this.get${blobdataEntityName?cap_first}Id().setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"BASEREPLY");
                  <#else>
			 this.get${blobdataEntityName?cap_first}Id().setA2xxuxxxbv50xxxxxxxxqualifier(qualifier+"BASEREPLY");
                  </#if> 
                   persist();
                  }
 			this.compareXmls(msgb, mr.getText());
			pr.close();
			co.close();
			s.close();
			c.close();
		} catch (Exception e) {
			log.severe("jmssend error " + e.getMessage());
		}
	}


	public void compareXmls(String msgc,String msg2) {

		try {
			Diff diff = new Diff(msgc, msg2);
                  log.info("Similar? "+diff.similar());
                  log.info("Identical? "+diff.identical());

			DetailedDiff detDiff = new DetailedDiff(diff);
                  log.info("Detailed Difference, if any");
			List differences = detDiff.getAllDifferences();
			for (Object object : differences) {
				Difference difference = (Difference)object;
                        log.info(difference);
			}

		} catch (SAXException e) {
			log.severe("SAX error " + e.getMessage());
		} catch (IOException e) {
			log.severe("IO error " + e.getMessage());
		}
	}


</#if>
     // generate 
     <#if (componentName=="nxxxiha1rgenapp")>   
     // create/alter generate propeties file build-xxx-gen.properties like build-r3gen.properties first 
     // it needs to check if db is defined and whether tables are defined and then create tables 
     // if tables are created it will create reverse eng file and then run ant for build like 
     // build-r3model.xml for model src and build-r3ui.xml for views,action, ,list and finally\
     // ear file.
      public void genApp() {
           //pass/override properties to build-r3model-injava.xml and run ant script to
           // create/delete project for the new App, generate model,action and views if db,tables exist ie check/set status fl
           // export/deploy/unexport/undeploy if ear/war exist
           // allow down loading ear/war for later deploy in another server 
           java.io.File buildFile = new java.io.File("..\\server\\default\\deploy\\genapp.ear\\genapp.war\\WEB-INF\\classes\\build-r3model-injava.xml");
           Project p = new Project();
           p.setUserProperty("ant.file", buildFile.getAbsolutePath());
           p.setProperty("r3deploy.dir","WEB-INF/r3deploy");
           p.setProperty("sql.url","jdbc:hsqldb:hsql://localhost:1701");
           p.setProperty("sql.pass","");
           p.setProperty("sql.user","sa");
           p.setProperty("project.name","genapp");
           p.init();
           ProjectHelper helper = ProjectHelper.getProjectHelper();
           p.addReference("ant.projectHelper", helper);
           helper.parse(p, buildFile);
           p.executeTarget("generate");
           p.executeTarget("explode");
      }
     </#if>
     <#if (componentName=="nxxxiha2rgendb")>   
      public void genDb() {
           String dbname="";
           java.io.File buildFile = new java.io.File("..\\server\\default\\deploy\\genapp.ear\\genapp.war\\WEB-INF\\classes\\gendb-injava-build.xml");
		try {
                List<${componentName?cap_first}> listofStatus=${componentName}List.getResultList() ;
			Iterator<${componentName?cap_first}> itr = listofStatus.iterator();
			while (itr.hasNext()) {
			  ${componentName}li = itr.next();
                  int mstatusfl=${componentName}li.get${statusFlagField?cap_first}(); 
                  if ( !isBitSet(mstatusfl, _mactive) ){
                  // jay check logic below used to be fieldsli
            <#if keyAutoGen == "Y" >
                   dbname=${componentName}li.getA0xxukxxbvxxxxxxxxxxdbname();
            <#else>
                   dbname=${componentName}li.getId().getA0xxukxxbvxxxxxxxxxxdbname();
            </#if>
                   // Verify db definitions ok , add/update db related properties to file to build-xxx-gen.properties 
                   // run create db(schema) sql script
		        int jay=dbname.length();
		        if (jay > 0) {
                    try {
                     Project p = new Project();
                     p.setUserProperty("ant.file", buildFile.getAbsolutePath());
                     p.setProperty("r3deploy.dir","WEB-INF/r3deploy");
                     p.setProperty("sql.url","jdbc:hsqldb:hsql://localhost:1701");
                     p.setProperty("sql.pass","");
                     p.setProperty("sql.user","sa");
                     p.setProperty("sql.user","sa");
                     p.setProperty("sql.dbname",dbname);
                     p.init();
                     ProjectHelper helper = ProjectHelper.getProjectHelper();
                     p.addReference("ant.projectHelper", helper);
                     helper.parse(p, buildFile);
                     p.executeTarget(p.getDefaultTarget());
                     ${componentName}li.set${statusFlagField?cap_first}(${componentName}li.get${statusFlagField?cap_first}()|mactive);
       	         }catch (Exception e) {
		           log.severe("nxxxiha2rgendb" + " build execution error "
						+ e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("gendb")+" "+bundle.getString("error")+" "+e.getMessage(),""));
		         }	
                   }
                  }
			}
		} catch (Exception e) {
			log.severe("${componentName}"+" status field iterator error " + e.getMessage());
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("gendb")+" "+bundle.getString("status")+" "+" "+bundle.getString("check")+" "+bundle.getString("error")+" "+bundle.getString("cause")+" "+e.getMessage(),""));

		}
 
      }
     </#if>
<#if menuAttributesp2 == "62" >
  // there is logic in authenticator not to roll business day 
  public void holdCurrBusDate(){
   getAcperiodFieldValue("cp");

   acperiod.set${statusFlagField?cap_first}(acperiod
						.get${statusFlagField?cap_first}()
						| mconsign);
  }
  public void removeHoldCurrBusDate(){
   getAcperiodFieldValue("cp");
   acperiod.set${statusFlagField?cap_first}(acperiod
						.get${statusFlagField?cap_first}()
						& _mconsign);
  }
</#if>

<#if (userHomeCandidate = "Y")>   
	public boolean getForgotPasswordError() {
		return hasErrorMessage(FacesContext.getCurrentInstance(),
				"resetLostPassword");
	}

	public boolean getRegisterError() {
		return hasErrorMessage(FacesContext.getCurrentInstance(),
				"registerForm:");
	}


	public boolean getSignupError() {
		return hasErrorMessage(FacesContext.getCurrentInstance(),
				"signupForm:");
	}


	public boolean getDemoSignupError() {
		return hasErrorMessage(FacesContext.getCurrentInstance(),
				"demosignupForm:");
	}

	public boolean getChangePasswordError() {
		return hasErrorMessage(FacesContext.getCurrentInstance(),
				"changePWCommand");
	}

	public String getLostPasswordUserId() {
		return lostPasswordUserId;
	}

	public void setLostPasswordUserId(String value) {
		this.lostPasswordUserId = value;
	}

	public String getLostPasswordEmail() {
		return lostPasswordEmail;
	}

	public void setLostPasswordEmail(String value) {
		this.lostPasswordEmail = value;
	}

	public String getLoginUserId() {
		return loginUserId;
	}

	public void setLoginUserId(String loginUserId) {
		this.loginUserId = loginUserId;
	}

	public String getRecoveredPasswordEmail() {
		return this.recoveredPasswordEmail;
	}

	public void setRecoveredPasswordEmail(String value) {
		this.recoveredPasswordEmail = value;
	}

	public String getResetPassword() {
		return this.resetPassword;
	}

	public void setResetPassword(String value) {
		this.resetPassword = value;
	}

	public String getSignupas() {
		return signupas;
	}

	public void setSignupas(String signupas) {
		this.signupas = signupas;
	}

	public String getA0xxukuxbvxxxxxxxxxxid2() {
		return a0xxukuxbvxxxxxxxxxxid2;
	}

	public void setA0xxukuxbvxxxxxxxxxxid2(String a0xxukuxbvxxxxxxxxxxid2) {
		this.a0xxukuxbvxxxxxxxxxxid2 = a0xxukuxbvxxxxxxxxxxid2;
	}
	public String getC4xxuxupivxxxxxxxxxxcurrpw2() {
		return      c4xxuxupivxxxxxxxxxxcurrpw2;
	}

	public void setC4xxuxupivxxxxxxxxxxcurrpw2(String c4xxuxupivxxxxxxxxxxcurrpw2) {
		this.c4xxuxupivxxxxxxxxxxcurrpw2 = c4xxuxupivxxxxxxxxxxcurrpw2;
	}

	public boolean getAgreedToTermsOfUse() {
		return agreedToTermsOfUse;
	}

	public void setAgreedToTermsOfUse(boolean agreedToTermsOfUse) {
		this.agreedToTermsOfUse = agreedToTermsOfUse;
	}

	public boolean getAgreedToTermsOfUsefb() {
		return agreedToTermsOfUsefb;
	}

	public void setAgreedToTermsOfUsefb(boolean agreedToTermsOfUse) {
		this.agreedToTermsOfUsefb = agreedToTermsOfUse;
	}

	public String getClientEmail() {
		return this.clientEmail;
	}

	public void setClientEmail(String value) {
		this.clientEmail = value;
	}

	public String getClientName() {
		return this.clientName;
	}

	public void setClientName(String value) {
		this.clientName = value;
	}

	public String getCompanyName() {
		return this.companyName;
	}

	public void setCompanyName(String value) {
		this.companyName = value;
	}
	public String getClientApplicationFunction() {
		return this.clientApplicationFunction;
	}

	public void setClientApplicationFunction(String value) {
		this.clientApplicationFunction = value;
                if(value !=null && !value.isEmpty()){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("Site")+ " "+bundle.getString("Usage")+ " "+value+" "+bundle.getString("was")+" "+bundle.getString("selected"),""));
                }
	}


	public String getClientApplicationSize() {
		return this.clientApplicationSize;
	}

	public void setClientApplicationSize(String value) {
		this.clientApplicationSize = value;
                if(value !=null && !value.isEmpty()){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("Backoffice")+ " "+bundle.getString("size")+ " "+value+" "+bundle.getString("was")+" "+bundle.getString("selected"),""));
                }

	}


	public String getClientApplicationSubFunction() {
		return this.clientApplicationSubFunction;
	}

	public void setClientApplicationSubFunction(String value) {
		this.clientApplicationSubFunction = value;
	}

	public String getClientApplicationName() {
		return this.clientApplicationName;
	}

        public void setClientApplicationName(String value) {
         //replace multiple spaces into one space and get rid of typical extra stuff
         String jay=value.replaceAll(" +", ""); 
         String jay0=jay;
         //warn http or .com present and strip them off
         jay=jay.toLowerCase();
         jay=jay.replaceAll("'","");
         jay=jay.replaceAll("http://","");
         jay=jay.replaceAll("https://","");
         jay=jay.replaceAll("www\\.","");
         jay=jay.replaceAll("\\.com","");
         if(!jay.equals(jay0)){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("name")+ " "+bundle.getString("revised")+ " "+bundle.getString("from")+" "+jay0+" "+bundle.getString("to")+ " "+jay,""));
         }
         this.clientApplicationName = jay;
         if(urlName.contains(customIdentity.getMasterSiteCode())){
          this.setClientFullUrlName(this.clientApplicationName+"."+customIdentity.getMasterSiteUrl());
         }
       }

      public String getClientUrlName() {
         //not used 
       return this.clientUrlName;
      }
     public void setClientUrlName(String value) {
      this.clientUrlName = value;
     }

       public String getClientFullUrlName() {
          // change clientFullUrlName as well to be in sync
         if(clientFullUrlName != null && clientFullUrlName.isEmpty()){
         if(urlName.contains(customIdentity.getMasterSiteCode())){
          this.setClientFullUrlName(this.clientApplicationName+"."+customIdentity.getMasterSiteCode());
         }
         // this.setClientFullUrlName(this.clientApplicationName+"."+urlName); is it same as above? compare??
         }else{
          //if fullUrlName has value dont change it to default
         }
         return this.clientFullUrlName;
       }

	public void setClientFullUrlName(String value) {
		this.clientFullUrlName = value;
	}

	public String getClientSerialNum() {
		return this.clientSerialNum;
	}

	public void setClientSerialNum(String value) {
		this.clientSerialNum = value;
	}

	public Integer getClientExpiryDays() {
           if (this.clientExpiryDays==0){
            calendar.setTime(Calendar.getInstance().getTime());
            calendar.add(Calendar.DAY_OF_YEAR, 30);
            //calendare.setTime(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());
            //this.clientExpiryDays=( (calendare.getTime() - calendar.getTime() ) / (1000 * 60 * 60 * 24));
           }
		return this.clientExpiryDays;
	}

	public void setClientExpiryDays(Integer value) {
		this.clientExpiryDays = value;
	}
    //Admin site myflowp/raaspi url port may be 80 or 8080
    public String getNewUserLink() {
        return newUserLink;
    }
  
    public void setNewUserLink(String newUserLink) {
        this.newUserLink = newUserLink;
    }
    //client url port should be same as in Admin site ie userLink
    public String getNewUserLink2() {
        return newUserLink2;
    }

    public void setNewUserLink2(String newUserLink2) {
        this.newUserLink2 = newUserLink2;
    }

    public boolean isMobileO() {
        if(userAgentStrO !=null && userAgentStrO.contains("Mobi")){
         if(userAgentStrO.contains("iPad") && !urlName.contains("cartPOS.")){
          return false;
         }
         return true ;  
        }else{
         return false;
        }
    }

    public String getUserAgentStr() {
        return userAgentStr;
    }

    public void setUserAgentStr(String userAgentStr) {
        this.userAgentStr = userAgentStr;
        customIdentity.setMobileView(userAgentStr);

    }
    public boolean isMobile() {  
        //change to mobi
        
        if(userAgentStr !=null && userAgentStr.contains("Mobi")){
         if(userAgentStr.contains("iPad") && !urlName.contains("cartPOS.")){
          return false;
         }
         return true ;  
        }else{
         return false;
        }
    }  

	protected String getMD5Hash(final String msg) {
		try {
			MessageDigest md5 = MessageDigest.getInstance("MD5");
			md5.reset();
			return new String(Hex.encodeHex(md5.digest(msg.getBytes("UTF-8"))));
		} catch (Exception exc) {
			throw new RuntimeException(exc);
		}
	}

	public static final boolean hasErrorMessage(FacesContext jsf, String msgPfx) {
		boolean hasErrorMessage = false;
		FacesMessage.Severity maxSeverity = jsf.getMaximumSeverity();
		if (maxSeverity != null
				&& maxSeverity.getOrdinal() >= FacesMessage.SEVERITY_ERROR
						.getOrdinal()) {
			java.util.Iterator<String> clientIdIter = jsf
					.getClientIdsWithMessages();
			if (clientIdIter != null) {
				while (clientIdIter.hasNext()) {
					String nextClientId = clientIdIter.next();
					if (nextClientId != null
							&& (nextClientId.startsWith(msgPfx) || nextClientId
									.equals(msgPfx))) {
						hasErrorMessage = true;
						break;
					}
				}
			}
		}
		return hasErrorMessage;
	}

	@Transactional
	public void doRecoverLostPassword() {
		if (lostPasswordUserId == null )
		 return;
		this.recoveredPasswordEmail = null;
		this.resetPassword = null;

		${userEntityName?cap_first} theUser  = new ${userEntityName?cap_first}();

		try {
			theUser = (${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("username", lostPasswordUserId).setParameter(
							"owner2", owner2Code).getSingleResult();

		} catch (NoResultException ex) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("login") +" "+bundle.getString("user") +" "+bundle.getString("name")+" "+lostPasswordUserId+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

			return;
		}
		if (theUser.getC4xxuxupivxxxxxxxxxxcurrpw().equals("ssoPW")) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("sso") +" "+bundle.getString("password") +" "+bundle.getString("cannot")+" "+bundle.getString("be")+" "+bundle.getString("changed")+" "+bundle.getString("here"),""));

                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("try") +" "+bundle.getString("original") +" "+bundle.getString("signon")+" "+bundle.getString("site")+" "+theUser.getC6xxuxuoivxxxxxxxxxxoldpw(),""));

   		 return;
                } 
                // if demo user no email saved except in user
                if(theUser.getY1xxuxxxivxxxxxxxxxxrestrict1() != null && theUser.getY1xxuxxxivxxxxxxxxxxrestrict1().equals("D")){
                 lostPasswordEmail=theUser.getA0xxukuxbvxxxxxxxxxxid();
                }
		if ((lostPasswordEmail == null || lostPasswordEmail.isEmpty()) && theUser.get${employeeEntityName?cap_first}() != null) {
                 lostPasswordEmail=theUser.get${employeeEntityName?cap_first}().getN4xxhxxrbv24xxxxxxxximailaddr();
		}
		if ((lostPasswordEmail == null || lostPasswordEmail.isEmpty()) && theUser.get${vendorEntityName?cap_first}() != null) {
                 lostPasswordEmail=theUser.get${vendorEntityName?cap_first}().getN4xxhxxrbv24xxxxxxxximailaddr();
		}
		if ((lostPasswordEmail == null || lostPasswordEmail.isEmpty()) && theUser.get${customerEntityName?cap_first}() != null) {
                 lostPasswordEmail=theUser.get${customerEntityName?cap_first}().getQ4xxhxxxbv24xxxxxxxximailaddr();
		}

		if ((lostPasswordEmail == null || lostPasswordEmail.isEmpty())  && theUser.get${clientEntityName?cap_first}() != null) {
                 lostPasswordEmail=theUser.get${clientEntityName?cap_first}().get${clientImailaddr?cap_first}();
                 if ( lostPasswordEmail == null || lostPasswordEmail.isEmpty()){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("login") +" "+bundle.getString("email") +" "+bundle.getString("not")+" "+bundle.getString("found"),""));

		   return;
                 }
	        }
		if (lostPasswordEmail == null || lostPasswordEmail.isEmpty()){
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("login") +" "+bundle.getString("email") +" "+bundle.getString("not")+" "+bundle.getString("found"),""));
		  return;
                }
                if (theUser.get${clientEntityName?cap_first}() != null) {
                 this.setClientEmail(theUser.get${clientEntityName?cap_first}().get${clientImailaddr?cap_first}());
                }


		try {
		  this.resetPassword = PasswordSupport.tempPassword();
		  theUser.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(this.resetPassword));
 		  theUser.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
		  theUser.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
		  theUser.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                calendare.add(Calendar.HOUR, 24);
                theUser.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
                inRecoverPassword=true;
                inCreateUser=false;
		entityManager.flush();
	        this.recoveredPasswordEmail = lostPasswordEmail;
		this.lostPasswordEmail = null;
                String alteredEmail="xx";
                if(this.recoveredPasswordEmail.length() >3){ 
                  alteredEmail="xx"+this.recoveredPasswordEmail.substring(3);   
                }  
                //
                this.getInstance();
                this.setInstance(theUser);
                // to cover where email valid syntax but not real. Manager/Admin can fix others but not themselves if cannot login
                if(lostPasswordUserId.toLowerCase().contains("manager") || lostPasswordUserId.toLowerCase().contains("admin") ){
                 log.info("site---- "+owner2Code+", temporary password xxx"+this.resetPassword+"xxx for "+lostPasswordUserId+" done ----");
                }
   
                Emailsend("/password_reset.xhtml");
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("password") +" "+bundle.getString("reset") +" "+bundle.getString("email")+" "+bundle.getString("to")+" "+bundle.getString("be")+" "+bundle.getString("sent")+" "+bundle.getString("to")+" "+alteredEmail,""));

		} catch (Exception exc) {
                  // write uncrypted temp pw in clob otherwise no recovery option  
			try {
				//org.jboss.seam.transaction.Transaction.instance()
				//		.setRollbackOnly();
			} catch (Exception ignore) {
			}
			// note: don't send the exception message back to the client as it may contain
			// too much information that a hacker could use to break into the site
			//statusMessages.addToControlFromResourceBundle("resetLostPassword",
			//		ERROR, "reset_failed_unknown");
		}
	}
    public boolean doResendActivationEmail(String type,String otherId) {
     //the email content and xhtml are different based on demosignup/signup/site activation
    // add logic to allow new email in case old email was wrong or mail failed and if pending resend email
     //toEmail:yxxxbh566xwwqqhxxxxxuserHome.clientEmail for all except otherid if site
     // subject yxxxvh566xwwqqwxxxxxuserHome.instance.zzxxu2oxxhxxxxxxxxxxowner2 site 
     // status time yxxxvh566xwwqqwxxxxxuserHome.instance.z2xxcztxlxxxxxxxxxxxstatusfldt site and gettingAct
     //Dear {yxxxbh566xwwqqhxxxxxuserHome.instance.a0xxukuxbvxxxxxxxxxxid} sign and demo
     //activation link {yxxxbh566xwwqqhxxxxxuserHome.newUserLink} for all except getting
     // Logon Email Id: {yxxxvh566xwwqqwxxxxxuserHome.instance.c1xxuxxxbvxxxxxxxxxxotherid  for demo mail why 
     //logonid yxxxbh566xwwqqhxxxxxuserHome.instance.a0xxukuxbvxxid
     // PW yxxxbh566xwwqqhxxxxxuserHome.instance.c6xxuxuoivxxoldpw or yxxxbh566xwwqqhxxxxxuserHome.clientEmail both PW if site 
      // instance is just created and needs to be filled up as info is available and for demo id is same as otherid ie email
     String owner2Code=this.owner2Code;
     if (type.equals("gettingActi")){
      owner2Code=this.getClientApplicationName();
      // used in activation email 
      this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
     }

     if(activationPending(otherId,owner2Code)){
            // send the activation email ... as part of this transaction, user is global variable
            String activationLink="";
            boolean smtpEnabled = true;
        try {
                 ${clientEntityName?cap_first} client =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
		      if (client == null) {
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,bundle.getString("create") +" "+bundle.getString("site") +" "+bundle.getString("first"),""));

                       return false;
                      }else{
                       clientFullUrlName=client.getD6xxuxxrbvxxxxxxxxxxintaddr();
                       if(clientFullUrlName ==null || clientFullUrlName.isEmpty()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("url") +" "+bundle.getString("missing"),""));


                          return false;
                       }

                      }
        } catch (Exception exc) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("url") +" "+bundle.getString("missing"),""));
          return false; 
        }

              if(urlPort ==8080){
               activationLink = "http://"+clientFullUrlName+":8080/login.wflow";
              }else{
               // need to add www if non raaspi.com ex raaspi.com,3rcomputer.com ie domain registered
               if(clientFullUrlName.contains("."+masterSiteCode)){
                activationLink = "http://"+clientFullUrlName+"/login.wflow";
               }else{
                activationLink = "http://www."+clientFullUrlName+"/login.wflow";
               }
              } 
            String newUserLink = activationLink + ((activationLink.indexOf("?") != -1) ? "&act=" : "?act=") + user.getC9xxuxxxbvxxxxxxxxxxactivationkey();
            setNewUserLink(newUserLink);
            if (type.equals("signIn")){
             this.setClientEmail(user.getC1xxuxxxbvxxxxxxxxxxotherid() );
             this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(user.getC6xxuxuoivxxxxxxxxxxoldpw());
            }
            else if (type.equals("demoSignIn")){
             this.setClientEmail(user.getC1xxuxxxbvxxxxxxxxxxotherid() );
             this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(user.getC6xxuxuoivxxxxxxxxxxoldpw());
            }
            else if (type.equals("gettingActi")){
             this.setClientEmail(user.getC1xxuxxxbvxxxxxxxxxxotherid() );
            }
            else{
            }    
            if (smtpEnabled) {
                try {
                 if (type.equals("signIn")){
                   Emailsend("/activationSignUp.xhtml");
                   return true;
                 }
                 else if (type.equals("demoSignIn")){
                   Emailsend("/activationDemo.xhtml");
                   return true;
                 }
                 else if (type.equals("gettingActi")){
                   Emailsend("/getactivation.xhtml");
                   return true;
                 }
                 else if (type.equals("acti")){
                   //activation is sent by sysAdmin so call may be from there
                   Emailsend("/activation.xhtml");
                   return true;
                 } 
                 else{
                 }   

                } catch (Exception zzz) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,"${componentName} "+bundle.getString("send") +" "+bundle.getString("email") +" "+bundle.getString("failed"),""));

                    try {
                     //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
                     } catch (Exception ignore) {}
                     return false;
                }
            }
      
     }
     return false;
    }
    public boolean activationPending(String otherId,String owner2Code) {
    // add logic to check in user table if admin ids activation key is not null for owner2 same as this servername
        List<${userEntityName?cap_first}> results  =  entityManager
 	.createQuery(
 	"select cc from ${userEntityName?cap_first} cc where cc.c1xxuxxxbvxxxxxxxxxxotherid = :username and cc.c2xxuxuaiv38xxxxxxxxalevel = :alevel and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2  and cc.a0xxukuxbvxxxxxxxxxxid=:userid ")
 	.setParameter("username", otherId).setParameter("alevel", "U")
 	.setParameter("owner2", owner2Code).setParameter("userid", this.instance.getA0xxukuxbvxxxxxxxxxxid())
 	.getResultList();
          if(results.isEmpty()){
                   return false;
          }
          if (results.size()>1){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("multiple") +" "+bundle.getString("record") +"(s) ",""));
                            
          }           

          user=results.get(0);
          if (user.getC9xxuxxxbvxxxxxxxxxxactivationkey() != null && user.getC7xxfxxxivxxxxxxxxxxtemporarypassword()){
           return true;
          }else{
           return false;
          }
    }

    @Transactional
    public void doVsignup() {
     signupas="V";
     doSignup();
    }


    /**
     comes here 3 ways
        1. Signup as visitor
        2. registerFacebookUser fbuid has user id 
        3. visitor deciding to Signup reference has temp userid
           The above are all user type visitor(V) and role H.
        (4) There is also doDemoSignUp (U) which also creates user(U) but allows them to do back office functions in demo sites
            Demo user has restriction D to limit changing their own records. Because they are User(U) they have employee record
            to allow transactions
        (5) Regular back office user(U) is created by create user menu option 
        (6) Vendor signup for Resellers mainly Theme vendor
    **/
    @Transactional
    public void doSignup() {
    // doSignUp(signup) and doRegister(createsite) and doDemo(demosignup) all sends activation link via EMail and on receive will invoke doActivate 
    // which finds the user which has activation pending and process it
        // no email involved if fb
        if(fbUid == null || this.instance != null){
         if(!this.validEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("ERROR")+", "+this.instance.getC1xxuxxxbvxxxxxxxxxxotherid()+" "+bundle.getString("is")+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("email") ,""));
            return;
         }

         if(doResendActivationEmail("signIn",this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())){
          return;
         }
        }
        // cannot persist user if cuorder half finished
        if (${itemEntityName}List.getCartedList("cart") != null && ${itemEntityName}List.getCartedList("cart").size() > 0){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("cannot") +" "+bundle.getString("signup") +" "+bundle.getString("if")+", "+bundle.getString("cart")+" "+bundle.getString("not")+" "+bundle.getString("empty"),""));

         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("please") +" "+bundle.getString("empty") +" "+bundle.getString("cart")+", "+bundle.getString("return")+" "+bundle.getString("and")+" "+bundle.getString("then")+" "+bundle.getString("login")+"/"+bundle.getString("signup"),""));

            return;
        }
        if (!agreedToTermsOfUsefb && fbUid != null ) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("please") +" "+bundle.getString("agree") +" "+bundle.getString("to")+" "+bundle.getString("terms"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("if")+" "+bundle.getString("already") +" "+bundle.getString("auto") +" "+bundle.getString("logged")+" "+bundle.getString("in")+" "+bundle.getString("using")+" "+bundle.getString("facebook"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("please") +" "+bundle.getString("open") +" "+bundle.getString("facebook")+", "+bundle.getString("logout")+" "+bundle.getString("first"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("then") +" "+bundle.getString("fb-signup") +" "+bundle.getString("here")+" "+bundle.getString("and")+" "+bundle.getString("agree")+" "+bundle.getString("to")+" "+bundle.getString("terms")+" "+bundle.getString("here"),""));

            return;
        }
        // jay at end of fbSignUp take to sign up page or something to click on Terms otherwise put a flag
        // check whether appname already exists and return
        // if identity.owner not equal to sss,it means temp user wants permanent

        boolean smtpEnabled = true;
        String savedActivationKey="";
        String savedPassword="";
        try {
                 ${clientEntityName?cap_first} client =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
		      if (client == null) {
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("create") +" "+bundle.getString("site") +" "+bundle.getString("first"),""));

                       return;
                      }else{
                       clientFullUrlName=client.getD6xxuxxrbvxxxxxxxxxxintaddr();
                       if(clientFullUrlName ==null || clientFullUrlName.isEmpty()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("client") +" "+bundle.getString("url") +" "+bundle.getString("missing"),""));
                          return;
                       }

                      }

        } catch (Exception exc) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("create") +" "+bundle.getString("site") +" "+bundle.getString("error")+" "+exc.getMessage(),""));

          return; 
        }

        try {
	     user = (${userEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :userid and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("userid", this.instance.getA0xxukuxbvxxxxxxxxxxid())
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
          if (user != null){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("id") +" "+this.instance.getA0xxukuxbvxxxxxxxxxxid()+" "+bundle.getString("exists"),""));

           return; 
          }
      
        }
        catch(NonUniqueResultException e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("id") +" "+this.instance.getA0xxukuxbvxxxxxxxxxxid()+" "+bundle.getString("exists"),""));

           return; 
        }
        catch(Exception ignore){
        }

        try {
           //if coming from facebook sign up make user as Instance
           if (fbUid != null){
            this.setInstance(user);
            //currentPW is a non null field
	    this.instance.setC4xxuxupivxxxxxxxxxxcurrpw("dummyfbPW");
           }else{
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );
            // user key already has the email as key, it goes to customer record as well
            if (smtpEnabled) {
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
                savedActivationKey=getMD5Hash(this.getA0xxukuxbvxxxxxxxxxxid2() + this.getClientName() + this.getClientEmail() + System.currentTimeMillis());
                this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(savedActivationKey);
            } else {
                // TODO: Fix for production ... No way to activate using email
                // if SMTP is not enabled ...
                System.out.println("WARNING!!! SMTP eMailer not enabled ... partially activating user without email activation.");
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            }
            if (this.instance.getA0xxukuxbvxxxxxxxxxxid() == null || this.instance.getA0xxukuxbvxxxxxxxxxxid().length() == 0){
             this.instance.setA0xxukuxbvxxxxxxxxxxid(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid());
            }
            savedPassword=PasswordSupport.tempPassword();
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(savedPassword);
	    this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(savedPassword));
	    this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
	    this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
            calendare.add(Calendar.HOUR, 48);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
           }
           //fb or app signUp  social media same rights as email signup activation

            if(this.chekIfDemo()){
		  this.instance.setC2xxuxuaiv38xxxxxxxxalevel("U");
		  this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
		  this.instance.setY1xxuxxxivxxxxxxxxxxrestrict1("D");
            }else{
                 if(signupas.equals("C")){//default is C and level V unless reseller sign up then V(en) and level P
 		  this.instance.setC2xxuxuaiv38xxxxxxxxalevel("V");
                 }else{
 		  this.instance.setC2xxuxuaiv38xxxxxxxxalevel("P");
                 }
             //  allow visitor to change own user record, user entity has VH 
             // manager can lower a vistor from H to Q if needed
             if(productCode.equals("f") ){
		   this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
             }else{
		   this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
             }
            }
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            //clientApplicationName is unique name within this cloud and can have alias public dns name like mitra.com
            enterprisecompcode=this.getClientApplicationName();
            inSignupAndCreateUser=true;
            // in following user persist a new customer or vendor will also be created with owner2 set as owner2Code 
            // using firstname lastname which are a0xxukuxbvxxxxxxxxxxid2 and clientname
            // change owner default value sss to this.instance.getA0xxukuxbvxxxxxxxxxxid()+ownerCode to restrict access to
            // user/customer(vendor)/address records created now
            ownerCode=this.instance.getA0xxukuxbvxxxxxxxxxxid()+ownerCode;
            // ownerCode 40ch max
            if(ownerCode.length() > 40){
             ownerCode=ownerCode.substring(ownerCode.length()-40);
            } 
	    this.instance.set${ownerField?cap_first}(ownerCode);

            this.persist();
            if (fbUid != null){
             return;
            } 
            // send the activation email ... as part of this transaction
            String activationLink="";
              if(urlPort ==8080){
               activationLink = "http://"+clientFullUrlName+":8080/login.wflow";
              }else{
               // need to add www if non raaspi.com ex raaspi.com,3rcomputer.com ie domain registered
               if(clientFullUrlName.contains("."+masterSiteCode)){
                activationLink = "http://"+clientFullUrlName+"/login.wflow";
               }else{
                activationLink = "http://www."+clientFullUrlName+"/login.wflow";
               }
              } 
            String newUserLink = activationLink + ((activationLink.indexOf("?") != -1) ? "&act=" : "?act=") + savedActivationKey;
            savedActivationKey="";
		 setNewUserLink(newUserLink);
            if (smtpEnabled) {
                try {
                   Emailsend("/activationSignUp.xhtml");

                } catch (Exception zzz) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,"${componentName} "+bundle.getString("send") +" "+bundle.getString("email") +" "+bundle.getString("failed")+" "+zzz.getMessage(),""));
                    try {
                     //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
                     } catch (Exception ignore) {}
                }
            }
            this.registrationScreenName = null;
            if(!customIdentity.getOwner().equals("sss")){
             // no one logged in so assume temp user not signing up , copy selection from temp userprofl to new one
             // added logic to change existing cart orders owner from userIP etc to new ID & add logic to delete temp customer and temp user
             ${cuordersEntityName?cap_first} ${cuordersEntityName}=null;
             if (${itemEntityName}List.getCartedList("cart") !=null && ${itemEntityName}List.getCartedList("cart").size() > 0){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${itemEntityName}List.getCartedList("cart")) {
                 ${cuordersEntityName}=itemOrderDetail.get${cuordersEntityName?cap_first}();
                 //change order owner and customer for history or wish list, no owner column for details
                 // but hibernate will detect change and create a new detail , so update statusfldt 
                 ${cuordersEntityName}.setZexxutoxlhxxxxxxxxxxowner(this.instance.getA0xxukuxbvxxxxxxxxxxid()+"sss");
                 ${cuordersEntityName}.set${customerEntityName?cap_first}(this.instance.get${customerEntityName?cap_first}());
                 ${cuordersEntityName}.setZdxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
                 ${cuordersEntityName}Home.superUpdate(); 
                 itemOrderDetail.setZixxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
                 ${cuodetailsEntityName}Home.update();
                 
                 ${customerEntityName}Home.setInstance(${cuordersEntityName}.get${customerEntityName?cap_first}());
                  // remove later as offline batch now record is in use , may be a way to do it outside for loop ie get rid of loop
                 //${customerEntityName}Home.remove();    
                 //entityManager.flush();
                try {
	         user = (${userEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :userid and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("userid", customIdentity.getOwner().substring(0,customIdentity.getOwner().length()-3))
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
                 if (user != null){
                    this.setInstance(user); 
                    // this.remove();
                    break;
                 }
                 else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("temp") +" "+bundle.getString("user")+" "+bundle.getString("to")+" "+bundle.getString("delete")+"-"+customIdentity.getOwner()+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

                  break;
                 } 
      
               }
               catch(NonUniqueResultException e){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("multiple") +" "+bundle.getString("user")+" "+bundle.getString("id")+" "+bundle.getString("entries")+"-"+customIdentity.getOwner()+" "+bundle.getString("error")+" "+bundle.getString("condition"),""));


                return; 
               }
               catch(Exception ignore){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("temp") +" "+bundle.getString("user")+" "+bundle.getString("delete")+" "+bundle.getString("error")+" "+bundle.getString("for")+"-"+customIdentity.getOwner(),""));

               }
             }//for             
             }//null check             
           }//not sss  
            this.instance = null; // do this last ... just to reset the register
                                 // form ...
        } catch (Exception exc) {
            try {
                //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
            } catch (Exception ignore) {}

            // NOTE: we don't return the Exception message back to the newUser
            // because it may reveal too much information to a hacker
		 log.severe( exc.getMessage());
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("error") +" "+bundle.getString("in")+" "+bundle.getString("signup"),""));

        }
    }
    /**
           This is doDemoSignUp which also creates user(U) but allows them to do back office functions in demo sites
            Demo user has restriction D to limit changing their own records. Because they are User(U) they have employee record
            to allow transactions    
    */
    @Transactional
    public void doDemoSignup() {
    // doSignUp(signup) and doRegister(createsite) and doDemo(demosignup) all sends activation link via EMail and on receive will invoke doActivate 
    // which finds the user which has activation pending and process it
        // cannot persist user if cuorder half finished
        if (${itemEntityName}List.getCartedList("cart") != null && ${itemEntityName}List.getCartedList("cart").size() > 0){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("cannot") +" "+bundle.getString("signup") +" "+bundle.getString("if")+", "+bundle.getString("cart")+" "+bundle.getString("not")+" "+bundle.getString("empty"),""));

         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("please") +" "+bundle.getString("empty") +" "+bundle.getString("cart")+", "+bundle.getString("return")+" "+bundle.getString("and")+" "+bundle.getString("then")+" "+bundle.getString("login")+"/"+bundle.getString("signup"),""));

            return;
        }
        if(!this.validEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("ERROR")+", "+this.instance.getC1xxuxxxbvxxxxxxxxxxotherid()+" "+bundle.getString("is")+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("email") ,""));
            return;
        }

        if(doResendActivationEmail("demoSignIn",this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())){
         return;
        }
        // check box values not being sent using bootstrap???
        if (!agreedToTermsOfUse && fbUid == null) {
         //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          //FacesMessage.SEVERITY_ERROR,bundle.getString("please") +" "+bundle.getString("agree")+" "+bundle.getString("to")+" "+bundle.getString("terms"),""));
            //return;
        }
        if (!agreedToTermsOfUse && fbUid != null) {
         //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          //FacesMessage.SEVERITY_ERROR,bundle.getString("please") +" "+bundle.getString("agree")+" "+bundle.getString("to")+" "+bundle.getString("terms"),""));
            //return;
        }
        // check whether appname already exists and return

        boolean smtpEnabled = true;
        String savedActivationKey="";
        String savedPassword="";
        try {
                 ${clientEntityName?cap_first} client =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
		      if (client == null) {
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,bundle.getString("site") +" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

                          return;
                      }else{
                       clientFullUrlName=client.getD6xxuxxrbvxxxxxxxxxxintaddr();
                       if(clientFullUrlName ==null || clientFullUrlName.isEmpty()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("client") +" "+bundle.getString("url")+" "+bundle.getString("missing"),""));

                          return;
                       }
                      }
        } catch (Exception exc) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("site") +" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+ exc.getMessage(),""));

          return; 
        }

        try {
	     user = (${userEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :userid and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("userid", this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
          if (user != null){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("id")+" "+ this.instance.getC1xxuxxxbvxxxxxxxxxxotherid()+" "+bundle.getString("already")+" "+bundle.getString("taken"),""));

           return; 
          }
      
        }
        catch(NonUniqueResultException e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("id")+" "+ this.instance.getC1xxuxxxbvxxxxxxxxxxotherid()+" "+bundle.getString("already")+" "+bundle.getString("taken"),""));
           return; 
        }
        catch(Exception ignore){
        }

        try {
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );
            // user key already has the email as key, it goes to customer record as well
            if (smtpEnabled) {
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
                savedActivationKey=getMD5Hash(this.getA0xxukuxbvxxxxxxxxxxid2() + this.getClientName() + this.getClientEmail() + System.currentTimeMillis());
                this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(savedActivationKey);
            } else {
                // TODO: Fix for production ... No way to activate using email
                // if SMTP is not enabled ...
                System.out.println("WARNING!!! SMTP eMailer not enabled ... partially activating user without email activation.");
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            }
            if (this.instance.getA0xxukuxbvxxxxxxxxxxid() == null || (this.instance.getA0xxukuxbvxxxxxxxxxxid() != null && this.instance.getA0xxukuxbvxxxxxxxxxxid().length() == 0)){
             this.instance.setA0xxukuxbvxxxxxxxxxxid(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid());
            }
            savedPassword=PasswordSupport.tempPassword();
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(savedPassword);
		 this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(savedPassword));
		 this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
		 this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
            calendare.add(Calendar.HOUR, 48);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
		 this.instance.setC2xxuxuaiv38xxxxxxxxalevel("U");
		 this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
		 this.instance.setY1xxuxxxivxxxxxxxxxxrestrict1("D");
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            //clientApplicationName is unique name within this cloud and can have alias public dns name like mitra.com
            enterprisecompcode=this.getClientApplicationName();
            inDemoSignupAndCreateUser=true;
            //owner2Code=enterprisecompcode;
            //this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            // in following user persist a new customer will also be created with owner2 set as owner2Code 
            // using firstname lastname which are a0xxukuxbvxxxxxxxxxxid2 and clientname
            this.persist();

            // send the activation email ... as part of this transaction
            String activationLink="";
              if(urlPort ==8080){
               activationLink = "http://"+clientFullUrlName+":8080/login.wflow";
              }else{
               // need to add www if non raaspi.com ex raaspi.com,3rcomputer.com ie domain registered
               if(clientFullUrlName.contains("."+masterSiteCode)){
                activationLink = "http://"+clientFullUrlName+"/login.wflow";
               }else{
                activationLink = "http://www."+clientFullUrlName+"/login.wflow";
               }
              } 
            String newUserLink = activationLink + ((activationLink.indexOf("?") != -1) ? "&act=" : "?act=") + savedActivationKey;
            savedActivationKey="";
		 setNewUserLink(newUserLink);
            if (smtpEnabled) {
                try {
                   Emailsend("/activationDemo.xhtml");

                } catch (Exception zzz) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,"${componentName} "+bundle.getString("send")+" "+bundle.getString("email")+" "+bundle.getString("failed"),""));

                }
            }
            this.registrationScreenName = null;
            this.instance = null; // do this last ... just to reset the register
                                 // form ...
        } catch (Exception exc) {
            try {
                //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
            } catch (Exception ignore) {}

            // NOTE: we don't return the Exception message back to the newUser
            // because it may reveal too much information to a hacker
		 log.severe( exc.getMessage());
            //statusMessages.addToControlFromResourceBundle("demoButton", ERROR, "general_demo_error");
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("demo")+" "+bundle.getString("signup")+" "+bundle.getString("error"),""));

        }
    }

    public void eMailSubscribed(Yxxxch522xhhxxhxxxxxclient clientRow,String frequency) {
        //handle where online subscription was not used but payment handle in backoffice 
        calendar.setTime(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());
        calendare.setTime(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());
        yxxxch522xhhxxhxxxxxclientHome.clearInstance();
        if (yxxxch522xhhxxhxxxxxclientHome.dateCompare(clientRow.getF7xxcxxxlvxxxxxxxxxxlicensestart(),null) <0){
         if(frequency.equals("Monthly")){
                clientRow.setF6xxuxxxlvxxxxxxxxxxlicensetype("Monthly");
                calendar.add(Calendar.DAY_OF_YEAR, 1);//add 1 day to current end date, allows payment before expiry
                clientRow.setF7xxcxxxlvxxxxxxxxxxlicensestart(calendar.getTime());
                calendar.add(Calendar.DAY_OF_YEAR, 364);
                clientRow.setF8xxcxxxlvxxxxxxxxxxlicenseend(calendar.getTime());
                yxxxch522xhhxxhxxxxxclientHome.setInstance(clientRow);
                yxxxch522xhhxxhxxxxxclientHome.allowUpdate();
       
         }else{
                clientRow.setF6xxuxxxlvxxxxxxxxxxlicensetype("Yearly");
                calendar.add(Calendar.DAY_OF_YEAR, 1);//add 1 day to current end date, allows not loosing trial 
                clientRow.setF7xxcxxxlvxxxxxxxxxxlicensestart(calendar.getTime());
                calendar.add(Calendar.DAY_OF_YEAR, 364);
                clientRow.setF8xxcxxxlvxxxxxxxxxxlicenseend(calendar.getTime());
                yxxxch522xhhxxhxxxxxclientHome.setInstance(clientRow);
                yxxxch522xhhxxhxxxxxclientHome.allowUpdate();

         }
         newUserLink2=new SimpleDateFormat("yyyy.MMM.dd.HH.mm").format(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());

         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("license")+" "+bundle.getString("start")+" "+clientRow.getF7xxcxxxlvxxxxxxxxxxlicensestart()+", "+frequency,""));

        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("license")+" "+bundle.getString("start")+" "+clientRow.getF7xxcxxxlvxxxxxxxxxxlicensestart()+" "+bundle.getString("in_future"),""));

          return;
        }

        boolean smtpEnabled = true;
            String owner2Client=clientRow.getZzxxu2oxxhxxxxxxxxxxowner2();


            if (smtpEnabled) {
                try {
                 Yxxxuh566xwwqqwxxxxxuser yxxxuh566xwwqqwxxxxxuser =(Yxxxuh566xwwqqwxxxxxuser) entityManager
					.createQuery(
							"select cc from Yxxxuh566xwwqqwxxxxxuser cc where cc.a0xxukuxbvxxxxxxxxxxid = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","admin")
					.setParameter("owner2", owner2Client)
					.getSingleResult();
                 yxxxuh566xwwqqwxxxxxuserHome.setInstance(yxxxuh566xwwqqwxxxxxuser);
                 this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );
 
                 // check if master site, a subdomain serverName can also include master site name 
                 if(customIdentity.isMasterSite()){   
                 }
                 else{
                     // not allowed
                  return;
                 }
		 setNewUserLink(newUserLink);

                 Emailsend("/subscribed.xhtml");//

                } catch (Exception zzz) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,"yxxxuh566xwwqqwxxxxxuser "+bundle.getString("send")+" "+bundle.getString("subscribedemail")+" "+bundle.getString("failed")+" -"+ zzz.getMessage(),""));

                }
            }

    }




    public void eMailNoactivity(${clientEntityName?cap_first} clientRow) {
        boolean smtpEnabled = true;
            String owner2Client=clientRow.getZzxxu2oxxhxxxxxxxxxxowner2();


            if (smtpEnabled) {
                try {
                 ${userEntityName?cap_first} ${userEntityName} =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","admin")
					.setParameter("owner2", owner2Client)
					.getSingleResult();
                 ${userEntityName}Home.setInstance(${userEntityName});
                 this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );
                 // check if master site, a subdomain serverName can also include master site name 
                 if(customIdentity.isMasterSite()){   
                 }
                 else{
                     // not allowed
                  return;
                 }
		 setNewUserLink(newUserLink);

                 Emailsend("/noactivity.xhtml");

                } catch (Exception zzz) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,"${componentName} "+bundle.getString("send")+" "+bundle.getString("email")+" "+bundle.getString("failed")+" -"+ zzz.getMessage(),""));

                }
            }

    }

    public void eMailEndOfTrial(${clientEntityName?cap_first} clientRow) {
        boolean smtpEnabled = true;
            String owner2Client=clientRow.getZzxxu2oxxhxxxxxxxxxxowner2();

            if (smtpEnabled) {
                try {
                 ${userEntityName?cap_first} ${userEntityName} =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","admin")
					.setParameter("owner2", owner2Client)
					.getSingleResult();
                 ${userEntityName}Home.setInstance(${userEntityName});
                 clientFullUrlName=clientRow.getD6xxuxxrbvxxxxxxxxxxintaddr();
                 this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );//reuse clientEmail to pass user Email info
                 // check if master site, a subdomain serverName can also include master site name 
                 if(customIdentity.isMasterSite()){                  }
                 else{
                     // not allowed
                  return;
                 }
                 Emailsend("/endoftrial.xhtml");

                } catch (Exception zzz) {
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,"${componentName} "+bundle.getString("send")+" "+bundle.getString("email")+" "+bundle.getString("failed")+" -"+ zzz.getMessage(),""));

                }
            }

    }
    public void closeClient(${clientEntityName?cap_first} clientRow) {
     // change status to mclosed from mactive
        try {
                 ${clientEntityName?cap_first} ${clientEntityName} =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2",clientRow.getZzxxu2oxxhxxxxxxxxxxowner2() )
					.getSingleResult();
		      if (${clientEntityName} != null) {
                  if (${clientEntityName}.getZexxzzfxhhxxxxxxxxxxstatusfl() != mclosed){
                   ${clientEntityName}.setZexxzzfxhhxxxxxxxxxxstatusfl(mclosed);
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("status")+" "+bundle.getString("closed"),""));

                  }else{
                   ${clientEntityName}.setZexxzzfxhhxxxxxxxxxxstatusfl(mactive);
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("status")+" "+bundle.getString("active"),""));

                  }
                  ${clientEntityName}Home.setInstance(${clientEntityName});
                  ${clientEntityName}Home.persist();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("status")+" "+bundle.getString("closed"),""));
                  return;
                 }
        } catch (Exception e) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("error")+" "+e.getMessage(),""));

        }



    }


    public void removeData(${clientEntityName?cap_first} clientRow) {
     
    }

    @Transactional
    //allows couponName to be paased
    public void eMailReadyToActivate(Yxxxch522xhhxxhxxxxxclient clientRow,String couponName) {
     clientApplicationSubFunction=couponName;
     eMailReadyToActivate(clientRow);
    }

    /**
    * The following method called by r3restclient or by sqlAdmin depending on automated or manual site create
    * @param args tenant client record
    * @return none
    * @exception jdbc error or email error
    * @see "class r3RestClient openAuthorize(),view sqlAdmin, doMasterSite()"
    * 
    */

    @Transactional
    public void eMailReadyToActivate(${clientEntityName?cap_first} clientRow) {
        // called (by either doregister only if masterSite or by sqladmin.xhtml action after new site dns setups 
        // also by r3restapi for shopify clients
        // complete new site setup part2 first but use owner2Client (new client)  instead of owner2code (which is myflowp)  
        // if already activated then renew license but after reasonability checking, 
        String owner2Client=clientRow.getZzxxu2oxxhxxxxxxxxxxowner2();
        clientFullUrlName=clientRow.getD6xxuxxrbvxxxxxxxxxxintaddr();
        //DoRegister/DoQuickRegister > persist(admin) > inRegistrationAndCreateUser > createClientRegister() sets clientFullUrlName
        if(clientFullUrlName ==null || clientFullUrlName.isEmpty()){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("client")+" "+bundle.getString("url")+" "+bundle.getString("missing"),""));
          return;
        }
         // inRegistrationAndCreateUser useful in same session, for later invoke from sqladmin in case of email fail
         //  log the value to check if value not retained if comes from doq but set it to true
         log.severe("jay value before "+inRegistrationAndCreateUser);

         inRegistrationAndCreateUser=true;         
         //if (!inRegistrationAndCreateUser && clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype().trim().equals("TrialPending") ){
         if(!hostingAt.equals("op") && clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype().trim().equals("TrialPending")){
          //no automated routing and automated invoking copy defaults and copy options and still pending 
          copyDefaultsToOwner2(owner2Client);
          log.severe(bundle.getString("copy")+" "+bundle.getString("defaults")+"done for "+owner2Client);

          if (!bcontinue){
           return;
          }
          copyOptionsDefaultsToOwner2(owner2Client);
          if (!bcontinue){
           return;
          }
          copy2OptionsDefaultsToOwner2(owner2Client);
          if (!bcontinue){
           return;
          }
          log.severe(bundle.getString("copy")+" "+bundle.getString("options")+"done for "+owner2Client);

         }
         if (!bcontinue){
          return;
         }
         // comes here either from sqladmin for remaining sites or as part of myflowp/raaspi create site
         // check trial or license and send appropriate email
         //if trial,information to be sent is split between admin and manager, so both records need to be read 
         // myflowp/raaspi was set to trial already, so it will now go into yearly, others will go to Trial pending first and later to yearly
         // any yearly coming here will go into Renewal  
         // need to put more reasonability checking for renewal
         // can we use the fact doregister puts passwords in site client notes field which is later used in below logic
         // 

         boolean smtpEnabled = true;
           //test in what seq licensetype is setup,? comes here by sqladmin action
           if (clientRow.getZexxzzfxhhxxxxxxxxxxstatusfl() != mclosed && 
               (clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype().equals("Trial") ||
                 clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype().equals("Yearly"))){
             try {
              // trial to Yearly or renewal of Yearly can come here if email failed/resent or by mistake
              // assume trial email resend only if closed status
              // allow yearly renewal only in last month or later 
              // if couponName has value assume long trial ie 365+14 days and licenseend date a year+14 days away
              // and licensetype trialPending

              //if(clientApplicationSubFunction ==null || clientApplicationSubFunction.isEmpty()){
               calendar.setTime(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());
               calendare.setTime(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());
               calendare.add(Calendar.MONTH, -1);
               if(calendare.before(currbusdate) ){
                clientRow.setF6xxuxxxlvxxxxxxxxxxlicensetype("Yearly");
                calendar.add(Calendar.DAY_OF_YEAR, 1);
                clientRow.setF7xxcxxxlvxxxxxxxxxxlicensestart(calendar.getTime());
                calendar.add(Calendar.DAY_OF_YEAR, 364);
                clientRow.setF8xxcxxxlvxxxxxxxxxxlicenseend(calendar.getTime());
                ${clientEntityName}Home.setInstance(clientRow);
                ${clientEntityName}Home.allowUpdate();
               }else{
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("Renewal")+" "+bundle.getString("allowed")+" "+bundle.getString("in")+" "+bundle.getString("last")+" "+bundle.getString("month")+" "+bundle.getString("or")+" "+bundle.getString("later")+", "+bundle.getString("license")+" "+bundle.getString("ending")+ sdf.format(calendar.getTime()),""));
                return;
               } 
              //}
             } catch (Exception zzz) {
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_ERROR,bundle.getString("client")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+zzz.getMessage(),""));
             
             // continue but put alert msg in site client pop3server field for raaspi support action  
             }
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("type")+" "+clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype()+" "+bundle.getString("license")+" "+bundle.getString("done"),""));

             if (smtpEnabled) {
              owner2Client=clientRow.getZzxxu2oxxhxxxxxxxxxxowner2();
              try {
               ${userEntityName?cap_first} ${userEntityName} =(${userEntityName?cap_first}) entityManager
	.createQuery(
	"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
	.setParameter("nKeyName","manager")
	.setParameter("owner2", owner2Client)
	.getSingleResult();
                 ${userEntityName}Home.setInstance(${userEntityName});
                 this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );
                 if(urlPort ==8080){
                  newUserLink = "http://"+clientFullUrlName+":8080/login.wflow";
                 }else{
                  newUserLink = "http://"+clientFullUrlName+"/login.wflow";
                 } 
                 newUserLink2 =sdf.format(clientRow.getF8xxcxxxlvxxxxxxxxxxlicenseend());
                 
                 Emailsend("/licensed.xhtml","(license renewal)");
              } catch (Exception zzz) {
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("email")+" "+bundle.getString("send")+" "+bundle.getString("failed")+" "+zzz.getMessage(),""));
                // set alert for raaspi support (rather than email) by putting msg in site client field named pop3server

              }
              return;
             }
           }
           else{
            // license type is trial pending  and client status mclosed,  comes here by sqladmin action or r3rest after router setup
            if (clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype().equals("Yearly") ){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_ERROR,bundle.getString("expected")+" "+bundle.getString("TrialPending")+" "+bundle.getString("status")+", "+bundle.getString("got")+" "+bundle.getString("status")+" "+bundle.getString("yearly"),""));

               // add logic to check status if email sent if not send email
              return;
            }
            // normal logic path for sqladmin action
            else {
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("current")+" "+bundle.getString("status")+" "+clientRow.getF6xxuxxxlvxxxxxxxxxxlicensetype(),""));

             try {
              clientRow.setF6xxuxxxlvxxxxxxxxxxlicensetype("Trial");
              clientRow.setZfxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
              clientRow.setZexxzzfxhhxxxxxxxxxxstatusfl(mactive);//reset if closed
              ${clientEntityName}Home.setInstance(clientRow);
              ${clientEntityName}Home.allowUpdate();
             } catch (Exception zzz) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("client")+" "+bundle.getString("update")+" "+bundle.getString("failed")+" "+zzz.getMessage(),""));
               return;
             }

             owner2Client=clientRow.getZzxxu2oxxhxxxxxxxxxxowner2();
             String savedPW=null;
             ${userEntityName?cap_first} yxxxuh566xwwqqwxxxxxuser = null;
             try{
              ${userEntityName} =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","manager")
					.setParameter("owner2", owner2Client)
					.getSingleResult();
              savedPW=${userEntityName}.getY7xxuxznbvxxxxxxxxxxnotes(); 
             } catch (Exception zzz) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("record")+" "+bundle.getString("manager")+" "+bundle.getString("failed")+" "+zzz.getMessage(),""));
               return;
             }

             if (smtpEnabled) {
              // send the activation email ... as part of this transaction
              String activationLink="";
              if(urlPort ==8080){
               activationLink = "http://"+clientFullUrlName+":8080/login.wflow";
              }else{
               activationLink = "http://"+clientFullUrlName+"/login.wflow";
              } 
                           ${userEntityName} =(${userEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${userEntityName?cap_first} cc where cc.${userKeyField} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","admin")
					.setParameter("owner2", owner2Client)
					.getSingleResult();
              ${userEntityName}Home.setInstance(${userEntityName});
              if (${userEntityName}.getC9xxuxxxbvxxxxxxxxxxactivationkey() == null | (${userEntityName}.getC9xxuxxxbvxxxxxxxxxxactivationkey() != null && ${userEntityName}.getC9xxuxxxbvxxxxxxxxxxactivationkey().length() == 0)){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("activation")+" "+bundle.getString("key")+" "+bundle.getString("null"),""));

               return;          
              }
              String newUserLink = activationLink + ((activationLink.indexOf("?") != -1) ? "&act=" : "?act=") + ${userEntityName}.getC9xxuxxxbvxxxxxxxxxxactivationkey();
              // we need to get pw from client record and not from this.instance.getC4xxuxupivxxxxxxxxxxcurrpw()
              //in case asyncrhonus ie after doregister session ends. use bbandbb as  
              String[] str = savedPW.split("  and  ");
              if(str.length>1){
               String mgrPw=str[1];
               newUserLink =newUserLink+"&id=manager&pw="+mgrPw; 
              }
             setNewUserLink(newUserLink);
              setClientEmail(savedPW);// savedPW holds the two passwords which were saved in site manager user notes field by doRegister()

                try {
                   // will be addressed to admin but pw saved in clientEmail property of clientHome, use otherid for eMail
                   Emailsend("/activation.xhtml","(for site activation)");
                   //jay tbd also call a method to create a co for this manager re subscription with 90 days delivery
                   // getActivation was send in doregister, emailsend/activation will send an email siteSetupSteps.xhtml to client outlining the steps to follow
                   // emailsend/emailrender saves info in clobdata
                } catch (Exception zzz) {
		    log.severe(" Send eMail failed: " + zzz.getMessage());
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,"${componentName}"+" "+bundle.getString("having")+" "+bundle.getString("email")+" "+bundle.getString("server")+", "+bundle.getString("try")+" "+bundle.getString("later"),""));

                }
           }
         }
        }//trial/yearly/pending trial
    }
    public boolean validEmail(String email) {
      // email checking addded , otherwise persist fails 
        Pattern pattern = Pattern.compile("^.+@.+\\..+$");
        Matcher matcher = pattern.matcher(email);
        if(!matcher.matches()){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+email+" "+bundle.getString("invalid"),""));
         return false;
        }
        return true;
    }

@Transactional
    public String reDeem() {
    // for prePaid and redeem coupon situations like appSumo
        // we need to search if it exists then verify why 
        // capture info and create as a new raaspi customer first. Needed now in prepaid coupon case plus was missed 
        //modified existing method createEmployeeCustomerAddressSignup but added parameters 
        // password is now passed via newUserLink not userAgentStr which was getting reset by browser
        if(this.newUserLink == null){
         this.newUserLink="";
        }
        this.newUserLink=this.newUserLink.trim();
        this.clientApplicationSubFunction=this.clientApplicationSubFunction.trim();
        String couponName=this.clientApplicationSubFunction;     
        // validate email                 
        if(!this.validEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("ERROR")+", "+this.instance.getC1xxuxxxbvxxxxxxxxxxotherid()+" "+bundle.getString("is")+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("email") ,""));
            return null;
        }

        String password=this.newUserLink;
        if(password !=null && !password.isEmpty()){
         int score=getStength(password);
         if(score ==0){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Password")+" "+bundle.getString("minimum")+" "+bundle.getString("length")+" "+bundle.getString("four")+", "+bundle.getString("recommend")+" "+bundle.getString("eight")+" "+bundle.getString("or")+" "+bundle.getString("more"),""));
           bcontinue=false;
           return null;                
         }
        }

        yxxxuq591xwwqqhxxxxxrate1f=yxxxuq591xwwqqhxxxxxrate1fList.getRaaspiIncentiveToEntity("SC",clientApplicationSubFunction);
        if (yxxxuq591xwwqqhxxxxxrate1f==null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Coupon")+ " "+clientApplicationSubFunction+" "+bundle.getString("invalid"),""));
         return null;
        } 
        if (isBitSet(yxxxuq591xwwqqhxxxxxrate1f.getZ1xxzzfxhhxxxxxxxxxxstatusfl(),_mclosed)){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Coupon")+ " "+clientApplicationSubFunction+" "+bundle.getString("already")+" "+bundle.getString("used"),""));
         return null;
        } 
        Jxxxuq201xwwqqhxxxxxcustomer jxxxuq201xwwqqhxxxxxcustomer=jxxxuq201xwwqqhxxxxxcustomerList.getEmailCouponToEntity(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid(),clientApplicationSubFunction);
        if (jxxxuq201xwwqqhxxxxxcustomer !=null
         && isBitSet(yxxxuq591xwwqqhxxxxxrate1f.getZ1xxzzfxhhxxxxxxxxxxstatusfl(),_mclosed)){
         //At this point found is bad only if coupon status is closed
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Coupon")+ " "+clientApplicationSubFunction+" "+bundle.getString("already")+" "+bundle.getString("used"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Please")+" "+bundle.getString("contact")+" "+bundle.getString("our")+" "+bundle.getString("support")+" "+bundle.getString("team")+", "+bundle.getString("if")+" "+bundle.getString("needed"),""));
         return null;
        }
        if (jxxxuq201xwwqqhxxxxxcustomer==null){

         createEmployeeCustomerAddressSignup("redeem",clientName,clientSerialNum,this.instance.getC1xxuxxxbvxxxxxxxxxxotherid(),masterSiteCode,this.instance.getC1xxuxxxbvxxxxxxxxxxotherid());
         //requestType (Demo,eedeem,coupon,..) ,company name/ fname,lname, email, owner2,userId (for redeem userId gets recalculated) 
         //calls createsUserInstance which creates visitor user along with customer etc records who can login
         //get from ie 1,45 or 1a etc which is used to set default theme and functionGroup
         //from is misccode1 after trial,default is 1 ie business. get it from coupon>ratetable>item>misccode1
         // future ?fpxxfq1a5xwwqqhxxxxxitem=fpxxfq1a5xwwqqhxxxxxitemList.getSidToEntity(yxxxuq591xwwqqhxxxxxrate1f.getB2xxuxxrbv51xxxxxxxxstepname());
         stepN=yxxxuq591xwwqqhxxxxxrate1f.getB2xxuxxrbv51xxxxxxxxstepname().trim();
         int sid=0;
         if(stepN.equals("S") && yxxxuq591xwwqqhxxxxxrate1f.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")){
          stepN="281";
          // use stepN value dont change instance,this causes persist by hibernate yxxxuq591xwwqqhxxxxxrate1f.setB2xxuxxrbv51xxxxxxxxstepname(stepN);
         } 
         try{// coupons type SC means stepName is item sid ie numeric, also temp bypass
          sid=Integer.parseInt(stepN);
         }catch (Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Coupon")+ " "+clientApplicationSubFunction+" "+bundle.getString("access/stepName")+" "+bundle.getString("error"),""));
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Please")+" "+bundle.getString("contact")+" "+bundle.getString("our")+" "+bundle.getString("support")+" "+bundle.getString("team")+", "+bundle.getString("if")+" "+bundle.getString("needed"),""));
          return null;
         }
         String functionGroup=this.getFunctionGroupForItemSid(sid);
         //
         //handle any errors and quickly respond messages back to customer, giving how to create site now or how later
         //now jxxxuq201xwwqqhxxxxxcustomer should exist in raaspi

         if(!bcontinue){
          return null;
         }else{
          customIdentity.setHoldArray(2,clientEmail);//hold as session value to be used to create site email param
          customIdentity.setHoldArray(5,couponName);// used in siteCreate in r3restclient

          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Success")+"! "+bundle.getString("coupon")+" "+bundle.getString("redeemed")+". "+bundle.getString("We")+" "+bundle.getString("recommend")+" "+bundle.getString("you")+" ("+customIdentity.getHoldArray(2)+") "+" "+bundle.getString("to")+" "+bundle.getString("continue")+" "+bundle.getString("with")+" "+bundle.getString("Step2a")+" "+bundle.getString("now")+". ",""));

          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Enter")+" "+bundle.getString("website")+" "+bundle.getString("name")+", "+bundle.getString("and")+" "+bundle.getString("click")+" "+bundle.getString("Install")+" "+bundle.getString("cloudApp")+" / "+bundle.getString("create")+" "+bundle.getString("website")+". ",""));

          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("If")+" "+bundle.getString("needed")+", "+bundle.getString("you")+" "+bundle.getString("may")+" "+bundle.getString("skip")+" "+bundle.getString("Step2a")+" "+bundle.getString("for")+" "+bundle.getString("now")+" "+bundle.getString("and")+" "+bundle.getString("come")+" "+bundle.getString("back")+" "+bundle.getString("here")+" "+bundle.getString("and")+" "+bundle.getString("use")+" "+bundle.getString("step2b")+" "+bundle.getString("shown")+" "+bundle.getString("at")+" "+bundle.getString("the")+" "+bundle.getString("bottom")+" "+bundle.getString("of")+" "+bundle.getString("this")+" "+bundle.getString("page.") ,""));
          return "/redeem.xhml?registrationName="+clientName+"&from="+functionGroup;
          // /redeem.wflow?registrationName=ratnadidu@gmail.com&from=1
         } 
         //if couponcode got added in customer and doregister-increateclientRecord01 it will check for coupon
         // and will change rate1f entry status closed and srt client licensetype trialPending
        }
        //customer exists and coupon chosen but not completed 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Coupon")+ " "+clientApplicationSubFunction+" "+bundle.getString("prviously")+" "+bundle.getString("selected")+", "+bundle.getString("but")+" "+bundle.getString("not")+" "+bundle.getString("completed"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("To")+ " "+bundle.getString("complete")+" "+bundle.getString("the")+", "+bundle.getString("process")+", "+bundle.getString("need")+" "+bundle.getString("to")+" "+bundle.getString("use")+" "+bundle.getString("step2b")+", "+bundle.getString("shown")+" "+bundle.getString("at")+" "+bundle.getString("the")+" "+bundle.getString("bottom")+" "+bundle.getString("of")+" "+bundle.getString("this")+" "+bundle.getString("page") ,""));

        return null;
    }


    /**
    * used by createmastersite.xhtml (not used) and also by Authenticator.java to create master site after  tables exist via checkCreateTables method
    * @param args -owner2Code ie xxx part of url xxx.com,email used for pre created user role manager  
    * copy default site contents messages and creates other table contents,copies default user(site) theme images,
    * admin and manager records,
    * @return void
    * @exception mainly persist related 
    * @see "doRegister() for creating site under master Site, doQuickRegister in r3RestClient for shopify backOffice site "
    */

    @Transactional
    public void doMasterSite(String owner2Code,String email) {
        String savedPassword="";
        bcontinue=true;
        if (yxxxch522xhhxxhxxxxxclientList.getOwner2ClientList(owner2Code).size() > 0) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("ERROR")+", "+owner2Code+" "+bundle.getString("site")+" "+bundle.getString("already")+" "+bundle.getString("exists") ,""));
            return;
        }
        //following are for master site only
        //(step1)account,options,usagebyPeriods,resourceBundle,rate etc 10 table defailt values
        yxxxuh566xwwqqwxxxxxuserHome.copyDefaultsToOwner2(owner2Code);//copy base tables like account,rate etc for a site/tables

        //for now vendor for a theme ignored, use value v
        themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business
        clientApplicationFunction="ehge";//Business  eh is alias of ee but shows create tenant sites link in login.xhtml. ge is generic theme.
        //eg instead of eh will show other type of business functions like association, erp, agency 
        if(!this.validEmail(email)){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("ERROR")+", "+email+" "+bundle.getString("is")+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("email") ,""));
            return;
        }
        bcontinue=true;
        try {
        //(step2a) we need to create the default theme related clobdata and blobdata content in system first           
        createMasterSiteAddonThemes();// for now it is dummy ie no default themes created or copied, since next step also copies themes from csv files
       // step2a can be expanded to include addon 3rd party themes
        // The following method (step2b) assumes that csv files with themes are in root.war/WEB-INF/resources dir named Pre built sblob.csv etc
        //(step2b) copies themes from csv files. csv files can be created from existing sites via menu themeExport.xhtml
        // key with -M are for gallery and -C for current production. If same key multiple times, then the first one/oldest one will be used
        //param theme vendor,theme Name, jowner owner2CodeClient ie site name,2 client Name ie company, site contact email, client App function prod+subProd like eerb
         yxxxuq1n1xwwqqqxxxxxblobdataHome.copyDefaultsToUSER("v",themeName,owner2Code,this.getClientName(),email,this.getClientApplicationFunction());
         if (!bcontinue){
          return;
         } 
        //(step3)default option values
          copyOptionsDefaultsToOwner2(owner2Code);//mastersite 
          if (!bcontinue){
           return;
          }
        //(step4)remaining default option values
          copy2OptionsDefaultsToOwner2(owner2Code);
          if (!bcontinue){
           return;
          }

         //admin and manager user records will be created 
            this.clearInstance();
            this.getInstance();
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mactive);
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.setClientEmail(email);
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            this.instance.setA0xxukuxbvxxxxxxxxxxid("admin");
            this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(null);
            savedPassword=PasswordSupport.tempPassword();
            savedPassword="admin";//master site has more control
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(savedPassword);
            this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(savedPassword));
            this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
            this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
            calendare.add(Calendar.HOUR, 48);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            this.instance.setC2xxuxuaiv38xxxxxxxxalevel("I");
            this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            inRegistrationAndCreateUser=true;
            this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            // in 2nd user persist a new client will also be created with owner2 set as owner2Code and enterprisecompcode set to enterprisecompcode .
            // also account,acintgr,acperiod will be cloned from 3rcomp owner2 to new account owner2
            subKey="admin";
            this.persist(owner2Code); // call persist with overdrive so that owner2Code has new site name, not the myflow name
            // during persist client records 05 and 01 will be created by createClientRegister because inRegistrationAndCreateUser 
            // in but copydefaultstoowner2 ie account,options etc will be delayed
            // to Sqladmin to avoid connection timeout ie server running long task
            // now persist backoffice manager user id2  
            this.clearInstance();
            this.instance=this.getInstance();
            //cripple this as wee but avoid another activation key, both will activate using one key
            this.instance.setC1xxuxxxbvxxxxxxxxxxotherid(this.getClientEmail());
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(null);
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            this.instance.setA0xxukuxbvxxxxxxxxxxid("manager");
            this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.tempPassword());
            this.instance.setC4xxuxupivxxxxxxxxxxcurrpw("manager");//override if mastersite
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(this.instance.getC4xxuxupivxxxxxxxxxxcurrpw());
            this.instance.setY7xxuxznbvxxxxxxxxxxnotes(savedPassword+"  and  "+this.instance.getC4xxuxupivxxxxxxxxxxcurrpw());
            this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(this.instance.getC4xxuxupivxxxxxxxxxxcurrpw()));
            this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
            // calendar gets altered in clientregister ie 3 months added for trial end
           this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
            calendare.add(Calendar.HOUR, 48);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            this.instance.setC2xxuxuaiv38xxxxxxxxalevel("U");
            this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            inRegistrationAndCreateUser=true;//persist below has if createClientRegister > createClientRegister()
            this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            // in following user persist a new client will also be created with owner2 set as owner2Code and enterprisecompcode set to enterprisecompcode .
            // also account,acintgr,acperiod will be cloned from 3rcomp owner2 to new account owner2
            subKey="manager";
            // manager persist calls createClientRegister() 2nd time  > creates/persists client related records and then client itself
            this.persist(owner2Code);
            //logic added to set client F2xxfxxxbvxxxxxxxxxxlooseit as true to indicate this as master site
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,"Master site---- "+owner2Code+", admin with temporary password "+savedPassword+" and manager with temorary password "+this.instance.getC6xxuxuoivxxxxxxxxxxoldpw()+ " done ----",""));
            //do not send activation email, but log it
            log.info("Master site---- "+owner2Code+", admin with temporary password "+savedPassword+" and manager with temorary password "+this.instance.getC6xxuxuoivxxxxxxxxxxoldpw()+ " done ----");
            try{
             Yxxxch522xhhxxhxxxxxclient client = yxxxch522xhhxxhxxxxxclientList.getKeyToEntity("01"); 
             if(client == null){
              log.severe("Error getting null client record for "+owner2Code);
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("getting")+ " "+bundle.getString("setup")+ " "+bundle.getString("record"),""));
               return;  
             }
             client.setF2xxfxxxbvxxxxxxxxxxlooseit(true);
             //although client record was already created in createclientRegister(to be depecated by createClientRecord01)
             // not all fields were populated since data did not come via new site create form. We need to put values here
             if(urlName.length() > 35){
              client.setD6xxuxxrbvxxxxxxxxxxintaddr(urlName.substring(0,35));//already set in postconstruct
             }else{
              client.setD6xxuxxrbvxxxxxxxxxxintaddr(urlName);//already set in postconstruct
             }
             client.setB3xxuxzsbvxxxxxxxxxxdescript("Home page for master site "+owner2Code+" ,has shopping cart, products and login for back office");
             client.setB2xxuzcxbvxxxxxxxxxxenterprisecompanyna(this.getClientName());
             client.setD4xxhxxrbv24xxxxxxxximailaddr(email);

             yxxxch522xhhxxhxxxxxclientHome.clearInstance();
             yxxxch522xhhxxhxxxxxclientHome.setInstance(client);
             yxxxch522xhhxxhxxxxxclientHome.superUpdate();
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("Set")+ " "+bundle.getString("as")+ " "+bundle.getString("master")+" "+bundle.getString("site"),""));
             //cannot inject need to find a way to refresh databaseResourceLoader.reLoadBundle("en",owner2Code);// messages need to be refreshed
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("Please")+ " "+bundle.getString("stop(CNTRL-C)/start")+ " "+bundle.getString("the")+" "+bundle.getString("Server")+" "+bundle.getString("to")+" "+bundle.getString("load")+" "+bundle.getString("menu")+" / "+bundle.getString("field")+" "+bundle.getString("labels")+" "+bundle.getString("from")+" "+bundle.getString("database"),""));
             //in this session customIdentity already initialized and values were null, so set the masterSite values now
             //after this session customIdentity will can from masterSite client record
             customIdentity.setMasterSiteCode(owner2Code);
             customIdentity.setMasterSiteEmail(email);
             customIdentity.setMasterSiteUrl(urlName);
             return;    
            } catch (Exception e) {
             log.severe("Error setting as master site "+ e);
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("saving")+ " "+bundle.getString("as")+ " "+bundle.getString("master")+ " "+bundle.getString("site")+ " - "+e.getMessage(),""));
             //databaseResourceLoader.reLoadBundle("en",owner2Code);// messages need to be refreshed
             return ;  
           }

        } catch (Exception exc) {
            try {
                //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
            } catch (Exception ignore) {
            }

            // NOTE: we don't return the Exception message back to the newUser
            // because it may reveal too much information to a hacker
           log.severe(exc.getMessage());
            //statusMessages.addToControlFromResourceBundle("registerButton", ERROR, "general_reg_error");
        }


    }

    /**
    * used by end users via register.xhtml to create new site or via fatjar install > Authenticator.java > domastersite() 
    * @param args -theme vendor, themeName, userHome getters have values too for usage, size  
    * themes are used below via blobdataHome.copyDefaultsToUSER(String vendor .. method which adds both blob and clob data for new site
    * @return "" String type
    * @exception none here but handled in called methods 
    */
    @Transactional
    public void createMasterSiteAddonThemes() {
    //in existing system the following were done manually, we need to create new methods 
    // to export those data as csv and then import them as needed when a master site is created.
    // the same export/import can be used to offer theme galleries as addon product option. 
    //create items type SI-D for theme gallery. Subcodesn has TH for theme, subcodesn3 has theme category/theme
    //create SYSTEM or common blobdata image to be loaded by clobdata content via imageServlet 
    //create SYSTEM clobdata for html content for page sections using key like 3R-MID-TOP-M with image url to blobdata 
    // and qualifier value for a theme
    //
    // make use of the existing importTheme and exportTheme for hardcoded themeCategory.
    // look into using data from cloud file url or rest api to get the csv data stream

    }

    /**
    * used by end users via register.xhtml to create new site
    * @param args -theme vendor, themeName, userHome getters have values too for usage, size  
    * themes are used below via blobdataHome.copyDefaultsToUSER(String vendor .. method which adds both blob and clob data for new site
    * @return "" String type
    * @exception none here but handled in called methods 
    */

    @Transactional
    public void doRegister(String vendor,String themeName) {
    // doSignUp(signup) and doRegister(createsite) and doDemo(demosignup) all sends activation link via EMail and on receive will invoke doActivate 
    // which finds the user which has activation pending and process it

    <#--
     create site will have checkbox if existing client and if so will ask for one of the email ids/password used for this client 
     and will prefill address , email etc but can be overwritten.
    -->
        if(!this.validEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())
          || this.instance.getC1xxuxxxbvxxxxxxxxxxotherid().equals("mail@yourdomain.com")){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("ERROR")+", "+this.instance.getC1xxuxxxbvxxxxxxxxxxotherid()+" "+bundle.getString("is")+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("email") ,""));
            return;
        }


        if(doResendActivationEmail("gettingActi",this.instance.getC1xxuxxxbvxxxxxxxxxxotherid())){
         return;
        }

        if (!agreedToTermsOfUse) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("please")+" "+bundle.getString("agree")+" "+bundle.getString("to")+" "+bundle.getString("terms") ,""));

            return;
        }
        // check whether appname already exists and return
        if ((this.getClientName()!= null && this.getClientName().trim().length() ==0) | (this.getClientName() == null)) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("no")+" "+bundle.getString("client")+" "+bundle.getString("name")+" "+bundle.getString("entered") ,""));

            return;
        }
        if (this.getClientName().trim().length() > 35) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("client")+" "+bundle.getString("name")+" "+bundle.getString("length")+" "+this.getClientName().trim().length()+" > "+bundle.getString("35") ,""));

            return;
        }
        if ((this.getClientApplicationName() != null && this.getClientApplicationName().trim().length() ==0) | (this.getClientApplicationName() == null)    ) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("site")+" "+bundle.getString("name")+" "+bundle.getString("missing") ,""));

            return;
        }
        //clientApplicationName ->client enterpriseCompCode (35) which is site url prefix, also owner2 (40)
         
        if (this.getClientApplicationName().trim().length() > 35 ) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("site")+" "+bundle.getString("name")+" "+bundle.getString("length")+" "+this.getClientApplicationName().trim().length()+" > "+bundle.getString("35") ,""));

            return;
        }

        if (!this.getClientFullUrlName().trim().contains(this.getClientApplicationName().trim()) ) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("site")+" "+bundle.getString("url")+" "+this.getClientFullUrlName().trim()+" "+bundle.getString("does")+" "+bundle.getString("not")+" "+bundle.getString("contain")+" "+bundle.getString("site")+" "+bundle.getString("name")+" "+this.getClientApplicationName().trim() ,""));

         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("keyin")+" "+bundle.getString("or")+" "+bundle.getString("copy")+"/"+bundle.getString("paste")+" "+this.getClientApplicationName().trim() ,""));
            return;
        }


        if (this.getClientFullUrlName().trim().length() > 60 ) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("site")+" "+bundle.getString("url")+" "+bundle.getString("length")+" "+this.getClientFullUrlName().trim().length()+" > "+bundle.getString("60") ,""));
         bcontinue=false;         
         return;
        }


        ${clientEntityName?cap_first} client=null;;

        boolean smtpEnabled = true;
        String savedActivationKey="";
        String savedPassword="";
        try {
                 client =(${clientEntityName?cap_first}) entityManager
                  .createQuery(
                    "select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName AND cc.zexxzzfxhhxxxxxxxxxxstatusfl != :mclosed and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                      .setParameter("nKeyName","01").setParameter("mclosed",mclosed)
                       .setParameter("owner2", this.getClientApplicationName())
                        .getSingleResult();
                     if (client != null) {
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("website")+" "+bundle.getString("name")+" / "+bundle.getString("url")+" "+bundle.getString("prefix")+", "+bundle.getString("already")+" "+bundle.getString("taken")+" "+bundle.getString("use")+" "+bundle.getString("another") ,""));
                       return;
                      }
        } catch (NoResultException ignore) {
        } catch (Exception e) {
	 log.severe("Error checking new client "+this.getClientApplicationName()+" exists "+ e.getMessage());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"Error checking new client "+this.getClientApplicationName()+" exists "+ e.getMessage(),""));
         return;
        }
        // in future this part can be replaced by the new modular methods 

            // register sets via action sets theme  or usage(clientApplicationFunction, use default otherwise)
            // if from trial, addon product will have clientApplicationFunction as a1,a2,a3 etc 
            //and set here using parameter from
            // functionGroup and into from variable.
            // from now holds trial for which function as well as trial duration in days after 1,45 or 1a
            // allow for direct invoke when functionGroup not set so from is empty or has value but no trial period
        try {
            if(from == null || from.isEmpty()){
             from="1";//business and default duration 14 days (variable trialPeriod value but can be changed using Item misccode1)
             trialPeriod =14;
            }        
            String fromO=from; //114 or 4514 or 45365  
            if(!fromO.substring(0,1).equals("a") && fromO.length() == 1){  
             from=fromO.substring(0,1);//can be 2 digits as well like 67
             trialPeriod =14;
            }            
            if(!fromO.substring(0,1).equals("a") && from.length() > 1){
             if(fromO.substring(0,2).equals("45") || fromO.substring(0,2).equals("67") || fromO.substring(0,2).equals("89")){//
              from=fromO.substring(0,2);
              trialPeriod=fromO.length()>2?Integer.parseInt(fromO.substring(2)):14;
             }else{
              from=fromO.substring(0,1);
              trialPeriod=fromO.length()>1?Integer.parseInt(fromO.substring(1)):14;
             }
            }
            if(fromO.substring(0,1).equals("a") && fromO.length() >= 2){
             from=fromO.substring(0,2);
             trialPeriod=fromO.length()>2?Integer.parseInt(fromO.substring(2)):14;
            }
            //check for unknown from value and return
            if (!(from.equals("1") || from.equals("2") || from.equals("3")
               || from.equals("45") || from.equals("67") || from.equals("89")
                 || from.equals("a1") || from.equals("a2") || from.equals("a3") || from.equals("a4"))){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("Unknown")+" "+bundle.getString("product")+" "+bundle.getString("request")+" "+bundle.getString("for")+" "+fromO+", "+bundle.getString("try")+" "+bundle.getString("again") ,""));
             return;
            }
            switch(from){
             case "a1":
              themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business for theme
              clientApplicationFunction="esge";//stock addon general business theme
              break;
             case "a2":
              themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business for theme
              clientApplicationFunction="ecge";//ecommerce addon
              break;
             case "a3":
              themeName="Nature/Gene7.023544634959";//hardcode Nature/Generic/Organization for theme
              clientApplicationFunction="olge";//organization seat allocation addon
              break;
             case "a4":
              themeName="Nature/Gene7.023544634959";//hardcode Nature/Generic/Organization for theme
              clientApplicationFunction="oege";//organization event mgmt
              break;
            } 
        } catch (Exception e) {
	 log.severe("do register app function / trial period error"+ e.getMessage());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"Error checking Application usage and trial period "+ e.getMessage(),""));
         return;
        }


            //continu below, if register theme/function already set. tbd use rate table for flexibikity?? 
            if(themeName ==null || themeName.isEmpty()){
             themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business
            } 
            //if coming from ItemDetailsBrowse as 1,2,45 etc we need to set clientApplicationFunction value
            //jay how client later is going to select specific sub function ?? 6 vs 7 or within 6 ???
            if(clientApplicationFunction ==null || clientApplicationFunction.isEmpty()){
             switch(from){
              case "1":
               themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business for theme
               clientApplicationFunction="eege";//Business
               break;
              case "2":
               themeName="Nature/Gene6.354-129272933";//hardcode Nature/Generic/erp for theme
               clientApplicationFunction="efge";//ERP mfg
               break;
              case "3":
               themeName="Nature/Gene6.354-129272933";//hardcode Nature/Generic/Lab for theme
               clientApplicationFunction="elge";//Med Lab
               break;
              case "45":
               themeName="Nature/Gene9.968-629982659";//hardcode Nature/Generic/Organization for theme
               clientApplicationFunction="oage";//organization
               break;
              case "67":
               themeName="Nature/Gene7.023544634959";//hardcode Nature/Generic/Organization for theme
               clientApplicationFunction="scge";//Service Agency
               break;
              case "89":
               themeName="Nature/Gene6.0761136209321";//hardcode Nature/Generic/Organization for theme
               clientApplicationFunction="fsge";//News users forum
               break;
              default:
               clientApplicationFunction="eege";//hardcode
             } 
            } 

       Yxxxuq591xwwqqhxxxxxrate1f yxxxuq591xwwqqhxxxxxrate1f = yxxxuq591xwwqqhxxxxxrate1fList.getRaaspiIncentiveToEntity("PC",clientApplicationFunction.substring(0,2));
       if(yxxxuq591xwwqqhxxxxxrate1f !=null){
        product=yxxxuq591xwwqqhxxxxxrate1f.getB2xxuxxrbv51xxxxxxxxstepname();//  stepname holds item sid, since key can change
        if(product.equals("S") && yxxxuq591xwwqqhxxxxxrate1f.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")){
         product="281";//
        }
       }


        try {
            // first create the image and text data to be used by the new site,blobdataHome handles both
            //clientApplicationName is unique name within this cloud and can have alias public dns name like mitra.com
            enterprisecompcode=this.getClientApplicationName();
            owner2Code=enterprisecompcode;
            //enterprisecompcode is same as website name, owner2Code now refers to new client as owner2 not where createsite button exists
            if(enterprisecompcode.length() > this.clientFullUrlName.length()){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("prefix")+" "+bundle.getString("part")+" "+enterprisecompcode+" "+bundle.getString("exceeds")+" "+bundle.getString("url")+" "+this.clientFullUrlName ,""));
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("copy")+" "+bundle.getString("and")+" "+bundle.getString("paste")+" "+enterprisecompcode+" "+bundle.getString("as")+" "+bundle.getString("url")+" "+bundle.getString("prefix")+" "+bundle.getString("or")+" "+bundle.getString("keyin")+" "+bundle.getString("correct")+" "+bundle.getString("value") ,""));


              return;
            }
     
            // note owner2Code here has enterprisecompcode not raaspi until end of this method
            // all persist will use new site code not raaspi
            //(1)set default theme for the site
            ${blobdataEntityName}Home.copyDefaultsToUSER(vendor,themeName,owner2Code,this.getClientName(),this.instance.getC1xxuxxxbvxxxxxxxxxxotherid(),this.getClientApplicationFunction());
            if (!bcontinue){
             return;
            }
            //(2,3,4) copy ie default table values like account,rate etc and options are done at site activation time
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mactive);
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.setClientEmail(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid() );
            if (smtpEnabled) {
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
                this.instance.setA0xxukuxbvxxxxxxxxxxid("admin");
                savedActivationKey=getMD5Hash(this.instance.getA0xxukuxbvxxxxxxxxxxid() + this.getClientName() + this.getClientEmail() + System.currentTimeMillis());
                this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(savedActivationKey);
            } else {
                // TODO: Fix for production ... No way to activate using email
                // if SMTP is not enabled ...
                System.out.println("WARNING!!! SMTP eMailer not enabled ... partially activating user without email activation.");
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            }
            savedPassword=PasswordSupport.tempPassword();
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(savedPassword);
	    this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(savedPassword));
	    this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
	    this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
            calendare.add(Calendar.HOUR, 48);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
	    this.instance.setC2xxuxuaiv38xxxxxxxxalevel("I");
	    this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            inRegistrationAndCreateUser=true;
            this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            // in 2nd user persist a new client will also be created with owner2 set as owner2Code and enterprisecompcode set to enterprisecompcode .
            // also account,acintgr,acperiod will be cloned from 3rcomp owner2 to new account owner2
            subKey="admin";
            this.persist(owner2Code); // call persist with overdrive so that owner2Code has new site name, not the myflow name
            // during persist client will be created by createClientRegister because inRegistrationAndCreateUser 
            // in but copydefaultstoowner2 ie account,options etc will be delayed
            // to Sqladmin to avoid connection timeout ie server running long task
            // now persist backoffice manager user id2  
            this.clearInstance();
            this.instance=this.getInstance();
            //cripple this as wee but avoid another activation key, both will activate using one key
            this.instance.setC1xxuxxxbvxxxxxxxxxxotherid(this.getClientEmail());
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey("nonNull");
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            this.instance.setA0xxukuxbvxxxxxxxxxxid("manager");
            this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.tempPassword());
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(this.instance.getC4xxuxupivxxxxxxxxxxcurrpw());
            this.instance.set${userNotes?cap_first}(savedPassword+"  and  "+this.instance.getC4xxuxupivxxxxxxxxxxcurrpw());
	    this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(this.instance.getC4xxuxupivxxxxxxxxxxcurrpw()));
	    this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
            // calendar gets altered in clientregister ie 3 months added for trial end
	    this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
            calendare.add(Calendar.HOUR, 48);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
	    this.instance.setC2xxuxuaiv38xxxxxxxxalevel("U");
	    this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            inRegistrationAndCreateUser=true;
            this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
            // in following user persist a new client will also be created with owner2 set as owner2Code and enterprisecompcode set to enterprisecompcode .
            // also account,acintgr,acperiod will be cloned from 3rcomp owner2 to new account owner2
            subKey="manager";
            this.persist(owner2Code);

            if (smtpEnabled) {
                try {
                   // will be addressed to admin using manager record (passwords and email are saved in both)
                   Emailsend("/getactivation.xhtml"," to you- "+this.getClientEmail());
                } catch (Exception zzz) {
                    log.severe("${'#'}{messages['getting_activation_email_send_failed']}"+ zzz.getMessage());

                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,bundle.getString("email")+" "+bundle.getString("send")+" "+bundle.getString("failed")+", "+bundle.getString("will")+" "+bundle.getString("be")+" "+bundle.getString("resent")+" "+bundle.getString("later"),""));

                }

                try {
                   // send another email to support group for their actions
                   Emailsend("/activationSetup.xhtml"," to our support team for their actions");
                } catch (Exception zzz) {
                    log.severe("${'#'}{messages['activation_setup_email_send_failed']}"+ zzz);

                }
                //doMasterSite() is used for masterSite and does not use this method doRegister()
                
            }//not smtp 
            if(hostingAt.equals("op")){
             // automate openshift router create. createClientRegister created new client yxxxch522xhhxxhxxxxxclient
             //following creates the new route entry and also calls copydefaults and copyOptions
             r3RestClient.openAuthorize("r",yxxxch522xhhxxhxxxxxclient);
             //the above will not copy defaults etc if no record 08 , so support need to invoke email trial license ready from dashboard
                  try{
                   Thread.sleep(3000);//2 secs
                   log.severe("${'#'}{messages['thread_sleep_ist_2secs done']}");
                   Thread.sleep(2000);//2 secs

                  }catch (Exception e){
                    log.severe("${'#'}{messages['thread_sleep_failed']}"+ e.getMessage());
                  }
            }else{
             log.severe("No automated routing, go to dashboard / clientActions and send Email activation ");
            }
            this.registrationScreenName = null;
            this.instance = null; // do this last ... just to reset the register
            // form ...
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("Create")+" "+bundle.getString("site")+" "+bundle.getString("completed")+" "+bundle.getString("for")+" "+this.getClientApplicationName()+", "+bundle.getString("check")+" "+bundle.getString("email"),""));
            if(urlPort !=8080){
                   externalContext.redirect(masterSiteUrl+"/installAppStatus.wflow?websiteName="+owner2Code+"&websiteFullUrl="+this.getClientFullUrlName());
            }else{
                   externalContext.redirect(masterSiteUrl+":8080/installAppStatus.wflow?websiteName="+owner2Code+"&websiteFullUrl="+this.getClientFullUrlName());
            }

        } catch (Exception exc) {
            try {
            } catch (Exception ignore) {
            }

            // NOTE: we don't return the Exception message back to the newUser
            // because it may reveal too much information to a hacker
            log.severe(exc.getMessage());
            //statusMessages.addToControlFromResourceBundle("registerButton", ERROR, "general_reg_error");
        }

    }

	public String showInstallStatus() {
           try{
               //if called from xhtml use return to navigate, cannot use direct externalContext.redirect
               // js go.history(-1) did not work
               return "installAppStatus.wflow??faces-redirect=true&websiteName="+this.clientApplicationName+"&email="+this.getInstance().getC1xxuxxxbvxxxxxxxxxxotherid()+"&registrationName="+this.clientName+"&functionGroup="+this.from;
           } catch (Exception exc) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("redirect")+" "+bundle.getString("failed")+" "+bundle.getString("for")+" "+this.clientApplicationName +", "+exc.getMessage(),""));
            return null;
           }
        }

    @Transactional
    // comes here via pages.xml entry
    //may come here because of new incoming email and processed by mandrll site 
    // need to add logic to validate post data and process email data

    public void doImail(String postData) {
    }

    @Transactional
    /**
    * method is used to unsubcribe from mailing  
    * comes here via f:viewAction 
    * may come here because of new incoming email and processed by sendgrid site 
    * need to add logic to validate post data and process email data
    * @return void
    * @param type 1 for customer,2 vendor, 3 employee
    * it is assumed hacker wont be able to guess the combination of keycode and sid. risk and impact is low
    * @exception no record found
    */ 
    public void doUnsc(String keyCode,Integer unsc,int type) {
        switch (type){
         case 1:
          Query q = entityManager.createQuery("select cc from ${customerEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxcustomer=:keyCode and cc.a0xxuobxbxxxxxxxxxxxsid=:unsc");
          ${customerEntityName?cap_first} unc = null;
          q.setParameter("keyCode", keyCode);
          q.setParameter("unsc", unsc);
          try {
            unc = (${customerEntityName?cap_first}) q.getSingleResult();
            unc.setZaxxzzfxhhxxxxxxxxxxstatusfl(unc.getZaxxzzfxhhxxxxxxxxxxstatusfl() | mnoMail );
            unc.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
            ${customerEntityName}Home.setInstance(unc);
            ${customerEntityName}Home.persist();
          } catch (javax.persistence.NoResultException nre) {
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("unsubscribe")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

          }
          return;
         case 2:
          q = entityManager.createQuery("select cc from ${vendorEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxvendor=:keyCode and cc.a0xxuobxbxxxxxxxxxxxsid=:unsc");
          ${vendorEntityName?cap_first} unv = null;
          q.setParameter("keyCode", keyCode);
          q.setParameter("unsc", unsc);
          try {
            unv = (${vendorEntityName?cap_first}) q.getSingleResult();
            unv.setZdxxzzfxhhxxxxxxxxxxstatusfl(unv.getZdxxzzfxhhxxxxxxxxxxstatusfl() | mnoMail );
            unv.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
	       ${vendorEntityName}Home.setInstance(unv);
            ${vendorEntityName}Home.persist();
          } catch (javax.persistence.NoResultException nre) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("unsubscribe")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

          }
          return;
         case 3:
          q = entityManager.createQuery("select cc from ${employeeEntityName?cap_first} cc where cc.a0xxuktxbvxxxxxxxxxxemployee=:keyCode and cc.a0xxuobxbxxxxxxxxxxxsid=:unsc");
          ${employeeEntityName?cap_first} une = null;
          q.setParameter("keyCode", keyCode);
          q.setParameter("unsc", unsc);
          try {
            une = (${employeeEntityName?cap_first}) q.getSingleResult();
            une.setZexxzzfxhhxxxxxxxxxxstatusfl(une.getZexxzzfxhhxxxxxxxxxxstatusfl() | mnoMail );
            une.setZfxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
	       ${employeeEntityName}Home.setInstance(une);
            ${employeeEntityName}Home.persist();
          } catch (javax.persistence.NoResultException nre) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("unsubscribe")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

          }
          return;
        }
    }

    @Transactional
    /**
    * method is used to subcribe to mailing  
    * comes here via f:viewAction 
    * may come here because of new incoming email and processed by sendgrid site 
    * need to add logic to validate post data and process email data
    * @return void
    * @param type 1 for customer,2 vendor, 3 employee
    * it is assumed hacker wont be able to guess the combination of keycode and sid. risk and impact is low
    * @exception no record found
    */ 

    public void dosc(String keyCode,Integer unsc,int type) {
        switch (type){
         case 1:
          Query q = entityManager.createQuery("select cc from ${customerEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxcustomer=:keyCode and cc.a0xxuobxbxxxxxxxxxxxsid=:unsc");
          ${customerEntityName?cap_first} unc = null;
          q.setParameter("keyCode", keyCode);
          q.setParameter("unsc", unsc);
          try {
            unc = (${customerEntityName?cap_first}) q.getSingleResult();
            unc.setZaxxzzfxhhxxxxxxxxxxstatusfl(unc.getZaxxzzfxhhxxxxxxxxxxstatusfl() & _mnoMail );
            unc.setZbxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
           ${customerEntityName}Home.setInstance(unc);
            ${customerEntityName}Home.persist();
          } catch (javax.persistence.NoResultException nre) {
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("unsubscribe")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
          }
          return;
         case 2:
          q = entityManager.createQuery("select cc from ${vendorEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxvendor=:keyCode and cc.a0xxuobxbxxxxxxxxxxxsid=:unsc");
          ${vendorEntityName?cap_first} unv = null;
          q.setParameter("keyCode", keyCode);
          q.setParameter("unsc", unsc);
          try {
            unv = (${vendorEntityName?cap_first}) q.getSingleResult();
            unv.setZdxxzzfxhhxxxxxxxxxxstatusfl(unv.getZdxxzzfxhhxxxxxxxxxxstatusfl() & _mnoMail );
            unv.setZexxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
            ${vendorEntityName}Home.setInstance(unv);
            ${vendorEntityName}Home.persist();
          } catch (javax.persistence.NoResultException nre) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("unsubscribe")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

          }
          return;
         case 3:
          q = entityManager.createQuery("select cc from ${employeeEntityName?cap_first} cc where cc.a0xxuktxbvxxxxxxxxxxemployee=:keyCode and cc.a0xxuobxbxxxxxxxxxxxsid=:unsc");
          ${employeeEntityName?cap_first} une = null;
          q.setParameter("keyCode", keyCode);
          q.setParameter("unsc", unsc);
          try {
            une = (${employeeEntityName?cap_first}) q.getSingleResult();
            une.setZexxzzfxhhxxxxxxxxxxstatusfl(une.getZexxzzfxhhxxxxxxxxxxstatusfl() & _mnoMail );
            une.setZfxxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
            ${employeeEntityName}Home.setInstance(une);
            ${employeeEntityName}Home.persist();
          } catch (javax.persistence.NoResultException nre) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("unsubscribe")+" "+bundle.getString("record")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));

          }
          return;
        }
    }


    @Transactional
    /**
    * method is used to activate new user after signup or create site  
    * comes here via f:viewAction 
    * may come here because of new site and client registration ie admin,manager or new SignUp or new Demo User
    * doSignUp and doRegister and doDemo all sends activation link via EMail and on receive will invoke doActivate 
    * which finds the user which has activation pending and process it
    * @return void
    * @param none
    * @exception no record found
    */ 

    public void doActivate(String activationKey) {
        Query q = entityManager.createQuery("select cc from ${userEntityName?cap_first} cc where cc.c9xxuxxxbvxxxxxxxxxxactivationkey=:activationKey");
        q.setParameter("activationKey", activationKey);
        ${userEntityName?cap_first} activatedUser = null;
        try {
            activatedUser = (${userEntityName?cap_first}) q.getSingleResult();
        } catch (javax.persistence.NoResultException nre) {
            // safe to ignore ...
        }
        if (activatedUser != null) {
           activatedUser.setC9xxuxxxbvxxxxxxxxxxactivationkey(null);
           activatedUser.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mactive);
           // now take care of the other id activation in case 2 ids ie admin/manager are involved or exit if visitor ie single id
           if (!activatedUser.getA0xxukuxbvxxxxxxxxxxid().equals("admin")) {
            return;
           }
          ${userEntityName?cap_first} the2ndUser  = new ${userEntityName?cap_first}();
          try {
                 the2ndUser = (${userEntityName?cap_first}) entityManager
	.createQuery(
	"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid='manager' AND cc.z1xxzzfxhhxxxxxxxxxxstatusfl=:statusfl and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
	.setParameter("statusfl", mpartial).setParameter(
	"owner2", owner2Code).getSingleResult();
                if (the2ndUser != null) {
                 the2ndUser.setC9xxuxxxbvxxxxxxxxxxactivationkey(null);
                 the2ndUser.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mactive);
                }
            } catch (NoResultException ignore) {
		}
                try {
                 // now send an email to manager re steps to setup site but needs to setup userhome instance
                 ${userEntityName}Home.getInstance();
                 ${userEntityName}Home.setInstance(activatedUser);
                 Emailsend("/siteSetupSteps.xhtml","to you explaining site set up steps");
                } catch (Exception zzz) {
	    log.severe(" siteSetupSteps Send eMail failed: " + zzz.getMessage());
                }


        } else {
            // home pages are reloaded to fix item/issue label or user may reload so via pages this method will get called, supress message
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,"${componentName} "+bundle.getString("no")+" "+bundle.getString("user")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+bundle.getString("activation")+" "+bundle.getString("key")+" "+activationKey,""));

        }
        
    }



	public void Emailsend(String content) {
                //content is the xxx.xhtml with mail tags.
                // called by doregister,doactivation,r3restclient doQuickregister etc. 
                             
                bcontinue=true;
		try {
		 //renderer.render(content);
                 emailRender(content);
                 if(bcontinue){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    //FacesMessage.SEVERITY_INFO,bundle.getString("email")+" "+ bundle.getString("sent")+" "+bundle.getString("sucessfully"),""));
                    FacesMessage.SEVERITY_INFO,bundle.getString("email")+" "+ bundle.getString("sent"),""));
                 }else{
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("email")+" "+ bundle.getString("send")+" "+bundle.getString("failed"),""));
                 } 
		} catch (Exception e) {
                  /* logging/msg for exceptions are in emailrender now

                    //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    //FacesMessage.SEVERITY_INFO,bundle.getString("email")+" "+ bundle.getString("send")+" "+bundle.getString("failed")+" "+e.getMessage(),""));
                    if(e.getCause() !=null && e.getCause().getCause()!=null){
                      String rootMsg=e.getCause().getCause().getMessage();
                      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                       FacesMessage.SEVERITY_INFO,bundle.getString("cause")+" "+ rootMsg,""));
  		      log.severe("Error sending mail "+ e.getMessage());

                    }
                  */

		}
	}
/**
*  used to send emails and called by master and other sites for admin functions like site activation, pw reset
* 1. if mailRelayoff  in client version/record 01 has checkmark blank (default) , then gather mailRelay (05 record) smtp server/port/etc information ,
* 2. if mailRelayoff has checkMark on, then gather site (01 record) smtp server/port/etc information
* 3. Then gather gmail server information, if record 07 has information
* 4  If valid gMail info then use it, otherwise use mailRelay or site smtp depending on mailRelayOff checkbox.
* 5. As redundancy, mailRelay will be tried if other options fail 
* in case of activations, there are two owner2/clients involved one is new client and raaspi
* allways use the url to resolve since for a new client email will be sent from master site
" @see "xxxcustomerlist emailRender method used by all sites to send emails and txns email"
* @see "createClientRecord01 for record01 and 05"
*/ 
        public Void emailRender(String content) throws MessagingException, IOException{
         // in case of activations, there are two owner2/clients involved one is new client and raaspi
         // allways use the url to resolve since for a new client email will be sent from raaspi
         // called by raaspi and other sites for admin functions like site activation, pw reset
         String bodyj="";//
         String smtpOwner=owner2Code;
         // check if master site, a subdomain serverName can also include master site name 
         if(customIdentity.isMasterSite()){                 
         /*if((req.getServerName().contains("raaspi.com") && !req.getServerName().contains(".raaspi.com") && !req.getServerName().contains(".lraaspi.com"))
                  ||  (req.getServerName().contains("www.raaspi.com") ||  req.getServerName().contains("raaspi.lraaspi.com"))
                    || content.equals("/siteSetupSteps.xhtml")){
         */
          smtpOwner=masterSiteCode;
         }
  
         // add case stmt for content and populate the following variables and use diff template
         /// remove hard coded values, create new templtes like template.html.paasword_reset.freemarker
         /// templates will replace subject and body only

         String fromName = this.owner2Code;//can be overridden 
         String fromAddress = " ";//override this with xxx.yyyy.com where yyyy.com is registered with sendgrid or mail relay server
         if(!mailRelayOff){
          fromAddress ="via@"+customIdentity.getMasterSiteUrl(); // via@3rcomputer.com if mailRelay otherwise smtpuser say mail@raaspi.com  or xxx@gmail.com
         }else{
          fromAddress=this.getClientEmail();//useremployee/client email
         }
         String fromAddress05=fromAddress;
         String siteAddress05="";// if site uses email address using another domain name
         // re fromAddress, if mailrelayOff  domain name should match smtp host, otherwise you may get spam or phising warning
         // client/employee record further down holds email address, if mailRelay, smtp smtp host is 3rcomputer
         //do not change clientEmail as it contains passwords for activation.fmt
         String replyToName = "No Reply";// implies system generated email
         String replyToAddress ="no-reply@" +customIdentity.getMasterSiteUrl(); //no-reply@3rcomputer.com
         String replyToAddresso5=replyToAddress;
         String toName = ""; //specify in case stmt as needed, clientEmail holds passwords if activation.fmt
         String toAddress ="";// specify in case stmt
         String ccName = "support";
         String ccAddress = "support@"+customIdentity.getMasterSiteUrl();
         // remove hardcoding , store in client record 01
         String host05="smtp.sendgrid.net";
         String host="smtp.sendgrid.net";
         int port05=587;
         int port=587;//465 is used for ssl only, which is replaced by tls. 587 is used by both tls and non ssl
         String userName05="apikey";
         String userName="apikey";
         String password05="SG.BxxxxxxxxxxyyyyyiBg";//manually enter in client record 05
         String password="SG.BxxxxxxxxxxyyyyyiBg";//manually enter in client records
         boolean auth=true;
         String auth_mechanisms="LOGIN PLAIN DIGEST-MD5 NTLM";
         //gmail use XOAUTH2 , if null auth will use id/password, if XOAUTH2 then email as id/access token 
         // as password. if client version 07 record has value in id (refresh token) and in secret(access token) 
         // then set XOAUTH2 so that java mail will use OAUTH. client version 01 will still hold id/pw for
         // non gmail send like sendgrid or hostpapa or zoho smtp send
         boolean ssl=false;
         mailRelayOff=false;
         String htmlBody = "<html><body><b>Hello</b> World!</body></html>";
         String textBody = "This is a Text Body!";
         //envelop_from_address is used for bounce reply ie for invalid address or spam detection, like a package return address as in postoffice
         //fromAddress shows the actual email from address and either that or if present replyToAddres is where email reply will goto, like the sender of a package as in postoffice
         // most of the time they are are same but can be different if needed  
         String ENVELOPE_FROM_ADDRESS = "support@"+customIdentity.getMasterSiteUrl(); //support@3rcomputer.com, override and make this same as fromAddress in case stmt
         // let the actual client see what got bounced rather than support@3rcomputer
         // jay needs testing before changing envelope from Address, may conflict with dkim record
         //SessionConfig mailConfig = TestMailConfigs.standardConfig();//TestMailConfigs.java
         try {
                 ${clientEntityName?cap_first} client =(${clientEntityName?cap_first}) entityManager
	.createQuery(
	"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
	.setParameter("nKeyName","01")
	.setParameter("owner2", smtpOwner)
	.getSingleResult();
                  if (client == null) {
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,bundle.getString("create") +" "+bundle.getString("site") +" "+smtpOwner+" "+bundle.getString("first"),""));
                       return null ;
                  }

                      if(client.getY1xxuxxxbvxxxxxxxxxxrootdir()!=null && !client.getY1xxuxxxbvxxxxxxxxxxrootdir().isEmpty()){
                       fromName = client.getY1xxuxxxbvxxxxxxxxxxrootdir();//rootdir holds smtp email send fromname (default owner2)
                      }
                      if(client.getP1xxfxxxbvxxxxxxxxxxconfirm()!=null ){
                        mailRelayOff=client.getP1xxfxxxbvxxxxxxxxxxconfirm();
                      }else{//null means default is mailrelay
                        mailRelayOff=false;
                      }
                      if(!mailRelayOff){
                       //means mailRelayOn,added logic here to read default values from client record 05 for default smtp relay server like sendgrid
                       ${clientEntityName?cap_first} client05 =null;
                       try {
                              client05 =(${clientEntityName?cap_first}) entityManager
		.createQuery(
		"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		.setParameter("nKeyName","05")
		.setParameter("owner2", owner2Code)
		.getSingleResult();
                             if(client05 !=null ){
                              host=client05.getZ8xxuxxxbvxxxxxxxxxxsmtpserver();//exmpl smtp.sendgrid.net
                              port=client05.getL6xxzxxrbvxxxxxxxxxxaltselen();//use 587 as default
                              if (port==0){
                               port=587;
                              }
                              fromAddress=client05.getD5xxuxxrbvxxxxxxxxxxrmailaddr();//exmpl mail@raaspi.com 
                              fromAddress05=fromAddress;
                              siteAddress05=client05.getD4xxhxxrbv24xxxxxxxximailaddr();//exmpl mail@raaspi.com 
                              userName=client05.getZ9xxuxxxbvxxxxxxxxxxsmtpuser();//exmpl apikey if sendgrid. logic may need change to support other mailRelay server 
                              userName=client05.getZ9xxuxxxbvxxxxxxxxxxsmtpuser();//exmpl apikey if sendgrid. logic may need change to support other mailRelay server 
                              userName05=userName;
                              password=client05.getDbxxuzxdssxxxxxxxxxxapiclientsecret();//access token
                              password05=password;
                              if(password == null || password.isEmpty() || password.equals("SG.BxxxxxxxxxxyyyyyiBg") ){
                               smtpError=true; //both record 01 and 05 checked
                               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                FacesMessage.SEVERITY_INFO,bundle.getString("MailRelay")+" "+host+" "+bundle.getString("smtp")+" "+bundle.getString("password")+" / "+bundle.getString("ApiSecret")+" "+bundle.getString("information") +" "+bundle.getString("invalid"),""));
                               bcontinue=false;
                               return null;
                              }
                             }
                        } catch (Exception exc) {
                               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                FacesMessage.SEVERITY_INFO,bundle.getString("Client") +" "+bundle.getString("record")+" "+bundle.getString("05")+" "+bundle.getString("for")+" "+bundle.getString("mailRelay") +" "+bundle.getString("missing"),""));
                               bcontinue=false;
                               return null;
                        }
                      }else{
                       if(client.getZ8xxuxxxbvxxxxxxxxxxsmtpserver()!=null && !client.getZ8xxuxxxbvxxxxxxxxxxsmtpserver().isEmpty()){
                        host=client.getZ8xxuxxxbvxxxxxxxxxxsmtpserver();
                        //handle if mailrelayOff false by mistake, add logic in client persist/update
                        // may happen in local machine if virus protection running
                        if(!host.equals("smtp.sendgrid.net")){
                         fromAddress=userName;// apikey
                        }
                       }else{
                         smtpError=true;
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("host")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
                       }
                       if(client.getZ9xxuxxxbvxxxxxxxxxxsmtpuser()!=null && !client.getZ9xxuxxxbvxxxxxxxxxxsmtpuser().isEmpty()){
                        userName=client.getZ9xxuxxxbvxxxxxxxxxxsmtpuser();
                       }else{
                         smtpError=true;
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("userName")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
                       }
                       if(client.getZaxxuxxxssxxxxxxxxxxsmtppass()!=null && !client.getZaxxuxxxssxxxxxxxxxxsmtppass().isEmpty()){
                        password=client.getZaxxuxxxssxxxxxxxxxxsmtppass();
                       }else{
                         smtpError=true;
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("password")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
                       }
                       if(client.getL6xxzxxrbvxxxxxxxxxxaltselen()!=null && client.getL6xxzxxrbvxxxxxxxxxxaltselen() !=0){
                        port=client.getL6xxzxxrbvxxxxxxxxxxaltselen();
                       }else{
                         smtpError=true;
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("port")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
                       }
                       if(client.getO9xxfxxxbvxxxxxxxxxxbeepsou()!=null ){
                        auth=client.getO9xxfxxxbvxxxxxxxxxxbeepsou();
                       }else{
                         smtpError=true;
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("auth")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
                       }
                       if(client.getP2xxfxxxbvxxxxxxxxxxlinefeed()!=null ){
                        ssl=client.getP2xxfxxxbvxxxxxxxxxxlinefeed();
                       }else{
                         smtpError=true;
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("ssl")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
                       }
                       if(smtpError){
                        bcontinue=false;
                        return null;
                       } 
                      }
         } catch (Exception exc) {
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
            bcontinue=false;
          return null; 
         }
         ${clientEntityName?cap_first} client =null;
         // raaspi and lraaspi record 07 holds gmail Oauth app id/secret not refresh/access 
         if(owner2Code.contains(masterSiteCode) || owner2Code.contains("lraaspi")){
          //skip checking record 07, will not use gmail OAuth. It will use record 01 set up
         }else{
          // check Gmail smtp or not. Note client record below points to version 07 not 01
          try {
           client =(${clientEntityName?cap_first}) entityManager
		.createQuery(
		"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		.setParameter("nKeyName","07")
		.setParameter("owner2", owner2Code)
		.getSingleResult();

           if(client !=null && client.getDaxxuzxdssxxxxxxxxxxapiclientid() !=null && !client.getDaxxuzxdssxxxxxxxxxxapiclientid().isEmpty()
              && client.getDbxxuzxdssxxxxxxxxxxapiclientsecret() !=null && !client.getDbxxuzxdssxxxxxxxxxxapiclientsecret().isEmpty()){
            auth_mechanisms="XOAUTH2";//gmail smtp
            password=client.getDbxxuzxdssxxxxxxxxxxapiclientsecret();//access token
            //check if token expired and refresh if needed
            calendar.getTime();
            calendare.setTime(client.getZfxxcztxlxxxxxxxxxxxstatusfldt());
            calendare.add(Calendar.MINUTE, 59);
            if(calendare.before(calendar)){
             password=r3RestClient.getAccessTokenGMail(client.getDaxxuzxdssxxxxxxxxxxapiclientid(),"refresh_token",owner2Code );
            }      

            if(password == null || password.isEmpty()){
             smtpError=true; //both record 01 and 07 checked
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("GMail") +" "+bundle.getString("smtp")+" "+bundle.getString("password")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
             bcontinue=false;
             return null;
            }
           }else{
            //access token may fail, check for it in mail send 
            // if needed use restclient to request new access but avoid user permission by using refresh token
            // in restclient use scope offline (user not needed) to get refresh token
            //to get new token if expired use post json request and response
            //{\"client_id\":\""+client_id+"\",\"client_secret\":\""+client_secret+"\",\"grant_type\":\""+refresh_token+"\",\"refresh_token\":\""+refresh_token+"\",\"redirect_uri\":\""+redirect_uri+"\"}
            host="gmail";
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,host+" "+bundle.getString("client")+" "+bundle.getString("record") +" "+bundle.getString("version")+" "+bundle.getString("07") +" "+bundle.getString("needs")+" "+bundle.getString("both") +" "+bundle.getString("id")+" "+bundle.getString("and") +" "+bundle.getString("secret"),""));
             return null;
           }
          } catch (Exception exc) {
           //ignore no record 07 normal occurrence, can use resultList 
          }
          if(password == null || password.isEmpty()){// will come here only if record 01 pw missing
           smtpError=true; //both record 01 and 07 checked
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("client") +" "+bundle.getString("smtp")+" "+bundle.getString("password")+" "+bundle.getString("information") +" "+bundle.getString("missing"),""));
           return null;
          }
         }
         //below common for raaspi and others
         SessionConfig mailConfig = TestMailConfigs.standardConfig(host,port,userName,password,auth,ssl,auth_mechanisms);
         String messageId = "id@"+customIdentity.getMasterSiteUrl(); //jay@3rcomputer.com
         String resourceName="";  
  
 

         EmailMessage e=null;
         String uuid = java.util.UUID.randomUUID().toString();
         String subjectTemplate = "Text Message from ${version} Mail - " + uuid;
         String version = "simple-mail";
         String subject = "Text Message from " + version + " Mail - " + uuid;
         if(mailRelayOff){
            fromAddress=userName;// smtpuser mail@raaspi.com (raaspi)or jaymitra@3rcomputer.com (3rcomputer) valid email and dom part matches
            replyToAddress=fromAddress;//otherwise gmail puts via??
         }else{
            //relay being used , via@xxx needs to be specified and site may not have its own domain email . They need to be specified in client record 05 field 
            fromAddress=fromAddress05;// via@3rcomputer.com, assuming 3rcomputer smtp (privateemail)  is used for mailrelay (sendgrid)
            if(siteAddress05 != null && !siteAddress05.isEmpty()){
             ENVELOPE_FROM_ADDRESS =siteAddress05;
             toName =siteAddress05;
             toAddress =siteAddress05;
            }
         }

         switch (content) {
          //where sender can be other than raaspi/3rcomputer, override fromAddress to via@3rcomputer to match and avoid spam warning
          // if mailrelayOff fromAddress needs to contain site domain to avoid spam warning
          case "/password_reset.xhtml": 
           //resetPassword has new temp pw and lostPasswordUserId is the userId, fromName is site name ie owner2Code value
           toName = this.lostPasswordUserId;
           toAddress = this.recoveredPasswordEmail;
           subjectTemplate="Password Reset Notification from "+owner2Code;
           resourceName="password_reset.fmt";
           break;
          case "/activationSignUp.xhtml":
           //yxxxuh56userHome.newUserLink has activation value to trigger acti= via f:viewAction, fromName is site name
           // instance.c1xxuxxxbvxxxxxxxxxxotherid (also clientEmail) has to email, a0xxukuxbvxxxxxxxxxxid has new logon id 
           // and c6xxuxuoivxxxxxxxxxxoldpw has temp pw, clientName has user lastName
           toName = this.instance.getA0xxukuxbvxxxxxxxxxxid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate=owner2Code+" new user Activation-"+this.instance.getA0xxukuxbvxxxxxxxxxxid();
           resourceName="activationSignUp.fmt";
           break;
          case "/activationDemo.xhtml":
           //yxxxuh56userHome.newUserLink has activation value to trigger acti= via f:viewAction entry, fromName is site name
           // instance.c1xxuxxxbvxxxxxxxxxxotherid (also clientEmail) has email, a0xxukuxbvxxxxxxxxxxid has new logon id and c6xxuxuoivxxxxxxxxxxoldpw has temp pw
           toName = this.instance.getA0xxukuxbvxxxxxxxxxxid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate=owner2Code+" Demonstration Account Activation-"+this.instance.getA0xxukuxbvxxxxxxxxxxid();
           resourceName="activationDemo.fmt";
           break;
          case "/activation.xhtml":
           //this follows getactivation + activationSetup by doregister/doQuickRegister and later this activation sent via SqlAdmin
           // there is also siteSetupSteps as post activation (4 email content renders)
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate=this.instance.getZzxxu2oxxhxxxxxxxxxxowner2()+" - WorkFlow New Client Registration Activation";
           resourceName="activation.fmt";
           break;
          case "/getactivation.xhtml":
           //first email to client advising setup done email will come.  addded cc for support
           //user records already created for admin and manager,otherid holds entered email 
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           ccAddress="support@raaspi.com";//must match domain name
           subjectTemplate=this.instance.getZzxxu2oxxhxxxxxxxxxxowner2()+" - Create Site and Registration";
           resourceName="getactivation.fmt";
           break;
          case "/activationSetup.xhtml":
           toName = "support@"+customIdentity.getMasterSiteUrl(); //support@3rcomputer.com, alias will send to jaymitra@3rcomputer.com
           toAddress = "support@"+customIdentity.getMasterSiteUrl(); //support@3rcomputer.com
           subjectTemplate=this.instance.getZzxxu2oxxhxxxxxxxxxxowner2()+" -- server side Create Site Setup steps ";
           resourceName="activationSetup.fmt";
           break;
          case "/siteSetupSteps.xhtml":
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate=this.instance.getZzxxu2oxxhxxxxxxxxxxowner2()+" -New Site Post Activation activities";
           resourceName="siteSetupSteps.fmt";
           break;
          case "/endoftrial.xhtml":
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate="End of Trial for -"+this.instance.getZzxxu2oxxhxxxxxxxxxxowner2();
           resourceName="endoftrial.fmt";
           break;
          case "/licensed.xhtml":
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate="Subscription/Renewal for -"+this.instance.getZzxxu2oxxhxxxxxxxxxxowner2();
           resourceName="licensed.fmt";
           break;
          case "/noactivity.xhtml":
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate="No activity for -"+this.instance.getZzxxu2oxxhxxxxxxxxxxowner2();
           resourceName="noactivity.fmt";
           break;
          case "/subscribed.xhtml":
           toName = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           toAddress = this.instance.getC1xxuxxxbvxxxxxxxxxxotherid();
           subjectTemplate="Subscription Renewal for -"+this.instance.getZzxxu2oxxhxxxxxxxxxxowner2();
           resourceName="subscribed.fmt";
           break;
         }

    if(!mailRelayOff){
     try {
        SMTPAPI header = new SMTPAPI();
         // jay put sender's name here instead of blank ie loop through but dont send ?, mailInfo may already have attach info
         // build x-smtpi header
         header.addCategory(owner2Code);// can be used in webhook
         header.addTo(toAddress);
         header.addSubstitution("keyx", "ignore");
         header.addSubstitution("unx", "0");
         headers = header.jsonString();
     }catch (Exception ex){
	log.severe("Error creating smtpi-X,"+ ex);//continue, user need not know
     }
    }
       try{
         //no attachments now,for future check eRender logic in entityList.  build msg but send after msg is saved in clob  
         // added try/catch to be able to continue here in case send fails but e(mail message) will be null

        if(!mailRelayOff){//sendgrid bulk email, tbd add support and support@raaspi.com as extra To
         if(content.equals("/getactivation.xhtml")){
            e =
             new MailMessageImpl(mailConfig).from(MailTestUtil.getAddressHeader(fromName, fromAddress)).replyTo(replyToAddress).to(MailTestUtil.getAddressHeader(toName, toAddress)).subject(
              new FreeMarkerTemplate(subjectTemplate)).bodyHtml(new FreeMarkerTemplate(Resources.newInputStreamSupplier(Resources.getResource(resourceName)).getInput()))
              .put("yxxxuh56userHome", this).addHeader("X-SMTPAPI",this.headers).importance(MessagePriority.HIGH).send();
         }else{
            e =
             new MailMessageImpl(mailConfig).from(MailTestUtil.getAddressHeader(fromName, fromAddress)).replyTo(replyToAddress).to(MailTestUtil.getAddressHeader(toName, toAddress)).subject(
              new FreeMarkerTemplate(subjectTemplate)).bodyHtml(new FreeMarkerTemplate(Resources.newInputStreamSupplier(Resources.getResource(resourceName)).getInput()))
               .put("yxxxuh56userHome", this).addHeader("X-SMTPAPI",this.headers).importance(MessagePriority.HIGH).send();
         }
        }else{//email service txn email,tbd add support and support@raaspi.com as CC .cc(MailTestUtil.getAddressHeader(ccName, ccAddress)) worked infrequent socket reset
         if(content.equals("/getactivation.xhtml")){
            e =
              new MailMessageImpl(mailConfig).from(MailTestUtil.getAddressHeader(fromName, fromAddress)).replyTo(replyToAddress).to(MailTestUtil.getAddressHeader(toName, toAddress)).subject(
               new FreeMarkerTemplate(subjectTemplate)).bodyHtml(new FreeMarkerTemplate(Resources.newInputStreamSupplier(Resources.getResource(resourceName)).getInput()))
                .put("yxxxuh56userHome", this).importance(MessagePriority.HIGH).send();
         }else{
            e =
              new MailMessageImpl(mailConfig).from(MailTestUtil.getAddressHeader(fromName, fromAddress)).replyTo(replyToAddress).to(MailTestUtil.getAddressHeader(toName, toAddress)).subject(
               new FreeMarkerTemplate(subjectTemplate)).bodyHtml(new FreeMarkerTemplate(Resources.newInputStreamSupplier(Resources.getResource(resourceName)).getInput()))
                .put("yxxxuh56userHome", this).importance(MessagePriority.HIGH).send();
         }
        }

        }catch(Exception ex){
         bcontinue=false;
         log.severe("Error in sending email"+ ex);//continue
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("Email") +" "+bundle.getString("send")+" "+bundle.getString("failed") ,""));
          String cause="";
          if(ex.getCause() !=null && ex.getCause().getCause()!=null){
           cause=ex.getCause().getCause().getMessage();
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("cause")+" "+ ex.getCause().getCause().getMessage(),""));
          }

         //continue
         // retry with refresh if failed on bad token or expired token then only get a new token using
         // existing refresh token(client site record 07 clientId)
         // send again using new token is there subcode for expired or check token expiry?
         if(cause.contains("334")){
          password=r3RestClient.getAccessTokenGMail(client.getDaxxuzxdssxxxxxxxxxxapiclientid(),"refresh_token",owner2Code );
          //reset token but continue with alternate for now
         }

        }
        //bodyj holds id/pw and saved in system clobdata as mail-sent for any send from here
        if(this.instance !=null){
             // if doregister comes twice getactivation and then by activationSetup
             bodyj=bodyj+"The LogOn Ids are: admin and manager, The Passwords are: "+this.instance.getY7xxuxznbvxxxxxxxxxxnotes()+" activation:"+newUserLink;
        }else{
             bodyj=bodyj+" id: "+this.getLostPasswordUserId()+" tempPW "+this.getResetPassword() ;
        }

        // try sending using mailRelay first then save in clob, need to use revised mailconfig 
        if(e==null && mailRelayOff==true){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Alternate")+" "+bundle.getString("Email") +" "+bundle.getString("send")+" "+bundle.getString("being")+" "+bundle.getString("tried") ,""));
         mailRelayOff=false;
         host=host05; //smtp.sendgrid.net
         port=port05;//587, 465 is used for ssl only, which is replaced by tls. 587 is used by both tls and non ssl
         userName=userName05; //apikey
         password=password05;//SG.xxxxg
         auth=true;
         ssl=false;
         mailConfig = TestMailConfigs.standardConfig(host,port,userName,password,auth,ssl,auth_mechanisms);

         try {
          SMTPAPI header = new SMTPAPI();
          // jay put sender's name here instead of blank ie loop through but dont send ?, mailInfo may already have attach info
          // build x-smtpi header
          header.addCategory(owner2Code); //can be used in webhook
          header.addTo(toAddress);
          header.addSubstitution("keyx", "ignore");
          header.addSubstitution("unx", "0");
          headers = header.jsonString();
         }catch (Exception ex){
	  log.severe("Error creating smtpi-X,"+ ex);//continue, user need not know
         }
         try{
            e =
                    new MailMessageImpl(mailConfig).from(MailTestUtil.getAddressHeader(fromName, fromAddress)).replyTo(replyToAddress).to(MailTestUtil.getAddressHeader(toName, toAddress)).subject(
                            new FreeMarkerTemplate(subjectTemplate)).bodyHtml(new FreeMarkerTemplate(Resources.newInputStreamSupplier(Resources.getResource(resourceName)).getInput()))
                            .put("yxxxuh56userHome", this).addHeader("X-SMTPAPI",this.headers).importance(MessagePriority.HIGH).send();
         }catch(Exception ex){
	  log.severe("Error in alternate sending via relay"+ ex);//continue
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("Alternate")+" "+bundle.getString("Email") +" "+bundle.getString("send")+" "+bundle.getString("failed") ,""));
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("Please")+" "+bundle.getString("try") +" "+bundle.getString("later") ,""));
          bcontinue=false;


         }
        }
        // save in client clobdata, if pwreset extra save in system clobdata
        //do not use e it can be null if failure. for htmlbody save the needed information in text since cannot use freemarker
                // send can fail/blocked, so keep a copy in clob after send, data is available after send 
                 //MAIL-SENT used by icalsend and system send, MAIL-CONTENT used by customer/ventor/employee Mailing
	         // do not reuse but new seq because unlike MAIL-CONTENT, no control when gets created and overwritten
                 // automatic purge of these and others if date is old
               if(!content.contains("/activationSetup")){// already done by getactivation
		try {
                  yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();
		  yxxxuq1m1xwwqqqxxxxxclobdata = yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance();
		  yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey("MAIL-SENT");
                  int jay=  yxxxuq1m1xwwqqqxxxxxclobdataList.getNextSeqAvailable("clobdata","AMAIL-SENT",content.substring(1,content.length()-6),0);
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA3xxexnsbvxxxxxxxxxxsequence(jay);
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA2xxuxxxbv50xxxxxxxxqualifier(content.substring(1,content.length()-6));
                  yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata("to: "+toAddress+" from: "+fromAddress+" subject: "+subjectTemplate+" body: "+bodyj);
                  yxxxuq1m1xwwqqqxxxxxclobdata.setA4xxexxxbvxxxxxxxxxxtype("txt");
                  yxxxuq1m1xwwqqqxxxxxclobdataHome.persist();
                  // newUserLink does not hold activation value at this time, get from user/admin record
                  // better move this log to doQuickRegister/DoRegister as well
		 log.severe("in case clob not saved,debug code "+ownerCode+"/"+owner2Code+","+resetPassword+" xx:"+lostPasswordUserId);//continue, user need not know

                }catch (Exception ex){
		 log.severe("Error saving mail-sent for "+ownerCode+"/"+owner2Code+","+ ex);//continue, user need not know
		 log.severe("debug code "+ownerCode+"/"+owner2Code+","+resetPassword+" xx:"+lostPasswordUserId);//continue, user need not know
                }
               }
               // create/update a record  like mail-content in raaspi for any other site pw reset, in case site manager gets locked out.
               // unlike above, this saves in SYSTEM
               if(content.contains("/password_reset")){
		try {
		 yxxxuq1m1xwwqqqxxxxxclobdata = yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataSystemInstance("clobdata","AMAIL-SENT","pwreset",0);
                 if(yxxxuq1m1xwwqqqxxxxxclobdata == null){   
                  yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();
		  yxxxuq1m1xwwqqqxxxxxclobdata = yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance();
		  yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata");
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey("MAIL-SENT");
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA3xxexnsbvxxxxxxxxxxsequence(0);
		  yxxxuq1m1xwwqqqxxxxxclobdata.setA2xxuxxxbv50xxxxxxxxqualifier("pwreset");
                  yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata("to: "+toAddress+" from: "+fromAddress+" subject: "+subjectTemplate+" body: "+bodyj);
                  yxxxuq1m1xwwqqqxxxxxclobdata.setA4xxexxxbvxxxxxxxxxxtype("txt");
                  yxxxuq1m1xwwqqqxxxxxclobdataHome.persist("SYSTEM");
                 }else{
                  String jay=yxxxuq1m1xwwqqqxxxxxclobdata.getB1xxuzaxbvxxxxxxxxxxdata();
                    
                  yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(jay+" to: "+toAddress+" from: "+fromAddress+" subject: "+subjectTemplate+" body: "+bodyj);
                  yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                  yxxxuq1m1xwwqqqxxxxxclobdataHome.allowUpdate();
                 }
                }catch (Exception ex){
		 log.severe("Error saving mail-sent for pwreset/SYSTEM, "+ ex);//continue, user need not know
                }
               }
             return null;
        }





	public void Emailsend(String content,String msg) {
                //content is the xxx.xhtml with mail tags
                // called by doregister,doactivation etc
		try {
				//renderer.render(content);
                                emailRender(content);
                                if(!msg.equals("no")){ 
                                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("email") +" "+bundle.getString("sent") +" "+bundle.getString("sucessfully")+" "+msg,""));

                                }
		} catch (Exception e) {
			//log.severe("Error sending mail "+ e); all exceptiion logging/msg in emailrender now
                        //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     //FacesMessage.SEVERITY_ERROR,bundle.getString("email") +" "+bundle.getString("send") +" "+bundle.getString("failed")+" "+e.getMessage(),""));

		}
	}
	public void createCustomerAddressSignup() {
    /**
    * Method creates customer and address record for a user. if address information not available a placeholder is created
    * so that user can modify it later. visitors can only list and modify but not create new record, 
    * @param none
    * @return void
    * @exception none
    * @see 
    * 
    */ 
       
	if (${addressEntityName} == null) {
	    ${addressEntityName}=${addressEntityName}Home.getInstance();
	}
              if(${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1() == null || ${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1().isEmpty() ){
               ${addressEntityName}.setB1pxusa1bvxxxxxxxxxxaddrl1(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" address");
              }//
              if(${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity() == null || ${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity().isEmpty() ){
               if(this.instance.getA0xxukuxbvxxxxxxxxxxid().length()>14){      
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid().substring(0,14)+" City");
               }else{
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" City");
               } 
              }
              subKey=${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1()+${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity();
              if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
               // 
               ${addressEntityName}.setA0xxukbxbxxxxxxxxxxxaddrescode(subKey);
               ${addressEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               ${addressEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
               ${addressEntityName}Home.persist();
               bcontinue=true;
              }else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+bundle.getString("address")+" "+subKey+" "+bundle.getString("error"),""));

               bcontinue=false;
              }

	if (${customerEntityName} == null) {
	    ${customerEntityName}=${customerEntityName}Home.getInstance();
	}
              subKey=this.getClientName()+this.getA0xxukuxbvxxxxxxxxxxid2();
              if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
              }

      ${customerEntityName}.setA0xxukxxbvxxxxxxxxxxcustomer(subKey);
      ${customerEntityName}.set${customerFirstName?cap_first}(this.getA0xxukuxbvxxxxxxxxxxid2());
      ${customerEntityName}.set${customerLastName?cap_first}(this.getClientName());
      ${customerEntityName}.setD1xxu3cnbvixxxxxxxxxcustomerascompanyname(this.getCompanyName());
      ${customerEntityName}.setQ4xxhxxxbv24xxxxxxxximailaddr(this.getClientEmail());
      ${customerEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      ${customerEntityName}.setZdxxutoxlhxxxxxxxxxxowner(ownerCode);
      ${customerEntityName}.setF2xxuwmxbv40xxxxxxxxintegrset("DEFAULT");
      if (bcontinue){
       ${customerEntityName}.set${addressEntityName?cap_first}ByMailtocode(${addressEntityName});
       ${customerEntityName}.set${addressEntityName?cap_first}ByShiptocode(${addressEntityName});
      }
      ${customerEntityName}Home.persist();
      bcontinue=true;

      return;
     

     }


	public void createVendorAddressSignup() {
	if (${addressEntityName} == null) {
	    ${addressEntityName}=${addressEntityName}Home.getInstance();
	}
              if(${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1() == null){
               ${addressEntityName}.setB1pxusa1bvxxxxxxxxxxaddrl1(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" address");
              }//
              if(${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity() == null || ${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity().isEmpty() ){
               if(this.instance.getA0xxukuxbvxxxxxxxxxxid().length()>14){      
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid().substring(0,14)+" City");
               }else{
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" City");
               } 
              }
              subKey=${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1()+${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity();
              if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
  
               ${addressEntityName}.setA0xxukbxbxxxxxxxxxxxaddrescode(subKey);
               ${addressEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               ${addressEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
               ${addressEntityName}Home.persist();
               bcontinue=true;
              }else{
               bcontinue=false;
              }

	if (${vendorEntityName} == null) {
	    ${vendorEntityName}=${vendorEntityName}Home.getInstance();
	}
              subKey=this.getClientName()+this.getA0xxukuxbvxxxxxxxxxxid2();
              if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
              }

      ${vendorEntityName}.setA0xxukxxbvxxxxxxxxxxvendor(subKey);
      ${vendorEntityName}.set${vendorFirstName?cap_first}(this.getA0xxukuxbvxxxxxxxxxxid2());
      ${vendorEntityName}.set${vendorLastName?cap_first}(this.getClientName());
      ${vendorEntityName}.setN4xxhxxrbv24xxxxxxxximailaddr(this.getClientEmail());
      ${vendorEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      ${vendorEntityName}.setZhxxutoxlhxxxxxxxxxxowner(ownerCode);
      ${vendorEntityName}.setO1xxuwmrbv40xxxxxxxxintegrset("DEFAULT");
      if (bcontinue){
       ${vendorEntityName}.set${addressEntityName?cap_first}ByMailtocode(${addressEntityName});
       ${vendorEntityName}.set${addressEntityName?cap_first}ByShiptocode(${addressEntityName});
      }
      ${vendorEntityName}Home.persist();
      bcontinue=true;

      return;
     

     }



    /***
    *history
    * createEmployeeCustomerAddressSignup() no params existed and was used by only demosignup 
    * quickregister calls doregister which calls doregister and has similar logic inside user perist
    * The following method uses parameters and only demoSignUp and new Coupon redeem method here  
    * and new siteCreate in r3restclient use this method.
    * in near future doregister will be changed to use this
    */

    @Transactional

	public void createEmployeeCustomerAddressSignup(String requestType,String fName,String lName,String eMail,String owner2Code,String userId) {
        //6 parms 1)requestType demo/redeem/coupon,2)firstName or company name 3)last name ,4)email, 5)site name raaspi or client site name 6)userId needed for createUserInstance
        //was coming from demosignup. added doregister(site create) tbd signup and vsignup
        //create customer,employee n address but scramble employee email to avoid misuse, only place demo user real email is kept is in user and is hidden from others

        eMail=eMail.trim().toLowerCase();
        fName=fName.trim();
        lName=lName.trim();
        userId=userId.trim();
        if(!requestType.equals("redeem")){//redeem means raaspi visitor VH no employee record only addr/customer/user
         if(requestType.equals("demo")){
          this.setClientEmail(eMail);
          // demo is backoffice user,put scrambled dummy employee
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("During")+ " "+bundle.getString("demo")+" "+bundle.getString("signup")+", "+bundle.getString("your")+" "+bundle.getString("name")+", "+bundle.getString("address")+" "+bundle.getString("is")+" "+bundle.getString("stored")+" "+bundle.getString("as")+" "+bundle.getString("slightly")+" "+bundle.getString("modified")+" "+bundle.getString("to")+" "+bundle.getString("protect")+" "+bundle.getString("privacy"),""));
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("your")+ " "+bundle.getString("email")+" "+bundle.getString("address")+" "+bundle.getString("is")+" "+bundle.getString("not")+" "+bundle.getString("visible")+" "+bundle.getString("to")+" "+bundle.getString("other")+" "+bundle.getString("demo")+" "+bundle.getString("users"),""));

              subKey=this.getClientEmail();
              int atAt=subKey.indexOf("@");
              if (atAt != -1){
               if (atAt > 2 ){
                subKey="de"+subKey.substring(2,atAt)+"x"+subKey.substring(atAt+2);//allow one demo per same email
               }
              }
              else{
               if (subKey.length() !=0 && subKey.length()>2 ){
                subKey="de"+subKey.substring(2)+"AXZ";
               }
              }
         }else{
           //site means back office user UH for new site, employee/addr/customer/user
           subKey=eMail;
           if (lName != null && lName.length() !=0){
            subKey=subKey+lName;
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           }else{
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           } 
           if (fName != null && fName.length() !=0){
            subKey=subKey+fName;
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           }else{
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
           } 
         }//demo/coupon subkey built, put random part and persist employee  
         if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
         }
              if(jxxxbh400xwwqqhxxxxxemployeeList.getKeyToEntity(subKey)!=null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Employee")+" "+subKey+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+owner2Code+" "+bundle.getString("continuing"),""));
              }else{ 
	       if (jxxxbh400xwwqqhxxxxxemployee == null) {
	        jxxxbh400xwwqqhxxxxxemployee=jxxxbh400xwwqqhxxxxxemployeeHome.getInstance();
	       }
               jxxxbh400xwwqqhxxxxxemployee.setA0xxuktxbvxxxxxxxxxxemployee(subKey);
               jxxxbh400xwwqqhxxxxxemployee.setN4xxhxxrbv24xxxxxxxximailaddr("");
               jxxxbh400xwwqqhxxxxxemployee.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               jxxxbh400xwwqqhxxxxxemployee.setO2xxuwmrbv40xxxxxxxxintegrset("DEFAULT");
               jxxxbh400xwwqqhxxxxxemployeeHome.superdotpersist();//otherwise key gets recalculated in persist()
              }  
              //ignore employee persist ??
              bcontinue=true;
         
        //end of employee for demo/coupon

        }//demo/redeem/coupon
 	      if (fxxxuq111xwwqqhxxxxxaddress == null) {
	         fxxxuq111xwwqqhxxxxxaddress=fxxxuq111xwwqqhxxxxxaddressHome.getInstance();
	      }
              String addrPrefix=eMail;
              if(eMail.length()>4){
               addrPrefix=eMail.substring(0,4);
              }
              if(fxxxuq111xwwqqhxxxxxaddress.getB1pxusa1bvxxxxxxxxxxaddrl1() == null){
               
               if(requestType.equals("redeem")||requestType.equals("coupon")){
                String ts=new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());//no user exists
                subKey=addrPrefix+ts.substring(17,19)+ts.substring(14,16)+ts.substring(11,13)+ts.substring(0,7)+userIP;
                fxxxuq111xwwqqhxxxxxaddress.setB1pxusa1bvxxxxxxxxxxaddrl1(subKey+" address");
                if(fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity() == null || fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity().isEmpty() ){
                 if(subKey.length()>14){      
                  fxxxuq111xwwqqhxxxxxaddress.setB3xxh2acbv11xxxxxxxxcity(subKey.substring(0,14)+" City");
                 }else{
                  fxxxuq111xwwqqhxxxxxaddress.setB3xxh2acbv11xxxxxxxxcity(subKey+" City");
                 }
                } 
               }else{//demo
                fxxxuq111xwwqqhxxxxxaddress.setB1pxusa1bvxxxxxxxxxxaddrl1(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" address");
                if(fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity() == null || fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity().isEmpty() ){
                 if(this.instance.getA0xxukuxbvxxxxxxxxxxid().length()>14){      
                  fxxxuq111xwwqqhxxxxxaddress.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid().substring(0,14)+" City");
                 }else{
                  fxxxuq111xwwqqhxxxxxaddress.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" City");
                 }
                }
               } 
              }//addrl1 empty 
              String country="";
              String ip="";
              if(yxxxch522xhhxxhxxxxxclientList.getSuggestList("01").size() > 0){
               ip=yxxxch522xhhxxhxxxxxclientList.getSuggestList("01").get(0).getW2xxuxxxbvxxxxxxxxxxintpassw();
              }

              if(!ip.isEmpty()){
               country=r3RestClient.ip2C(ip);
               if(!(country.equals("e") || country.equals("x")) && country.length()>5){
                country=country.substring(0,5);
               } 
              }
              fxxxuq111xwwqqhxxxxxaddress.setB5xxhboxee13xxxxxxxxcountry(country);
                //coupon means user address is in new site but redeem means user address in raaspi 
                //owner2Code is sitename, in case of redeem it hardcodes raaspi 
              if(requestType.equals("redeem")|| requestType.equals("coupon")){//same for now
               subKey=fxxxuq111xwwqqhxxxxxaddress.getB1pxusa1bvxxxxxxxxxxaddrl1()+fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity()+country;
              }else{
               subKey=fxxxuq111xwwqqhxxxxxaddress.getB1pxusa1bvxxxxxxxxxxaddrl1()+fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity()+country;
              }
              if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
               if(fxxxuq111xwwqqhxxxxxaddressList.getKeyToEntity(subKey)!=null){
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("Address")+" "+subKey+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+owner2Code+" "+bundle.getString("continuing"),""));
               }else{ 
 
                fxxxuq111xwwqqhxxxxxaddress.setA0xxukbxbxxxxxxxxxxxaddrescode(subKey);
                if(requestType.equals("redeem")||requestType.equals("coupon")){
                 fxxxuq111xwwqqhxxxxxaddress.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                }else{
                 fxxxuq111xwwqqhxxxxxaddress.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                }
                fxxxuq111xwwqqhxxxxxaddressHome.superdotpersist();
               } 
               bcontinue=true;
              }else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+bundle.getString("address")+" "+subKey+" "+bundle.getString("error"),""));

               bcontinue=false;
              }
       //end of address
      if(requestType.equals("redeem") || requestType.equals("coupon")){
          subKey=eMail;
          if (lName != null && lName.length() !=0){
            subKey=subKey+lName;
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
          }else{
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
          } 
          if (fName != null && fName.length() !=0){
            subKey=subKey+fName;
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
          }else{
            timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
            subKey=subKey+timeStamp.substring(17,18);
          } 
         }  
         if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
         }
      if(jxxxuq201xwwqqhxxxxxcustomerList.getKeyToEntity(subKey)!=null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("Customer")+" "+subKey+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+owner2Code+" "+bundle.getString("continuing"),""));
      }else{
 	        if (jxxxuq201xwwqqhxxxxxcustomer == null) {
	         jxxxuq201xwwqqhxxxxxcustomer=jxxxuq201xwwqqhxxxxxcustomerHome.getInstance();
	        }
 
       if(requestType.equals("redeem")||requestType.equals("coupon")){
        this.clientApplicationSubFunction=this.clientApplicationSubFunction.trim();

        jxxxuq201xwwqqhxxxxxcustomer.setA0xxukxxbvxxxxxxxxxxcustomer(subKey);//gets overwritten ?
        jxxxuq201xwwqqhxxxxxcustomer.setC2xxu2fnbvixxxxxxxxxfirstname(fName);
        jxxxuq201xwwqqhxxxxxcustomer.setC1xxuslnbvixxxxxxxxxlastname(lName);
        jxxxuq201xwwqqhxxxxxcustomer.setQ4xxhxxxbv24xxxxxxxximailaddr(eMail);
        jxxxuq201xwwqqhxxxxxcustomer.setQ5xxuxxxbxxxxxxxxxxxrmailaddr(clientApplicationSubFunction);//holds coupon value
        jxxxuq201xwwqqhxxxxxcustomer.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
       }else{//demo we dont ask for name , may change
        jxxxuq201xwwqqhxxxxxcustomer.setA0xxukxxbvxxxxxxxxxxcustomer(subKey);//should we use part of email ? in subkey
        jxxxuq201xwwqqhxxxxxcustomer.setC2xxu2fnbvixxxxxxxxxfirstname("demo");
        jxxxuq201xwwqqhxxxxxcustomer.setC1xxuslnbvixxxxxxxxxlastname("demo_lastname");
        jxxxuq201xwwqqhxxxxxcustomer.setQ4xxhxxxbv24xxxxxxxximailaddr("");//should we use part of real email?
        jxxxuq201xwwqqhxxxxxcustomer.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
       }
       jxxxuq201xwwqqhxxxxxcustomer.setF2xxuwmxbv40xxxxxxxxintegrset("DEFAULT");
       if (bcontinue){
        jxxxuq201xwwqqhxxxxxcustomer.setFxxxuq111xwwqqhxxxxxaddressByMailtocode(fxxxuq111xwwqqhxxxxxaddress);
       }
       jxxxuq201xwwqqhxxxxxcustomerHome.superdotpersist();
      }
      bcontinue=true;
      // if doregister or dosignup or dodemosignup user is created first and user persist calls this method
      // and then updates user record with just created customer or employee record
      // note:in case of doregister no user record/customer gets created for raaspi itsel. this is wrong and needs fix
      //in requestType is site, flow is reverse ie raaspi user is created as a last step
      
      if(requestType.equals("redeem")){//from redeem part1 enroll from redeem() method here, we create a visitor user in raaspi to be able to login
       String oUserId=eMail;
       userId=eMail;
       if(yxxxuh566xwwqqwxxxxxuserList.getKeyToEntity(oUserId)!=null){//getKeyToEntity holds how many in holdValue3
        userId=oUserId+customIdentity.getHoldValue3();//Id held as string 
        customIdentity.setHoldArray(3,userId);// HoldArray now holds revised userId ie xx@jj.com12
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("As")+" "+bundle.getString("needed")+", "+bundle.getString("use")+" "+userId+" "+bundle.getString("with")+" "+bundle.getString("your")+" "+bundle.getString("password")+" "+bundle.getString("to")+" "+bundle.getString("log")+" "+bundle.getString("into")+" "+bundle.getString(masterSiteCode),""));

       }
       this.createUserInstance(masterSiteCode,userId,"V","H",null,newUserLink,true,eMail);//this creates a visitor user instance
       if(!bcontinue){
        return;
       }
       //visitor so no employee record only customer linked to user userprofile where gets created
       this.instance.setJxxxuq201xwwqqhxxxxxcustomer(jxxxuq201xwwqqhxxxxxcustomer);         
       //in this case user is verified (came via appSumo) so no need for activation but persist is needed.
       this.superdotpersist();//
       //once user,customer w couponcode exists, user can sign in and raaspi can put a link with parameters filled up for create Site
       //consider using r3RestClient doQuickRegister type method when user sign in
       //in doregister add logic to add email as a new UH user along with manager
      
      }else{
       if(requestType.equals("coupon")){//reddem part2 sitecreate from r3restclient , where routes get created as well
        if(fName.equals("admin")){
         userId="admin";
         this.createUserInstance(owner2Code,userId,"I","H",null,null,true,eMail);//this creates am admin user instance
         //params String owner2Client,String userId,String role, String level,Yxxxuh566xwwqqwxxxxxuser user,String password,boolean pwEncrypt,String emailAddress
        }else{
         if(fName.equals("manager")){
          userId="manager";
          this.createUserInstance(owner2Code,userId,"U","H",null,null,true,eMail);//this creates a manager or backoffice user instance
         }else{
          //test how userId gets to id and temppassord getting set
          this.createUserInstance(owner2Code,userId,"U","H",null,newUserLink,true,eMail);//this creates a manager or backoffice user instance
         }
        }
        if(!bcontinue){
         return;
        }
        this.instance.setJxxxbh400xwwqqhxxxxxemployee(jxxxbh400xwwqqhxxxxxemployee);//backoffice users         
        this.instance.setJxxxuq201xwwqqhxxxxxcustomer(jxxxuq201xwwqqhxxxxxcustomer);         
        this.superdotpersist();//
       }else{
        //demo for now uses persist method to persist user, may move here
       }
      }
      return;
     

     }


   // not used now but for reengineering both user and site activation. needs more work 
   //sitecreate in r3restclient can use it. Also user and demo sign up can use this method. Current similar logic
   //in many places
   public void sendUserActivationEmail(String clientfullUrlName,String clientName,String clientEMail){
            // send the activation email. Only manager activation field matters 
            // activation will find manager user record and clears activation field to null
            boolean smtpEnabled = true;
            String savedActivationKey="";
            String savedPassword="";
            String activationLink="";
            this.setClientName(clientName);
            this.setClientEmail(clientEMail);
            //client record01 can be used to check and set enabled or not
            if (smtpEnabled) {
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
                savedActivationKey=getMD5Hash(this.getA0xxukuxbvxxxxxxxxxxid2() + this.getClientName() + this.getClientEmail() + System.currentTimeMillis());
                this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(savedActivationKey);
            } else {
                // TODO: Fix for production ... No way to activate using email
                // if SMTP is not enabled ...
                System.out.println("WARNING!!! SMTP eMailer not enabled ... partially activating user without email activation.");
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
            }

            if(urlPort ==8080){
               activationLink = "http://"+clientFullUrlName+":8080/login.wflow";
            }else{
               // need to add www if non raaspi.com ex raaspi.com,3rcomputer.com ie domain registered
               if(clientFullUrlName.contains("."+masterSiteCode)){
                activationLink = "http://"+clientFullUrlName+"/login.wflow";
               }else{
                activationLink = "http://www."+clientFullUrlName+"/login.wflow";
               }
            } 
            String newUserLink = activationLink + ((activationLink.indexOf("?") != -1) ? "&act=" : "?act=") + savedActivationKey;
            savedActivationKey="";
	    setNewUserLink(newUserLink);
            if (smtpEnabled) {
                try {
                   Emailsend("/activationSignUp.xhtml");

                } catch (Exception zzz) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,"yxxxuh566xwwqqwxxxxxuser "+bundle.getString("send") +" "+bundle.getString("email") +" "+bundle.getString("failed")+" "+zzz.getMessage(),""));
                    try {
                     //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
                     } catch (Exception ignore) {}
                }
            }

    return;
   }
   // for reengineering sitecreate or createClientRecord can use it 
   // this logic now exists in doregister(). r3restclient doQuickRegister for shopify does not need it, hard coded for one product
   // for appSumo type redeem can use it, prepaid customer rmailaddr field holds coupon code
   // couponCode holds item sid and item misccode from info ie 1a 45 etc.

   public boolean setSiteUsingFromValue(String from){
            // register/redeem sets via action sets theme  or usage(clientApplicationFunction, use default otherwise)
            //if from trial, addon product will have clientApplicationFunction as a1,a2,a3 etc 
            //and set here using parameter from
            // functionGroup and into from variable.
            // from now holds trial for which function as well as trial duration in days after 1,45 or 1a
            // allow for direct invoke when functionGroup not set so from is empty or has value but no trial period
        String vendor="";
        try {
            if(from == null || from.isEmpty()){
             // we can set from based on prepaid customer record 
             from="1";//business and default duration 14 days (variable trialPeriod value but can be changed using Item misccode1)
             trialPeriod =14;
            }        
            String fromO=from;   
            if(!fromO.substring(0,1).equals("a") && fromO.length() == 1){  
             from=fromO.substring(0,1);//can be 2 digits as well like 67
             trialPeriod =14;
            }            
            if(!fromO.substring(0,1).equals("a") && from.length() > 1){
             if(fromO.substring(0,2).equals("45") || fromO.substring(0,2).equals("67") || fromO.substring(0,2).equals("89")){//
              from=fromO.substring(0,2);
              trialPeriod=fromO.length()>2?Integer.parseInt(fromO.substring(2)):14;
             }else{
              from=fromO.substring(0,1);
              trialPeriod=fromO.length()>1?Integer.parseInt(fromO.substring(1)):14;
             }
            }
            if(fromO.substring(0,1).equals("a") && fromO.length() >= 2){
             from=fromO.substring(0,2);
             trialPeriod=fromO.length()>2?Integer.parseInt(fromO.substring(2)):14;
            }
            //check for unknown from value and return
            if (!(from.equals("1") || from.equals("2") || from.equals("3")
               || from.equals("45") || from.equals("67") || from.equals("89")
                 || from.equals("a1") || from.equals("a2") || from.equals("a3") || from.equals("a4"))){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("Unknown")+" "+bundle.getString("product")+" "+bundle.getString("request")+" "+bundle.getString("for")+" "+fromO+", "+bundle.getString("try")+" "+bundle.getString("again") ,""));
             return false;
            }
            switch(from){
             case "a1":
              themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business for theme
              clientApplicationFunction="esge";//stock addon general business theme
              break;
             case "a2":
              themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business for theme
              clientApplicationFunction="ecge";//ecommerce addon
              break;
             case "a3":
              themeName="Nature/Gene7.023544634959";//hardcode Nature/Generic/Organization for theme
              clientApplicationFunction="olge";//organization seat allocation addon
              break;
             case "a4":
              themeName="Nature/Gene7.023544634959";//hardcode Nature/Generic/Organization for theme
              clientApplicationFunction="oege";//organization event mgmt
              break;
            } 
        } catch (Exception e) {
	 log.severe("do register app function / trial period error"+ e.getMessage());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"Error checking Application usage and trial period "+ e.getMessage(),""));
             return false;
        }


            //continu below, if register theme/function already set. tbd use rate table for flexibikity?? 
            if(themeName ==null || themeName.isEmpty()){
             themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business
            } 
            //if coming from ItemDetailsBrowse as 1,2,45 etc we need to set clientApplicationFunction value
            //jay how client later is going to select specific sub function ?? 6 vs 7 or within 6 ???
            if(clientApplicationFunction ==null || clientApplicationFunction.isEmpty()){
             switch(from){
              case "1":
               themeName="Nature/Gene7.313-1243994117";//hardcode Nature/Generic/business for theme
               clientApplicationFunction="eege";//Business
               break;
              case "2":
               themeName="Nature/Gene6.354-129272933";//hardcode Nature/Generic/erp for theme
               clientApplicationFunction="efge";//ERP mfg
               break;
              case "3":
               themeName="Nature/Gene6.354-129272933";//hardcode Nature/Generic/Lab for theme
               clientApplicationFunction="elge";//Med Lab
               break;
              case "45":
               themeName="Nature/Gene9.968-629982659";//hardcode Nature/Generic/Organization for theme
               clientApplicationFunction="oage";//organization
               break;
              case "67":
               themeName="Nature/Gene7.023544634959";//hardcode Nature/Generic/Organization for theme
               clientApplicationFunction="scge";//Service Agency
               break;
              case "89":
               themeName="Nature/Gene6.0761136209321";//hardcode Nature/Generic/Organization for theme
               clientApplicationFunction="fsge";//News users forum
               break;
              default:
               clientApplicationFunction="eege";//hardcode
             } 
            } 

       Yxxxuq591xwwqqhxxxxxrate1f yxxxuq591xwwqqhxxxxxrate1f = yxxxuq591xwwqqhxxxxxrate1fList.getRaaspiIncentiveToEntity("PC",clientApplicationFunction.substring(0,2));
       if(yxxxuq591xwwqqhxxxxxrate1f !=null){
        product=yxxxuq591xwwqqhxxxxxrate1f.getB2xxuxxrbv51xxxxxxxxstepname();//  stepname holds item sid, since key can change
        if(product.equals("S") && yxxxuq591xwwqqhxxxxxrate1f.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")){
         product="281";//
        }
       }


        try {
            // first create the image and text data to be used by the new site,blobdataHome handles both
            //clientApplicationName is unique name within this cloud and can have alias public dns name like mitra.com
            enterprisecompcode=this.getClientApplicationName();
            owner2Code=enterprisecompcode;
            //enterprisecompcode is same as website name, owner2Code now refers to new client as owner2 not where createsite button exists
            if(enterprisecompcode.length() > this.clientFullUrlName.length()){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("prefix")+" "+bundle.getString("part")+" "+enterprisecompcode+" "+bundle.getString("exceeds")+" "+bundle.getString("url")+" "+this.clientFullUrlName ,""));
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("copy")+" "+bundle.getString("and")+" "+bundle.getString("paste")+" "+enterprisecompcode+" "+bundle.getString("as")+" "+bundle.getString("url")+" "+bundle.getString("prefix")+" "+bundle.getString("or")+" "+bundle.getString("keyin")+" "+bundle.getString("correct")+" "+bundle.getString("value") ,""));


             return false;
            }
     
            // note owner2Code here has enterprisecompcode not raaspi until end of this method
            // all persist will use new site code not raaspi
            yxxxuq1n1xwwqqqxxxxxblobdataHome.copyDefaultsToUSER(vendor,themeName,owner2Code,this.getClientName(),this.instance.getC1xxuxxxbvxxxxxxxxxxotherid(),this.getClientApplicationFunction());
            if (!bcontinue){
             return false;
            }
        } catch (Exception e) {
	 log.severe("do register app function / trial period error"+ e.getMessage());
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,"Error setting site defaults "+ e.getMessage(),""));
             return false;
        }
        return false;

   }
   
   /**
    called by this redeem() method as well as r3restclient siteCreate() method 
   */

   String getFunctionGroupForItemSid(int itemSid){
    //Item>miscCode1>6th or 6&7th chrs ie 1a or 2 or 45 
            fpxxfq1a5xwwqqhxxxxxitem=fpxxfq1a5xwwqqhxxxxxitemList.getSidToEntity(itemSid);
            if(fpxxfq1a5xwwqqhxxxxxitem ==null){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Product")+" "+bundle.getString("record")+" "+itemSid+" "+bundle.getString("not")+" "+bundle.getString("found")+", "+bundle.getString("contact")+" "+bundle.getString("support") ,""));
                bcontinue=false;
                return "";
            }
            if(fpxxfq1a5xwwqqhxxxxxitem.getY2xxuxxrbvxxxxxxxxxxmisccode1().length()<5){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Invalid")+" "+bundle.getString("value")+" "+fpxxfq1a5xwwqqhxxxxxitem.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("for")+" "+bundle.getString("product")+" "+fpxxfq1a5xwwqqhxxxxxitem.getY2xxuxxrbvxxxxxxxxxxmisccode1()+" "+bundle.getString("subscriptioncode")+", "+bundle.getString("contact")+" "+bundle.getString("support") ,""));
                bcontinue=false;
                return "";
            }
            String from=fpxxfq1a5xwwqqhxxxxxitem.getY2xxuxxrbvxxxxxxxxxxmisccode1().substring(5);//skip trial prefix
            int period=14;//default 14 days trial period unless misccode1 overrides it
            if(from.length() > 1){// could a1 or a1xxx or 12 ie 2 days or 114 14 days trial or 4520 20 days trial
             // use a2 etc or 45 not 4 to allow using existing direct register via free trial link 
             try{
              if(from.substring(0,1).equals("a")||from.substring(0,1).equals("4")||from.substring(0,1).equals("6")||from.substring(0,1).equals("8")){
               if(from.length() > 2){
                period=Integer.parseInt(from.substring(2)); 
               }
               from=from.substring(0,2);
              }else{
               if(from.length() > 1){
                period=Integer.parseInt(from.substring(1)); 
               }
               from=from.substring(0,1);
              }
             } catch (Exception e) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("Invalid")+" "+bundle.getString("value")+" "+fpxxfq1a5xwwqqhxxxxxitem.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("for")+" "+bundle.getString("product")+" "+fpxxfq1a5xwwqqhxxxxxitem.getY2xxuxxrbvxxxxxxxxxxmisccode1()+" "+bundle.getString("subscriptioncode")+", "+ e.getMessage()+" ,"+bundle.getString("contact")+" "+bundle.getString("support") ,""));

                bcontinue=false;
                return "";
             }
           }
           return from;

   } 
    @Transactional

   public Yxxxuh566xwwqqwxxxxxuser createUserInstance(String owner2Client,String userId,String role, String level,Yxxxuh566xwwqqwxxxxxuser user,String password,boolean pwEncrypt,String emailAddress){
        //we came here after checking no customer exists for this coupon, so we should create a new user for this 
        //customer,coupon combination. There will be multiple users, customers for the same email but for unique coupon
        //This allows specific link user will be able to link and get details or createSite. Tbd show all coupons for same email 
        //But user id needs to be unique, so if it already exists append next seq ie xyz@h.com, xyz@h.com2, etc
        String savedPassword="";
        this.clearInstance();
        this.getInstance();
        if(password !=null && !password.isEmpty()){
         int score=getStength(password);
         if(score ==0){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Password")+" "+bundle.getString("minimum")+" "+bundle.getString("length")+" "+bundle.getString("four")+", "+bundle.getString("recommend")+" "+bundle.getString("eight")+" "+bundle.getString("or")+" "+bundle.getString("more"),""));
           bcontinue=false;
           return null;                
         }
        }
        customIdentity.setHoldArray(1,password);// used in siteCreate in r3restclient

        try {
           //if coming from facebook or appSumo etc ie parameter activation false and password dummyfbPW or whatever set. 
           if (user !=null){
            this.setInstance(user);//in case of social login the instance with values exists
            //currentPW is a non null field
	    this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(password);
           }else{
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);
            if(password == null || password.isEmpty()){
             this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            }else{
             this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(false);//user chosen password
            }
            this.setClientEmail(emailAddress);
            if (this.instance.getA0xxukuxbvxxxxxxxxxxid() == null || this.instance.getA0xxukuxbvxxxxxxxxxxid().length() == 0){
             this.instance.setA0xxukuxbvxxxxxxxxxxid(userId);//gets passed from calling method, can be email or Admin or fbId
            }
            //jay check logic in case pw exists ie user supplied
            if(pwEncrypt){
             if(password == null || password.isEmpty()){
              savedPassword=PasswordSupport.tempPassword();
              this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(savedPassword);
              calendare.add(Calendar.HOUR, 48);
              this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
             }else{
              savedPassword=password;
              this.instance.setC6xxuxuoivxxxxxxxxxxoldpw("userChosen");//add logic to check pw length quality
              this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(null);
             }
	     this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(savedPassword));
	     this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
	     this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());

             if(this.instance.getA0xxukuxbvxxxxxxxxxxid().equals("admin")){
              resetPassword=savedPassword;
             }
             if(this.instance.getA0xxukuxbvxxxxxxxxxxid().equals("manager")){
               //resetPasword holds admin exposed pw and manager instance has its oldpw as exposed
               this.instance.setY7xxuxznbvxxxxxxxxxxnotes(resetPassword+"  and  "+this.instance.getC6xxuxuoivxxxxxxxxxxoldpw());
             }

            }//needs pw encrypt
           }//user instance not populated
           //fb or app signUp  social media same rights as email signup activation

           this.instance.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Client);//sets raaspi or a client site user

           if(password == null || password.isEmpty()){//google of fb for now
            if(this.chekIfDemo()){
		  this.instance.setC2xxuxuaiv38xxxxxxxxalevel("U");
		  this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
		  this.instance.setY1xxuxxxivxxxxxxxxxxrestrict1("D");
            }else{
                 if(signupas.equals("C")){//default is C and level V unless reseller sign up then V(en) and level P
 		  this.instance.setC2xxuxuaiv38xxxxxxxxalevel("V");
                 }else{
 		  this.instance.setC2xxuxuaiv38xxxxxxxxalevel("P");
                 }
                 //  allow visitor to change own user record, user entity has VH 
                 // manager can lower a vistor from H to Q if needed
                 if(productCode.equals("f") ){
		   this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
                 }else{
		   this.instance.setC3xxuxubiv39xxxxxxxxblevel("H");
                 }
            }
           } 
           if(!role.isEmpty()){
	    this.instance.setC2xxuxuaiv38xxxxxxxxalevel(role);
           }
           if(!level.isEmpty()){
	    this.instance.setC3xxuxubiv39xxxxxxxxblevel(level);
           }
            boolean smtpEnabled = true;//can check client record 01
            String savedActivationKey=null;

           if (smtpEnabled) {
                clientName=owner2Client;
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
                this.instance.setC1xxuxxxbvxxxxxxxxxxotherid(emailAddress);
                //hardCode activation key into admin user record
                //but any click on the activation link will clear it since takeAction knows it is in admin record
                if(this.instance.getA0xxukuxbvxxxxxxxxxxid().equals("admin")){
                 //in future look into whether to bypass activation
                 savedActivationKey=this.getMD5Hash(userId + clientName + emailAddress + System.currentTimeMillis());
                 this.instance.setC9xxuxxxbvxxxxxxxxxxactivationkey(savedActivationKey);
                }
             } else {
                // TODO: Fix for production ... No way to activate using email
                // if SMTP is not enabled ...
                System.out.println("WARNING!!! SMTP eMailer not enabled ... partially activating user without email activation.");
                this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial);
           }

            /////////no persist here, only instance create. caller will persist/////////
             
        }catch(Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Error")+" "+bundle.getString("processing") +" "+userId+" "+e.getMessage(),""));
          bcontinue=false;
           return null; 
        }
                                            
    return this.instance;
   }


    /**
    * The following method creates new site record 01 and 05 
    * This method has some init logic to setup variables like ApplicationName,product etc
    * Client record's intaddr, serialnumbers are based on these variables
    * We know the site name/owner2/applicationName, they are the same value.
    * Follow existing logic used in r3restClient DoQuickRegister before it calls userHome mothod  
    * called by r3restclient siteCreate
    * @param args two. new site name,eMail 
    * @return boolean true or false, if error
    * @exception None 
    * @see "createclientregister() which will get depecated by this"
    * 
    */
    @Transactional
   public boolean createClientRecord01(String owner2Code,String eMail,String couponName){
      // 
   /* see whether r3restclient does this part
      String clientUrl=null;
      if(serverName.contains("raaspi.com")){
       clientUrl=owner2CodeClient+".raaspi.com"  ;
      }else{
       clientUrl=owner2CodeClient+".lraaspi.com"  ;
      }
      this.setClientFullUrlName(clientUrl);//D6xxuxxrbvxxxxxxxxxxintaddr
      Yxxxuq591xwwqqhxxxxxrate1f yxxxuq591xwwqqhxxxxxrate1f = yxxxuq591xwwqqhxxxxxrate1fList.getRaaspiIncentiveToEntity("PC",clientApplicationFunction.substring(0,2));
      if(yxxxuq591xwwqqhxxxxxrate1f !=null){
        product=yxxxuq591xwwqqhxxxxxrate1f.getB2xxuxxrbv51xxxxxxxxstepname();//  stepname holds item sid, since key can change
        if(product.equals("S") && yxxxuq591xwwqqhxxxxxrate1f.getA0xxukxxbvxxxxxxxxxxusertype().equals("SC")){
         product="281";//
        }
      }
    */
      //get from value from customer>coupon>rate>item>miscCode ie use getFunctionGroupForItemSid(int itemSid) gives 1a etc
      //now in r3RestClient this.setSiteUsingFromValue(from);// from will be eest etc, this method also sets product trial period etc
      this.clientApplicationSubFunction=this.clientApplicationSubFunction.trim();
      
      yxxxch522xhhxxhxxxxxclientHome.clearInstance();
      yxxxch522xhhxxhxxxxxclient=yxxxch522xhhxxhxxxxxclientHome.getInstance();
      yxxxch522xhhxxhxxxxxclient.setA0xxukxxbvxxxxxxxxxxclientversion("01");
      yxxxch522xhhxxhxxxxxclient.setB3xxuxzsbvxxxxxxxxxxdescript("Home page for "+owner2Code+" site, has shopping cart, products and login for back office");
      yxxxch522xhhxxhxxxxxclient.setB2xxuzcxbvxxxxxxxxxxenterprisecompanyna(this.getClientName());
      yxxxch522xhhxxhxxxxxclient.setD4xxhxxrbv24xxxxxxxximailaddr(eMail);
      yxxxch522xhhxxhxxxxxclient.setD8xxuzxdbvxxxxxxxxxxenterprisecompcode(enterprisecompcode);
      yxxxch522xhhxxhxxxxxclient.setG2xxuxpclvxxxxxxxxxxprodcode(clientApplicationFunction+clientApplicationSubFunction);
      // put matcode as serianum so that we can associate the SI-DG product for subscription plan
      //many functions will relate to one product. needs hardcoding now may be rate1f table can be used later
      yxxxch522xhhxxhxxxxxclient.setB1xxuisxlvxxxxxxxxxxserialnum(product);
      if(product.length()>15){
       yxxxch522xhhxxhxxxxxclient.setG1xxuxxxbvxxxxxxxxxxproddesc(product.substring(0,15));//tbd jay get description from Item
      }else{
       yxxxch522xhhxxhxxxxxclient.setG1xxuxxxbvxxxxxxxxxxproddesc(product);
      }
      yxxxch522xhhxxhxxxxxclient.setD9xxuxxxbvxxxxxxxxxxenterprisecompsize(clientApplicationSize);
      yxxxch522xhhxxhxxxxxclient.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      yxxxch522xhhxxhxxxxxclient.setD6xxuxxrbvxxxxxxxxxxintaddr(clientFullUrlName);
      // can come here prepaid and pre subscribed via coupon redeem ex appsumo or raaspi's own promotion
      // this is different than existing coupon for trial where u get extended trial, not subscribed.
      // check if email used matches with one as raaspi customer and its coupon code (rmailaddr) matches with
      // one in raaspi rate1f, as used.
      if (matchCustomerNCouponByEmail(yxxxch522xhhxxhxxxxxclient.getD4xxhxxrbv24xxxxxxxximailaddr(),couponName)){
       yxxxch522xhhxxhxxxxxclient.setF6xxuxxxlvxxxxxxxxxxlicensetype("TrialPending");//for now assume rate value is 365
       //add logic to check rate table and use value instead of 365
       trialPeriod =365+14;
      }else{
       yxxxch522xhhxxhxxxxxclient.setF6xxuxxxlvxxxxxxxxxxlicensetype("TrialPending");
      }  
      yxxxch522xhhxxhxxxxxclient.setJ4xxuxxxbvxxxxxxxxxxscrcolor("r3WhiteModern");
      if(userIP.length() > 10){
       yxxxch522xhhxxhxxxxxclient.setW2xxuxxxbvxxxxxxxxxxintpassw(userIP.substring(0,10));//already set in init
      }else{
       yxxxch522xhhxxhxxxxxclient.setW2xxuxxxbvxxxxxxxxxxintpassw(userIP);//already set in init
      } 
      // use locale info 
      Locale locale=FacesContext.getCurrentInstance().getExternalContext().getRequestLocale();
      // paypal/square etc should use item currency since customer will pay in local
      //tbd give option to pay item currency or in merchant currency
      // try ip to country
              String ip="";//
              if(yxxxch522xhhxxhxxxxxclientList.getSuggestList("01").size() > 0){
               ip=yxxxch522xhhxxhxxxxxclientList.getSuggestList("01").get(0).getW2xxuxxxbvxxxxxxxxxxintpassw();
              }
      String country="";
      if(!ip.isEmpty()){
       country=r3RestClient.ip2C(ip);
       if(!(country.equals("e") || country.equals("x")) && country.length()>2){
        country=country.substring(0,2);
       } 
      }
      Currency c  = Currency.getInstance(locale);
      if(c.getCurrencyCode() !=null){
       yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc(c.getCurrencyCode());//used for item and customer charge
       yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode(c.getCurrencyCode());//merchant/bank, used for posting
       yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder(c.getSymbol());//used for item and customer charge
       yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb(c.getSymbol());//merchant/bank      
       yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency 
      }
      yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc("CAD");
      yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode("CAD");
      yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder("C$");
      yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb("C$");
      yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      if(country.equals("US")){
        yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc("USD");
        yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode("USD");
        yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder("$");
        yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb("$");
        yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      }
      if(country.equals("UK")){
        yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc("GBP");
        yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode("GBP");
        yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder("£");
        yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb("£");
        yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      }

      yxxxch522xhhxxhxxxxxclient.setF7xxcxxxlvxxxxxxxxxxlicensestart(Calendar.getInstance().getTime());
      calendar.setTime(yxxxch522xhhxxhxxxxxclient.getF7xxcxxxlvxxxxxxxxxxlicensestart());
      // trial configurable via item misccode1. can be trial1(productn) or trial1a(productn addon)  default 2w (weeks) duration
      // ie trial121(3 weeks) or trial130(month) or trial2a90(3 months) etc 
      calendar.add(Calendar.DATE, trialPeriod);
      yxxxch522xhhxxhxxxxxclient.setF8xxcxxxlvxxxxxxxxxxlicenseend(calendar.getTime());
      yxxxch522xhhxxhxxxxxclient.setV6xxuxz1bvxxxxxxxxxxtax1code("Remitance dummy code");
      yxxxch522xhhxxhxxxxxclientHome.persist(owner2Code);//client record 01 created

      this.instance.setYxxxch522xhhxxhxxxxxclient(yxxxch522xhhxxhxxxxxclient);
      // create record 05 to hold sendgrid or default mail relay api id/secret to avoid hardcoding in source code
      yxxxch522xhhxxhxxxxxclientHome.clearInstance();
      yxxxch522xhhxxhxxxxxclient=yxxxch522xhhxxhxxxxxclientHome.getInstance();
      yxxxch522xhhxxhxxxxxclient.setA0xxukxxbvxxxxxxxxxxclientversion("05");
      yxxxch522xhhxxhxxxxxclient.setDbxxuzxdssxxxxxxxxxxapiclientsecret("SG.BxxxxxxxxxxyyyyyiBg");
      yxxxch522xhhxxhxxxxxclient.setZ8xxuxxxbvxxxxxxxxxxsmtpserver("smtp.sendgrid.net");
      yxxxch522xhhxxhxxxxxclient.setZ9xxuxxxbvxxxxxxxxxxsmtpuser("apikey");
      yxxxch522xhhxxhxxxxxclient.setD5xxuxxrbvxxxxxxxxxxrmailaddr(customIdentity.getMasterSiteEmail());
      yxxxch522xhhxxhxxxxxclient.setDaxxuzxdssxxxxxxxxxxapiclientid("VxxxxxxA");
      yxxxch522xhhxxhxxxxxclient.setL6xxzxxrbvxxxxxxxxxxaltselen(587);
      yxxxch522xhhxxhxxxxxclientHome.persist(owner2Code);

      // update coupon as closed ie being used
      yxxxuq591xwwqqhxxxxxrate1fHome.clearInstance();
      yxxxuq591xwwqqhxxxxxrate1f=yxxxuq591xwwqqhxxxxxrate1fList.getRaaspiIncentiveToEntity("SC",couponName);
      if(yxxxuq591xwwqqhxxxxxrate1f ==null){//
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Cannot")+ " "+bundle.getString("find")+ " "+bundle.getString("coupon")+ " "+couponName+" "+bundle.getString("record"),""));
       return false;  
      }
      yxxxuq591xwwqqhxxxxxrate1f.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mclosed);   
      yxxxuq591xwwqqhxxxxxrate1f.setZzxxu2oxxhxxxxxxxxxxowner2(masterSiteCode);   // coupon belongs to raaspi

      yxxxuq591xwwqqhxxxxxrate1fHome.setInstance(yxxxuq591xwwqqhxxxxxrate1f);
      //yxxxuq591xwwqqhxxxxxrate1fHome.superdotupdate();
      yxxxuq591xwwqqhxxxxxrate1fHome.superUpdate();// updates statusfl date
      return true;

   }

    @Transactional
   public boolean createClientVisitNSiteMap(String owner2Code){
       //add visitstat if missing
       if (fxxxuq1bhxwwqqhxxxxxusagebyperiods == null) {
	    fxxxuq1bhxwwqqhxxxxxusagebyperiods=fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.getInstance();
       }
       try   {
        fxxxuq1bhxwwqqhxxxxxusagebyperiods.setA0xxukupbvxxxxxxxxxxusagetrackerid("visitstats3r");
        fxxxuq1bhxwwqqhxxxxxusagebyperiods.setD5xxzc0rbxxxxxxxxxxxperiod0formulae("userIP");
        fxxxuq1bhxwwqqhxxxxxusagebyperiods.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
        fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.persist(owner2Code);
        fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.clearInstance();

       } catch (Exception e) {
        log.severe("Error persisting usagebyperiods"+ e);
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("usagebyperiods")+ " "+bundle.getString("visitstat")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
         //bcontinue=false;
         return false;
       }
     //add sitemap.xml content 
     if (yxxxuq1m1xwwqqqxxxxxclobdata == null) {
	    yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance();
     }
     try   {
      yxxxuq1m1xwwqqqxxxxxclobdata.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey("3R-siteMap");
      yxxxuq1m1xwwqqqxxxxxclobdata.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      String min="<?xml version=\"1.0\" encoding=\"UTF-8\"?><urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"><url><loc>https://www."+owner2Code+".com/</loc></url>";

      yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(min);
      yxxxuq1m1xwwqqqxxxxxclobdata.setA3xxexnsbvxxxxxxxxxxsequence(0);

      yxxxuq1m1xwwqqqxxxxxclobdata.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      yxxxuq1m1xwwqqqxxxxxclobdataHome.persist(owner2Code);
      yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();

     } catch (Exception e) {
      log.severe("Error persisting clobdata"+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("clobdata")+ " "+bundle.getString("sitemap.xml")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
       //bcontinue=false;
       return false;
     }
     return true;

   }


   public void createClientRegister() {
    //jay hard code for now add logic to take owner2 and time and email and hash it to make serial number

    if (subKey.equals("admin")){
      log.severe("in createClientRegister for  "+ subKey+" Persists for Client records 05 and 01 and employee(and clobdata)  ");
        // check if client record key '01' exists for owner2, then override the ist one (partially done?)
       if (yxxxch522xhhxxhxxxxxclientList.getOwner2ClientList(owner2Code).size() > 0) {
         yxxxch522xhhxxhxxxxxclient=yxxxch522xhhxxhxxxxxclientList.getOwner2ClientList(owner2Code).get(0);
      }else{
        yxxxch522xhhxxhxxxxxclientHome.clearInstance();
        yxxxch522xhhxxhxxxxxclient=yxxxch522xhhxxhxxxxxclientHome.getInstance();
     }
      ${clientEntityName}.setA0xxukxxbvxxxxxxxxxxclientversion("01");
      ${clientEntityName}.setB3xxuxzsbvxxxxxxxxxxdescript("Home page for "+owner2Code+" site, has shopping cart, products and login for back office");
      ${clientEntityName}.setB2xxuzcxbvxxxxxxxxxxenterprisecompanyna(this.getClientName());
      ${clientEntityName}.set${clientImailaddr?cap_first}(this.instance.getC1xxuxxxbvxxxxxxxxxxotherid());
      ${clientEntityName}.setD8xxuzxdbvxxxxxxxxxxenterprisecompcode(enterprisecompcode);
      ${clientEntityName}.set${clientProdcode?cap_first}(clientApplicationFunction+clientApplicationSubFunction);
      // put matcode as serianum so that we can associate the SI-DG product for subscription plan
      //many functions will relate to one product. needs hardcoding now may be rate1f table can be used later
      ${clientEntityName}.setB1xxuisxlvxxxxxxxxxxserialnum(product);
      if(product.length()>15){
       ${clientEntityName}.setG1xxuxxxbvxxxxxxxxxxproddesc(product.substring(0,15));//tbd jay get description from Item
      }else{
       ${clientEntityName}.setG1xxuxxxbvxxxxxxxxxxproddesc(product);
      }
      ${clientEntityName}.setD9xxuxxxbvxxxxxxxxxxenterprisecompsize(clientApplicationSize);
      ${clientEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      ${clientEntityName}.setD6xxuxxrbvxxxxxxxxxxintaddr(clientFullUrlName);
      // can come here prepaid and pre subscribed via coupon redeem ex appsumo or raaspi's own promotion
      // this is different than existing coupon for trial where u get extended trial, not subscribed.
      // check if email used matches with one as raaspi customer and its coupon code (misccode??) matches with
      // one in raaspi rate1f, as used.
      //if (matchCustomerNCouponByEmail(yxxxch522xhhxxhxxxxxclient.getD4xxhxxrbv24xxxxxxxximailaddr(),couponName)){
       //yxxxch522xhhxxhxxxxxclient.setF6xxuxxxlvxxxxxxxxxxlicensetype("Yearly");
      //}else{
       yxxxch522xhhxxhxxxxxclient.setF6xxuxxxlvxxxxxxxxxxlicensetype("TrialPending");
      //}  
      ${clientEntityName}.setJ4xxuxxxbvxxxxxxxxxxscrcolor("r3WhiteModern");
      if(userIP.length() > 10){
       yxxxch522xhhxxhxxxxxclient.setW2xxuxxxbvxxxxxxxxxxintpassw(userIP.substring(0,10));//already set in init
      }else{
       yxxxch522xhhxxhxxxxxclient.setW2xxuxxxbvxxxxxxxxxxintpassw(userIP);//already set in init
      } 
      // use locale info 
      Locale locale=FacesContext.getCurrentInstance().getExternalContext().getRequestLocale();
      // paypal/square etc should use item currency since customer will pay in local
      //tbd give option to pay item currency or in merchant currency
      // try ip to country
              String ip="";//
              if(yxxxch522xhhxxhxxxxxclientList.getSuggestList("01").size() > 0){
               ip=yxxxch522xhhxxhxxxxxclientList.getSuggestList("01").get(0).getW2xxuxxxbvxxxxxxxxxxintpassw();
              }
      String country="";
      if(!ip.isEmpty()){
       country=r3RestClient.ip2C(ip);
       if(!(country.equals("e") || country.equals("x")) && country.length()>2){
        country=country.substring(0,2);
       } 
      }
      Currency c  = Currency.getInstance(locale);
      if(c.getCurrencyCode() !=null){
       yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc(c.getCurrencyCode());//used for item and customer charge
       yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode(c.getCurrencyCode());//merchant/bank, used for posting
       yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder(c.getSymbol());//used for item and customer charge
       yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb(c.getSymbol());//merchant/bank 
       yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      }
      yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc("CAD");
      yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode("CAD");
      yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder("C$");
      yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb("C$");
      yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      if(country.equals("US")){
        yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc("USD");
        yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode("USD");
        yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder("$");
        yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb("$");
        yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      }
      if(country.equals("UK")){
        yxxxch522xhhxxhxxxxxclient.setY8xxuxxxbvxxxxxxxxxxdefaultc("GBP");
        yxxxch522xhhxxhxxxxxclient.setK1xxuxxxbvxxxxxxxxxxcurrcode("GBP");
        yxxxch522xhhxxhxxxxxclient.setY2xxuxxxbvxxxxxxxxxxkeyorder("£");
        yxxxch522xhhxxhxxxxxclient.setJ9xxuxxxbvxxxxxxxxxxcurrsymb("£");
        yxxxch522xhhxxhxxxxxclient.setP4xxzxxrbvxxxxxxxxxxshibaradj(100);//itemCurrency -> merchant currency
      }

      ${clientEntityName}.setF7xxcxxxlvxxxxxxxxxxlicensestart(Calendar.getInstance().getTime());
      calendar.setTime(${clientEntityName}.getF7xxcxxxlvxxxxxxxxxxlicensestart());
      // trial configurable via item misccode1. can be trial1(productn) or trial1a(productn addon)  default 2w (weeks) duration
      // ie trial121(3 weeks) or trial130(month) or trial2a90(3 months) etc 
      calendar.add(Calendar.DATE, trialPeriod);
      ${clientEntityName}.setF8xxcxxxlvxxxxxxxxxxlicenseend(calendar.getTime());
      ${clientEntityName}Home.persist(owner2Code);//record 01 created

      this.instance.set${clientEntityName?cap_first}(${clientEntityName});
      // create record 05 to hold sendgrid or default mail relay api id/secret to avoid hardcoding it source code
      yxxxch522xhhxxhxxxxxclientHome.clearInstance();
      yxxxch522xhhxxhxxxxxclient=yxxxch522xhhxxhxxxxxclientHome.getInstance();
      yxxxch522xhhxxhxxxxxclient.setA0xxukxxbvxxxxxxxxxxclientversion("05");
      yxxxch522xhhxxhxxxxxclient.setDbxxuzxdssxxxxxxxxxxapiclientsecret("SG.BxxxxxxxxxxyyyyyiBg");
      yxxxch522xhhxxhxxxxxclient.setZ8xxuxxxbvxxxxxxxxxxsmtpserver("smtp.sendgrid.net");
      yxxxch522xhhxxhxxxxxclient.setZ9xxuxxxbvxxxxxxxxxxsmtpuser("apikey");
      yxxxch522xhhxxhxxxxxclient.setD5xxuxxrbvxxxxxxxxxxrmailaddr(customIdentity.getMasterSiteEmail());
      yxxxch522xhhxxhxxxxxclient.setDaxxuzxdssxxxxxxxxxxapiclientid("VxxxxxxA");
      yxxxch522xhhxxhxxxxxclient.setL6xxzxxrbvxxxxxxxxxxaltselen(587);
      yxxxch522xhhxxhxxxxxclientHome.persist(owner2Code);

    }
    if (subKey.equals("manager")){
      log.severe("in createClientRegister for  "+ subKey+" Persists for  address (and userprofl), customer(and clobdata),usagebyperiods,clobdata and employee(and clobdata)  ");
      //put dummy address 
	if (${addressEntityName} == null) {
	    ${addressEntityName}=${addressEntityName}Home.getInstance();
	}
              if(${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1() == null){
               ${addressEntityName}.setB1pxusa1bvxxxxxxxxxxaddrl1(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" address");
              }//
              if(${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity() == null || ${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity().isEmpty() ){
               if(this.instance.getA0xxukuxbvxxxxxxxxxxid().length()>14){      
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid().substring(0,14)+" City");
               }else{
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukuxbvxxxxxxxxxxid()+" City");
               } 
              }
              subKey=${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1()+${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity();
              if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }


               ${addressEntityName}.setA0xxukbxbxxxxxxxxxxxaddrescode(subKey);
               ${addressEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               ${addressEntityName}Home.persist();
               bcontinue=true;
              }else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+bundle.getString("address")+" "+subKey+" "+bundle.getString("error"),""));

               bcontinue=false;
              }


	if (${customerEntityName} == null) {
	    ${customerEntityName}=${customerEntityName}Home.getInstance();
	}
        subKey=this.instance.getA0xxukuxbvxxxxxxxxxxid();
        if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
       }
       ${customerEntityName}.setA0xxukxxbvxxxxxxxxxxcustomer(subKey);
       ${customerEntityName}.set${customerLastName?cap_first}("manager");
       ${customerEntityName}.setQ4xxhxxxbv24xxxxxxxximailaddr(this.getClientEmail());
       if (bcontinue){
        ${customerEntityName}.set${addressEntityName?cap_first}ByMailtocode(${addressEntityName});
       }
       ${customerEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
       ${customerEntityName}Home.persist(owner2Code);
       this.instance.set${customerEntityName?cap_first}(${customerEntityName});
       bcontinue=true;
       //add visitstat if missing
       if (${usagebyperiodsEntityName} == null) {
	    ${usagebyperiodsEntityName}=${usagebyperiodsEntityName}Home.getInstance();
       }
       try   {
        ${usagebyperiodsEntityName}.setA0xxukupbvxxxxxxxxxxusagetrackerid("visitstats3r");
        ${usagebyperiodsEntityName}.setD5xxzc0rbxxxxxxxxxxxperiod0formulae("userIP");
        ${usagebyperiodsEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
        ${usagebyperiodsEntityName}Home.persist(owner2Code);
        ${usagebyperiodsEntityName}Home.clearInstance();

       } catch (Exception e) {
        log.severe("Error persisting usagebyperiods"+ e);
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("usagebyperiods")+ " "+bundle.getString("visitstat")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
         //bcontinue=false;
         return;
       }
     //add sitemap.xml content 
     if (${clobdataEntityName} == null) {
	    ${clobdataEntityName}=${clobdataEntityName}Home.getInstance();
     }
     try   {
      ${clobdataEntityName}.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
      ${clobdataEntityName}.setA1xxuxxxbv49xxxxxxxxfromkey("3R-siteMap");
      ${clobdataEntityName}.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
      String min="<?xml version=\"1.0\" encoding=\"UTF-8\"?><urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd\"><url><loc>https://www."+owner2Code+".com/</loc></url>";

      ${clobdataEntityName}.setB1xxuzaxbvxxxxxxxxxxdata(min);
      ${clobdataEntityName}.setA3xxexnsbvxxxxxxxxxxsequence(0);

      ${clobdataEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      ${clobdataEntityName}Home.persist(owner2Code);
      ${clobdataEntityName}Home.clearInstance();

     } catch (Exception e) {
      log.severe("Error persisting clobdata"+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("clobdata")+ " "+bundle.getString("sitemap.xml")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
       //bcontinue=false;
       return;
     }
    } 
    // common for admin and manager ie setup employee record
    bcontinue=true;
      log.severe("starting  persisting employee "+ this.instance.getA0xxukuxbvxxxxxxxxxxid());
    if (${employeeEntityName} == null) {
     ${employeeEntityName}Home.clearInstance();//avoid null id assertion error?
     ${employeeEntityName}=${employeeEntityName}Home.getInstance();
    }else{
      log.severe("employee instance not null "+ ${employeeEntityName}.getA0xxuobxbxxxxxxxxxxxsid()+" "+${employeeEntityName}.getA0xxuktxbvxxxxxxxxxxemployee());
      ${employeeEntityName}Home.clearInstance();//avoid null id assertion error?
      ${employeeEntityName}=${employeeEntityName}Home.getInstance();
    }
    subKey=this.instance.getA0xxukuxbvxxxxxxxxxxid();
    if (subKey.length() !=0){
               String subKeyh=Integer.toString(subKey.hashCode());
               if (subKey.length() > 9){
                subKey=subKey.substring(0,10)+subKeyh;
               }
               else {
                subKey=subKey+subKeyh;
               }
     }
   try   {
    ${employeeEntityName}.setA0xxuktxbvxxxxxxxxxxemployee(subKey);
    if (this.instance.getA0xxukuxbvxxxxxxxxxxid().equals("manager")){
     ${employeeEntityName}.setB3xxuslnbvixxxxxxxxxlastname("manager");
    }
    if (this.instance.getA0xxukuxbvxxxxxxxxxxid().equals("admin")){
     ${employeeEntityName}.setB3xxuslnbvixxxxxxxxxlastname("admin");
    }
    ${employeeEntityName}.setN4xxhxxrbv24xxxxxxxximailaddr(this.getClientEmail());
    ${employeeEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
    ${employeeEntityName}Home.persist(owner2Code);
   } catch (Exception e) {
      log.severe("Error persisting employee"+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("employee")+ " "+this.instance.getA0xxukuxbvxxxxxxxxxxid()+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
       //bcontinue=false;
       return;
   }
    
    this.instance.set${employeeEntityName?cap_first}(${employeeEntityName});
    ${employeeEntityName}Home.clearInstance();
    ${employeeEntityName}=null;
    bcontinue=true;
    return;


   }


     <#include "../src/copyOptionsDefaultsToOwner2.java" >
     <#include "../src/copy2OptionsDefaultsToOwner2.java" >

           
     public boolean matchCustomerNCouponByEmail(String email,String couponName){
      // in do register() add logic to add as a new customer in raaspi ie new site admin will be a raaspi customer
      // check if email used matches with one as raaspi customer and its coupon code (rmailaddr) matches with
      // one in raaspi rate1f, as used.


      return true;
     }

     public void copyDefaultsToOwner2(String client) {
      // 64k limit to method size , remove unnecessary code and split ie call copyOptionsDefaultsToOwner2
      // called by sqladmin/emailreadytoactivate and use owner2code
      // Also by r3restclient quickregister/openAuth orSiteCreate/openAuth as routes get created
      // if client record does not exist it means copydefaults may have partially completed and client was not created
      // since back out works on per txn
      // check re begin txn
      // each account.persist will call accountTotalsRollUp(account) which will update the roll up accounts
      // we need to set picked to false before persist, if multiple calls to persist are involved. picked is used to decide
      // whether to persist or update if calls come via save from xhtml

      <#if keyAutoGen == "Y" >
           ${clientEntityName}=null;
           List<${clientEntityName?cap_first}> results =  entityManager
           .createQuery(
	"select cc from ${clientEntityName?cap_first} cc where cc.  zzxxu2oxxhxxxxxxxxxxowner2=:p ")
	.setParameter("p", client)
	.getResultList();
            if(!results.isEmpty()){
               ${clientEntityName} = results.get(0);
            }
      <#else>
        ${clientEntityName}Home.get${clientEntityName?cap_first}Id().set${clientEnterprisecompcode?cap_first}(clientn);
        // jay replace below two with non null values if other than THIS
       ${clientEntityName} = ${clientEntityName}Home.getDefinedInstance();
      </#if>
      if (${clientEntityName} == null) {
          //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          //FacesMessage.SEVERITY_INFO,bundle.getString("setup")+ " "+bundle.getString("for")+ " "+client+" "+bundle.getString("not")+" "+bundle.getString("done")+", "+bundle.getString("setup")+" "+bundle.getString("with")+" "+bundle.getString("defaults"),""));
       bcontinue = false;
       log.info(bundle.getString("setup")+ " "+bundle.getString("for")+ " "+client+" "+bundle.getString("not")+" "+bundle.getString("done")+", "+bundle.getString("setup")+" "+bundle.getString("with")+" "+bundle.getString("defaults"));
      }
      // if email failed txn does not back out
      int deletedCount =  entityManager.createQuery("DELETE FROM ${acintegrEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${accountEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${acperiodEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${perioddatesEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      //deletedCount =  entityManager.createQuery("DELETE FROM ${optionsEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${itemEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      <#if (activityEntityName?? && activityEntityName?length > eL)>
      deletedCount =  entityManager.createQuery("DELETE FROM ${activityEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      </#if>
      deletedCount =  entityManager.createQuery("DELETE FROM ${truefalseEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      //deletedCount =  entityManager.createQuery("DELETE FROM ${clobdataEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${resource_bundleEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${itemEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM Yxxxuq591xwwqqhxxxxxrate1f a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      // added rate1f  added item type AD-D and AD-M adj for deliv and misc charge
      //deletedCount =  entityManager.createQuery("DELETE FROM ${usagebyperiodsEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", client).executeUpdate();
      // createclientregister created vististat so dont delete
     // create one default resource bundle entry for  tenant as convenience and avoid initial confusion
     if (${resource_bundleEntityName} == null) {
     ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
     }
      // default bundle needed before creating a new message resource
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("m");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("en");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resource_bundleEntityName}Home.persist(client);
      ${resource_bundleEntityName}Home.clearInstance();

      if (${resourceEntityName}li == null) {
       ${resourceEntityName}li=${resourceEntityName}Home.getInstance();	
      }

//seo page titles for each client which can be customized, no need for default/SYSTEM
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Home page "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Home_Page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Product-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Product-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Product-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cantact Us "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Contact Us "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();
      ${resourceEntityName}li=${resourceEntityName}Home.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Contact Us "+client);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${resourceEntityName}Home.persist(client);
      this.clearInstance();


      if (${accountEntityName} == null) {
       ${accountEntityName}=${accountEntityName}Home.getInstance();
      }
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1000");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("ASSET");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("H");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.setPicked(false);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1002");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("CURRENT ASSETS");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1005");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("BANK A");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1006");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("BANK B");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1007");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("CASH IN HAND");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1010");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Cash Total");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1015");// inv asset a/c
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Inventory Asset");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1019");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("receivable");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1020");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Account receivable");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1022");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Advances receivable");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1025");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Receivables:Total");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1030");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Advances and Investment");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1031");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Share Holder Advance");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1033");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Investmet Savings");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1036");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("PrePaid Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1038");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Advances and Investmet Total");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1040");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("TOTAL CURRENT ASSETS");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1050");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("INVENTORY ASSETS");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1052");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Sales Equipments and Supplies");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1054");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Parts");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1056");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Rental Equipments");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1057");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Sales Items Others");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1058");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Total Inventory Asset");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1060");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("FIXED ASSETS");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1062");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Vehicles");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("1070");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("FIXED ASSETS TOTAL");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("A");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);


      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("2005");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Liability");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("L");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("2020");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Liabilities");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("L");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("2023");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Liability");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("L");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("2040");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Tax1 Liability");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("L");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("2042");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Tax2 Liability");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("L");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("2050");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Liability Totals");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("L");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);




      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("3050");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Equity");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("QR");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("3052");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Retained Earning");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("QR");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("3053");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Dividend");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("QD");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);


      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("3054");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Current Earning");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("QC");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("3060");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Equity Total");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("QC");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);



      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("4010");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Sales/Service ");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("I");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("4012");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Sales/Service Income");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("I");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("4014");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Consulting Income");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("I");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("4020");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Delivery Charge Income");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("I");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("4025");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Misc Charge Income");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("I");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("4030");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Sales/Service Total");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("I");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("S");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);


      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5001");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("B");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);

      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5005");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Sales Cost and Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5007");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Insurance Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5009");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Travel Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5011");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Management Fees");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5013");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Accounting Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5015");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Banking Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5017");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("office Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5019");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Auto Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5021");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Delivery Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);
      ${accountEntityName}Home.clearInstance();
      ${accountEntityName}=${accountEntityName}Home.getInstance();
      ${accountEntityName}.setA0xxukwxbvxxxxxxxxxxaccount("5023");
      ${accountEntityName}.setA1xxuzsxbvxxxxxxxxxxdescript("Misc Expense");
      ${accountEntityName}.setB1xxuwgxbv01xxxxxxxxcategory("E");
      ${accountEntityName}.setB2xxuwtxbv02xxxxxxxxtype("D");
      ${accountEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${accountEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${accountEntityName}Home.persist(client);


	if (${acintegrEntityName} == null) {
	    ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
	}
      accountn="3052";
      //checkAccount uses setId using creator's owner2Code which is not allowed in setId because it is not same as tenant owner2Code
      // under which 3052 was created
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("GL");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("EAR");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Retained Eearning");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();

      accountn="3053";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("GL");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("EAD");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Dividend");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();

      accountn="3054";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("GL");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("EAC");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Current Eearning");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="4012";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CRE");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Sales Income Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="4014";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CRE");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("CONSULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("onsulting Income Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="5005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CEX");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Sales Cost/Expense Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="5021";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AP");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("APV");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Sales Cost/Expense Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="5023";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AP");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("APM");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Sales Cost/Expense Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);



      accountn="1052";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CAS");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Receive Inventory Asset A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2023";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("IRC");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Inventory Receipt Clearing A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2040";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("TX1");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("tax1 Payable Clearing A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2042";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("TX2");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("tax2 Payable Clearing A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2042";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("TX3");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("tax3 Payable Clearing A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();

      accountn="4012";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CRE");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("SERVICE");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Service Income Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="5005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CEX");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("SERVICE");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Repair/Parts Cost Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="1054";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CAS");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("SERVICE");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Receive Inventory Asset A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("CLI");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("SERVICE");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Purchase Payable Liability A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2040";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("TX1");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("SERVICE");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("tax1 Payable Clearing A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2042";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AS");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("TX2");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("SERVICE");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("tax2 Payable Clearing A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="1015";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("IC");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("IRC");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Inventory Asset A/C");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="1020";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AR");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("ARR");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Receivable Asset control");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="4025";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AR");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("ARM");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Misc Charge Income");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="4020";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AR");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("ARV");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Deliv Charge Income");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="1005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AR");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("ARB");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Cash/Bank Receipt Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="1022";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AP");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("APA");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Deposits Paid Asset Account ");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="1005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AP");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("APB");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Cash/Bank Payment Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="2005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AP");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("APP");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("A/C Payable Control Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);

      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="5005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AP");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("APM");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Misc Charge Expns control account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);
      ${acintegrEntityName}Home.clearInstance();
      ${acintegrEntityName}=${acintegrEntityName}Home.getInstance();
      accountn="5005";
      temps=owner2Code;owner2Code=client; checkAccount();owner2Code=temps;
      ${acintegrEntityName}.set${accountEntityName?cap_first}(${accountEntityName});
      ${acintegrEntityName}.setA2xxukwmbvxxxxxxxxxxmoduleid("AY");
      ${acintegrEntityName}.setA3xxukw8bvxxxxxxxxxxusagecode("SAL");
      ${acintegrEntityName}.setA4xxukw9bvxxxxxxxxxxsetsid("DEFAULT");
      ${acintegrEntityName}.setC1xxuxxxbvxxxxxxxxxxusagedescr("Salary Expense Account");
      ${acintegrEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acintegrEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acintegrEntityName}Home.persist(client);

	if (${acperiodEntityName} == null) {
	    ${acperiodEntityName}=${acperiodEntityName}Home.getInstance();
	}
// jay remove hardcoded values and use current cal date and logic similar to authentication to set dynamic
// calculated values. use a field in registration to set fiscal year end month ie dec or july etc (no may be confusing at registration)
// rather set default fiscal yr ending in dec but give option to change in yearend menue
	//already defined private Calendar calendar = Calendar.getInstance();
	String currcaldates = calendar.getTime().toString().substring(0, 10);
	String currbusdates = calendar.getTime().toString().substring(0, 10);
	String currlocaldate = calendar.getTime().toString().substring(0, 10);
	Date toDay = calendar.getTime();
	//public SimpleDateFormat s = new SimpleDateFormat("yyyy-MM-dd");
	String toDays = s.format(calendar.getTime()).toString();
     calendar.set(Calendar.HOUR_OF_DAY, 0);
     calendar.set(Calendar.MINUTE, 0);
     calendar.set(Calendar.SECOND, 0);
     calendar.set(Calendar.MILLISECOND, 0);
     currbusdate = calendar.getTime();

try   {
      ${acperiodEntityName}.setA0xxukwpbv47xxxxxxxxrowid("01");
      Integer monthIndex=new Integer(calendar.get(Calendar.MONTH)+1);
      ${acperiodEntityName}.setA1xxuxwpbv47xxxxxxxxcurrperiod(""+monthIndex);
      ${acperiodEntityName}.set${acperiodDescript?cap_first}("Period "+monthIndex);
      // set dates below the same, at login time authenticator will recalculate the dates correctly
      ${acperiodEntityName}.setB2xxdwerbvxxxxxxxxxxcurrbusdate(currbusdate);
      ${acperiodEntityName}.setB3xxdwerbvxxxxxxxxxxcurrcaldate(currbusdate);
      ${acperiodEntityName}.setB4xxdwerbvxxxxxxxxxxcurrlocaldate(currbusdate);
      ${acperiodEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${acperiodEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${acperiodEntityName}Home.persist(client);

	if (${perioddatesEntityName} == null) {
	    ${perioddatesEntityName}=${perioddatesEntityName}Home.getInstance();
	}
      // new logic done, assume f year same as calendar yr
 
      int pe=15;
      calendar = Calendar.getInstance();// initialize calendar to avoid wrong dates
      for (int i=1;i<pe;i++){
      ${perioddatesEntityName}.setA0xxukwpbv47xxxxxxxxperiod(String.format("%02d",i));
      ${perioddatesEntityName}.set${perioddatesDescript?cap_first}("Period "+String.format("%02d",i));
      if(i>12){
       if(i==13){
        calendar.add(Calendar.YEAR, 1);
        // once calendar is rolled i 14 will also pick up new value 
       }
       calendar.set(Calendar.MONTH, i-13);
       calendar.set(Calendar.HOUR_OF_DAY, 0);
       calendar.set(Calendar.MINUTE, 0);
       calendar.set(Calendar.SECOND, 0);
       calendar.set(Calendar.MILLISECOND, 0);
      }else{
       calendar.set(Calendar.MONTH, i-1);
       calendar.set(Calendar.HOUR_OF_DAY, 0);
       calendar.set(Calendar.MINUTE, 0);
       calendar.set(Calendar.SECOND, 0);
       calendar.set(Calendar.MILLISECOND, 0);
      }
      calendar.set(Calendar.DATE,calendar.getActualMinimum(Calendar.DAY_OF_MONTH));
      ${perioddatesEntityName}.setB2xxdwsrbvxxxxxxxxxxstartdate(calendar.getTime());
      calendar.set(Calendar.DATE,calendar.getActualMaximum(Calendar.DAY_OF_MONTH));
      ${perioddatesEntityName}.setB3xxdwerbvxxxxxxxxxxenddate(calendar.getTime());
      ${perioddatesEntityName}.setB4xxew1rbvxxxxxxxxxxstartofweek(1);
      ${perioddatesEntityName}.setB5xxewbrbvxxxxxxxxxxstartofbweek(1);
      ${perioddatesEntityName}.setB6xxewfrbvxxxxxxxxxxendofbweek(5);
      ${perioddatesEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${perioddatesEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${perioddatesEntityName}Home.persist(client);
      ${perioddatesEntityName}Home.clearInstance();
      ${perioddatesEntityName}=${perioddatesEntityName}Home.getInstance();

      }

} catch (Exception e) {
			log.severe("Error parsing string to date"+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("parsing")+ " "+bundle.getString("string")+ " "+bundle.getString("to")+", "+bundle.getString("date")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
}

     // type CS -customer shipment, prodtype - production P Test T, stepname SES Shipment Express Small size or SAM Shipment Standard Medium
     // The actual value needs to be manually calculated based on size/weight category and maintained in rate table
	//if (${rate1fEntityName} == null) {
	    ${rate1fEntityName}Home.clearInstance();// do not reuse existing, it changes owner2 
	    ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
	//}
     try   {
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("ES");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("5.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("EM");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("8.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("EL");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("11.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);

      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("SS");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("1.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("SM");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("3.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("SL");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("4.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("OL");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("6.0"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("PS");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("-1.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("CS");//COD small
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("10.00"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);

      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("PM");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("-3.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("CM");//COD Medium
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("10.00"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);

      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("PL");
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("-4.90"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);
      ${rate1fEntityName}Home.clearInstance();
      ${rate1fEntityName}=${rate1fEntityName}Home.getInstance();
      ${rate1fEntityName}.setA0xxukxxbvxxxxxxxxxxusertype("CS");
      ${rate1fEntityName}.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
      ${rate1fEntityName}.setB2xxuxxrbv51xxxxxxxxstepname("CL");//COD Large
      ${rate1fEntityName}.setB4xxcxxrbvxxxxxxxxxxvalue(new BigDecimal("10.00"));
      ${rate1fEntityName}.setZ4xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${rate1fEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${rate1fEntityName}Home.persist(client);

      ${rate1fEntityName}Home.clearInstance();
      } catch (Exception e) {
	log.severe("Error persisting rate1f"+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("rate")+ " "+bundle.getString("table")+ " "+bundle.getString("initialization")+" "+bundle.getString("failed")+ " "+e.getMessage(),""));
      }

     // truefalse table (if entry exists for an entity) can be used for reports to indicate a field should be printed or not
     // instance show00x has default values as true, so we need to set only false here(see !!!)
     // dg demographics me quantity  a1 ad hoc 1 a2 ad hoc 2 a3 ad hoc 3 fi financial used by transactions
     // !!!! if table does not exist then some default values for showxxxx are used based on dg,me prefix
     // and and a table is created for future use/modification
     // add logic in gentiltlexx never to show owner2 column
	if (${truefalseEntityName} == null) {
	    ${truefalseEntityName}=${truefalseEntityName}Home.getInstance();
	}
     try   {
      ${truefalseEntityName}.setA0xxukrdbvxxxxxxxxxxtablename("address");
      ${truefalseEntityName}.setA1xxuxxxbvxxxxxxxxxxqualifier("dg");
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow001(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow005(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow011(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow012(false);
      ${truefalseEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${truefalseEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow014(true);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow015(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow016(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow017(false);
      ${truefalseEntityName}Home.persist(client);
      ${truefalseEntityName}Home.clearInstance();
//me
      ${truefalseEntityName}=${truefalseEntityName}Home.getInstance();
      ${truefalseEntityName}.setA0xxukrdbvxxxxxxxxxxtablename("address");
      ${truefalseEntityName}.setA1xxuxxxbvxxxxxxxxxxqualifier("me");
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow004(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow005(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow006(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow007(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow008(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow009(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow014(false);
      ${truefalseEntityName}.setA1xxyxxxbvxxxxxxxxxxshow015(false);
      ${truefalseEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${truefalseEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${truefalseEntityName}Home.persist(client);
      ${truefalseEntityName}Home.clearInstance();


      } catch (Exception e) {
	log.severe("Error persisting truefalse "+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("report")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
       bcontinue=false;
       return;

      }

      //
      // was reusing existing item from raaspi
      ${itemEntityName}Home.clearInstance();
	//if (${itemEntityName} == null) {
	    ${itemEntityName}=${itemEntityName}Home.getInstance();
	//}

        ${itemEntityName?cap_first} ${itemEntityName}P=null;//save parent   
     try   {
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Adjustment delivery cost");//created if done via app 
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Adjust delivery cost using plus/minus quantity");
      ${itemEntityName}.setB8fbzpxxbvxxxxxxxxxxselprice(BigDecimal.ONE);
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("AD-D");
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Adjustment Misc cost");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Adjust using plus/minus quantity");
      ${itemEntityName}.setB8fbzpxxbvxxxxxxxxxxselprice(BigDecimal.ONE);
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("AD-M");
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Blogs");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Blogs Album");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("BI-L1");
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}P=${itemEntityName};
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Blog");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Welcome blog");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("BI-D");
      ${itemEntityName}.set${itemEntityName?cap_first}(${itemEntityName}P);
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}P=${itemEntityName};
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Photos");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Photos Album");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("PI-L1");
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}P=${itemEntityName};
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Photo");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Welcome photo");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("PI-D");//no blob image will put default
      ${itemEntityName}.set${itemEntityName?cap_first}(${itemEntityName}P);
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}P=${itemEntityName};
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();


      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Shopping Items");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Shopping Items Category");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("SI-L1");
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}P=${itemEntityName};
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("Item");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Item Coming soon");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("SI-D");
      ${itemEntityName}.setB6fbzicxbvxxxxxxxxxxcost(new BigDecimal("9.0"));
      ${itemEntityName}.setB8fbzpxxbvxxxxxxxxxxselprice(new BigDecimal("10.0"));
      ${itemEntityName}.set${itemEntityName?cap_first}(${itemEntityName}P);
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();

      ${itemEntityName}=${itemEntityName}Home.getInstance();
      ${itemEntityName}.setA0xxukixbxxxxxxxxxxxmatcode("service");
      ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript("Service-hourly");
      ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("SI-D");
      ${itemEntityName}.setB8fbzpxxbvxxxxxxxxxxselprice(new BigDecimal("65.0"));
      ${itemEntityName}.set${itemEntityName?cap_first}(${itemEntityName}P);
      ${itemEntityName}.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${itemEntityName}P=${itemEntityName};
      ${itemEntityName}Home.persist(client);
      ${itemEntityName}Home.clearInstance();


     } catch (Exception e) {
      log.severe("Error persisting item "+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
       bcontinue=false;
       return;

      }
      //for item restock
       ${vendorEntityName}Home.clearInstance();
       ${vendorEntityName}=${vendorEntityName}Home.getInstance();
     try   {
      ${vendorEntityName}.setA0xxukxxbvxxxxxxxxxxvendor("vendor");//created if done via app 
      ${vendorEntityName}.setY0xxuzsxbvxxxxxxxxxxdescript("Vendor/Supplier/Shipper");
      ${vendorEntityName}.setB3xxuslnbvxxxxxxxxxxlastname("Contact last name");
      ${vendorEntityName}.setB4xxu2fnbvxxxxxxxxxxfirstname("First name");
      ${vendorEntityName}.setD1xxu3cnbvxxxxxxxxxxvendorascompanyname("Company name");
      ${vendorEntityName}.setZhxxutoxlhxxxxxxxxxxowner(ownerCode);
      ${vendorEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${vendorEntityName}Home.persist(client);
      ${vendorEntityName}Home.clearInstance();

      ${vendorEntityName}=${vendorEntityName}Home.getInstance();
      ${vendorEntityName}.setA0xxukxxbvxxxxxxxxxxvendor("forPickUp");//created if done via app 
      ${vendorEntityName}.setY0xxuzsxbvxxxxxxxxxxdescript("Pickup Vendor/Supplier/Shipper for Internal Use ");
      ${vendorEntityName}.setB3xxuslnbvxxxxxxxxxxlastname("Contact last name");
      ${vendorEntityName}.setB4xxu2fnbvxxxxxxxxxxfirstname("First name");
      ${vendorEntityName}.setD1xxu3cnbvxxxxxxxxxxvendorascompanyname("For Pickup/Company name");
      ${vendorEntityName}.setZhxxutoxlhxxxxxxxxxxowner(ownerCode);
      ${vendorEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(client);
      ${vendorEntityName}Home.persist(client);
      ${vendorEntityName}Home.clearInstance();

      } catch (Exception e) {
      log.severe("Error persisting vendor "+ e);
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("vendor")+ " "+bundle.getString("setup")+ " "+bundle.getString("initialize")+ " "+bundle.getString("failed")+" "+e.getMessage(),""));
       bcontinue=false;
       return;

      }



      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("setup")+ " "+bundle.getString("for")+ " "+client+" "+bundle.getString("now")+" "+bundle.getString("done"),""));

      bcontinue=true;
      return;
     }

	@Transactional
	public void setupPassword() {
        try {
	    this.resetPassword = PasswordSupport.tempPassword();
            this.instance.setC6xxuxuoivxxxxxxxxxxoldpw(resetPassword);
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);
            this.instance.setC7xxfxxxivxxxxxxxxxxtemporarypassword(true);
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mpartial); 
	    this.instance.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(this.resetPassword));
	    this.instance.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
	    this.instance.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
            calendare.add(Calendar.HOUR, 24);
            this.instance.setC5xxcxxxbvxxxxxxxxxxexpiry(calendare.getTime() );
            this.instance.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mactive);
            //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            //                         FacesMessage.SEVERITY_INFO,bundle.getString("temporary")+ " "+bundle.getString("password")+ " "+this.resetPassword,""));
         } catch (Exception e) {
	   log.severe("Error setupPassword"+ e);
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("setup")+ " "+bundle.getString("password")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
         }

      return;


    }

       public int getStength(String password){
        //total score of password
        int iPasswordScore = 0;
        
        if( password.length() < 4 )
            return 0;
        else if( password.length() >= 8 )
            iPasswordScore += 2;
        else 
            iPasswordScore += 1;
        
        //if it contains one digit, add 2 to total score
        if( password.matches("(?=.*[0-9]).*") )
            iPasswordScore += 2;
        
        //if it contains one lower case letter, add 2 to total score
        if( password.matches("(?=.*[a-z]).*") )
            iPasswordScore += 2;
        
        //if it contains one upper case letter, add 2 to total score
        if( password.matches("(?=.*[A-Z]).*") )
            iPasswordScore += 2;    
        
        //if it contains one special character, add 2 to total score
        if( password.matches("(?=.*[~!@#$%^&*()_-]).*") )
            iPasswordScore += 2;
        
        return iPasswordScore;
       }

        //invoked by Home.xhtml
	public void changePassword() {
		log.info("changing password #0 "+ customIdentity.getUsername()+", "+owner2Code);
                // send email
                //Emailsend("/password_change_info.xhtml");
                //Emailsend("/password_reset_info.xhtml");

		${userEntityName?cap_first} user = (${userEntityName?cap_first}) entityManager
				.createQuery(
						"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("username", customIdentity.getUsername())
				.setParameter("owner2", owner2Code).getSingleResult();
		if (user.getC4xxuxupivxxxxxxxxxxcurrpw().equals("ssoPW")) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("sso")+" "+bundle.getString("password")+" "+bundle.getString("cannot")+" "+bundle.getString("be")+" "+bundle.getString("changed")+" "+bundle.getString("here"),""));

                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("try")+" "+bundle.getString("original")+" "+bundle.getString("signon")+" "+bundle.getString("site")+"- "+user.getC6xxuxuoivxxxxxxxxxxoldpw(),""));

   		 return;
                } 
		if (user.getC4xxuxupivxxxxxxxxxxcurrpw().equals("dummyfbPW")) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("facebook")+"/ "+bundle.getString("google")+" "+bundle.getString("password")+" "+bundle.getString("cannot")+" "+bundle.getString("be")+" "+bundle.getString("changed")+" "+bundle.getString("here"),""));

                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("try")+" "+bundle.getString("facebook")+"/ "+bundle.getString("google")+" "+bundle.getString("site"),""));

   		 return;
                } 

		sid = user.getA0xxuobxbxxxxxxxxxxxsid();
		if (this.getResetPassword().equals(verify)) {
                 // pw validation and stength checker atleast 4 chrs
                 int score=getStength(verify);
                 if(score ==0){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Password")+" "+bundle.getString("minimum")+" "+bundle.getString("length")+" "+bundle.getString("four")+", "+bundle.getString("recommend")+" "+bundle.getString("eight")+" "+bundle.getString("or")+" "+bundle.getString("more"),""));
                  return;                 
                 }
 
                 // clear home to avoid detached entity
                 ${userEntityName}Home.clearInstance();
                 ${userEntityName}Home.setId(sid);
                 user=${userEntityName}Home.getDefinedInstance();
                  user.setC4xxuxupivxxxxxxxxxxcurrpw(PasswordSupport.hash(verify) );
                  user.setC8xxuxxxbvxxxxxxxxxxpasswordhash(PasswordSupport.getHashNoon() );
                  user.setZ2xxcztxlxxxxxxxxxxxstatusfldt(calendar.getTime());
                 user.setC7xxfxxxivxxxxxxxxxxtemporarypassword(false);
                 user.setC5xxcxxxbvxxxxxxxxxxexpiry(null);
                 inChangePassword=true;
                 inCreateUser=false;
                 ${userEntityName}Home.persist();
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO," ",""));
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_INFO,bundle.getString("password")+" "+bundle.getString("updated")+" "+bundle.getString("and")+" "+bundle.getString("in")+" "+bundle.getString("effect")+", "+bundle.getString("use")+" "+bundle.getString("Done")+" "+bundle.getString("to")+" "+bundle.getString("close"),""));
                 if(score <= 3){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Password")+" "+bundle.getString("strength")+" "+bundle.getString("Poor")+", "+bundle.getString("use")+" "+bundle.getString("long")+" "+bundle.getString("password")+" "+bundle.getString("with")+" "+bundle.getString("digits")+", "+bundle.getString("lower")+" "+bundle.getString("uppercase")+" "+bundle.getString("special")+" "+bundle.getString("characters")+" "+bundle.getString("and")+" "+bundle.getString("change")+" "+bundle.getString("periodically"),""));
                 }
                 if(score > 3 && score <= 7){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Password")+" "+bundle.getString("strength")+" "+bundle.getString("Medium")+", "+bundle.getString("use")+" "+bundle.getString("long")+" "+bundle.getString("password")+" "+bundle.getString("with")+" "+bundle.getString("digits")+", "+bundle.getString("lower")+" "+bundle.getString("uppercase")+" "+bundle.getString("special")+" "+bundle.getString("characters")+" "+bundle.getString("and")+" "+bundle.getString("change")+" "+bundle.getString("periodically"),""));
                 }
                 if(score >7){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("Password")+" "+bundle.getString("strength")+" "+bundle.getString("Good")+", "+bundle.getString("use")+" "+bundle.getString("long")+" "+bundle.getString("password")+" "+bundle.getString("with")+" "+bundle.getString("digits")+", "+bundle.getString("lower")+" "+bundle.getString("uppercase")+" "+bundle.getString("special")+" "+bundle.getString("characters")+" "+bundle.getString("and")+" "+bundle.getString("change")+" "+bundle.getString("periodically"),""));
                 }

                 this.credentials.setPassword(this.getResetPassword());
 		 changed = true;
                 this.setResetPassword(null);
		} else {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  FacesMessage.SEVERITY_ERROR,bundle.getString("verify")+", "+bundle.getString("new")+" "+bundle.getString("and")+" "+bundle.getString("retyped")+" "+bundle.getString("values")+" "+bundle.getString("not")+" "+bundle.getString("equal"),""));

		 revertUser();
		 verify = null;
		}
	}

	public boolean isChanged() {
		return changed;
	}

	private void revertUser() {
                <#if keyAutoGen=="Y"> 
		${userEntityName}Home.set${userEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(sid);
                <#else>
		${userEntityName}Home.get${userEntityName?cap_first}Id().setA0xxukuxbvxxxxxxxxxxid(customIdentity.getUsername());
                </#if>
		user = ${userEntityName}Home.getDefinedInstance();

	}
	public String getVerify() {
		return verify;
	}
	public void setVerify(String verify) {
		this.verify = verify;
	}
/*  not used replaced by array of array availableItems
    private static final String[] EE = { "", "Retail Bakery","Clothing","Shoes","Beauty Products","Health Foods","Others" };
    private static final String[] EF = { "", "Industrial Products", "Consumer","Wholesale","Clothing","Others" };
    private static final String[] EL = { "", "Pathology","Medica Imaging","Others"};
    private static final String[] OA = { "", "College Alumni","School Alumni","Community Organization","Events Organizer","Others" };
    private static final String[] OC = { "", "Community Club","Photography","Others" };
    private static final String[] SC = { "", "IT Consulting","Financial Consulting","Others" };
    private static final String[] SA = { "", "Insurance Agency","Service for a fee","Maid Service ","Others" };
    private static final String[] FS = { "", "Community ","Family","Others" };
    private static final String[] FB = { "", "Software","Consumer Products","Others" };
    private String currentItem = "";
    private String currentType = "";
    private List<SelectItem> firstList = new ArrayList<SelectItem>();
    private List<SelectItem> secondList = new ArrayList<SelectItem>();

 
        SelectItem itemj = new SelectItem("", "");
 
  {      firstList.add(itemj);
        itemj = new SelectItem("ee", "Business Ecommerce");
        firstList.add(itemj);
        itemj = new SelectItem("ef", "Manufacturing ERP");
        firstList.add(itemj);
        itemj = new SelectItem("el", "Lab Environment");
        firstList.add(itemj);
        itemj = new SelectItem("oa", "Association/Organization");
        firstList.add(itemj);
        itemj = new SelectItem("oc", "Association/Club");
        firstList.add(itemj);
        itemj = new SelectItem("sc", "Service Consulting");
        firstList.add(itemj);
        itemj = new SelectItem("sa", "Service Agency");
        firstList.add(itemj);
        itemj = new SelectItem("fs", "Users Forum Pictures/News");
        firstList.add(itemj);
        itemj = new SelectItem("fb", "Users Forum Issues/Bugs");
        firstList.add(itemj);
 
        for (int i = 0; i < EE.length; i++) {
            itemj = new SelectItem(EE[i]);
        }
*/

//  used by register.xhtml, curly bracket means static method invoked at bean start. list of selectItem group
    private List<SelectItem> availableItems = new ArrayList<SelectItem>();
  {
    SelectItemGroup group1 = new SelectItemGroup("Business Ecommerce");
    group1.setSelectItems(new SelectItem[] {
        new SelectItem("eege", "Generic Business"),
        new SelectItem("eerb", "Retail Bakery"),
        new SelectItem("eecl", "Clothing"),
        new SelectItem("eesh", "Shoes"),
        new SelectItem("eebp", "Beauty Products"),
        new SelectItem("eehf", "Health Foods"),
        new SelectItem("eest", "Shopify Backoffice AddOn"),
        new SelectItem("eeot", "Business-Others")
    });

    availableItems.add(group1);

    SelectItemGroup group2 = new SelectItemGroup("Manufacturing ERP");
    group2.setSelectItems(new SelectItem[] {
        new SelectItem("efge", "Generic Manufacturing"),
        new SelectItem("efip", "Industrial Products"),
        new SelectItem("efco", "Consumer"),
        new SelectItem("efwh", "Wholesale"),
        new SelectItem("efcl", "Clothing"),
        new SelectItem("efot", "Manufacturing-Others")
    });
    availableItems.add(group2);
    SelectItemGroup group3 = new SelectItemGroup("Lab Environment");
    group3.setSelectItems(new SelectItem[] {
        new SelectItem("elge", "Generic Lab"),
        new SelectItem("elpa", "Pathology"),
        new SelectItem("elmi", "Medical Imaging"),
        new SelectItem("elot", "Lab-Others")
    });
    availableItems.add(group3);
    SelectItemGroup group4 = new SelectItemGroup("Association/Organization");
    group4.setSelectItems(new SelectItem[] {
        new SelectItem("oage", "Generic Association"),
        new SelectItem("oaca", "College Alumni"),
        new SelectItem("oasa", "School Alumni"),
        new SelectItem("oaco", "Community Organization"),
        new SelectItem("oaeo", "Events Organizer"),
        new SelectItem("oaot", "Organization-Others")
    });
    availableItems.add(group4);
    SelectItemGroup group5 = new SelectItemGroup("Association/Club");
    group5.setSelectItems(new SelectItem[] {
        new SelectItem("ocge", "Generic Club"),
        new SelectItem("occc", "Community Club"),
        new SelectItem("ocph", "Photography"),
        new SelectItem("ocsp", "Sports"),
        new SelectItem("oche", "Health"),
        new SelectItem("ocot", "Club-Others")
    });
    availableItems.add(group5);
    SelectItemGroup group6 = new SelectItemGroup("Service Consulting");
    group6.setSelectItems(new SelectItem[] {
        new SelectItem("scge", "Generic Consulting"),
        new SelectItem("scic", "IT Consulting"),
        new SelectItem("scfc", "Financial Consulting"),
        new SelectItem("scot", "Consulting-Others")
    });
    availableItems.add(group6);
    SelectItemGroup group7 = new SelectItemGroup("Service Agency");
    group7.setSelectItems(new SelectItem[] {
        new SelectItem("sage", "Generic Agency"),
        new SelectItem("sacs", "Cleaning Services"),
        new SelectItem("saia", "Insurance Agency"),
        new SelectItem("salc", "Learning Center"),
        new SelectItem("sasf", "Service for a fee"),
        new SelectItem("sams", "Maid Service"),
        new SelectItem("sals", "Landscaping Service"),
        new SelectItem("sars", "Renovation Service"),
        new SelectItem("saot", "Agency-Others")
    });
    availableItems.add(group7);
    SelectItemGroup group8 = new SelectItemGroup("Users Forum Pictures/News");
    group8.setSelectItems(new SelectItem[] {
        new SelectItem("fsge", "Generic News Forum"),
        new SelectItem("fsco", "Community"),
        new SelectItem("fsfa", "Family"),
        new SelectItem("fsot", "Forum-Others")
    });
    availableItems.add(group8);
    SelectItemGroup group9 = new SelectItemGroup("Users Forum Issues/Bugs");
    group9.setSelectItems(new SelectItem[] {
        new SelectItem("fbge", "Generic Users Forum"),
        new SelectItem("fbso", "Software"),
        new SelectItem("fbcp", "Consumer Products"),
        new SelectItem("fbot", "Issues-Others")
    });
    availableItems.add(group9);


  }

    // client field proddesc is from shopping item description, not exact prod and subprod breakdown
    public int getProductGroupIndex(String p){
        int i=0;
        if(p.length()>2){
         p=p.substring(0,2);
        }
        switch(p){
         case "ee":
                 i=0;
                 break;
         case "ef":
                 i=1;
                 break;

         case "el":
                 i=2;
                 break;
         case "oa":
                 i=3;
                 break;
         case "oc":
                 i=4;
                 break;
         case "sc":
                 i=5;
                 break;
         case "sa":
                 i=6;
                 break;
         case "fs":
                 i=7;
                 break;
         case "fb":
                 i=8;
                 break;
        }//switch 
        //use the avaliableItems array inedex for a group/product to get group selectItems 
        //avaliableItems[i].selectItems for subproduct options for a group
        return i;
    }
  
    public String getProductLabel(String ps) {
        String prodNSub="";
        if(ps == null || ps.isEmpty()){
         yxxxch522xhhxxhxxxxxclient = yxxxch522xhhxxhxxxxxclientList.getKeyToEntity("01");
         prodNSub=yxxxch522xhhxxhxxxxxclient.getG2xxuxpclvxxxxxxxxxxprodcode();
        }else{
         prodNSub=ps;
        }
        String p=prodNSub.substring(0,2);
        //String s=prodNSub.substring(2,4);
        int i=getProductGroupIndex(p);
        String hh=this.getAvailableItems().get(i).getLabel();
        for(SelectItem item : this.getAvailableItems()){
         if (item instanceof SelectItemGroup) {
          SelectItem subitems[]=((SelectItemGroup)item).getSelectItems();
          if ((subitems != null) && (subitems.length > 0)) {
           for(SelectItem subitem : subitems){
            if(subitem.getValue().equals(prodNSub) ){
             prodNSub=subitem.getLabel();
             break;
            }
           }
          }
         }
        }     
        return prodNSub;     
    }

   public boolean saveProductNSubProduct(String newprodCode) {
    try{
     ${clientEntityName?cap_first} client = ${clientEntityName}List.getKeyToEntity("01"); 
     if(client == null){
	    log.severe("Error getting null client record for "+owner2Code);
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("getting")+ " "+bundle.getString("setup")+ " "+bundle.getString("record"),""));
            return false;  
     }
     client.setG2xxuxpclvxxxxxxxxxxprodcode(newprodCode);
     ${clientEntityName}Home.clearInstance();
     ${clientEntityName}Home.setInstance(client);
     ${clientEntityName}Home.superUpdate();
     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
      FacesMessage.SEVERITY_ERROR,bundle.getString("Changed")+ " "+bundle.getString("to")+ " "+getProductLabel(newprodCode)+", "+bundle.getString("may")+" "+bundle.getString("use")+" "+bundle.getString("setups")+ "/ "+bundle.getString("page")+ " "+bundle.getString("customization")+ "/ "+bundle.getString("edit")+ " "+bundle.getString("options")+ " "+bundle.getString("for")+ " "+bundle.getString("using")+ " "+bundle.getString("prebuilt")+ " "+bundle.getString("themes"),""));

     return true;    
    } catch (Exception e) {
	    log.severe("Error saving new prodcode"+ e);
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("saving")+ " "+bundle.getString("new")+ " "+bundle.getString("product")+ " "+bundle.getString("code")+ " - "+e.getMessage(),""));
            return false;  
    }

   } 


/* 
    public List<SelectItem> getFirstList() {
        return firstList;
    }
 
    public List<SelectItem> getSecondList() {
        return secondList;
    }
*/
    public List<SelectItem> getAvailableItems() {
        return availableItems;
    }

    public List<SelectItem> setAvailableItems(int group) {
        if(group == 1){
    availableItems = new ArrayList<SelectItem>();

    SelectItemGroup group1 = new SelectItemGroup("Business Ecommerce");
    group1.setSelectItems(new SelectItem[] {
        new SelectItem("eege", "Generic Business"),
        new SelectItem("eerb", "Retail Bakery"),
        new SelectItem("eecl", "Clothing"),
        new SelectItem("eesh", "Shoes"),
        new SelectItem("eebp", "Beauty Products"),
        new SelectItem("eehf", "Health Foods"),
        new SelectItem("eest", "Shopify Backoffice AddOn"),
        new SelectItem("eeot", "Business-Others")
    });

    availableItems.add(group1);


        }

        if(group == 2){
    availableItems = new ArrayList<SelectItem>();
    SelectItemGroup group2 = new SelectItemGroup("Manufacturing ERP");
    group2.setSelectItems(new SelectItem[] {
        new SelectItem("efge", "Generic Manufacturing"),
        new SelectItem("efip", "Industrial Products"),
        new SelectItem("efco", "Consumer"),
        new SelectItem("efwh", "Wholesale"),
        new SelectItem("efcl", "Clothing"),
        new SelectItem("efot", "Manufacturing-Others")
    });
    availableItems.add(group2);

        }

        if(group == 3){
    availableItems = new ArrayList<SelectItem>();
    SelectItemGroup group3 = new SelectItemGroup("Lab Environment");
    group3.setSelectItems(new SelectItem[] {
        new SelectItem("elge", "Generic Lab"),
        new SelectItem("elpa", "Pathology"),
        new SelectItem("elmi", "Medical Imaging"),
        new SelectItem("elot", "Lab-Others")
    });
    availableItems.add(group3);

        }

        if(group == 45){
    availableItems = new ArrayList<SelectItem>();
    SelectItemGroup group4 = new SelectItemGroup("Association/Organization");
    group4.setSelectItems(new SelectItem[] {
        new SelectItem("oage", "Generic Association"),
        new SelectItem("oaca", "College Alumni"),
        new SelectItem("oasa", "School Alumni"),
        new SelectItem("oaco", "Community Organization"),
        new SelectItem("oaeo", "Events Organizer"),
        new SelectItem("oaot", "Organization-Others")
    });
    availableItems.add(group4);
    SelectItemGroup group5 = new SelectItemGroup("Association/Club");
    group5.setSelectItems(new SelectItem[] {
        new SelectItem("ocge", "Generic Club"),
        new SelectItem("occc", "Community Club"),
        new SelectItem("ocph", "Photography"),
        new SelectItem("ocsp", "Sports"),
        new SelectItem("oche", "Health"),
        new SelectItem("ocot", "Club-Others")
    });
    availableItems.add(group5);

        }
        
        if(group == 67){
    availableItems = new ArrayList<SelectItem>();
    SelectItemGroup group6 = new SelectItemGroup("Service Consulting");
    group6.setSelectItems(new SelectItem[] {
        new SelectItem("scge", "Generic Consulting"),
        new SelectItem("scic", "IT Consulting"),
        new SelectItem("scfc", "Financial Consulting"),
        new SelectItem("scot", "Consulting-Others")
    });
    availableItems.add(group6);
    SelectItemGroup group7 = new SelectItemGroup("Service Agency");
    group7.setSelectItems(new SelectItem[] {
        new SelectItem("sage", "Generic Agency"),
        new SelectItem("sacs", "Cleaning Services"),
        new SelectItem("saia", "Insurance Agency"),
        new SelectItem("salc", "Learning Center"),
        new SelectItem("sasf", "Service for a fee"),
        new SelectItem("sams", "Maid Service"),
        new SelectItem("sals", "Landscaping Service"),
        new SelectItem("sars", "Renovation Service"),
        new SelectItem("saot", "Agency-Others")
    });
    availableItems.add(group7);
        }

        if(group == 89){
    availableItems = new ArrayList<SelectItem>();
    SelectItemGroup group8 = new SelectItemGroup("Users Forum Pictures/News");
    group8.setSelectItems(new SelectItem[] {
        new SelectItem("fsge", "Generic News Forum"),
        new SelectItem("fsco", "Community"),
        new SelectItem("fsfa", "Family"),
        new SelectItem("fsot", "Forum-Others")
    });
    availableItems.add(group8);
    SelectItemGroup group9 = new SelectItemGroup("Users Forum Issues/Bugs");
    group9.setSelectItems(new SelectItem[] {
        new SelectItem("fbge", "Generic Users Forum"),
        new SelectItem("fbso", "Software"),
        new SelectItem("fbcp", "Consumer Products"),
        new SelectItem("fbot", "Issues-Others")
    });
    availableItems.add(group9);
        }

        return availableItems;
    }


/* 
    public static String[] getEE() {
        return EE;
    }
 
    public static String[] getEF() {
        return EF;
    }
 
    public void valueChanged(ValueChangeEvent event) {
        secondList.clear();
        if (null != event.getNewValue()) {
            String[] currentItems=EE;
            if (((String) event.getNewValue()).equals("ee")) {
                currentItems = EE;
            } else {
                if (((String) event.getNewValue()).equals("ef")){
                 currentItems = EF;
                } else {
                 if (((String) event.getNewValue()).equals("el")){
                  currentItems = EL;
                 } else {
                  if (((String) event.getNewValue()).equals("oa")){
                   currentItems = OA;
                  } else {
                   if (((String) event.getNewValue()).equals("oc")){
                    currentItems = OC;
                   } else {
                    if (((String) event.getNewValue()).equals("sc")){
                     currentItems = SC;
                    } else {
                     if (((String) event.getNewValue()).equals("sa")){
                      currentItems = SA;
                     } else {
                      if (((String) event.getNewValue()).equals("fs")){
                       currentItems = FS;
                      } else {
                       if (((String) event.getNewValue()).equals("fb")){
                        currentItems = FB;
                       } else {
                        currentItems = EE;
                       }
                      }
                     }
                    }
                   }
                  }
                 }
                }
            }
 
            for (int i = 0; i < currentItems.length; i++) {
                SelectItem itemj = new SelectItem(currentItems[i]);
 
                secondList.add(itemj);
            }
        }
    }
 
    public String getCurrentType() {
        return currentType;
    }
 
    public void setCurrentType(String currentType) {
        this.currentType = currentType;
    }
 
    public String getCurrentItem() {
        return currentItem;
    }
 
    public void setCurrentItem(String currentItem) {
        this.currentItem = currentItem;
    }
*/

    /**
     * After a user is authenticated using Facebook Connect, authenticate with
     * Seam.
     */
    private String fbUid;
    private String fbEmail;
    private String fbName;
    private String fbFirst_Name;
    private String fbLast_Name;
    private String fbGender;
    private String demo="n";

    public String getFbUid() {
        return fbUid;
    }
    public void setFbUid(String fbUid) {
        this.fbUid = fbUid;
    }

    public String getFbEmail() {
        return fbEmail;
    }
    public void setFbEmail(String fbEmail) {
        this.fbEmail = fbEmail;
    }
     public String getFbName() {
        return fbName;
    }
    public void setFbName(String fbName) {
        this.fbName = fbName;
    }
     public String getFbFirst_Name() {
        return fbFirst_Name;
    }
    public void setFbFirst_Name(String fbFirst_Name) {
        this.fbFirst_Name = fbFirst_Name;
    }

    public String getFbLast_Name() {
        return fbLast_Name;
    }
    public void setFbLast_Name(String fbLast_Name) {
        this.fbLast_Name = fbLast_Name;
    }

    public String getFbGender() {
        return fbGender;
    }
    public void setFbGender(String fbGender) {
        this.fbGender = fbGender;
    }

    public String getDemo() {
        return demo;
    }
    public void setDemo(String demo) {
        this.demo = demo;
    }

    public boolean getInCreateUser() {
        return inCreateUser;
    }
    public void setInCreateUser(boolean inCreateUser) {
        this.inCreateUser = inCreateUser;
    }
    /*
      allow social media demo sigin without activation since cannot impersonate
    */
    public Boolean chekIfDemo(){
     if(owner2Code.equals("mybusinessp") || owner2Code.equals("myorgp") || owner2Code.equals("mycustommade")){     
      demo="y";//demo y means in onfbLogin UH will be used instead of VH 
      return true;
     }else{
      demo="n";//demo y means in onfbLogin UH will be used instead of VH 
      return false;
     }     

    }

    /***
    * comes from sociallogin.xhtml via jsfunction action for any Social login including FbLogin
    * This method is not invoked unless client side fb/google authentication works
    * socialLogin page is under raaspi site and redirected to from login.xhtml via h:outputLink with  
    * parameter 'for' holding from owner2 value ie the site it came from
    * hmac needed ?  
    */
    public String onSocialLogin() {
        //should not come here unless javascript social authentication completed but parameters can be null
        // post param null unless socialLogin page has toolbar calling methods
        // not needed, reuse existing req = (HttpServletRequest) FacesContext.getCurrentInstance()
        //                 .getExternalContext().getRequest();
        String fromUrl=req.getParameter("fromUrl");
        String forSite=req.getParameter("for");
        //ignore if raaspi is using raaspi to authenticate 2nd time
        if(owner2Code.contains(masterSiteCode) && (fromUrl == null || forSite == null)){
          log.severe("Error ,raaspi socialLogin fromUrl and for value "+fromUrl+", "+forSite);
         return null;
        }
        try{
         if(fromUrl == null || forSite == null){//should not happen but 
          log.severe("Error ,socialLogin owner2Code ,fromUrl and for value "+owner2Code+", "+fromUrl+", "+forSite);
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Parameter") +" "+bundle.getString("missing")+", "+bundle.getString("close")+" "+bundle.getString("and")+" "+bundle.getString("try")+" "+bundle.getString("again"),""));
           externalContext.redirect(fromUrl);//back to calling site using fromUrl
         }
         //Below code runs in Raaspi site
         owner2Code=forSite;
         String uid = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("uid");
         String email = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("email");
         //String uid = getFbUid();
         //String email = getFbEmail();  
         String fromUrlS="";
          log.severe("Ok ,socialLogin owner2Code ,fromUrl and for value and uid "+owner2Code+", "+fromUrl+", "+forSite+" ,"+uid);

         if (uid != null ) {//means autnticated by social login
          agreedToTermsOfUse=true;// avoid demosignup if social login
          agreedToTermsOfUsefb=true;//avoid signup 
          ${userEntityName?cap_first} user = findByFacebookUID(uid);
          if (user != null) {
                //loginFacebookUser(user); return and invoke onSocialAuthenticated/userLogin from original site
          
          } else {
                user = registerFacebookUser(uid, email);//create user record and assign user Role and Level
                //loginFacebookUser(user);// allow U/H if demo site. return and invoke onSocialAuthenticated/userLogin from original site
          }
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Welcome") +" "+getFbName()+"/"+getFbUid(),""));
          //pass from fromsite client sid+6;
          String userKey=user.getA0xxukuxbvxxxxxxxxxxid();
          String userOtherId=user.getC1xxuxxxbvxxxxxxxxxxotherid();
          //String social=""+yxxxch522xhhxxhxxxxxclientList.getKeyToEntity("01",owner2Code).getA0xxuobxbxxxxxxxxxxxsid()+6;
          String social= java.util.UUID.randomUUID().toString();
          user.setC4xxuxupivxxxxxxxxxxcurrpw("dummyfbPW");//
          user.setC6xxuxuoivxxxxxxxxxxoldpw(social);
          this.clearInstance();
          this.setInstance(user);
          superUpdate();
          //can come here from login or from demosoignup
          fromUrlS=fromUrl;
          fromUrlS=fromUrlS.replace("login","socialLogin");
          fromUrlS=fromUrlS.replace("demosignup","socialLogin");
          externalContext.redirect(fromUrlS+"?social="+social+"&"+"userKey="+userKey+"&"+"userOtherId="+userOtherId);//back to calling site using fromUrl
         }else{
          //log
          log.severe("Error ,fb uid null email "+ email);
         }
        }catch (Exception exc) {
            try {
             log.severe("Error fb login exception "+ exc.getMessage());
                //org.jboss.seam.transaction.Transaction.instance().setRollbackOnly();
            } catch (Exception ignore) {
            }
        }
        return null;
    }
    public String onSocialAuthenticated() {
        Map<String,String> params = 
        FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
        String social=params.get("social"); 
        String userKey=params.get("userKey"); 
        user=${userEntityName}List.getKeyToEntity(userKey);
        String socialO=user.getC6xxuxuoivxxxxxxxxxxoldpw();
        if(!social.equals(socialO)){//following msg wont appear because of redirect
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Authentication") +" "+bundle.getString("mismatch")+", "+bundle.getString("please")+" "+bundle.getString("Cancel")+", "+" "+bundle.getString("then")+" "+bundle.getString("try")+" "+bundle.getString("again"),""));
         return "home.xhtml?faces-redirect=true";
        }
        loginFacebookUser(user);
        return "home.xhtml?faces-redirect=true";
    }



    /**
     * called by above onFbLogin method but following should use from site records not Raaspi site data
     * where proxy socialLogin runs 
     * Updates the user information stored in our database with the data from
     * Facebook. jay look into updating if changed
     */
    protected void loginFacebookUser(${userEntityName?cap_first} user) {
     //setOption16 in customIdentity to pass fb loginId to authenticate
     // option16 regular use is for itemTyle and value is loaded from option table
     // jay add logic to update user info if new info comes from fb
     try{
      fbUid=user.getA0xxukuxbvxxxxxxxxxxid();//registerFac.method saved Uid as userKey
      customIdentity.setOption16(fbUid);
      customIdentity.setUserSid(-1);
      //Identity.instance().acceptExternallyAuthenticatedPrincipal(new FacebookPrincipal(fbUid)); bypasses authenticate including roles
      identity.login();
      ///login calls autenticate authenticator.authenticate();
      // increase session time out to 40 mts 40*60 secs from standard 10 mts 10*60 secs
      //if attack comes every sec then max session 500 will be reached in 8 mts but in another
      // 2 mts oldest will be removed. The IP/user agent should prevent it. We may make 500 to 700
      //look into standard as 5*60 and check url if invoice.cart or checkout then 10*60 
      if(identity.isLoggedIn()){
       session.setMaxInactiveInterval(2400);//40 mts
      }

     } catch (Exception e) {
     } 
    }


    /**
     * Registers a new user on-the-fly after authenticating with Facebook for
     * the first time.
     * setup values and then call existing doSignup()
     */
    protected ${userEntityName?cap_first} registerFacebookUser(String uid, String email) {
        user = new ${userEntityName?cap_first}();
        if(fbEmail == null){
         user.setA0xxukuxbvxxxxxxxxxxid(fbUid);//we need to get email from paypal/square etc or explicitly ask in checkout time
         user.setC1xxuxxxbvxxxxxxxxxxotherid(fbName);//and save in customer record
        }else{
         user.setA0xxukuxbvxxxxxxxxxxid(fbUid);
         user.setC1xxuxxxbvxxxxxxxxxxotherid(fbEmail);
         user.setC9xxuxxxbvxxxxxxxxxxactivationkey(fbName);
        }
        user.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
        user.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
        user.setZ2xxcztxlxxxxxxxxxxxstatusfldt(Calendar.getInstance().getTime());
        user.setZ1xxzzfxhhxxxxxxxxxxstatusfl(mopen);//

        // use the folloing 2 and if null use fbName for customer
        // doSignup will put logon id address as key since we are not getting any info from fb
        if(fbFirst_Name == null){
         this.setA0xxukuxbvxxxxxxxxxxid2(fbName.substring(fbName.length()-1));
        }else{
         this.setA0xxukuxbvxxxxxxxxxxid2(fbFirst_Name);
        } 
        if(fbLast_Name == null){
         this.setClientName(fbName);
        }else{
         this.setClientName(fbLast_Name);
        } 
  
        this.setClientEmail(fbEmail);
        Long now = System.currentTimeMillis();

        this.doSignup();
        return user;
    }

    /**
     * After the user logs out of their Facebook session, logout of the Seam
     * session.
     */
    public String onFbLogout() {
        //Contexts.getSessionContext().remove("currentUser");
        //Identity.instance().logout();
        return "";
    }

    /**
     * Lookup a User by their Facebook UID
     */
    protected ${userEntityName?cap_first} findByFacebookUID(String uid) {
        Query q = entityManager.createQuery("select u from ${userEntityName?cap_first} u where u.a0xxukuxbvxxxxxxxxxxid=:uid and u.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc");
        q.setParameter("uid", uid).setParameter("owner2", owner2Code);
        ${userEntityName?cap_first} user = null;
        try {
            user = (${userEntityName?cap_first}) q.getSingleResult();
        } catch (javax.persistence.NoResultException nre) {
            // safe to ignore!
        }
        return user;
    }

//end of userHome

</#if>


<#if menuAttributesp2 == "52" >

//

	public Integer dateCompare(Date start,Date end) {
         if(end==null){
          end=new Date();
          if (start.before(end)){
           return -1;
          }else{
           if(start.after(end)){
            return 1; 
           }
          }
         }  
         return 0;     
        }
  
      
	public String subscribeItem(String matCode,String frequency,String owner2C) {
         // Clients can sell their item on subscription basis for membership, donation
         // rate table not involved since we dont need to relate a site to a product
         if(matCode==null || matCode.isEmpty()){
	  log.severe("subscribe Item code  empty "+ matCode);
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("subscribe")+" "+bundle.getString("related")+" "+bundle.getString("Item")+" "+bundle.getString("empty")+"- "+bundle.getString("Select")+" "+bundle.getString("item"),""));
          return null;
         }
         String plan="";
         //P-1SD224157A3739842L4ZVTCA
         /*
           a link like this can be sent via email or social media tbd add a button in dashboard
          or in customerList/email to include the plan link
          https://www.paypal.com/webapps/billing/plans/subscribe?plan_id=P-65746199WD2829814L5FLCVY
          There is also a js button to add a button to any html page
         */
         if(fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(matCode,owner2C)!=null){
          if(frequency.equals("monthly")){
           plan=fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(matCode,owner2C).getG2xxuxn1bvxxxxxxxxxxsubcodesn();
          }else{
           plan=fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(matCode,owner2C).getG2xxuxn2bvxxxxxxxxxxsubcodesn2();
          }
         } 
         if(plan==null || plan.isEmpty()){
	  log.severe("RAASPI Item subscription plan id in Item subcodesn/subcodesn2 empty, for "+ matCode);
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Item")+" "+bundle.getString("subscribe")+" "+bundle.getString("related")+" "+bundle.getString("payment")+" "+bundle.getString("planId")+" "+bundle.getString("empty")+" "+bundle.getString("for")+" "+matCode+"- "+bundle.getString("contact")+" "+bundle.getString("support"),""));
          return null;
         }

         String env="";
         String goUrl="";
         if(env.equals("test")){
          goUrl="https://www.paypal.com/webapps/billing/plans/subscribe?plan_id="+plan;
         }else{
          goUrl="https://www.paypal.com/webapps/billing/plans/subscribe?plan_id="+plan;
         } 
         try{
          extCtxt = FacesContext.getCurrentInstance().getExternalContext();
          httpreq = (HttpServletRequest) extCtxt.getRequest();
          if(httpreq.getServerName().contains("8080")){
           extCtxt.redirect(goUrl);
          }else{
           extCtxt.redirect(goUrl);
          }
         }catch(Exception ex){
         }
         return null;
 	}

	public String changeCardBackGround(String colorCode) {
         // param1 is valid colorCode as red,#f0f0f0 etc and applied to client 01 record field rate1ta
         colorCode=colorCode.trim();
         if(colorCode ==null || colorCode.isEmpty()){ 
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("colorCode")+" "+colorCode+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("any")+" "+bundle.getString("valid")+" "+bundle.getString("color")+" "+bundle.getString("red")+", "+bundle.getString("#f0f0f0")+" "+bundle.getString("etc")+" "+bundle.getString("can")+" "+bundle.getString("be")+" "+bundle.getString("entered"),""));
          return null;
         }
         Yxxxch522xhhxxhxxxxxclient yxxxch522xhhxxhxxxxxclient = yxxxch522xhhxxhxxxxxclientList.getKeyToEntity("01");
         yxxxch522xhhxxhxxxxxclient.setO6xxuxxxbvxxxxxxxxxxnrate1ta(colorCode);
         this.setInstance(yxxxch522xhhxxhxxxxxclient);
         this.persist(owner2Code);
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_WARN,bundle.getString("colorCode")+" "+colorCode+" "+bundle.getString("applied")+", "+bundle.getString("verify")+" "+bundle.getString("background")+" "+bundle.getString("color")+" "+bundle.getString("change"),""));

         return null;
        }


    /***
    * comes from MydashBoard.xhtml for extending trial or subcription renew period free of charge   
    * 3 parameters item code,couponCode and client sid
    * for trial the coupon code must contain trial in it and for yearly it should contaib renew
    * The logic below needs a little change to handle renew (tbd)  
    */
	public String applyCoupon(String matSidS,String couponId,int sid) {
          
         // param1 is client serial num sid like 281 for bus, param2 is couponCode,param3 sid for client row 01 
         Yxxxch522xhhxxhxxxxxclient yxxxch522xhhxxhxxxxxclient = yxxxch522xhhxxhxxxxxclientList.getSidToEntity(sid);
         couponId=couponId.trim();
         if(couponId ==null || couponId.isEmpty()){ 
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("couponId")+" "+couponId+" "+bundle.getString("is")+" "+bundle.getString("empty"),""));
          return null;
         }
         if(!couponId.toLowerCase().contains("trial")){ 
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("couponId")+" "+couponId+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("for")+" "+bundle.getString("trial")+" "+bundle.getString("period"),""));
          return null;
         }
         if(couponId.toLowerCase().contains("trial")
            && !yxxxch522xhhxxhxxxxxclient.getF6xxuxxxlvxxxxxxxxxxlicensetype().equals("Trial")){ 
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("coupon")+" "+couponId+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("for")+" "+bundle.getString("current")+" "+bundle.getString("site")+" "+bundle.getString("license")+" "+bundle.getString("type")+" "+yxxxch522xhhxxhxxxxxclient.getF6xxuxxxlvxxxxxxxxxxlicensetype(),""));
          return null;
         }

         int trialPeriod=0;//days
         int useCount=0;//ratetable step
         if(matSidS==null || matSidS.isEmpty()){
	  log.severe("client serialnum empty "+ matSidS);
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("subscribe")+" "+bundle.getString("coupon")+" "+bundle.getString("related")+" "+bundle.getString("serialnumber")+" "+bundle.getString("empty")+"- "+bundle.getString("contact")+" "+bundle.getString("support"),""));
          return null;
         }
         //at doregister() item sid value put into client record 01 for a site
         //ratetable SC,matSidS as stepname  get coupon value as period days 
         //update client licensetype to prevent applying again since it wont be trial anymore
         Yxxxuq591xwwqqhxxxxxrate1f entry =yxxxuq591xwwqqhxxxxxrate1fList.getRaaspiIncentiveToEntity("SC",couponId);
         if(entry == null){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("no")+" "+bundle.getString("coupon")+" "+bundle.getString("match")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+couponId,""));
          return null;
         }
         calendar.setTime(Calendar.getInstance().getTime());//today
         if((entry.getB2xxuxxrbv51xxxxxxxxstepname().equals(matSidS) || entry.getB2xxuxxrbv51xxxxxxxxstepname().equals("ANY"))
           && entry.getH3xxuxxrbvxxxxxxxxxxincentive().toLowerCase().equals(couponId)
              && calendar.getTime().after(entry.getH1xxcxxrbvxxxxxxxxxxeffdate()) && calendar.getTime().before(entry.getH2xxcxxrbvxxxxxxxxxxenddate())){
           trialPeriod= entry.getB4xxcxxrbvxxxxxxxxxxvalue().intValue();
           useCount=entry.getB3xxzxxrbvxxxxxxxxxxstep();
           if(useCount > 49){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("We")+" "+bundle.getString("are")+" "+bundle.getString("very")+" "+bundle.getString("sorry")+", "+bundle.getString("limit")+" "+bundle.getString("for")+" "+bundle.getString("coupon")+" "+couponId+" "+bundle.getString("now")+" "+bundle.getString("exceeded"),""));
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("You")+" "+bundle.getString("can")+" "+bundle.getString("still")+" "+bundle.getString("continue")+" "+bundle.getString("with")+" "+bundle.getString("the")+" "+bundle.getString("free")+" "+bundle.getString("trial"),""));
             return null;
           }else{
            entry.setB3xxzxxrbvxxxxxxxxxxstep(useCount+1);
            yxxxuq591xwwqqhxxxxxrate1fHome.setInstance(entry);
            yxxxuq591xwwqqhxxxxxrate1fHome.persist(masterSiteCode);
           }
          }else{
           if(!entry.getB2xxuxxrbv51xxxxxxxxstepname().equals(matSidS) && !entry.getB2xxuxxrbv51xxxxxxxxstepname().equals("ANY")){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("coupon")+" "+couponId+" "+bundle.getString("not")+" "+bundle.getString("valid")+" "+bundle.getString("for")+" "+bundle.getString("site")+" "+bundle.getString("product")+" "+matSidS,""));
             return null;
           }
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_WARN,bundle.getString("coupon")+" "+couponId+" "+bundle.getString("expired")+" "+bundle.getString("now"),""));
           return null;
   
         }
                  
         calendar.setTime(yxxxch522xhhxxhxxxxxclient.getF7xxcxxxlvxxxxxxxxxxlicensestart());
         calendar.add(Calendar.DATE, trialPeriod);
         yxxxch522xhhxxhxxxxxclient.setF8xxcxxxlvxxxxxxxxxxlicenseend(calendar.getTime());
         yxxxch522xhhxxhxxxxxclient.setF6xxuxxxlvxxxxxxxxxxlicensetype("Yearly");
         this.setInstance(yxxxch522xhhxxhxxxxxclient);
         this.persist(owner2Code);
         //trial coupon can be used once only since licensetype got changed to yearly, renewal time can choose monthly or Yearly
         // add similar logic in subscribe method to allow coupon to extend expiry. can reuse same coupn but needs to pay again for another tear
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_WARN,bundle.getString("coupon")+" "+couponId+" "+bundle.getString("applied")+", "+bundle.getString("verify")+" "+bundle.getString("subscription")+" "+bundle.getString("expiry")+" "+bundle.getString("date"),""));

         return null;
 	}






	public String subscribe(String matSidS,String frequency,String owner2C) {
         // add more logic in takeaction to automate like paynow button
         // in the meantime use sqlAdmin enailSubscribed to sendemail and update expiry date
         // can come from MyDashborad for subscription after trial or from itemdetailsBroewse for any 
         // item sold for subscription. Added getSidToEntity(sid,owner2)
         // tbd coupon for subscription, coupon id can be anything but cannot contain trial word 
         if(matSidS==null || matSidS.isEmpty()){
	  log.severe("client serialnum empty "+ matSidS);
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("subscribe")+" "+bundle.getString("related")+" "+bundle.getString("serialnumber")+" "+bundle.getString("empty")+"- "+bundle.getString("contact")+" "+bundle.getString("support"),""));
          return null;
         }
         String plan="";
         Integer sid=0;
         //P-1SD224157A3739842L4ZVTCA
         //at doregister() item sid value put into client record 01 for a site
         try{
          sid=Integer.parseInt(matSidS);// moved here check if serialnumber/matSids is not numeric
         }catch ( Exception e){
	  log.severe("client serialnum not numeric "+ matSidS);
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_ERROR,bundle.getString("subscribe")+" "+bundle.getString("related")+" "+bundle.getString("serialnumber")+" "+bundle.getString("invalid")+"- "+bundle.getString("contact")+" "+bundle.getString("support"),""));
             return null;
         }
         if(fpxxfq1a5xwwqqhxxxxxitemList.getSidToEntity(sid,owner2C)!=null){
          if(frequency.equals("monthly")){
           plan=fpxxfq1a5xwwqqhxxxxxitemList.getSidToEntity(sid,owner2C).getG2xxuxn1bvxxxxxxxxxxsubcodesn();
          }else{
           plan=fpxxfq1a5xwwqqhxxxxxitemList.getSidToEntity(sid,owner2C).getG2xxuxn2bvxxxxxxxxxxsubcodesn2();
          }
         } 
         if(plan==null || plan.isEmpty()){
	  log.severe("RAASPI subscription plan id in Item subcodesn/subcodesn2 empty, for "+ sid);
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("subscribe")+" "+bundle.getString("related")+" "+bundle.getString("payment")+" "+bundle.getString("planId")+" "+bundle.getString("empty")+" "+bundle.getString("for")+" "+sid+"- "+bundle.getString("contact")+" "+bundle.getString("support"),""));
          return null;
         }

         String env="";
         String goUrl="";
         if(env.equals("test")){
          goUrl="https://www.paypal.com/webapps/billing/plans/subscribe?plan_id="+plan;
         }else{
          goUrl="https://www.paypal.com/webapps/billing/plans/subscribe?plan_id="+plan;
         } 
         try{
          extCtxt = FacesContext.getCurrentInstance().getExternalContext();
          httpreq = (HttpServletRequest) extCtxt.getRequest();
          if(httpreq.getServerName().contains("8080")){
           extCtxt.redirect(goUrl);
          }else{
           extCtxt.redirect(goUrl);
          }
         }catch(Exception ex){
         }
         return null;
 	}



       //part of postCons String skinCode = externalContext.getRequestParameterMap().get("skin");

 // client methods
        String clientSkin=null;
	public String getClientSkin() {
		return clientSkin;
	}

	public void setClientSkin(String clientSkin) {
		this.clientSkin = clientSkin;
	}

        public void setClientTheme(){
        // nullify temp skin skint so that new skin change take effect
         skinBean.setSkint(null);
         try{
           this.instance.setJ4xxuxxxbvxxxxxxxxxxscrcolor(clientSkin);
           this.update();
         } catch (Exception e) {
			log.severe("Error accessing client"+ e);
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("client")+" "+bundle.getString("access")+" "+bundle.getString("failed")+" "+e.getMessage(),""));
         }
        }
    public void saveSkin(String skin ) {
     skinCode=skin;// 
     // update theme value in client
        // nullify temp skin skint so that new skin change take effect
        skinBean.setSkint(null);
        try {
                 ${clientEntityName?cap_first} ${clientEntityName} =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2",owner2Code )
					.getSingleResult();
		 if (${clientEntityName} != null) {
                  ${clientEntityName}.setJ4xxuxxxbvxxxxxxxxxxscrcolor(skinCode);
                  this.setInstance(${clientEntityName});
                  this.update();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("updated")+", "+bundle.getString("for")+" "+owner2Code,""));

                  return;
                }
        } catch (Exception e) {
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("error")+" "+e.getMessage(),""));

        }



    }

    public void saveFonts(String fontSize,String mobileMenuFontSize,String fonts,String mobileFonts ) {
     // update theme value in client
        try {
                 ${clientEntityName?cap_first} ${clientEntityName} =(${clientEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${clientEntityName?cap_first} cc where cc.${clientClientversion} = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","01")
					.setParameter("owner2",owner2Code )
					.getSingleResult();
		 if (${clientEntityName} != null) {
                  this.setInstance(${clientEntityName});
                  ${clientEntityName}.setJ7xxuxxxbvxxxxxxxxxxbaccolor(fontSize);
                  ${clientEntityName}.setM2xxuxxxbvxxxxxxxxxxrepcsize(mobileMenuFontSize);
                  ${clientEntityName}.setJ5xxuxxxbvxxxxxxxxxxhilcolor(fonts);
                  ${clientEntityName}.setJ6xxuxxxbvxxxxxxxxxxtextcolor(mobileFonts);
                  this.persist();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+bundle.getString("as")+" "+owner2Code,""));

                  return;
                }
        } catch (Exception e) {
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("error")+" "+e.getMessage(),""));

        }



    }

    public String createRecord(String version){
      if(${clientEntityName}List.getKeyToEntity(version) != null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("record")+" "+bundle.getString("already")+" "+bundle.getString("exists")+" "+bundle.getString("for")+" "+version,""));
       return "";
      }
      this.clearInstance();
      this.getInstance().setA0xxukxxbvxxxxxxxxxxclientversion(version);
      // use locale info 
      Locale locale=FacesContext.getCurrentInstance().getExternalContext().getRequestLocale();
      Currency c  = Currency.getInstance(locale);
      if(c.getCurrencyCode() !=null){
       this.getInstance().setK1xxuxxxbvxxxxxxxxxxcurrcode(c.getCurrencyCode());//used for Square, can be changed
       this.getInstance().setJ9xxuxxxbvxxxxxxxxxxcurrsymb(c.getSymbol());//used for Square merchant a/c
      }else{ 
       this.getInstance().setK1xxuxxxbvxxxxxxxxxxcurrcode("CAD");//used for Square, can be changed
       this.getInstance().setJ9xxuxxxbvxxxxxxxxxxcurrsymb("C$");
      }
      this.persist();//02/03/04/07...
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("record")+" "+bundle.getString("created")+" "+bundle.getString("for")+" "+version,""));

      if(version.equals("07")){
       //overwrite/update record 01 SMTP to suit Google
       this.clearInstance();
       ${clientEntityName?cap_first} client=${clientEntityName}List.getKeyToEntity("01");
       if(client != null){
        client.setL6xxzxxrbvxxxxxxxxxxaltselen(587);
        client.setO9xxfxxxbvxxxxxxxxxxbeepsou(true);//auth
        client.setP1xxfxxxbvxxxxxxxxxxconfirm(true);//relayoff
        client.setP2xxfxxxbvxxxxxxxxxxlinefeed(true);//tsl
        client.setZ8xxuxxxbvxxxxxxxxxxsmtpserver("smtp.gmail.com");
        if(owner2Code.length() >18){
         client.setZ9xxuxxxbvxxxxxxxxxxsmtpuser(owner2Code.substring(0,18)+".raaspi@gmail.com");//17ch and smtpuser is max 35chrs so allow 35-17=18chrs from owner2Code
        }else{
         client.setZ9xxuxxxbvxxxxxxxxxxsmtpuser(owner2Code+".raaspi@gmail.com");//17ch and smtpuser is max 35chrs so allow 35-17=18chrs from owner2Code
       }
        client.setZaxxuxxxssxxxxxxxxxxsmtppass("Access Token used");
        this.setInstance(client);
        this.superUpdate();
       }
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("click")+" "+bundle.getString("edit")+" "+bundle.getString("for")+" "+bundle.getString("record")+" "+bundle.getString("07")+" "+bundle.getString("to")+" "+bundle.getString("continue")+" "+bundle.getString("Gmail")+" "+bundle.getString("smtp")+" "+bundle.getString("setup"),""));
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("In")+" "+bundle.getString("edit")+", "+bundle.getString("click")+" "+ "Allow RAASPI to setup Gmail SMTP"+" "+bundle.getString("and")+" "+bundle.getString("use")+" "+bundle.getString("your")+" "+bundle.getString("Gmail")+" "+bundle.getString("account")+" "+bundle.getString("to")+" "+bundle.getString("grant")+" "+bundle.getString("access")+" "+bundle.getString("to")+" "+bundle.getString(masterSiteCode)+" "+bundle.getString("App"),""));
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Use")+" "+bundle.getString("existing")+" "+bundle.getString("or")+" "+bundle.getString("new")+" "+bundle.getString("Gmail")+" "+bundle.getString("Id")+", "+bundle.getString("but")+" "+bundle.getString("granting")+" "+bundle.getString("access")+" "+bundle.getString("id")+" "+bundle.getString("and")+" "+bundle.getString("Gmail")+" "+bundle.getString("SMTP")+" "+bundle.getString("user")+" "+bundle.getString("must")+" "+bundle.getString("be")+" "+bundle.getString("same"),""));
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Until")+" "+bundle.getString("formal")+" "+bundle.getString("approval")+" "+bundle.getString("you")+" "+bundle.getString("may")+" "+bundle.getString("get")+", "+bundle.getString("warning")+" "+bundle.getString("about")+" "+bundle.getString("granting")+" "+bundle.getString("access")+" "+bundle.getString("to")+" "+bundle.getString(masterSiteCode)+", "+bundle.getString("which")+" "+bundle.getString("you")+" "+bundle.getString("can")+" "+bundle.getString("bypass"),""));

      }
      
      return "/clientList.xhtml";
    }

     
</#if>

<#if menuAttributesp2 == "1R" >
      String resource_bundleName="m"; 
      int deletedCount=0;
     //jay update this logic to delete by language
     //copy defaults message (split in few parts) values to resource under owner=sss owner2=SYSTEM  and can be called and reused      for existing tenanant
     //since it delete and rebuilds system messages but does not touch client own messages
    /**
    * The following method is used for deleting and creating system messages only 
    * called by sqlAdmin.xhtml 
    * @return "copy Messages done" 
    * any resource or resource_bundle with SYSTEM as owner2 is deleted first
    * resource_bundle entries for name m,men,mbn,menCA etc with owner2Code SYSTEM are added, followed by resource entries for various resource_bundles
    * separate methods like copyDefaultFrMessagesToSYSTEM and opyDefaultFldMessagesToSYSTEM() exists but relies on this method
    * to clear system bundles and messages
    * @exception none.(tbd try/catch) 
    * @see 
    *  changes to messagebundle means menCA wont work, tbd use menUSoC as resource_bundle name to support locale en_US_owner2CA
    * owner2 is tenants like raaspi,codeitnow etc. menUS will work because country default is US 
    */ 
     public String copyDefaultMessagesToSYSTEM() {
     // this needs to be done once only ie if  and not to be repeated for each tenant and can be repeated later to add new messages
     // but do not delete tenant entered entries which logically override these system messages
     try{
      deletedCount =  entityManager.createQuery("DELETE FROM ${resourceEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", "SYSTEM").executeUpdate();
       //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        //FacesMessage.SEVERITY_INFO,bundle.getString("resource")+" "+bundle.getString("delete")+" "+bundle.getString("count")+" "+deletedCount+" SYSTEM",""));
       log.info(bundle.getString("resource")+" "+bundle.getString("delete")+" "+bundle.getString("count")+" "+deletedCount+" SYSTEM");

      //delete bad old resource entries,if any first, like system resource_bundle used by client

      //deletedCount =  entityManager.createQuery("DELETE FROM Yxxxuq1r1xwwqqhxxxxxresource a WHERE (a.zzxxu2oxxhxxxxxxxxxxowner2 <> :p and exists(select * from yxxxuq1l1xwwqqhxxxxxresource_bundle b where b.a0xxuobxbxxxxxxxxxxxsid = a.yxxxuq1l1xwwqqhxxxxxresourcebundle and b.zzxxu2oxxhxxxxxxxxxxowner2=:p) )").setParameter("p", "SYSTEM").executeUpdate();
      String sqlScript ="";
      sqlScript="DELETE FROM genapp.resource a WHERE (a.owner2 <> 'SYSTEM' and exists(select * from genapp.resource_bundle b where b.sid = a.resourcebundle and b.owner2='SYSTEM') )";
      Query q = entityManager.createNativeQuery(sqlScript);
      deletedCount =  q.executeUpdate();

       //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        //FacesMessage.SEVERITY_INFO,bundle.getString("resource")+" "+bundle.getString("delete")+" "+bundle.getString("count")+" "+deletedCount+" SYSTEM bundle used by client",""));
       log.info(bundle.getString("resource")+" "+bundle.getString("delete")+" "+bundle.getString("count")+" "+deletedCount+" SYSTEM bundle used by client");
      deletedCount =  entityManager.createQuery("DELETE FROM Yxxxuq1l1xwwqqhxxxxxresource_bundle a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", "SYSTEM").executeUpdate();
       //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        //FacesMessage.SEVERITY_INFO,bundle.getString("resource_bundle")+" "+bundle.getString("delete")+" "+bundle.getString("count")+" "+deletedCount+" SYSTEM bundle ",""));
       log.info(bundle.getString("resource_bundle")+" "+bundle.getString("delete")+" "+bundle.getString("count")+" "+deletedCount+" SYSTEM bundle ");

     // create resource bundle entries below, only SYSTEMS needed no tenant version needed
      ${resource_bundleEntityName}Home.clearInstance();
	if (${resource_bundleEntityName} == null) {
	    ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
	}
      // resource_bundle for language only
      // default
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("m");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${resource_bundleEntityName}Home.persist("SYSTEM");
      ${resource_bundleEntityName}Home.clearInstance();
      ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("mfr");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("fr");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${resource_bundleEntityName}Home.persist("SYSTEM");
      ${resource_bundleEntityName}Home.clearInstance();
      ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("mbn");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("bn");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${resource_bundleEntityName}Home.persist("SYSTEM");
      ${resource_bundleEntityName}Home.clearInstance();

      ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("mhi");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("hi");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${resource_bundleEntityName}Home.persist("SYSTEM");
      ${resource_bundleEntityName}Home.clearInstance();
      ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("men");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("en");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${resource_bundleEntityName}Home.persist("SYSTEM");
      ${resource_bundleEntityName}Home.clearInstance();

      ${resource_bundleEntityName}=${resource_bundleEntityName}Home.getInstance();
      ${resource_bundleEntityName}.setA0xxukrdbvxxxxxxxxxxname("mde");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxlanguage("de");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxcountry("");
      ${resource_bundleEntityName}.setA1xxuxxxbvxxxxxxxxxxvariant("");
      ${resource_bundleEntityName}.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resource_bundleEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${resource_bundleEntityName}Home.persist("SYSTEM");
      ${resource_bundleEntityName}Home.clearInstance();
      // resource_bundle for languageCountry 
      yxxxuq1l1xwwqqhxxxxxresource_bundle=yxxxuq1l1xwwqqhxxxxxresource_bundleHome.getInstance();
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA0xxukrdbvxxxxxxxxxxname("menCA");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxlanguage("en");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxcountry("CA");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxvariant("");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.persist("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.clearInstance();
      yxxxuq1l1xwwqqhxxxxxresource_bundle=yxxxuq1l1xwwqqhxxxxxresource_bundleHome.getInstance();
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA0xxukrdbvxxxxxxxxxxname("menUS");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxlanguage("en");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxcountry("US");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxvariant("");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.persist("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.clearInstance();
      // resource_bundle for languageCountryVariant(prodCode) 
      yxxxuq1l1xwwqqhxxxxxresource_bundle=yxxxuq1l1xwwqqhxxxxxresource_bundleHome.getInstance();
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA0xxukrdbvxxxxxxxxxxname("menCAfb");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxlanguage("en");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxcountry("CA");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxvariant("fb");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.persist("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.clearInstance();
      yxxxuq1l1xwwqqhxxxxxresource_bundle=yxxxuq1l1xwwqqhxxxxxresource_bundleHome.getInstance();
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA0xxukrdbvxxxxxxxxxxname("menUSfb");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxlanguage("en");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxcountry("US");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setA1xxuxxxbvxxxxxxxxxxvariant("fb");
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      yxxxuq1l1xwwqqhxxxxxresource_bundle.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.persist("SYSTEM");
      yxxxuq1l1xwwqqhxxxxxresource_bundleHome.clearInstance();


     
	if (${resourceEntityName}li == null) {
	    ${resourceEntityName}li=this.getInstance();
	}
      // for the time being message keys are hard coded ie copy pasted, in future look into automation using entity property name
      // some work already done- look into merged.properties under project resource directory for automated output
      // messages but no locale , no need to put separate en , any other language will need separate entry
      resource_bundleName="m"; 
      // add logic to use resource_bundle with key messages,messages_en, messages_en_ca etc. each tenant will see their message
      // if they change value for messages with owner SYSTEM
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);

      this.clearInstance();
//MockUps are needed since it is better to see the change and get approval first
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Top Left Graphics- Recommended width 300px maintain ratio for height");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("TopLeftGraphics");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Hide Top Left Graphics");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("TopLeftGraphicsToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mid Top Graphics- Recommended width 100px maintain ratio for height");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MidTopGraphics");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Hide Mid Top Graphics");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MidTopGraphicsToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Right Top Graphics- Recommended width 100px maintain ratio for height");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("RightTopGraphics");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Hide Right Top Graphics");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("RightTopGraphicsToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//End Of MockUps
// menu messages
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Blog");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Browse_Blog");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Picture");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Browse_Picture");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Theme");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Browse_Theme");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("common_notify");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("site_notify");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("backOffice_notify");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();



      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Explore");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Explore");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u2630");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.More");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Items");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Items");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Pictures");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Image_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("LogIn");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("LogIn");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visual General Flow");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visual General Flow");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Financials Flow");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickFinancial");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Financials Flow");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickFinancial_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Status Dashboard");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboard");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Status Dashboard");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboard_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Change Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.LabelViews");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Change Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.LabelViews_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
 
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visitor Menue Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VisitorMenueView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visitor Menue Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VisitorMenueView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Menue Labels After LogIn");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("LoggedInMenueView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Menue Labels After LogIn");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("LoggedInMenueView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Field Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("FieldNamesView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Field Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("FieldNamesView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Products");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Products_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Products_1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Products_1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Products_2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Products_2_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Products_3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New Products");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Products_3_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
     ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.News");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.News_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News_1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News_1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News_2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News_2_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New News");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News_3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Calendar");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Calendar");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Calendar");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Calendar_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.About");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.About_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About_1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About_1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About_2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About_2_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About_3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New About");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About_3_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Resellers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Resellers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resellers_1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resellers_1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resellers_2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resellers_2_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resellers_3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New Resellers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resellers_3_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Contact Us/FAQ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.ContactUs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Contact Us");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.ContactUs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("ContactUs");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs_1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("ContactUs");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs_1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other ContactUs");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs_2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other ContactUs");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs_2_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New ContactUs");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs_3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New ContactUs");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs_3_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add/List/Report..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add/List/Report..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("LogIn");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.Login");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("LogIn");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.Login_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddL1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListL1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportL1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.reportName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.reportName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("display As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.displayAs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("display As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.displayAs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("start");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.start");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("start");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.start_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("end");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.end");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("end");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.end_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.markedOnes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.markedOnes_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("target Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.targetId");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("target Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.targetId_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("sort Key");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.sortBy");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("sort Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.sortOrder");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();



      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddLB");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddLB_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListLB");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListLB_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportLB");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportLB_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Address");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Address_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Department");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Department");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Department");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Department_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Company");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Company_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Division");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Division");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Division");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Division_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Location");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Location");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Location");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Location_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Items w Renewals");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemtemptype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Items w Renewals");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemtemptype_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Residency");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Residency");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Residency");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Residency_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Materials");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembom");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Materials");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembom_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activity");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activity_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customer");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customer_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendor_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Employee");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Employee_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Earner");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Wageearner");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Earner");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Wageearner_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Journal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Journal");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Journal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Journal_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cjournal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cjournal");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cjournal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cjournal_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Payment History");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Arthahist");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Payment History");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Arthahist_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuquote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuquote_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Quote");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Quote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Quote");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Quote_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Order");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Order_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Invoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Invoice_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuorders");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuorders_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuinvoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuinvoice_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cpayment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cpayment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venquote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venquote_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendorders");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendorders_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vinvoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vinvoice_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Shipment Receive");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vshipmen");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Shipment Receive");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vshipmen_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vpayment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vpayment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Emplorders");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Emplorders_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job/Machine Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobassignment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job/Machine Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobassignment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Trial Balance");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("trailbalancereport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Trial Balance");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("trailbalancereport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Balance Sheet");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("balancesheetreport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Balance Sheet");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("balancesheetreport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Income Statement");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("incomestatementreport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Income Statement");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("incomestatementreport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Group/Team");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Membersgroup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Group/Team");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Membersgroup_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage/Expense By Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Usagebyperiods");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage/Expense By Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Usagebyperiods_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ccontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ccontact_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Vendor Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vcontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Vendor Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vcontact_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Roll Up Group");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rollupgroup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Roll Up Group");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rollupgroup_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Members");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Groupmembers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Members");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Groupmembers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Schedule");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Schedule");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Schedule");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Schedule_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemjob");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemjob_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Machine");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Machine");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Machine");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Machine_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial Numbers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialnumbers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial Numbers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialnumbers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Material Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembomdetails");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Material Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembomdetails_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Scan Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Scandate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Scan Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Scandate_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Gentriesdetails");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Gentriesdetails_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Transactions");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Transactions");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.New");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.New_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.List");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.List_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheque");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venartha");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheque");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venartha_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activityjob");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activityjob_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheques");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("vendorcheques");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheques");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("vendorcheques_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Calculator");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Calculator");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Calculator");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Calculator_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailings");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailings");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.Labels");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.Labels_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMails");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.EMails");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMails");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.EMails_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Subject");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSubject");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Subject");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSubject_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("eMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.eMail");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("eMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.eMail_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("send As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.sendAs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("send As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.sendAs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.markedOnes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.markedOnes_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailing Content");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSource");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailing Content");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSource_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Enter Prefix to search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("m.EnterPrefix");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Enter Prefix to search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("m.EnterPrefix_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SetUps");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Maintenance");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SetUps");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Maintenance_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Text or Documents");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Clobdata");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Text or Documents");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Clobdata_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Images or Multimedia");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Blobdata");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Images or Multimedia");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Blobdata_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message/Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message/Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message Language Bundle");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource_bundle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message Language Bundle");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("resource_bundle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message Language Bundle");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource_bundle_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Selection Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Options");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Selection Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Options_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gen Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Genoptions");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gen Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Genoptions_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Configuration");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Client");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Configuration");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Client_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Profile");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Userprofl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Profile");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Userprofl_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("User");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("User_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting Period");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Acperiod");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting Period");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Acperiod_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Account");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Account");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Account");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Account_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Account Integration");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Acintegr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Account Integration");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("acintegr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");

      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period Dates");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Perioddates");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period Dates");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Perioddates_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Glentries");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Glentries_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Year End");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("YearEnd");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Year End");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("YearEnd_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tools");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Tools");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tools");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Tools_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Process Hung");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Workspace");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Process Hung");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Workspace_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ConversationList");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ConversationList_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Check waiting approval");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Check_waiting_approval");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Submission status");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Check_submission_status");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//popmenu
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("What Do I do");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("left_pop");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tell Me");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("left_pop_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("More Questions ?");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("right_pop");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tell Me More");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("right_pop_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

 // home- change password etc
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("prefs_change_password");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("prefs_change_password_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_forgot_password");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Forgot Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_forgot_password_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchTerm");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchTerm_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchButton");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchButton_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("tb_sep");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("tb_sep_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Create Site");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("register");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Create Site");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("register_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Please enter your username and we'll send you a new temporary password via EMail you are registered under.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("forgot_form_desc");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Please enter your username and we'll send you a new temporary password via EMail you are registered under.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("forgot_form_desc_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_username");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_username_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_email");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_email_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reset_password");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reset_password_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password Recovered");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password Recovered");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new temporary password has been sent to email address. After logging in with your temporary password, you will be prompted to change the password to a value of your choice.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered_sent");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new temporary password has been sent to email address. After logging in with your temporary password, you will be prompted to change the password to a value of your choice.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered_sent_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Ok");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ok");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Ok");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ok_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("terms_of_use");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("terms_of_use_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new account for <b>{0}</b> has been created but is not active yet. You will receive an email at <b>{1}</b> from vinwiki.org containing a link that will activate your new account.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reg_pending_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new account for <b>{0}</b> has been created but is not active yet. You will receive an email at <b>{1}</b> from vinwiki.org containing a link that will activate your new account.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reg_pending_title_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sign Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sign Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Demo Sign Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("demosignup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Reset");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Log In");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Don't have Logon Id and Password? Create One");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_to_create_logon_Id");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("signup done? logon now");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_done_logon_now");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on to log into your application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("semail_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Firstname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Firstname_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastname_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Logon ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Logonid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Logon ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Logonid_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Decide and enter the id you will later use to Login. You may use your Email id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("slogonid_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SignUp/LogOn Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("slogonid_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Enter search value and clich button");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("search_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Optional Address Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("OptionalToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Optional Address Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("OptionalToggle_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Respond here to The question known as a CAPTCHA and may have lowerr case characters or digits but not 1 or 0. It helps reduce spam and other robotic attacks. You may use the refresh button to make the shapes easier to read");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("captcha_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("The question is known as a CAPTCHA and may have lower case characters or digits but no l or 0. It helps reduce spam and other robotic attacks.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("captcha_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Use this reload/refresh button to make it easier to read, only lower case characters or digits but no l or 0 are used. If you submit with a wrong value, the form will keep the other field values entered but show a new captcha value. You may clear the entered value and refresh. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("captcha_reload_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("captcha response did not match, see reload help tips");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("lacewiki.label.VerificationError");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Agree To Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("agree_to_terms");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Agree To Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("agree_to_terms_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Submit");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("submit");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Submit");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("submit_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Done");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("done");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Done");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("done_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your Email");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("your_email");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("your_email_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Website Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientWebsiteName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Website Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientWebsiteName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Website URL");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientFullUrlName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Full URL Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientFullUrlName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Usage");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationUsage");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Usage");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationUsage_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();



      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Small");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_small");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Medium");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_med");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Large");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_large");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Temp password being used,change before ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("temp_password_being_used_change_before");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Exit Customization");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("exit_customization");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on before you can log into your new application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("remail_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on before you can log into your new application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("remail_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Personal Name or Company Name for which the site will be created");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rname_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Personal Name or Company Name for which the site will be created");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rname_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("xxx part of the xxx."+urlName+" or xxx.com or xxx.org");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rapp_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("includes .com part of the xxx.com,use default value shown, or override with your own registered domain name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("tld_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Can be changed later, is used to hide some menue options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rsize_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Can be changed later, is used to hide some menue options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rsize_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First time user need to sign up here and get quick validation. If you are a returning user, use Log In ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("demosignup_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First time user need to sign up here and get validated. If you are a returning user, use Log In ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode); 
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visitors do not need to Login to browse around or to buy Items. However for back office functions one need to sign up and agree to terms before they can login. Login also makes repeat purchasing quicker");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Single Sign On (SSO) is supported here- you can reuse your id/password for any of the related web sites ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("sso_supported");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode); 
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Create your own Site for Visitors and for back office usage ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("register_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your Name/Company Name ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientRegistrationName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your Name/Company Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientRegistrationName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("More Fields");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("EditToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("More Fields");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("EditToggle_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If business customer, the following is used as primary contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("business_customer_contact_below");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If business customer, the following is used as primary contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("business_customer_contact_below_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If business vendor, the following is used as primary contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("business_vendor_contact_below");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("chngpswd");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password should be kept secret and changed as needed");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("chngpswd_directive");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Theme");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activate_theme");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Change");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Read");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("read");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sales call");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("to_call");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sales report");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("sales_data_report");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Load sales data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("load_sales_data");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Click Reset");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("press_reset");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("will reload and refresh web page");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reset_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//navigation
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("<");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("left");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(">");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("right");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//Field names
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bundled qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Caseqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address Line 1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrl1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address Line 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrl2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("City");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("City");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      // field names which are locale specific also have entries under country locale. The following are generic 
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("State");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Province");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Province");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Country");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Country");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Postal or Zip code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Pzcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address Line 3");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrl3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Description");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Descript");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Notes");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Notes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Put GL prefix as");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Glprefix");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Floor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Floor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Room");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Room");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Rack");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rack");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Exclude");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Exclude");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Parent Item");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ItemAsParent");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Source");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Source1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("UPC Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Upccode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cost");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cost");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Replacement Cost");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Replcost");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Selling Price");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Selprice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Effective Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Effdate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Effective Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ieffdate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("End Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ienddate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment Refernce");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reorder at qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Qtylevel1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Unit");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Unit");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Type");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Type");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      //Tax1 is label of the boolean field and Custtax1 is label for any reference value and Tax1amtt label for amount used in txns
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Federal Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Alternate Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Aliascode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting set");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Integrset");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Picture/Pdf File");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Docmnt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Parent Activity");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ActivityAsParent");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Source");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Source2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Misccode1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Code 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Misccode2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Barcode value");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Barupc");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Title");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job Title");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobtitle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Middle Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Middlenam");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customerascompanyname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("signature text");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signature_text");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Image Editor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Image_Editor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Text Editor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Text_Editor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Office Phone");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phoneo");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Home Phone");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phoneh");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mobile Phone");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phonec");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Fax Number");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phonex");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Lan IP #");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lanaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wan IP #");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Wanaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lmailaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMail address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Imailaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Remote connection");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rmailaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Web site");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Intaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Date Of Birth");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Dob");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Where born(City,Country)");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Placeofbirth");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Internal Web site ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Inraddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gender");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Sex");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Suppress Shipment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shiplabel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Federal Excemption ref");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("CustTax1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State Excemption ref");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("CustTax2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Excemption ref");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("CustTax3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last contacted");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Contacted");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("By");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Bywho");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("To contact on");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Nextcontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Using");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Via");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Key words");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Keywords");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastinvoic");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendorascompanyname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Closed/Restricted");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Mode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Items");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Items");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Images");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Images");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Payment Vendor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("nvendor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("PAY");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VENARTHA_AMTVERBOS");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("TO");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VENARTHA_VENDORC");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VENARTHA_CHQAMT");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VENARTHA_ADVISEL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//field continued, client has many fields which needs user friendly names
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Price Override Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Nmateria");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Theme/Skin");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Scrcolor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Menu Bar Font Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Hilcolor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Menu Bar Font Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Baccolor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mobile Menu Bar Font Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Textcolor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Hide Left menu panel");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Loccol");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show/Hide icons in menu");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Repcol");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("customer order confirmation email");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shicol");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("employee order confirmation email");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cadcol");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shopping Items");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shopping_Items");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();






//help tips default/en
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("To stop this help Tip from disappearing, hold the mouse click down and then move the cursor inside the Text area. Welcome! As a visitor, you can browse around and even enjoy some shopping , but to access more information and enjoy full functions you need to Log In . If you are a regular customer/member, supplier or employee/staff please contact us to have proper access to our back end functions. This is the home page and the contents change based on whether the user is logged in or not."+
" If not logged in ie some one just visiting the site will see the welcoming graphics and a drop down menue showing products and site information. If logged in then the menu will show the back office functions and will be based on user Role and Level.Buttons: Reset will resubmit the page and refresh to show the home page and is useful if the page contents gets garbled. SignUp to register as a visitor to the site and makes purchasing easier since the name address information is saved securely. We do not save Paypal or Credit Card information. SignUp does not give access to any back end functions except to maintain own profile."+
" DemoSignUp (shown if demo sites) allows access to back end functions in a shared environment. Create Site (if shown) allows to create own site as a free trial for 90 days. To continue you need to buy yearly license.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("homeHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("On the top row, you will see Categories/Sub-Categories and under the categories, you will see the items with details and price information. You may shop around using the add to Cart button. When ready, you may select the Cart Link to review and adjust your purchase ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ItemDetailsBrowseHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If you decide not to purchase an item, mark it as remove and click on the update cart button. If you adjust the quantity then also click on the update button. You also have the option of emptying the cart ie not to buy at all or leave the cart as is but continue shopping and come back. If you time out ie not use the system futher then the cart contents will be lost, unless you are logged in. Enjoy shopping!");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("checkoutHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("can be used to track expenses, revenue, sales volume or any usage by upto 14 periods. Admin can relabel the periods to say Jan, Feb or to say Q1,Q2 etc via setup menu. There are Budget,Actual and Formulate columns. The formulae column allows expression like 34+89*2 and the result will appear in actual.   ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("UsagbyperiodsListHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("need user id or Logon id and the correct password.If password has expired or forgotten then use the reset password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("loginHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SignUp is used to get a logon id and password.Optional address informatoion can be entered later and may be needed for shipping information");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signupHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("After looking at the screen shots and using the demo sites, if you feel our workflow solutions may meet your needs, you can use our free Trial.\nDuring the free Trial period, you may decide to subscribe and the subscription period is automatically extended for the full trial period offered ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("registerHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("At the bottom, navigation buttons will appear if multiple pictures.\nYou may use the expand(+)/reduce(- or X) button to reduce.\n Detail pictures,if any. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ImageDetailsBrowseHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("This is work in progess now but will allow a quick glance at the health of the organization and any pending alerts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboardHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("3R workflow handles entering address in three ways:\nYou may enter address on its own and can be used later for multiple customers or vendors\nWhen entering customer or vendor information you can enter address information.\n Or there you may use the Quick tray where you enter name and address information and press prefill button.\nQuick tray is great for cut and paste information from existing electronic directories.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("AddressEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("In Quick tray you may enter name and address information and press prefill button.\nQuick tray is great for cut and paste information from existing electronic directories.\n but needs to follow a pattern.\nPut FirstName LastName Phone house number Street City ProvState postal Country space or comma separated, use - if no value in original and + as substitute for space in original and /L or /llastName to use LastName FirstName\nExamples:john smith 416-699-2999 27+south point+blvd toronto on m4l3z8\njohn,smith,- 27+south point+blvd toronto on m4l3z8  ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("CustomerEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("This function is used to load or schedule machines to finish or for completion of jobs. Select the job and then raw materials, which machine to use and other related information.\nEither enter the sequence numbers now or do the manual scheduling now. If sequence numbers are suggested now , later automatic scheduling will be done if enough information is available ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("JobassignmentEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Enter new value here and then click on the underlined menu to change ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("newLabelValue_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();








//english language, no need for separate entries, since if not found it will use default which is english

      // Country USA (en)
      resource_bundleName="menUS"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Provnstate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Zip Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Pzcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("GST/Federal Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("PST/State Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("categories");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("shopping_categories");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add To Cart");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Add_To_Cart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item added, click shopping cart to place order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("item_added_click_on_cart_to_place_order");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("click here, if not ready to purchase now");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("click_if_not_ready_to_purchase_now");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("cart selections cannot be saved when this session ends");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cart_selections_be_saved_when_this_session_ends");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shopping Items");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shopping_Items");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("why not save it, by simple sign up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("why_not_save_by_simple_sign_up");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


//unit end
      // Country Canada (en)
      resource_bundleName="menCA"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Province");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Provnstate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Postal Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Pzcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gst");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Local Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      // Variant ProdCode fb Forum  Bugs
      resource_bundleName="menCAfb"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Issue");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
      resource_bundleName="menUSfb"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Issue");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end



      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("messages")+" "+bundle.getString("done"),""));

       return "copy Messages done";
       }catch (Exception e){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                              FacesMessage.SEVERITY_ERROR,bundle.getString("error")+" "+e.getMessage(),""));
	 return "copy Messages done";

      }

     }

//   French messages
     public String copyDefaultFrMessagesToSYSTEM() {
      // now create messages for specific langauge and country and variant
      // we need to store as escaped unicode as java properties class expects it that way

      // French start, add mockups later
      resource_bundleName="mfr"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("D?marrage rapide");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("D?marrage rapide");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Items-F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Browse Items-F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("LogIn-F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("LogIn-F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visual General Flow-F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visual General Flow-F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end

//help tips Fr
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Pour arr?ter cette aide Astuce de dispara?tre, maintenez le clic de souris vers le bas et puis d?placez le curseur dans la zone de texte.\nBienvenue! En tant que visiteur, vous pouvez naviguer autour et m\u00eame profiter d'un peu de shopping, mais pour acc\u00e9der \u00e0 plus d'informations et profiter des fonctions compl\u00e8tes vous devez d'abord vous inscrire pour permettre Connexion.  Si vous \u00eates un habitu\u00e9 client / membre, fournisseur ou employ\u00e9 / personnel s'il vous pla\u00eet nous contacter pour avoir un acc\u00e8s ad\u00e9quat \u00e0 nos fonctions de back-end.Ceci est la page d'accueil et le contenu change selon que l'utilisateur est connect\u00e9 ou non."+"Si non connect\u00e9 \u00e0-dire quelqu'un simplement visiter le site voir les graphiques accueillants et une dans le menu d\u00e9roulant montrant les produits et les informations sur le site. Si vous \u00eates connect\u00e9, le menu affiche les fonctions de back-office et sera bas\u00e9 sur le r\u00f4le de l'utilisateur et le niveau.Boutons:Reset soumettre la page et de rafra\u00eechissement pour afficher la page d'accueil et est utile si le contenu des pages obtient brouill\u00e9. nscrivez-vous pour vous inscrire en tant que visiteur sur le site et rend l'achat plus facile puisque l'information nom d'adresse est enregistr\u00e9e en toute s\u00e9curit\u00e9. Nous ne sauvegardons pas Paypal ou informations de carte de cr\u00e9dit. Inscription ne donne pas acc\u00e8s \u00e0 toutes les fonctions de back-end, sauf \u00e0 maintenir propre profil."+"D\u00e9mo Inscription (montr\u00e9 si les sites de d\u00e9monstration) permet d'acc\u00e9der \u00e0 des fonctions de back end dans un environnement partag\u00e9.Cr\u00e9er un site (si indiqu\u00e9e) permet de cr\u00e9er propre site comme un essai gratuit pendant 90 jours. Pour continuer, vous devez acheter la licence annuelle.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("homeHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("On the top row, you will see Categories/Sub-Categories and under the categories, you will see the items with details and price information. You may shop around using the add to Cart button. When ready, you may select the Cart Link to review and adjust your purchase ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ItemDetailsBrowseHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If you decide not to purchase an item, mark it as remove and click on the update cart button. If you adjust the quantity then also click on the update button. You also have the option of emptying the cart ie not to buy at all or leave the cart as is but continue shopping and come back. If you time out ie not use the system futher then the cart contents will be lost, unless you are logged in. Enjoy shopping!");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("checkoutHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//end of French
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("french")+" "+bundle.getString("messages")+" "+bundle.getString("done"),""));

	 return "copy Messages done";


     }

//   Hindi messages
     public String copyDefaultHiMessagesToSYSTEM() {
//bengali language start
      // we need to store as escaped unicode as java properties class expects it that way, resourceBundle names are fixed
      // drop down list labels can have descriptive value
       resource_bundleName="mhi"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u09b9\u099c \u09b6\u09c1\u09b0\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0986\u09b0\u0993..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.More");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u099c\u09bf\u09a8\u09bf\u09b6 \u09a6\u09c7\u0996\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u099c\u09bf\u09a8\u09bf\u09b6 \u09a6\u09c7\u0996\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u099b\u09ac\u09bf \u09a6\u09c7\u0996\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Image_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a6\u09c3\u09b7\u09cd\u099f\u09bf\u0997\u09cb\u099a\u09b0 \u09b8\u09be\u09a7\u09be\u09b0\u09a3 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a6\u09c3\u09b7\u09cd\u099f\u09bf\u0997\u09cb\u099a\u09b0 \u09b8\u09be\u09a7\u09be\u09b0\u09a3 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09b0\u09cd\u09a5\u09a8\u09c8\u09a4\u09bf\u0995 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickFinancial");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09b0\u09cd\u09a5\u09a8\u09c8\u09a4\u09bf\u0995 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickFinancial_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09ac\u09b8\u09cd\u09a5\u09be \u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboard");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09ac\u09b8\u09cd\u09a5\u09be \u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboard_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8/\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8 Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.LabelViews");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8/\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8 Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.LabelViews_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
 
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09b0\u09bf\u09a6\u09b0\u09cd\u09b6\u0995 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VisitorMenueView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09b0\u09bf\u09a6\u09b0\u09cd\u09b6\u0995 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VisitorMenueView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09c0 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("LoggedInMenueView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09c0 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("LoggedInMenueView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Field Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("FieldNamesView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Field Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("FieldNamesView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09b8\u09cd\u09a4\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09b8\u09cd\u09a4\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09a3\u09cd\u09af");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Products");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09a3\u09cd\u09af");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Products_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u0982\u09ac\u09be\u09a6");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.News");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u0982\u09ac\u09be\u09a6");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.News_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09A8\u09BF\u09B0\u09CD\u0998\u09A3\u09CD\u099F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Calendar");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09A8\u09BF\u09B0\u09CD\u0998\u09A3\u09CD\u099F");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Calendar_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u09ae\u09cd\u09ac\u09a8\u09cd\u09a7\u09c7");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.About");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u09ae\u09cd\u09ac\u09a8\u09cd\u09a7\u09c7");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.About_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09c1\u09a8\u09b0\u09be\u09df \u09ac\u09bf\u0995\u09cd\u09b0\u09c7\u09a4\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Resellers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09c1\u09a8\u09b0\u09be\u09df \u09ac\u09bf\u0995\u09cd\u09b0\u09c7\u09a4\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Resellers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09af\u09cb\u0997\u09be\u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8/\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.ContactUs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09af\u09cb\u0997\u09be\u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8/\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.ContactUs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a8\u09c1\u09a4\u09a8/\u09a4\u09be\u09b2\u09bf\u0995\u09be/\u09ac\u09bf\u09ac\u09b0\u09a3..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a8\u09c1\u09a4\u09a8/\u09a4\u09be\u09b2\u09bf\u0995\u09be/\u09ac\u09bf\u09ac\u09b0\u09a3..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.Login");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.Login_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//end of Hindi
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("hindi")+" "+bundle.getString("messages")+" "+bundle.getString("done"),""));

	 return "copy Messages done";

     }


//   Bengali messages
     public String copyDefaultBnMessagesToSYSTEM() {
//bengali language start
      // we need to store as escaped unicode as java properties class expects it that way, resourceBundle names are fixed
      // drop down list labels can have descriptive value
       resource_bundleName="mbn"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u09b9\u099c \u09b6\u09c1\u09b0\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0986\u09b0\u0993..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.More");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u099c\u09bf\u09a8\u09bf\u09b6 \u09a6\u09c7\u0996\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u099c\u09bf\u09a8\u09bf\u09b6 \u09a6\u09c7\u0996\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_browse_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u099b\u09ac\u09bf \u09a6\u09c7\u0996\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Image_browse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.LogIn_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a6\u09c3\u09b7\u09cd\u099f\u09bf\u0997\u09cb\u099a\u09b0 \u09b8\u09be\u09a7\u09be\u09b0\u09a3 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a6\u09c3\u09b7\u09cd\u099f\u09bf\u0997\u09cb\u099a\u09b0 \u09b8\u09be\u09a7\u09be\u09b0\u09a3 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickStartFlow_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09b0\u09cd\u09a5\u09a8\u09c8\u09a4\u09bf\u0995 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickFinancial");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09b0\u09cd\u09a5\u09a8\u09c8\u09a4\u09bf\u0995 \u09aa\u09cd\u09b0\u09ac\u09be\u09b9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("QuickFinancial_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09ac\u09b8\u09cd\u09a5\u09be \u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboard");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09ac\u09b8\u09cd\u09a5\u09be \u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboard_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//unit end

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8/\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8 Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.LabelViews");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09cd\u09b0\u09a6\u09b0\u09cd\u09b6\u09a8/\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8 Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.LabelViews_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
 
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09b0\u09bf\u09a6\u09b0\u09cd\u09b6\u0995 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VisitorMenueView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09b0\u09bf\u09a6\u09b0\u09cd\u09b6\u0995 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VisitorMenueView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09c0 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("LoggedInMenueView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09c0 \u09aa\u099b\u09a8\u09cd\u09a6 \u09a4\u09be\u09b2\u09bf\u0995\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("LoggedInMenueView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Field Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("FieldNamesView");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Field Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("FieldNamesView_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09b8\u09cd\u09a4\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09ac\u09b8\u09cd\u09a4\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Item_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09a3\u09cd\u09af");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Products");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09a3\u09cd\u09af");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Products_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u0982\u09ac\u09be\u09a6");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.News");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u0982\u09ac\u09be\u09a6");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.News_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u09ae\u09cd\u09ac\u09a8\u09cd\u09a7\u09c7");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.About");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b8\u09ae\u09cd\u09ac\u09a8\u09cd\u09a7\u09c7");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.About_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09c1\u09a8\u09b0\u09be\u09df \u09ac\u09bf\u0995\u09cd\u09b0\u09c7\u09a4\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Resellers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09c1\u09a8\u09b0\u09be\u09df \u09ac\u09bf\u0995\u09cd\u09b0\u09c7\u09a4\u09be");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Resellers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09af\u09cb\u0997\u09be\u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8/\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.ContactUs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09af\u09cb\u0997\u09be\u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8/\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.ContactUs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a8\u09c1\u09a4\u09a8/\u09a4\u09be\u09b2\u09bf\u0995\u09be/\u09ac\u09bf\u09ac\u09b0\u09a3..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a8\u09c1\u09a4\u09a8/\u09a4\u09be\u09b2\u09bf\u0995\u09be/\u09ac\u09bf\u09ac\u09b0\u09a3..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.Login");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.Login_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddL1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListL1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportL1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportL1_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.reportName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.reportName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("display As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.displayAs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("display As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.displayAs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("start");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.start");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("start");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.start_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("end");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.end");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("end");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.end_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.markedOnes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.markedOnes_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("target Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.targetId");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("target Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("report.targetId_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddLB");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Add Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.AddLB_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListLB");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ListLB_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportLB");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Others..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.AddListReport.ReportLB_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Address");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Address_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Department");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Department");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Department");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Department_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Company");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Company_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Division");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Division");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Division");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Division_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Location");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Location");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Location");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Location_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Items w Renewals");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemtemptype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Items w Renewals");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemtemptype_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Residency");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Residency");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Residency");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Residency_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Materials");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembom");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Materials");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembom_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activity");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activity_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customer");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customer_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendor_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Employee");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Employee_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Earner");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Wageearner");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Earner");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Wageearner_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Journal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Journal");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Journal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Journal_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cjournal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cjournal");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cjournal");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cjournal_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Payment History");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Arthahist");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wage Payment History");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Arthahist_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuquote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuquote_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Quote");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Quote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Quote");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Quote_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Order");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Order_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("(nvoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Invoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Invoice_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuorders");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuorders_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuinvoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuinvoice_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cpayment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cpayment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venquote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venquote_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendorders");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendorders_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vinvoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vinvoice_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Shipment Receive");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vshipmen");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Shipment Receive");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vshipmen_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vpayment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vpayment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Emplorders");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Employee Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Emplorders_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job/Machine Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobassignment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job/Machine Assignments");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobassignment_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Trial Balance");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("trailbalancereport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Trial Balance");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("trailbalancereport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Balance Sheet");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("balancesheetreport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Balance Sheet");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("balancesheetreport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Income Statement");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("incomestatementreport");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Income Statement");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("incomestatementreport_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Group/Team");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Membersgroup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Group/Team");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Membersgroup_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage/Expense By Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Usagebyperiods");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage/Expense By Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Usagebyperiods_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ccontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ccontact_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Vendor Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vcontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Vendor Contacts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vcontact_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Roll Up Group");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rollupgroup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Roll Up Group");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rollupgroup_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Members");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Groupmembers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Members");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Groupmembers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Schedule");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Schedule");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Schedule");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Schedule_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemjob");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itemjob_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Machine");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Machine");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Machine");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Machine_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial Numbers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialnumbers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial Numbers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialnumbers_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Material Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembomdetails");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Material Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Itembomdetails_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Scan Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Scandate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Scan Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Scandate_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Gentriesdetails");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Gentriesdetails_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Transactions");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Transactions");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.New");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.New_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.List");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Transactions.List_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheque");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venartha");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheque");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venartha_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activityjob");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity Processing Job");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activityjob_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheques");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("vendorcheques");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Cheques");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("vendorcheques_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Calculator");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Calculator");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Calculator");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Calculator_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailings");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailings");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.Labels");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.Labels_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMails");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.EMails");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMails");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Mailings.EMails_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Subject");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSubject");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Subject");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSubject_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("eMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.eMail");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("eMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.eMail_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("send As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.sendAs");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("send As");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.sendAs_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.markedOnes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("marked Ones");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.markedOnes_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailing Content");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSource");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailing Content");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.mailingSource_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Enter Prefix to search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("m.EnterPrefix");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Enter Prefix to search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("m.EnterPrefix_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SetUps");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Maintenance");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SetUps");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Maintenance_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Text or Documents");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Clobdata");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Text or Documents");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Clobdata_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Binary Data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Blobdata");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Binary Data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Blobdata_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message/Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message/Labels");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message Bundle");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource_bundle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message Bundle");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("resource_bundle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Message Bundle");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Resource_bundle_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Options");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Options_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gen Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Genoptions");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gen Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Genoptions_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Client");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Client");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Client");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Client_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Profile");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Userprofl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Profile");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Userprofl_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("User");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("User_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting Period");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Acperiod");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting Period");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Acperiod_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Account");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Account");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Account");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Account_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period Dates");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Perioddates");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period Dates");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Perioddates_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Glentries");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("General Ledger Entries");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Glentries_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Year End");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("YearEnd");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Year End");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("YearEnd_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tools");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Tools");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tools");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Tools_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Process Hung");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Workspace");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Process Hung");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.Workspace_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ConversationList");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ConversationList_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//popmenu
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("What Do I do");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("left_pop");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tell Me");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("left_pop_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("More Questions ?");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("right_pop");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tell Me More");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("right_pop_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

 // home- change password etc
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("prefs_change_password");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("prefs_change_password_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_forgot_password");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Forgot Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_forgot_password_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchTerm");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchTerm_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchButton");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("searchButton_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Continue here, if you already signed up and now a returning user with Id/Password  ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Login_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visitors need not Signup/Logon untill they want enhanced functions like purchase/query history ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Signup_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("You dont need to Signup/Logon untill you want to purchase an item in demo mode or try out full back office functions ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("DemoSignup_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("You already signed up and not a first time user");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Login_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Use your Email as logon id once you sign up as Demo user (your logon id/Email is not shared)");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("demoLogin_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Use your Email as logon id once you sign up as Demo user (your logon id/Email is not shared)");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("demoLogin_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("tb_sep");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("tb_sep_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09a8\u09bf\u099c\u09c7\u09b0 \u09b8\u09be\u0987\u099f");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("register");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Create Site");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("register_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Please enter your username and we'll send you a new temporary password via EMail you are registered under.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("forgot_form_desc");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Please enter your username and we'll send you a new temporary password via EMail you are registered under.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("forgot_form_desc_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_username");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("User Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_username_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_email");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_email_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reset_password");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reset Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reset_password_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password Recovered");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password Recovered");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new temporary password has been sent to email address. After logging in with your temporary password, you will be prompted to change the password to a value of your choice.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered_sent");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new temporary password has been sent to email address. After logging in with your temporary password, you will be prompted to change the password to a value of your choice.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_recovered_sent_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Ok");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ok");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Ok");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ok_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("terms_of_use");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("terms_of_use_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new account for <b>{0}</b> has been created but is not active yet. You will receive an email at <b>{1}</b> from vinwiki.org containing a link that will activate your new account.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reg_pending_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("A new account for <b>{0}</b> has been created but is not active yet. You will receive an email at <b>{1}</b> from vinwiki.org containing a link that will activate your new account.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reg_pending_title_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09af\u09cb\u0997\u09a6\u09be\u09a8 \u0995\u09b0\u09c1\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sign Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Demo Sign Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("demosignup");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09b2\u0997\u0987\u09a8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u09aa\u09c1\u09a8\u09b0\u09be\u09af\u09bc \u09b8\u09c1\u09b0\u09c1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Reset");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Don't have Logon Id and Password? Create One");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_to_create_logon_Id");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("signup done? logon now");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_done_logon_now");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on to log into your new application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("semail_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on to log into your new application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("semail_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Firstname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Firstname_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastname_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Logon ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Logonid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Logon ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Logonid_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("You enter the id which will be used later to Login. You may use your Email id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("slogonid_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("You enter the id which will be used later to Login. You may use your Email id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("slogonid_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Optional Address Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("OptionalToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Optional Address Details");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("OptionalToggle_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Respond here to The question known as a CAPTCHA and may have lower case and numeric characters. It helps reduce spam and other robotic attacks. You may use the refresh button to make it easier to read");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("captcha_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("The question is known as a CAPTCHA and may have lower case characters or digits but no l or 0. It helps reduce spam and other robotic attacks.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("captcha_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Use this reload/refresh button to make it easier to read, only lower case characters or digits but no l or 0 are used. If you submit with a wrong value, the form will keep the other field values entered but show a new captcha value. You may clear the entered value and refresh. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("captcha_reload_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("captcha response did not match, see reload help tips");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("lacewiki.label.VerificationError");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Agree To Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("agree_to_terms");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Agree To Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("agree_to_terms_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Submit");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("submit");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Submit");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("submit_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Done");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("done");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Done");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("done_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your Email");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("your_email");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("your_email_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Website Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientWebsiteName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Website Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientWebsiteName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Website URL");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientFullUrlName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Full URL Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientFullUrlName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Usage");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationUsage");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Usage");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationUsage_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();



      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Site Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on before you can log into your new application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("remail_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("An Activitation Link will be sent to this email address, which you must click on before you can log into your new application site.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("remail_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Personal Name or Company Name for which the site will be created");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rname_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Personal Name or Company Name for which the site will be created");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rname_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("xxx part of the xxx.com");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rapp_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("xxx part of the xxx.com");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rapp_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("includes .com part of the xxx.com,use default value shown, or override with your own registered domain name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("tld_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Can be changed later, is used to hide some menue options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rsize_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Can be changed later, is used to hide some menue options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("rsize_tip_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First time user need to sign up here and get quick validation. If you are a returning user, use Log In ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("demosignup_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First time user need to sign up here and get validated. If you are a returning user, use Log In ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signup_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode); 
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Visitors do not need to Login to browse around and buy items. For back office functions one need to sign up and agree to terms before they can login. Log In also makes  purchase payment quicker ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Create your own Site for Visitors and for back office usage ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("register_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your Name/Company Name ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientRegistrationName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Your Name/Company Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientRegistrationName_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("More Fields");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("EditToggle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("More Fields");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("EditToggle_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If business customer, the following is used as primary contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("business_customer_contact_below");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If business customer, the following is used as primary contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("business_customer_contact_below_M");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If business vendor, the following is used as primary contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("business_vendor_contact_below");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("chngpswd");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password should be kept secret and changed as needed");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("chngpswd_directive");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change Theme");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activate_theme");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Change");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Change");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Read");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("read");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sales call");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("to_call");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sales report");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("sales_data_report");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Load sales data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("load_sales_data");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Click Reset");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("press_reset");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("will reload and refresh web page");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("reset_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("As a vistior you can browse around and see what this site offers by clicking on other menu options for Items, Other Products and News. For back office functions, you need to sign up and then login ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("quickstart_tip");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//navigation
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("<");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("left");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(">");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("right");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//Field names
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address Line 1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrl1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address Line 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrl2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("City");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("City");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      // field names which are locale specific also have entries under country locale. The following are generic 
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("State");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Province");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Province");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Country");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Country");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Postal or Zip code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Pzcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address Line 3");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrl3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Description");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Descript");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Notes");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Notes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Put GL prefix as");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Glprefix");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Floor");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Floor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Room");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Room");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Rack");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rack");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Exclude");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Exclude");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Parent Item");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ItemAsParent");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Source");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Source1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("UPC Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Upccode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cost");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cost");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Replacement Cost");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Replcost");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Selling Price");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Selprice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment Refernce");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reorder at qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Qtylevel1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Unit");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Unit");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Type");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Type");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Federal Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Alternate Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Aliascode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting set");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Integrset");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Picture/Pdf File");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Docmnt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Parent Activity");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ActivityAsParent");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Source");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Source2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Misccode1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Code 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Misccode2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Barcode value");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Barupc");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Title");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job Title");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobtitle");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Middle Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Middlenam");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customerascompanyname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Office Phone");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phoneo");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Home Phone");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phoneh");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mobile Phone");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phonec");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Fax Number");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Phonex");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Lan IP #");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lanaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Wan IP #");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Wanaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company EMail");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lmailaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("EMail address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Imailaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Remote connection");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rmailaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Web site");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Intaddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Date Of Birth");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Dob");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Where born(City,Country)");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Placeofbirth");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Internal Web site ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Inraddr");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Gender");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Sex");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Suppress Shipment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shiplabel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Federal Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1amtt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("State Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2amtt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Food/Liquor Tax");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3amtt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last contacted");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Contacted");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("By");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Bywho");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("To contact on");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Nextcontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Using");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Via");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Key words");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Keywords");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastinvoic");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Company Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendorascompanyname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Closed/Restricted");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Mode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Items");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Items");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Images");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Images");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();





//help tips Bengali mbn
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("\u0985\u09a8\u09cd\u09a4\u09b0\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09be \u09a5\u09c7\u0995\u09c7 \u098f\u0987 \u09b8\u09be\u09b9\u09be\u09af\u09cd\u09af \u0987\u0999\u09cd\u0997\u09bf\u09a4\u099f\u09bf \u09a5\u09be\u09ae\u09be\u09a4\u09c7, \u09ae\u09be\u0989\u09b8 (\u0995\u09ae\u09cd\u09aa\u09bf\u0989\u099f\u09be\u09b0\u09c7\u09b0) \u0995\u09cd\u09b2\u09bf\u0995 \u098f\u09ac\u0982 \u09a8\u09bf\u099a\u09c7 \u09a7\u09b0\u09c1\u09a8 \u09a4\u09be\u09b0\u09aa\u09b0 \u09b2\u09c7\u0996\u09be \u0985\u099e\u09cd\u099a\u09b2\u09c7\u09b0 \u09ad\u09c7\u09a4\u09b0\u09c7 \u09b0\u09be\u0996\u09c1\u09a8 \u0995\u09be\u09b0\u09cd\u09b8\u09be\u09b0\u0964\n\u09b8\u09cd\u09ac\u09be\u0997\u09a4\u09ae! \u098f\u0995\u099f\u09bf \u09aa\u09b0\u09bf\u09a6\u09b0\u09cd\u09b6\u0995 \u09b9\u09bf\u09b8\u09c7\u09ac\u09c7, \u0986\u09aa\u09a8\u09bf \u098f\u09b0 \u09a7\u09be\u09b0\u09c7\u0995\u09be\u099b\u09c7 \u09ac\u09cd\u09b0\u09be\u0989\u099c \u0995\u09b0\u09a4\u09c7 \u09aa\u09be\u09b0\u09c7\u09a8, \u098f\u09ae\u09a8\u0995\u09bf \u0995\u09bf\u099b\u09c1 \u0995\u09c7\u09a8\u09be\u0995\u09be\u099f\u09be \u0989\u09aa\u09ad\u09cb\u0997 \u0995\u09b0\u09a4\u09c7 \u09aa\u09be\u09b0\u09c7\u09a8, \u0986\u09b0\u0993 \u09ac\u09c7\u09b6\u09bf \u09a4\u09a5\u09cd\u09af \u0989\u09aa\u09b2\u09ac\u09cd\u09a7\u09bf \u0995\u09b0\u09a4\u09c7 \u0995\u09bf\u09a8\u09cd\u09a4\u09c1 \u09b8\u09be\u0987\u09a8 \u0986\u09aa \u0985 \u09b2\u0997 \u0987\u09a8 \u09a6\u09b0\u09cd\u0995\u09be\u09b0");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("homeHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();



      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("On the top row, you will see Categories/Sub-Categories and under the categories, you will see the items with details and price information. You may shop around using the add to Cart button. When ready, you may select the Cart Link to review and adjust your purchase ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ItemDetailsBrowseHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("If you decide not to purchase an item, mark it as remove and click on the update cart button. If you adjust the quantity then also click on the update button. You also have the option of emptying the cart ie not to buy at all or leave the cart as is but continue shopping and come back. If you time out ie not use the system futher then the cart contents will be lost, unless logged in. Enjoy shopping!");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("checkoutHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("can be used to track expenses, revenue, sales volume or any usage by upto 14 periods. Admin can relabel the periods to say Jan, Feb or to say Q1,Q2 etc via setup menu. There are Budget,Actual and Formulate columns. The formulae column allows expression like 34+89*2 and the result will appear in actual.   ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("UsagbyperiodsListHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("need user id or Logon id and the correct password.If password has expired or forgotten then use the reset password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("loginHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SignUp is used to get a logon id and password.Optional address informatoion can be entered later but is needed for shipping information");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("signupHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("After looking at the screen shots and using the demo sites, if you feel our workflow solutions may meet your needs, you can use our free Trial.\nDuring the free Trial period, you may decide to subscribe and the subscription period is automatically extended for the full trial period offered ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("registerHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("At the bottom, navigation buttons will appear if multiple pictures.\nYou may use the expand(+)/reduce(- or X) button to reduce.\n Detail pictures,if any. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ImageDetailsBrowseHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("This is work in progess now but will allow a quick glance at the health of the organization and any pending alerts");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("MyDashboardHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("3R workflow handles entering address in three ways:\nYou may enter address on its own and can be used later for multiple customers or vendors\nWhen entering customer or vendor information you can enter address information.\n Or there you may use the Quick tray where you enter name and address information and press prefill button.\nQuick tray is great for cut and paste information from existing electronic directories.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("AddressEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("In Quick tray you may enter name and address information and press prefill button.\nQuick tray is great for cut and paste information from existing electronic directories.\n but needs to follow a pattern.\nPut FirstName LastName Phone house number Street City ProvState postal Country space or comma separated, use - if no value in original and + as substitute for space in original and /L or /llastName to use LastName FirstName\nExamples:john smith 416-699-2999 27+south point+blvd toronto on m4l3z8\njohn,smith,- 27+south point+blvd toronto on m4l3z8  ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("CustomerEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("This function is used to load or schedule machines to finish or for completion of jobs. Select the job and then raw materials, which machine to use and other related information.\nEither enter the sequence numbers now or do the manual scheduling now. If sequence numbers are suggested now , later automatic scheduling will be done if enough information is available ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("JobassignmentEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//bengali end
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("bengali")+" "+bundle.getString("messages")+" "+bundle.getString("done"),""));

	 return "copy Messages done";


     }

//   German messages
     public String copyDefaultDeMessagesToSYSTEM() {
//german language
       resource_bundleName="mde"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);
//unit start
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Schnellstart");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("menutab.QuickStart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//help tips De
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Um diese Hilfe Tipp vor dem Verschwinden zu beenden, halten Sie die Maus klicken Sie unten und dann bewegen Sie den Cursor in den Textbereich.  Willkommen! Als Besucher k?nnen Sie st?bern und sogar genie?en Sie einen Einkaufsbummel, aber mehr Informationen zugreifen und genie?en Sie vollen Funktionen m?ssen Sie Registrieren Erste Anmelden zu erm?glichen.  Wenn Sie bereits Kunde / Mitglied, Lieferanten oder Mitarbeiter / Personal Bitte kontaktieren Sie uns, um die ordnungsgem??e Zugang zu unseren Back-End-Funktionen haben.  Dies ist die Homepage und der Inhalt auf der Basis, ob der Benutzer oder nicht angemeldet zu ?ndern. "+
"Wenn nicht in dh angemeldet jemand nur den Besuch der Website werden die einladende Grafik und ein Dropdown-Men?, das Produkte und Site-Informationen zu sehen. Wenn in dann das Men? eingeloggt werden die Backoffice-Funktionen zeigen, und wird auf Benutzerrolle und Ebene basieren. Buttons:.  Zur?cksetzen wird die Seite erneut und aktualisieren, um die Homepage zu zeigen und ist n?tzlich, wenn der Seiteninhalt wird verst?mmelt   Registrieren als Besucher auf der Website registrieren und macht den Kauf einfacher, da der Name Adressinformationen Gespeicherte sicher. Wir haben keine Paypal oder Kreditkarte Informationen zu speichern. SignUp nicht Zugriff auf alle Backend-Funktionen geben, es sei denn, ein eigenes Profil zu halten. "+
"  DemoSignUp (falls Demo-Websites gezeigt) erm?glicht den Zugriff auf End-Funktionen in einer gemeinsamen Umgebung zu unterst?tzen.   Website erstellen (wenn gezeigt) erlaubt es, eigenen Website als kostenlose Testversion f?r 90 Tage zu erstellen. Um weiterhin die Sie brauchen In den Jahreslizenz zu kaufen. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("homeHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//end of German
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("german")+" "+bundle.getString("messages")+" "+bundle.getString("done"),""));

	 return "copy Messages done";


     }


//   field labels via messages
//    may need to split by Languages later
     public String copyDefaultFldMessagesToSYSTEM() {
	if (${resourceEntityName}li == null) {
	    ${resourceEntityName}li=this.getInstance();
	}
      resource_bundleName="m"; 
      ${resource_bundleEntityName} = ${resource_bundleEntityName}List.getresource_bundleInstance(resource_bundleName);

//Field names in part2
//client
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("SSO Token");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ncode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 0 Label");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period0label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period0b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period0");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae(for actual)");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period0formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period(1-12) totals Label");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodtotalslabel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodtotalsb");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodtotals");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodtotalsformulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period1label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period1budget");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period1formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period2label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period2b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period2formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 3");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period3label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period3b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period3formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 4");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period4label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period4b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period4");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period4formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 5");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period5label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period5b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period5");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period5formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 6");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period6label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period6b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period6");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period6formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 7");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period7label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period7b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period7");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period7formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period8label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period8b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period8");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period8formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period9label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period9b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period9");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period9formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 10");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period10label");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period10b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period10");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period10formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 11");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period11abel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period11b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period11");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period11formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 12");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period12abel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period12b");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period12");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Period12formulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period(next) Label");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodnlabel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodnb");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Formulae");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Periodnformulae");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Mailing Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("AddressByMailtocode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipping Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("AddressByShiptocode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Print status");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Printsta");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Currpw");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Membership Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Memberid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Source/Reference Type");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Sourcetype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("When?");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ssdatet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Start Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Sdatet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Duration(Hrs)");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Durationh");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Minutes");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Durationm");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Starting at");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Stimeh");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Minute");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Stimem");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("AM or PM");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Stimeampm");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Ending");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Edatet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      // put tooltip priority if conflict
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Priority");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Priority");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Repeat");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Repeat");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor Contact");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vontact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Additional Employee");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Otheremplo");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Keep Private");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Privateind");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Purchase Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Purchsno");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Terms");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Terms");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipping Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Shipping_Options_Msg");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Invoice");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cinvoice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order Price");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Ordprice");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Job No");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Jobno");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Vendor PO");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vpono");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Quoordt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Activity Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Activitycode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Attachment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Attach");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Base Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Baseamountt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Delivery");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Delivchrg");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Charge");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Miscchrg");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      // look into how to insert Tax1 label value here
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tax1 Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1amt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tax2 Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2amt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tax3 Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3amt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Delivery ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Delivchrgt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Charge");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Miscchrgt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      // look into how to insert Tax1 label value here
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tax1 Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax1amtt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tax2 Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax2amtt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Tax3 Amount");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tax3amtt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Recalculate Shipping Cost");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Recalculate_Shipping_Cost");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Purchase No");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Purchsno");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Delivery Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Delvdatet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Order Date");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Odatet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Purchase Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Pono");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Billing details same");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Billtosameasshipto");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Package Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Packno");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bill Of Lading");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Tareno");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial Number");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialno");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipping Barcode");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Barshipcod");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Pay By");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Paytype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Posting Period");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Postingperiod");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Payment Reference #");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Paybyid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      // enter under country
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cheque Number");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Chqnumber");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Reconciled");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Reconciled");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Address");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Addrescode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Advise Line 1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Advisel1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Advise Line 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Advisel2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Advise Line 3");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Advisel3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer PO");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cpono");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Label size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("label.Size");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Click here to toggle n search");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ListSearchToggleBase");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Attach Image ot Text");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Attachment_Image_Text");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Create or Edit Image");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Image_Editor");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Jazz up Image");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Image_TouchUp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customize site look n feel");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Site_Customization");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Load latest Sales Data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Refresh_Salesdata");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Back Up Data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("BackUpData");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Restore from last backup");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("RestoreData");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Report Settings");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Truefalse");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipment Rate/Coupon value..");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rate1f");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Usertype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Used in");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Prodtype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sub Codes");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Stepname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Stock added ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Dateadded");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Label Status");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Printmstat");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Label Changed");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Prinmtfldt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cost Average");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Avgcost");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Status");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Statusfl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Change");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Statusfldt");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer orders");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuordqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Orders w Suppiers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venorqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customers Picked Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cupicqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Picked Up at Suppliers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venpiqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Invoiced");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cuinvqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipped");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cushiqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipped by Suppiers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venshqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Total Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Empltqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Returned");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Emprtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Returned Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Emprtqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Charges");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Empmtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Delivery Charges");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Empdtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Total Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendtqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Returned");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venrtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Returned Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venrtqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Charges");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Venmtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Delivery Charges");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Total Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Custtqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Returned");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cusrtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Returned Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cusrtqty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Miscellaneous Charges");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cusmtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Delivery Charges");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Cusdtotl");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();


      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastorder");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Quotation");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastquote");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Lastpaymq");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Generate Call List");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Generate_Call_List");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Daily Calls/caller");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Calls_per_day_per_caller");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("# of callers");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("How_many_callers");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Target by");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Target_by");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Re Build");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Override_list");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Pre-bundled Msgs Only");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("if_shared_data");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Repeat");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Repeatf");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Group");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Moduleid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Used as");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Usagecode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("In Set");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Setsid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Future Usage");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Extraintfield");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Last Budget");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Prevbudg");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Rolled Up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rollupq");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Next Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Actualn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Previous Actual");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Prevact");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 0");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P0");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 1");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P1");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 2");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P2");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 3");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P3");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 4");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P4");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 5");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P5");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 6");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P6");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 7");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P7");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 8");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P8");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 9");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P9");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 10");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P10");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 11");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P11");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 12");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P12");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 13");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P13");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 14");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P14");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 8t");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P8t");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 9t");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P9");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 10t");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P10t");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Period 11t");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("P11t");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Main Key");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Fromkey");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Qualifier");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Qualifier");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Sequence");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Sequence");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Refenced Table");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Fromtable");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Variant");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Variant");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialnum");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Serial ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Serialnum");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Name");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Enterprisecompanyna");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Country");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Countryname");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Web Site Prefix");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Enterprisecompcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Size");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Enterprisecompsize");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Subscription Type");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Licensetype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Subdcription Start");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Licensestart");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("End");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Licenseend");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product Type");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Prodcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Fiscal Year End");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Fyrend");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Fiscal Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Fperiods");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Description");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Proddesc");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("UPC Vendor Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Manufid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Bar Code Type");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Bartype");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Merchant ID");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Vendcode");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Fiscal Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Fperiods");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("client record not found");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("client_record_not_found");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Paypal API key not set up yet");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Paypal_API_key_not_set_up_yet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Paypal Purchase");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Paypal_Purchase");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Confirm Payment");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Confirm_Payment");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Place Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Place_Order");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Confirm Order");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Confirm_Order");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Click, if not ready to purchase now");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("click_if_not_ready_to_purchase_now");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shopping Cart selections cannot be saved when this session ends");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cart_selections_cannot_be_saved_when_session_ends");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("why not save by a simple sign up");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("why_not_save_by_simple_sign_up");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Please correct and try again");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("correct_and_try_again");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Error ! possible Internet Connection problem ?");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("error_condition_check_internet");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Fiscal Periods");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Fperiods");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Thank you for shopping with us");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Thank_you_for_shopping");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Customer record not found");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Customer record_not_found");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Signaure as Image");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.signature_image");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Signature and Message");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.signature_text");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Unsubscribe");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("mailing.unsubscribe");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Temp Password");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Temporarypassword");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password hash");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Passwordhash");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Usage Role");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Alevel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Role Level");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Blevel");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Other Id");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Otherid");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("PW before change");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Oldpw");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("search no results");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("search_item_empty");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("remember UserName");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("remember_My_UserName");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("New Reply");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("New_Reply");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Password Expired");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("password_expired");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show all");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("show_all");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Id and/or password not matching ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("id_password_not_matching");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Small");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_small");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Medium");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_med");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Large");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("clientApplicationSize_large");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Temp password being used,change before ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("temp_password_being_used_change_before");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Exit Customization");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("exit_customization");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Home");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("home");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Login/Signup using Facebook ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("or_login_signup_with_fb");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Copy and Save ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Copy_n_Save");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//new messages end
//cart
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Remove");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cartRemoveColumn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Item Code");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cartTitleColumn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Description");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cartActorColumn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Price");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cartPriceColumn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Qty");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cartQuantityColumn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Shipping Options");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("cartShippingColumn");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//error
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Oops! Unexpected error, please click on the Home button to go back");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("com.rcomputer.rflow.ErrorXhtmlMsg");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" not found ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("not_found");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" client/site record not found ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("site_record_not_found");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" unscribe record not_found ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("unscribe_record_not_found");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" Login failed, check upper case/lower case ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("login_failed_contact_admin");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue(" Error, not continued ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("error_not_continue");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Captcha error-try again ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("org.jboss.seam.captcha.error");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Copy Default Images Set1 done ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("copy_images_set1_done");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("period check failed Fiscal Year end or Perioddates update needed ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("period_check_failed_do_yearend_or_perioddates");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Accounting Period check failed, contact Admin ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Accounting_Period_check_failed_contact_admin");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Paid On ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("last_payment_statusdate");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();






//buttons,checkboxes
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Load Sales data");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Refresh_Sales_data");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Show still open ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("show_openOnes");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();

//Help
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("First select the Group/Team.(2)Depending on the group selected, choose one from the other drop down listExample:if mailing list group then select from customers or employee or a mixAnother group could consist of Items ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("GroupMembersEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("This panel is used to control which coluns will be shown in report and can be used to change the default settings.Each row has a table name, then a qualifier followed by column or field numbers.Qualifier values are:qv for Quantity onlydg for Demographic onlymi to show a mixture of botha1,a2 and a3 are used for ad hocA new feature will show field name and their positions");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("TruefalseListHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("This panel is used to add or edit various rates like shiipping costsEach row has a usage code say shipping rate code , then a qualifier to indicate production or test followed by usage sub code column to indicate say express small shipment .Each row will have rate value and its effective and ending dates.Special incentive ie discount rates will have their own valuesExample will be CS for customer shipping, p for production, EM for Express shipping for Medium size parcel and 5.9 as currency value . step value is 0 and not used for shipping\nAsk for rates from your shipper or Courier company");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Rate1fListHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Client record was created as part of the Create Site.But you may need to add update the record.\nPaypal setup:First you need to obtain API credentials from Paypal.Please use the link xxx\nonce you get the credentials then enter them as API CientId and API ClientSecret");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ClientEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Client record was created as part of the Create Site.If you need to add or change values, please use the view then edit. Some values are read only");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ClientListHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Before sending Emails you can check how many Emails will be generated.\nAt the bottom of the Email text, you can add Signature with marketing message and also allow unsubscribe link.\n User record can be edited to change default signature content.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("CustomerMailingSendHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Before sending Emails you can check how many Emails will be generated.\nAt the bottom of the Email text, you can add Signature with marketing message and also allow unsubscribe link.\n User record can be edited to change default signature content.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("VendorMailingSendHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Before sending Emails you can check how many Emails will be generated.\nAt the bottom of the Email text, you can add Signature with marketing message and also allow unsubscribe link.\n User record can be edited to change default signature content.");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("EmployeeMailingSendHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("The following steps will help:\n1.Organize the images you will be using. Use a Graphic Designer or do it youself by downloading images from sites like http://www.freeimages.com . Put the images in a directory organized by their usage like background,logo,left panel or News items. \n2. It is better to organize the contents text but can be typed as needed.\n3 Upload images as needed.Note-There is a restriction of 2Meg upload, but a typical Jpeg file should be around 200KB, otherwise it will be slow to load.\n4. You have the option of preview and use. Use means the contents will be visible outside this page.\n\nQuick Review: To change menue labels, put the new Label value and then click on the underlined label.\nTo change the contents of the various panels,expand pressing the + button and then make new entry or edit. Use Preview and then Use if ok. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("homeMockUpHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Use ItemAsParent dropdown if you want hierarchies like Categories and then individual item under it.\nUse the Location dropdown to associate an item to where it should be stored as inventory. Useful for Shipments.\nFields like Source,Replacement Costs can be used, as needed.\nType selection will depend on the type of business but will most likely have a mixture. Type Inventory will not be shown as shopping cart items and are meant to be handled by back office order taking and shipping or pickUps. Type Shopping Item is meant for online selling items and type Image are not selling items but are images which are displayed to the site visitors.\nAccountingSet allows preset accounts to be used as part of selling or purchasing of the item. Normally, the pre created default set will be used.\nFor a shopping item normaly a Picture will be uploaded using the + button.\nMore fields panel when expanded will show other optional fields. ");
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ItemEditHelp");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
//seo page titles
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Home page "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Home_Page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("About "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("About-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Product-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Product-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Product "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("Product-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("News "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("News-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Cantact Us "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs-1_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Contact Us "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs-2_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();
      ${resourceEntityName}li=this.getInstance();
      ${resourceEntityName}li.setA1xxuxxxbvxxxxxxxxxxvalue("Contact Us "+owner2Code);
      ${resourceEntityName}li.setA0xxukrdbvxxxxxxxxxxkey("ContactUs-3_page_title");
      ${resourceEntityName}li.set${resource_bundleEntityName?cap_first}(${resource_bundleEntityName});
      ${resourceEntityName}li.setZ3xxutoxlhxxxxxxxxxxowner(ownerCode);
      ${resourceEntityName}li.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      this.persist("SYSTEM");
      this.clearInstance();





      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("messages")+" "+bundle.getString("field")+" "+bundle.getString("labels")+" "+bundle.getString("done"),""));

	 return "copy Messages2 done";

     }
     public String escapeUniJava(String input){
      StringBuilder b = new StringBuilder();

      for (char c : input.toCharArray()) {
        if (c >= 128)
            b.append("\\u").append(String.format("%04X", (int) c));
        else
            b.append(c);
      }

      return b.toString();

     }

</#if>

<#if menuAttributesp2 == "1N" >
//called by this and other EntityHomes 
//supports multiple uploaded files which can be either clob or blob 
 public String addToFiles(File file) {
  files.add(file);
  return null;
 }
        //files are raaspi subset file objects holding scaled down images or text data

        public List<File> getFiles() {
         return files;
        }

        public void setFiles(List<File> files) {
         this.files = files;
        }




     //copy defaults like stock images to blobdata under owner=sss owner2=SYSTEM and both -C and -M key suffix and sequesnce 1,2 etc
     // images take more space so discourage storing under owner2
     // a4j:repeat in jsf pages is used to show all the sequences but seq 0 is the one to be shown on the home and home mockup pages.
     // tenant may change the image using mockUp page and then it will create a new record under its own owner2 value
     // so getblobdata needs to query on both SYSTEM and owner2 and if owner2 not there use SYSTEM.
     // 
     // add logic to store image based on product code
     // copy HDR and TXT to clobdata as well which tenant is expected to change via mockUp
     public String copyDefaultsToSYSTEM_1() {
     //System template Images and a fewer texts.
     // in cloud images take longer time, so split this method to avoid time outs 
     // this needs to be done once only ie if  and not to be repeated for each tenant
      int deletedCount =  entityManager.createQuery("DELETE FROM ${clobdataEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", "SYSTEM").executeUpdate();
      deletedCount =  entityManager.createQuery("DELETE FROM ${blobdataEntityName?cap_first} a WHERE a.zzxxu2oxxhxxxxxxxxxxowner2 = :p").setParameter("p", "SYSTEM").executeUpdate();
	if (${clobdataEntityName} == null) {
	    ${clobdataEntityName}=${clobdataEntityName}Home.getInstance();
	}
	if (${blobdataEntityName} == null) {
	    ${blobdataEntityName}=${blobdataEntityName}Home.getInstance();
	}

      //rtemplate top-left
      // pictures and txts are saved as sequences starting at 0 but seq 0 for -C (actual) is extra because
      // its content gets overwritten
      // so initially seq 0 and 1 will be the same picture and seq 2 and up holds different pictures 
      // for each seq the picture will be saved under XX-C as well as under XX-M ie actual and for mockup
      // Please note that sequences are used for slide show in certain context


      bcontinue=true;
      owner2Code="";
      // resource ie message entries not done yet
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("copy")+" "+bundle.getString("images")+" "+bundle.getString("set")+"1"+" "+bundle.getString("done"),""));
  
	 return "copy Images set 1 done";
     }

     public String copyDefaultsToSYSTEM_2() {
      // pictures and txts are saved as sequences starting at 0 but seq 0 for -C (actual) is extra because
      // its content gets overwritten
      // so initially seq 0 and 1 will be the same picture and seq 2 and up holds different pictures 
      // for each seq the picture will be saved under XX-C as well as under XX-M ie actual and for mockup
      // Please note that sequences are used for slide show in certain context
      //mid-top
	if (${clobdataEntityName} == null) {
	    ${clobdataEntityName}=${clobdataEntityName}Home.getInstance();
	}
	if (${blobdataEntityName} == null) {
	    ${blobdataEntityName}=${blobdataEntityName}Home.getInstance();
	}
  







      bcontinue=true;
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("images")+" "+bundle.getString("part2")+" "+bundle.getString("done"),""));

	 return "copy Images set 2 done";
     }

     public String backUpPublishToUSER(String jowner,String themeName) {
      /**
      *@param 1 owner ie theme supplier/vendor code,@param2 theme name both ignored
      */
      // put mockups for clob header and texts
      // add more sequences similar to images
      // record to record copy ie theme -M to client -M since preview shows -M and -C if no -M content
      // get all clob data for a theme, then loop and copy each
      // note in theme gallery, images are part of clob using url, no blob data directly used 
      // need to take care of fading images so include 3R-TOP-BKGR-X as clob and blob 
      // backup will have key xx-M, theme name -B and owner2 as owner2Code not SYSTEM like other themes because backups are not shared 
      int index=0;
      String jjowner="";
       try {
            List<Yxxxuq1m1xwwqqqxxxxxclobdata> results=null;
               results = entityManager
        	.createQuery(
			"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey like '%-C' and cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("clobdatafromtable", "clobdata").setParameter("qualifier", "TXT")
                            .setParameter("owner2", owner2Code).getResultList();
		          if(!results.isEmpty()){
                           index = 0;
                           for (Yxxxuq1m1xwwqqqxxxxxclobdata itemChecked : results) {
                            //for each itemChecked (owner2Code),get or create corresponding client clob -M user record with qualifier -B and replace the data part
                            if(jowner.equals("ignored")){
                             yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A"+itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey(),"-B",0);
                             jjowner=owner2Code;
                            }else{
                             owner2Code=jowner;
                             jjowner=jowner;
                             yxxxuq1m1xwwqqqxxxxxclobdata=null;
                            }

                            //check update or persist client -M with qualifier -B  added clearInstance()
                            if(yxxxuq1m1xwwqqqxxxxxclobdata == null){
                             ${clobdataEntityName}Home.clearInstance();
                             yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance();
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); // persist not query removed prefix
                             //yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey("A"+itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey(itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA2xxuxxxbv50xxxxxxxxqualifier("-B");
                             yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(itemChecked.getB1xxuzaxbvxxxxxxxxxxdata());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA3xxexnsbvxxxxxxxxxxsequence(0);
                             yxxxuq1m1xwwqqqxxxxxclobdata.setZzxxu2oxxhxxxxxxxxxxowner2(jjowner);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.persist(jjowner);//clob/blob persist does not give msg
                            }else{
                             yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(itemChecked.getB1xxuzaxbvxxxxxxxxxxdata());
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.superUpdate();
                            }
                            index++;
                            yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();
                           }
                          }else{
                           //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     //FacesMessage.SEVERITY_INFO,bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("list")+" "+bundle.getString("empty"),""));
                           log.info(bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("list")+" "+bundle.getString("empty"));

                           upLoadPurpose="ad";

                          }
       } catch (NoResultException nre) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+bundle.getString("theme")+" "+bundle.getString("data")+" "+bundle.getString("for")+" "+themeName,""));

                            return null;
       } catch (Exception e) {
			      log.severe("Error persisting clob"+ e);
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("clob")+" "+bundle.getString("save")+" "+bundle.getString("error")+" "+ e.getMessage(),""));

                      return null;
       }


         //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          //FacesMessage.SEVERITY_INFO,bundle.getString("copied")+" "+index+" "+bundle.getString("records"),""));
          log.info(bundle.getString("copied")+" "+index+" "+bundle.getString("records"));
	 return "copy Images-Texts set1 done";
     }



     public String copyThemeToUSER(String jowner,String themeName) {
      /**
      * called from homePageEditor,homeOtherPagesEditor but can come from any page like register
      *@param 1 owner ie theme supplier/vendor code (ignored") or client site name ,@param2 theme name
      */
      // put mockups for clob header and texts
      // add more sequences similar to images
      //record to record copy ie theme -M to client -M since preview shows -M and -C if no -M content
      // get all clob data for a theme, then loop and copy each
      // note in theme gallery, images are part of clob using url, no blob data directly used 
      // need to take care of fading images so include 3R-TOP-BKGR-X as clob and blob 
      // backup will have key xx-M, theme name -B and owner2 as owner2Code not SYSTEM like other themes because backups are not shared 
      int index=0;
      String jjowner="";

       try {
            List<Yxxxuq1m1xwwqqqxxxxxclobdata> results=null;
            if(themeName.equals("-B")){
               results = entityManager
        	.createQuery(
			"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("clobdatafromtable", "clobdata").setParameter("qualifier", themeName)
                            .setParameter("owner2", owner2Code).getResultList();
            }else{
               results = entityManager
        	.createQuery(
			"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("clobdatafromtable", "clobdata").setParameter("qualifier", themeName)
                            .setParameter("owner2", "SYSTEM").getResultList();
            }
		          if(!results.isEmpty()){
                           index = 0;
                           for (Yxxxuq1m1xwwqqqxxxxxclobdata itemChecked : results) {
                            //for each itemChecked (SYSTEM),get or create corresponding client clob -M user record and replace the data part
                            if(jowner.equals("ignored")){
                             yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata","A"+itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey(),"TXT",0);
                             jjowner=owner2Code;
                            }else{
                             owner2Code=jowner;
                             jjowner=jowner;
                             yxxxuq1m1xwwqqqxxxxxclobdata=null;
                            }
                            //check update or persist client -M , for new client clobdata is null but for copytheme
                            // it can be either null or some value
                            if(yxxxuq1m1xwwqqqxxxxxclobdata == null){
                             ${clobdataEntityName}Home.clearInstance();
                             yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance();
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
                             //  going for persist, not query so dont append prefix
                             //yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey(itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey(itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                             yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(itemChecked.getB1xxuzaxbvxxxxxxxxxxdata());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA3xxexnsbvxxxxxxxxxxsequence(0);
                             yxxxuq1m1xwwqqqxxxxxclobdata.setZzxxu2oxxhxxxxxxxxxxowner2(jjowner);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.persist(jjowner);//clob/blob persist does not give msg
                            }else{
                             yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(itemChecked.getB1xxuzaxbvxxxxxxxxxxdata());
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.superUpdate();
                            }
                            index++;
                            yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();
                           }
                          }else{
                           //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            //FacesMessage.SEVERITY_INFO,bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("list")+" "+bundle.getString("empty"),""));
                           log.info(bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("list")+" "+bundle.getString("empty"));

                           upLoadPurpose="ad";

                          }
        //if (customIdentity.isDebug()){ need to give feedback
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("copied")+" "+index+" "+bundle.getString("records"),""));
        //}
         if(urlName.contains("homePageEditor.")){    
          String jay="/homePageEditor.wflow#home_all";
          externalContext = facesContext.getCurrentInstance().getExternalContext();
          externalContext.redirect(jay);// use new externalContext to avoid response committed
         }
          // may also come from register, so check view
         return "";


       } catch (NoResultException nre) {
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+bundle.getString("theme")+" "+bundle.getString("data")+" "+bundle.getString("for")+" "+themeName,""));

                            return null;
       } catch (Exception e) {
         log.severe("Error persisting clob"+ e);
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("clob")+" "+bundle.getString("save")+" "+bundle.getString("error")+" "+ e.getMessage(),""));

          return null;
       }


     }

     public String publishThemeToUSER(String jowner,String themeName) {
      /**
      *@param 1 owner ie theme supplier/vendor code,@param2 theme name, both ignored unless theme is -B ie last backup
      */
      // put mockups for clob header and texts
      // add more sequences similar to images
      // record to record copy ie client -M to client -C since preview shows -M and -C if no -M content
      // get all clob data for a theme, then loop and copy each
      // note in theme gallery, images are part of clob using url, no blob data directly used 
      int index=0;
      String jjowner="";

       try {
            List<Yxxxuq1m1xwwqqqxxxxxclobdata> results=null;
            if(themeName.equals("-B")){
               results = entityManager
        	.createQuery(
			"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("clobdatafromtable", "clobdata").setParameter("qualifier", themeName)
                            .setParameter("owner2", owner2Code).getResultList();
            }else{
               if(jowner.equals("ignored")){
               }else{
                owner2Code=jowner;// new site -M already exists
               }

               results = entityManager
        	.createQuery(
			"select cc from Yxxxuq1m1xwwqqqxxxxxclobdata cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:clobdatafromtable and cc.a2xxuxxxbv50xxxxxxxxqualifier=:qualifier and cc.a1xxuxxxbv49xxxxxxxxfromkey like concat('%','-M','%') and cc.a3xxexnsbvxxxxxxxxxxsequence = 0 and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("clobdatafromtable", "clobdata").setParameter("qualifier", "TXT")
                            .setParameter("owner2", owner2Code).getResultList();
            }
		          if(!results.isEmpty()){
                           index = 0;
                           for (Yxxxuq1m1xwwqqqxxxxxclobdata itemChecked : results) {
                            //for each itemChecked (-M),get or create corresponding client clob -C user record and replace the data part
                            String mKey="A"+itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey(); 
                            String mKeyNoPrefix=itemChecked.getA1xxuxxxbv49xxxxxxxxfromkey(); 
                            if(jowner.equals("ignored")){
                             yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataList.getclobDataInstance("clobdata",mKey.substring(0,mKey.length()-1)+"C","TXT",0);
                             jjowner=owner2Code;
                            }else{
                             owner2Code=jowner;
                             jjowner=jowner;
                             yxxxuq1m1xwwqqqxxxxxclobdata=null;// new site -C does not exist
                            }
                            //check update or persist client -C
                            if(yxxxuq1m1xwwqqqxxxxxclobdata == null){
                             ${clobdataEntityName}Home.clearInstance();
                             yxxxuq1m1xwwqqqxxxxxclobdata=yxxxuq1m1xwwqqqxxxxxclobdataHome.getInstance();
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA0xxukcdlvxxxxxxxxxxfromtable("clobdata"); 
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA1xxuxxxbv49xxxxxxxxfromkey(mKeyNoPrefix.substring(0,mKeyNoPrefix.length()-1)+"C");
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA2xxuxxxbv50xxxxxxxxqualifier("TXT");
                             yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(itemChecked.getB1xxuzaxbvxxxxxxxxxxdata());
                             yxxxuq1m1xwwqqqxxxxxclobdata.setA3xxexnsbvxxxxxxxxxxsequence(0);
                             yxxxuq1m1xwwqqqxxxxxclobdata.setZzxxu2oxxhxxxxxxxxxxowner2(jjowner);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.persist(jjowner);//clob/blob persist does not give msg
                            }else{
                             yxxxuq1m1xwwqqqxxxxxclobdata.setB1xxuzaxbvxxxxxxxxxxdata(itemChecked.getB1xxuzaxbvxxxxxxxxxxdata());
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.setInstance(yxxxuq1m1xwwqqqxxxxxclobdata);
                             yxxxuq1m1xwwqqqxxxxxclobdataHome.superUpdate();
                            }
                            index++;
                            yxxxuq1m1xwwqqqxxxxxclobdataHome.clearInstance();
                           }
                          }else{
                           //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            //         FacesMessage.SEVERITY_INFO,bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("list")+" "+bundle.getString("empty"),""));
                           log.info(bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("list")+" "+bundle.getString("empty"));

                           upLoadPurpose="ad";

                          }
       } catch (NoResultException nre) {
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+" "+bundle.getString("theme")+" "+bundle.getString("data")+" "+bundle.getString("for")+" "+themeName,""));

                            return null;
       } catch (Exception e) {
			      log.severe("Error persisting clob"+ e);
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("clob")+" "+bundle.getString("save")+" "+bundle.getString("error")+" "+ e.getMessage(),""));

                      return null;
       }


        if (customIdentity.isDebug()){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("copied")+" "+index+" "+bundle.getString("records"),""));
        }
	 return "copy Images-Texts set1 done";
     }


      /**
      * called by both r3rest shopify backoffice create and by raaspi siteCreate or fatjar > Authenticator.java > doMasterSite
      *important-owner2Code within the scope of this method is used for persist and should be owner2Code client
      * not raaspi. 
      *@param 6 params, theme vendor,theme Name, jowner owner2CodeClient ie site name,2 client Name ie company,
      * site contact email, client App function prod+subProd like eerb
      */
     public String copyDefaultsToUSER(String vendor,String themeName,String jowner,String clName,String clEmail,String clSiteTheme) {
      // we may have to pass theme item key and vendor to this method
      //called by restclient quickRegister,doMasterSite and doregister siteTheme is interpreted from applicationfunction/usage 2ch usage and 2ch type of usage
      //Menu related Graphics and Texts like Product, News and also Pop Ups which are different for each user
      // added messages based on prod code like service, org etc which are different from default system messages
      // pictures and txts are saved as say 3R-TOP-LEFT-M and 3R-TOP-LEFT-C and sequence can be 0 to 4
      // 
      // so seq 1 and up holds different pictures and initially seq 0 and 1 will be the same picture or text
      // for each seq the picture/text will be saved under XX-C as well as under XX-M ie actual and for mockup
      // Please note that sequences are used for slide show in certain context
      //  added logic to select images and rext based on theme chosen during site create
      // selecting agency can now select insurance,travel,
        owner2Code=jowner;
	if (${clobdataEntityName} == null) {
	    ${clobdataEntityName}=${clobdataEntityName}Home.getInstance();
	}
	if (${blobdataEntityName} == null) {
	    ${blobdataEntityName}=${blobdataEntityName}Home.getInstance();
	}
        // came from r3restclient?
        if(clSiteTheme.equals("eest")){
         ${userEntityName}Home.setClientApplicationFunction("eest");
        }
      try{
       // in new design no blobs involved as html pages loaded from clobs can have both images(via imageServlet) and text, owner2Code has client site code
       // Note: the actual image data is still an image in a file or as binary data in blob data and is loaded via imageServlet
       // copy theme clobs to new client xxx-M clobs. themeName is unique across vendors, we can ignore vendor code
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("site")+" "+bundle.getString("content")+" "+bundle.getString("images")+" / "+bundle.getString("text")+" "+bundle.getString("started"),""));
       //clobdata fromkey has key to section of the html page ex 3R-MID-TOP-M and qualifier has themeName ex Nature/Gene7.023544634959 
       ${blobdataEntityName}Home.copyThemeToUSER(jowner,themeName);

       // copy theme clobs to new client xxx-C clobs by iterating over the clob records for a theme
       ${blobdataEntityName}Home.publishThemeToUSER(jowner,themeName);

       // copy new site -C clobs to -B clobs
       ${blobdataEntityName}Home.backUpPublishToUSER(jowner,themeName);

      } catch (Exception e) {
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("theme")+" "+bundle.getString("copy")+" "+bundle.getString("failed")+" "+e.getMessage(),""));
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("but")+", "+bundle.getString("you")+" "+bundle.getString("can")+" "+bundle.getString("copy")+" "+bundle.getString("theme")+" "+bundle.getString("later"),""));
      }
      bcontinue=true;
      // need to check where the req is coming from 
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
       FacesMessage.SEVERITY_INFO,bundle.getString("copy")+" "+bundle.getString("site")+" "+bundle.getString("content")+" "+bundle.getString("images")+" / "+bundle.getString("text")+" "+bundle.getString("done"),""));

	 return "copy Images-Texts set1 done";
     }







</#if>

<#if menuAttributesp2 == "1A" >
	public String getCouponCode() {
	  return couponCode;
	}
     
	public void setCouponCode(String couponCode) {
		this.couponCode = couponCode;
	}

	public BigDecimal getCouponValue() {
	  return couponValue;
	}
     
	public void setCouponValue(BigDecimal couponValue) {
		this.couponValue = couponValue;
	}

	public BigDecimal getSaleValue() {
	  return saleValue;
	}
     
	public void setSaleValue(BigDecimal saleValue) {
		this.saleValue = saleValue;
	}

	public BigDecimal getDiscountValue() {
	  return discountValue;
	}
     
	public void setDiscountValue(BigDecimal discountValue) {
		this.discountValue = discountValue;
	}




	public String getUnitLength() {
		return unitLength;
	}
	public void setUnitLength(String unitLength) {
		this.unitLength = unitLength;
	}


	public String getUnitWidth() {
		return unitWidth;
	}

	public void setUnitWidth(String unitWidth) {
		this.unitWidth = unitWidth;
	}
	public String getUnitHeight() {
		return unitHeight;
	}

	public void setUnitHeight(String unitHeight) {
		this.unitHeight = unitHeight;
	}
	public String getUnitWeight() {
		return unitWeight;
	}

	public void setUnitWeight(String unitWeight) {
		this.unitWeight = unitWeight;
	}

	public BigDecimal getValueLength() {
		return valueLength;
	}

	public void setValueLength(BigDecimal valueLength) {
		this.valueLength = valueLength;
	}
	public BigDecimal getValueWidth() {
		return valueWidth;
	}

	public void setValueWidth(BigDecimal valueWidth) {
		this.valueWidth = valueWidth;
	}
	public BigDecimal getValueHeight() {
		return valueHeight;
	}

	public void setValueHeight(BigDecimal valueHeight) {
		this.valueHeight = valueHeight;
	}
	public BigDecimal getValueWeight() {
		return valueWeight;
	}

	public void setValueWeight(BigDecimal valueWeight) {
		this.valueWeight = valueWeight;
	}

	public String getItemVariantSize() {
		return itemVariantSize;
	}
	public void setItemVariantSize(String itemVariantSize) {
		this.itemVariantSize = itemVariantSize;
	}
	public String getItemVariantColour() {
		return itemVariantColour;
	}
	public void setItemVariantColour(String itemVariantColour) {
		this.itemVariantColour = itemVariantColour;
	}
	public String getItemVariantBrand() {
		return itemVariantBrand;
	}
	public void setItemVariantBrand(String itemVariantBrand) {
		this.itemVariantBrand = itemVariantBrand;
	}
	public String getItemVariantMaterial() {
		return itemVariantMaterial;
	}
	public void setItemVariantMaterial(String itemVariantMaterial) {
		this.itemVariantMaterial = itemVariantMaterial;
	}
	public String getItemVariantSizeL() {
		return itemVariantSizeL;
	}
	public void setItemVariantSizeL(String itemVariantSizeL) {
		this.itemVariantSizeL = itemVariantSizeL;
	}
	public String getItemVariantColourL() {
		return itemVariantColourL;
	}
	public void setItemVariantColourL(String itemVariantColourL) {
		this.itemVariantColourL = itemVariantColourL;
	}
	public String getItemVariantBrandL() {
		return itemVariantBrandL;
	}
	public void setItemVariantBrandL(String itemVariantBrandL) {
		this.itemVariantBrandL = itemVariantBrandL;
	}
	public String getItemVariantMaterialL() {
		return itemVariantMaterialL;
	}
	public void setItemVariantMaterialL(String itemVariantMaterialL) {
		this.itemVariantMaterialL = itemVariantMaterialL;
	}




    public String verifyAnswer(String questionA,String answerU,Integer sid,String type){
     // parameter questionA has stored answer and answerU has entered answer
     // changed equals to contains to allow multiple answer match ex if stored Answer is jayanta Mitra and question is my name?
     // then jay or jayanta or mitra or tra will match. min 3 chrs to ignore space or just j 
     // also allows multiple password values or multiple city names as answer
     skinBean.setHoldSid(sid);// needed by datascroller
     if(type.contains("SI-")){
      return "";// no challenge holds theme vendor and theme name or empty
     }
     if(questionA.isEmpty() ){
      //no challenge involved
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("details")+", "+bundle.getString("shown")+" "+bundle.getString("at")+" "+bundle.getString("bottom"),""));
      if(type.equals("image")){
       return "ImagesBrowse.xhtml??faces-redirect=true&catsubJay="+sid;// use carsubJay notcategory
      }else{
       if(type.equals("item")){
        return "ItemDetailsBrowse.xhtml??faces-redirect=true&category="+sid;// category
       }else{
        return "BlogDetailsBrowse.xhtml??faces-redirect=true&catsubJay="+sid;//category
       }
      }
     }
     if(questionA.isEmpty() && answerU.isEmpty()){
      //sometimes parameter values come as empty
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("sorry")+", "+bundle.getString("no")+" "+bundle.getString("value")+" "+bundle.getString("received"),""));
      return "";//same page
     }
     String quA=questionA.trim().toLowerCase();
     String anU=answerU.trim().toLowerCase();
     if((anU.length() > 2 && quA.contains(anU)) || (anU.length() < 3 && quA.equals(anU))){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR,bundle.getString("details")+", "+bundle.getString("shown")+" "+bundle.getString("at")+" "+bundle.getString("bottom"),""));
      if(type.equals("image")){
       return "ImagesBrowse.xhtml??faces-redirect=true&category="+sid;//category
      }else{
       if(type.equals("item")){
        return "ItemDetailsBrowse.xhtml??faces-redirect=true&category="+sid;//category
       }else{
        return "BlogDetailsBrowse.xhtml??faces-redirect=true&category="+sid;//category
       }
      }
     }else{
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("sorry")+", "+bundle.getString("answer")+" "+answerU+" "+bundle.getString("did")+" "+bundle.getString("not")+" "+bundle.getString("match"),""));
      return "";//stay same page to show msg
     }
    } 

    public String goSITree() {
     return "ItemSITree.xhtml?faces-redirect=true&includeViewParams=true";
    }

    public String goItemBrowse() {
     return "ItemDetailsBrowse.xhtml?faces-redirect=true&includeViewParams=true";
    }

    public void addChildToItem(${itemEntityName?cap_first} issue) {
      if (${itemEntityName} == null) {
       ${itemEntityName}=${itemEntityName}Home.getInstance();
      }
      ${itemEntityName}.set${itemEntityName?cap_first}(issue);
      ${itemEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2("SYSTEM");
      ${itemEntityName}Home.clearInstance();
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("added")+" "+bundle.getString("as")+" "+bundle.getString("reply"),""));
   }

    public String acceptAnswerF(${itemEntityName?cap_first} issue) {
     acceptAnswer(issue);  
      return "";
    }


    public String acceptAnswer(${itemEntityName?cap_first} issue) {

      if (issue == null) {
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("no")+" "+bundle.getString("answer")+" "+bundle.getString("to")+" "+bundle.getString("accept"),""));


      }
      else{
       //fetch and update parent as closed
       this.setInstance(issue.get${itemEntityName?cap_first}());
       // set null to parent
       this.instance.set${itemEntityName?cap_first}( null );
       this.instance.set${statusFlagField?cap_first}( mclosed );
       try{
        this.update();
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("accepted"),""));

      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,this.instance.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("now")+" "+bundle.getString("closed"),""));

       } catch (Exception e) {
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,this.instance.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("error")+" "+e.getMessage(),""));

       }
      }
      return "";
   }
	public String getAddrL1() {
		return addrL1;
	}

	public void setAddrL1(String addrL1) {
		this.addrL1 = addrL1;
	}

	public String getAddrL2() {
		return addrL2;
	}

	public void setAddrL2(String addrL2) {
		this.addrL2 = addrL2;
	}

	public String getCity() {
		return city;
	}

	public void setCity(String city) {
		this.city = city;
	}

	public String getProvstate() {
		return provstate;
	}

	public void setProvstate(String provstate) {
		this.provstate = provstate;
	}

	public String getPzcode() {
		return pzcode;
	}

	public void setPzcode(String pzcode) {
		this.pzcode = pzcode;
	}

	public String getCountry() {
		return country;
	}

	public void setCountry(String country) {
		this.country = country;
	}
	public String getImailaddr() {
		return imailaddr;
	}

	public void setImailaddr(String imailaddr) {
		this.imailaddr = imailaddr;
	}
	public String getImailaddrAlt() {
		return imailaddrAlt;
	}

	public void setImailaddrAlt(String imailaddrAlt) {
		this.imailaddrAlt = imailaddrAlt;
	}

	  public void validateAndSelectXxxxxxxxmatsid(FacesContext context,UIComponent toValidate,Object value) {
            if (skipValidation){
             //extended persist closes the copied from entity so validation will fail and we dont need validation at this point
             return;
            }
            // set bcontinue to true if set false by showrunt() at start of txn, because of property being null
            // jay not all showrunt() validate, vendor txn does not why??
            if(fpxxfq1a5xwwqqhxxxxxitem == null && bcontinue == false){
             bcontinue=true;
            }
            fpxxfq1a5xwwqqhxxxxxitem  = null;
            String enteredValue = (String) value;//sid but passed as string using notesToPass(cartPOS) or matcode(countItem/countAlias) variable
            String jay = toValidate.getAttributes().get("required").toString();
            if (!jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){ 
             return;
            }
            if (jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_WARN,bundle.getString("matcode")+" "+ bundle.getString("no")+" "+ bundle.getString("value"),""));

             bcontinue=false;
             return;
            }
            urlIndex=urlName.indexOf(">>");
            if (urlIndex != -1){
             enteredValue=enteredValue.substring(0,urlIndex);
            }
            Integer entvToInteger=null;
            try{
             entvToInteger= Integer.parseInt(enteredValue);
            } catch (Exception ex) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("Matcode")+" "+enteredValue+" "+bundle.getString("invalid"),""));
			 throw new ValidatorException(msg);
            }


            Fpxxfq1a5xwwqqhxxxxxitem cc = fpxxfq1a5xwwqqhxxxxxitemHome.getInstance();
              // if the Item has upc code and scanned value matched it then also use the item
              //The UPC or any code could be added to UPC field and can act as alternative to using sid for scanning
              //This saves on printing new labels with sid if upc label already exists.
              // if the Item has a matching serialnumber of type s then also consider the item as scanned
	      try {
			 List<Fpxxfq1a5xwwqqhxxxxxitem> results =  entityManager.createQuery("select cc from Fpxxfq1a5xwwqqhxxxxxitem cc where (cc.a0xxuobxbxxxxxxxxxxxsid = :keyOfEntity OR cc.b5fbuxxrbvxxxxxxxxxxupccode = :upcCode ) AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", entvToInteger).setParameter("upcCode", enteredValue).setParameter("owner2", owner2Code).getResultList();    
                  
                         if(results.isEmpty()){
                          List<${serialnumbersEntityName?cap_first}> resultsS =${serialnumbersEntityName}List.getSuggestList("sm"+enteredValue);
                          if(resultsS.isEmpty()){
                           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            FacesMessage.SEVERITY_WARN,bundle.getString("matcode")+"/ "+bundle.getString("barcode")+" "+ enteredValue+" "+bundle.getString("not")+" "+ bundle.getString("found")+", "+ bundle.getString("create")+" "+ bundle.getString("first"),""));
                            return;                           
                          }else{
                           fpxxfq1a5xwwqqhxxxxxitem = fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(resultsS.get(0).getB1xxuxxrbvxxxxxxxxxxmatcode()); 
                          }
                         }else{
                          fpxxfq1a5xwwqqhxxxxxitem = results.get(0);
                         }
                         if (results.size()>1){
                          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                           FacesMessage.SEVERITY_WARN,bundle.getString("matcode")+" "+ bundle.getString("multiple")+" "+ bundle.getString("results")+", "+ bundle.getString("one")+" "+ bundle.getString("selected"),""));
                         }           
                         if (fpxxfq1a5xwwqqhxxxxxitem != null ) {
			     // that's fine - It should exist.
                             // check if selfreferencing foreign field
                           if(this.instance == null){
                            this.clearInstance();
                            this.setInstance(fpxxfq1a5xwwqqhxxxxxitem);

                           }
                           fpxxfq1a5xwwqqhxxxxxitem.setB0xxziqxlvxxsaxxxxxxquantity(BigDecimal.ONE);//each scan means qty 1
                           if(this.instance !=null){
			    this.instance.setFpxxfq1a5xwwqqhxxxxxitem(fpxxfq1a5xwwqqhxxxxxitem);
                            //each scan will add one to phy qty saved in serial table for same sid/matcode/sku
                            //also disable/enable button calling the same method to avoid double count
                            //if some other validation already failed, do not reset it 
                            if(${itemEntityName}.get${itemPriceField?cap_first}().compareTo(BigDecimal.ZERO)==0){
                             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_WARN,bundle.getString("Price")+ " "+bundle.getString("is")+ " "+bundle.getString("ZERO"),""));
                            }     
                           }else{
                            bcontinue=false;
                             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_WARN,bundle.getString("Instance")+ " "+bundle.getString("empty")+ "- "+bundle.getString("error"),""));
                            return;
                           }
                           if(bcontinue){
                            bcontinue=true;
                           }
                         }//end of shiptobill check
	      } catch (NoResultException nre) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("Matcode"),""));
			 throw new ValidatorException(msg);
              }
	 }

	  public void validateAndSelectXxxxxxxxskusid(FacesContext context,UIComponent toValidate,Object value) {
            if (skipValidation){
             //extended persist closes the copied from entity so validation will fail and we dont need validation at this point
             return;
            }
            // set bcontinue to true if set false by showrunt() at start of txn, because of property being null
            // jay not all showrunt() validate, vendor txn does not why??
            if(fpxxfq1a5xwwqqhxxxxxitem == null && bcontinue == false){
             bcontinue=true;
            }
            fpxxfq1a5xwwqqhxxxxxitem  = null;
            String enteredValue = (String) value;//sid but paased as string
            String jay = toValidate.getAttributes().get("required").toString();
            if (!jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){ 
             return;
            }
            if (jay.contains("true")  && (enteredValue ==null || enteredValue.trim().isEmpty())){  
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_WARN,bundle.getString("SKU")+" "+ bundle.getString("no")+" "+ bundle.getString("value"),""));

             bcontinue=false;
             return;
            }
            urlIndex=urlName.indexOf(">>");
            if (urlIndex != -1){
             enteredValue=enteredValue.substring(0,urlIndex);
            }
            Integer entvToInteger=null;
            try{
             entvToInteger= Integer.parseInt(enteredValue);
            } catch (Exception nre) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("Matcode")+" "+enteredValue+" "+bundle.getString("invalid"),""));
			 throw new ValidatorException(msg);
            }
              // if the Item has upc code and scanned value matched it then also use the item
              //The UPC or any code could be added to UPC field and can act as alternative to using sid for scanning
              //This saves on printing new labels with sid if upc label already exists.
              // if the Item has a matching serialnumber of type s then also consider the item as scanned

            Fpxxfq1a5xwwqqhxxxxxitem cc = fpxxfq1a5xwwqqhxxxxxitemHome.getInstance();
	      try {
			 List<Fpxxfq1a5xwwqqhxxxxxitem> results =  entityManager.createQuery("select cc from Fpxxfq1a5xwwqqhxxxxxitem cc where (cc.a0xxuobxbxxxxxxxxxxxsid = :keyOfEntity OR cc.b5fbuxxrbvxxxxxxxxxxupccode = :upcCode ) AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", entvToInteger).setParameter("upcCode", enteredValue).setParameter("owner2", owner2Code).getResultList();    
                  
                         if(results.isEmpty()){
                          List<${serialnumbersEntityName?cap_first}> resultsS =${serialnumbersEntityName}List.getSuggestList("sm"+enteredValue);
                          if(resultsS.isEmpty()){
                           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            FacesMessage.SEVERITY_WARN,bundle.getString("SKU")+"/ "+bundle.getString("barcode")+" "+ enteredValue+" "+bundle.getString("not")+" "+ bundle.getString("found")+", "+ bundle.getString("create")+" "+ bundle.getString("first"),""));
                            return;                           
                          }else{
                           fpxxfq1a5xwwqqhxxxxxitem = fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(resultsS.get(0).getB1xxuxxrbvxxxxxxxxxxmatcode()); 
                          }
                         }else{
                          fpxxfq1a5xwwqqhxxxxxitem = results.get(0);
                         }
                         if (results.size()>1){
                             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                              FacesMessage.SEVERITY_WARN,bundle.getString("matcode")+" "+ bundle.getString("multiple")+" "+ bundle.getString("results")+", "+ bundle.getString("one")+" "+ bundle.getString("selected"),""));
                        
                         }           
                         if (fpxxfq1a5xwwqqhxxxxxitem != null ) {
			     // that's fine - It should exist.
                             // check if selfreferencing foreign field
                           if(this.instance == null){
                            this.clearInstance();
                            this.setInstance(fpxxfq1a5xwwqqhxxxxxitem);
                           }
                           fpxxfq1a5xwwqqhxxxxxitem.setB0xxziqxlvxxsaxxxxxxquantity(BigDecimal.ONE);//each scan means qty 1
			   this.instance.setFpxxfq1a5xwwqqhxxxxxitem(fpxxfq1a5xwwqqhxxxxxitem);
                           //each scan will add one to phy qty saved in serial table for same sid/matcode/sku
                           //also disable/enable button calling the same method to avoid double count
                           //if some other validation already failed, do not reset it 
                           if(${itemEntityName}.get${itemPriceField?cap_first}().compareTo(BigDecimal.ZERO)==0){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            FacesMessage.SEVERITY_WARN,bundle.getString("Price")+ " "+bundle.getString("is")+ " "+bundle.getString("ZERO"),""));
                           }     
                           //if some other validation already failed, do not reset it 
                           if(bcontinue){
                            bcontinue=true;
                           }
                         }//end of shiptobill check
	      } catch (NoResultException nre) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("Matcode"),""));


			 throw new ValidatorException(msg);
              }
	 }


    @Transactional
    public void itemCount(String matCode,String mode, BigDecimal quantity,String type) {
    /**
    * for itemCount, serialnumbers records are used to store item physical counts ie one to one relation
    * check scandate to allow count, if valid then entered quantity will be added to physqty. Give warning
    * if quantity exists
    * @param args -3
    * matCode ie item key or serial key, this method is called by countItem, countAlias or by 
    * quantity is normally 1 if not SI-D (shopping)
    * mode s=set/replace with new quantity, a=adjust +- to existing quantity
    * type m-item matCode,a-alias(SKU) matCode,s-item serial#
    * if ci-L1 , quantity passed is 0
    * type cart or basket or cartInvoice
    * checks against 
    */
     // matcode is too long for barcode, use sid instead
     // for manufacturing allow serialized inventory via client field altseria. tbd item type? or source? to override
     //default is one serialnumber record withe serialno key same as item sid and holds phy count in physqty and gets updated
     // if serialized then item receive time a serialnumber record was created with ie many serials to one item. Each serialno
     // key holds the same item sid. It will have a tree structure and each may or may not have physqty or flag
     // should be one scandate record
     SimpleDateFormat ss = new SimpleDateFormat("yyyy-MM-dd");
     List<Xlrxuq1iixwwqqhexxxxscandate> resultsSc=null;
     Xlrxuq1iixwwqqhexxxxscandate scandate=null;
     resultsSc=xlrxuq1iixwwqqhexxxxscandateList.getResultList();//get all, should be one only unless ERP needs 2nd one
      if(resultsSc.size() == 0  ){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Stock")+" "+bundle.getString("count")+" "+bundle.getString("not")+" "+bundle.getString("setup")+ ", "+" "+bundle.getString("or")+" "+bundle.getString("trying")+" "+bundle.getString("outside")+" "+bundle.getString("counting")+" "+bundle.getString("setup")+" "+bundle.getString("date")+ " "+bundle.getString("range"),""));
          return;

      }else{
       scandate=resultsSc.get(0);
       Date toDay = calendar.getTime();

       if(!(toDay.compareTo(scandate.getB1xxcsxraxxxxxxxxxxxdatetimeofscan()) >= 0 && toDay.compareTo(scandate.getZ1xxcxxrlvxxxxxxxxxxlastdate()) <= 0)){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Outside")+" "+bundle.getString("Stock")+" "+bundle.getString("count")+" "+bundle.getString("date")+" "+bundle.getString("range")+ ", "+bundle.getString("start")+": "+ss.format(scandate.getB1xxcsxraxxxxxxxxxxxdatetimeofscan()).toString()+" "+bundle.getString("end")+": "+ss.format(scandate.getZ1xxcxxrlvxxxxxxxxxxlastdate()).toString(),""));
          return;

       }

      }
     
     List<Fxxxuq1ffxwwqqhefxxxserialnumbers> results=null;
     Fxxxuq1ffxwwqqhefxxxserialnumbers serial=null;
     String action="";
     BigDecimal oldAmount = new BigDecimal("0.0");
     Integer sid=0;
     String typeE=null;//"X" makes it immutable
     String descript="";
     // type s means param1 is serial # and was created whem item was received and assigned a serial #
     // needs more logic, do not show in menu now, only type m and a  
     if(type==null){
      type="m";
     }
    
     if (fpxxfq1a5xwwqqhxxxxxitem == null){
       fpxxfq1a5xwwqqhxxxxxitem=fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(matCode);
     }

     if (fpxxfq1a5xwwqqhxxxxxitem == null){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Invalid")+" "+bundle.getString("value")+" "+matCode+" "+bundle.getString("received")+", "+bundle.getString("check")+ " "+bundle.getString("entered")+" "+bundle.getString("value")+" "+bundle.getString("and")+" "+bundle.getString("use")+ " "+bundle.getString("correct")+" "+bundle.getString("button")+" "+bundle.getString("scanned")+ " / "+bundle.getString("select"),""));
          return;

     }else{
      descript=fpxxfq1a5xwwqqhxxxxxitem.getB1xxuszsbvxxxxxxxxxxdescript();// type s, see logic below
      sid=fpxxfq1a5xwwqqhxxxxxitem.getA0xxuobxbxxxxxxxxxxxsid();
     }
     try{
      if(quantity.compareTo(BigDecimal.ZERO) == 0){
       fpxxfq1a5xwwqqhxxxxxitemHome.getInstance().setB0xxziqxlvxxsaxxxxxxquantity(BigDecimal.ONE);//each scan means qty 1
       quantity=BigDecimal.ONE;// make one for each scan/enter
      }  
      String sidS=sid+"";
      String strLeftPad = String.format("%8s", sidS).replace(" " , "0");
      results=fxxxuq1ffxwwqqhefxxxserialnumbersList.getSuggestList(strLeftPad);//suggestList uses key which is string value of Item sid
      //since setup() for baseline already created serialnumbers records most of the time will involve updating
      // if new following logic will set type as a(sku)/m(matcode)/s(serial for erp)
      // if update check if null then put a(sku)/m(matcode)/s(serial for erp) as indicated via parameter above
      if(results.size() == 0 || (results.size() > 0 && !results.get(0).getA0xxukxxbvxxxxxxxxxxserialno().equals(strLeftPad))  ){
       // check againsts scandate, new entity no need to check mode as existing quantity in serial is 0
       fxxxuq1ffxwwqqhefxxxserialnumbersHome.clearInstance();
       serial=fxxxuq1ffxwwqqhefxxxserialnumbersHome.getInstance();
       serial.setB1xxuxxrbvxxxxxxxxxxmatcode(matCode);
       serial.setD5xxcxqrlxxxxxxxxxxxphysqty(quantity);
       serial.setA0xxukxxbvxxxxxxxxxxserialno(String.format("%08d", sid));
       if(type.equals("m")){
        serial.setYcxxuxxrbvxxxxxxxxxxtype("m");
        typeE="m("+bundle.getString("item")+")";
       }else{
        if(type.equals("a")){
         serial.setYcxxuxxrbvxxxxxxxxxxtype("a");
         typeE="a("+bundle.getString("SKU")+")";
        }else{
         if(type.equals("s")){
          serial.setYcxxuxxrbvxxxxxxxxxxtype("s");
          typeE="s("+bundle.getString("barcode")+")";
         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Invalid")+" "+bundle.getString("value")+" "+type+" "+bundle.getString("received")+" "+bundle.getString("as")+ " "+bundle.getString("parameter"),""));
          return;
         }  
        }  
       }
       fxxxuq1ffxwwqqhefxxxserialnumbersHome.setInstance(serial);
       fxxxuq1ffxwwqqhefxxxserialnumbersHome.superdotpersist();
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Stock")+" "+bundle.getString("record")+" "+bundle.getString("for")+" "+bundle.getString("Item")+": "+matCode+" ("+descript+") "+bundle.getString("Stock")+" "+bundle.getString("saved")+" "+bundle.getString("as")+" "+bundle.getString("id")+" "+serial.getA0xxukxxbvxxxxxxxxxxserialno()+", "+bundle.getString("quantity")+" "+quantity,""));
       return;
      }
      if(results.size() > 0){
       // check againsts id strLeftPad, scandate, existing serial so need to check mode to set or adjust qty
   
       fxxxuq1ffxwwqqhefxxxserialnumbersHome.clearInstance();
       serial=results.get(0);
       String serType=serial.getYcxxuxxrbvxxxxxxxxxxtype();
       if(serType !=null && !serType.equals(type)){// type null was set by setup() reject not null and not a/m/s
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Selected")+" "+bundle.getString("Stock")+" "+bundle.getString("record")+" "+bundle.getString("for")+" "+bundle.getString("Item")+": "+matCode+" ("+descript+") "+bundle.getString("has")+" "+bundle.getString("type")+" "+serType+" "+bundle.getString("not")+ " "+typeE+ " ",""));
          return;
       }
       if(type.equals("s")){
        // serial should already have matcode, go get item descript
        fpxxfq1a5xwwqqhxxxxxitem=fpxxfq1a5xwwqqhxxxxxitemList.getKeyToEntity(serial.getB1xxuxxrbvxxxxxxxxxxmatcode()); 
        descript=fpxxfq1a5xwwqqhxxxxxitem.getB1xxuszsbvxxxxxxxxxxdescript();
       }else{//m or a 
        serial.setB1xxuxxrbvxxxxxxxxxxmatcode(matCode);
        serial.setYcxxuxxrbvxxxxxxxxxxtype(type);//override null with a or m

       }
       oldAmount=serial.getD5xxcxqrlxxxxxxxxxxxphysqty();
       if(mode.equals("a")){//mode is adjust or set
        serial.setD5xxcxqrlxxxxxxxxxxxphysqty(oldAmount.add(quantity));

       }else{
        if(quantity.compareTo(BigDecimal.ZERO) == 1){
         serial.setD5xxcxqrlxxxxxxxxxxxphysqty(oldAmount.add(quantity));
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_ERROR,bundle.getString("Physical")+" "+bundle.getString("count")+" "+bundle.getString("needs")+" "+bundle.getString("to")+" "+bundle.getString("be")+" "+bundle.getString("more")+" "+bundle.getString("than")+" "+bundle.getString("zero")+", "+bundle.getString("use")+" "+bundle.getString("adjust")+" "+bundle.getString("if")+" "+bundle.getString("needed"),""));
          return;
        }
       }
       fxxxuq1ffxwwqqhefxxxserialnumbersHome.setInstance(serial);
       fxxxuq1ffxwwqqhefxxxserialnumbersHome.superUpdate();
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("Item")+": "+matCode+" ("+descript+") "+bundle.getString("Stock")+" "+bundle.getString("code")+" "+serial.getA0xxukxxbvxxxxxxxxxxserialno()+" "+bundle.getString("updated")+ ", "+ bundle.getString("quantity")+" "+oldAmount+" "+bundle.getString("to")+"  "+serial.getD5xxcxqrlxxxxxxxxxxxphysqty(),""));
       return;
      }

     }catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,matCode+" ("+descript+")-"+quantity+" "+bundle.getString("Stock")+" "+bundle.getString("saving")+ " "+bundle.getString("error")+" "+e.getMessage(),""));

             return ;
     }  
       




    }
    public String removeImage() {
     //removes blobdata, if any, associated with item but leave the docmnt value in item itself
                 try{
                List<${blobdataEntityName?cap_first}> results = entityManager
		 .createQuery(
			"select cc from ${blobdataEntityName?cap_first} cc where cc.a0xxukbdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "FPXXFQ1A5XWWQQHXXXXXITEM").setParameter("blobdatafromkey", this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1))
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","1").getResultList();
		if(!results.isEmpty() ){
                 //blob/clob are not constrained as foreign entity to item, so just remove it
                  ${blobdataEntityName}Home.clearInstance();
                  ${blobdataEntityName}Home.setInstance(results.get(0));
                  ${blobdataEntityName}Home.superdotremove();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("image")+" "+bundle.getString("data")+" "+bundle.getString("done")+", "+bundle.getString("key")+" "+results.get(0).getA1xxuxxxbv49xxxxxxxxfromkey(),""));

                }
                 }catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("binary")+" "+bundle.getString("data")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                 }  
                return "";  

    }

    public String removeText() {
                List<${clobdataEntityName?cap_first}> resultsc = entityManager
		 .createQuery(
			"select cc from ${clobdataEntityName?cap_first} cc where cc.a0xxukcdlvxxxxxxxxxxfromtable=:blobdatafromtable and cc.a1xxuxxxbv49xxxxxxxxfromkey=:blobdatafromkey and cc.a3xxexnsbvxxxxxxxxxxsequence=:blobdatasequence and cc.a2xxuxxxbv50xxxxxxxxqualifier=:blobdataqualifier and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
		           .setParameter("blobdatafromtable", "FPXXFQ1A5XWWQQHXXXXXITEM").setParameter("blobdatafromkey", this.instance.getW8xxuzdrbvxxxxxxxxxxdocmnt().substring(1))
                            .setParameter("owner2", owner2Code).setParameter("blobdatasequence",1)
                             .setParameter("blobdataqualifier","1").getResultList();
		if(!resultsc.isEmpty() ){
                 //blob/clob are not constrained as foreign entity to item, so just remove it
                 try{
                  ${clobdataEntityName}Home.clearInstance();
                  ${clobdataEntityName}Home.setInstance(resultsc.get(0));
                  ${clobdataEntityName}Home.superdotremove();
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("done")+", "+bundle.getString("key")+" "+resultsc.get(0).getA1xxuxxxbv49xxxxxxxxfromkey(),""));

                 }catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("remove")+" "+bundle.getString("text")+" "+bundle.getString("data")+" "+bundle.getString("error")+" "+e.getMessage(),""));
                 }  
                }  
                return "";  

    } 


</#if>
<#if menuAttributesp2 == "59">
// called by persist() if incentive contains #random. step has int howMany, incentive has prefix before #random
public String generateCoupons(int howMany,String prefix){

 char[] chars ="123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".toCharArray();
 int max=100000000;
 int random=0;
 StringBuffer sb=new StringBuffer();
 String couponCode="";
 int i=0;
 int e=0;
 Yxxxuq591xwwqqhxxxxxrate1f base=this.instance;
 while (i<howMany){
  random=(int) (Math.random()*max);
  sb=new StringBuffer();
  while (random>0) {
    sb.append(chars[random % chars.length]);
    random /= chars.length;
  }
  couponCode=prefix.trim()+sb.toString();
   this.clearInstance();
   this.getInstance();
   this.instance.setH3xxuxxrbvxxxxxxxxxxincentive(couponCode);
   this.instance.setA0xxukxxbvxxxxxxxxxxusertype("SC");
   this.instance.setB1xxuxxrbvxxxxxxxxxxprodtype("P");
                    try{// coupons type SC means stepName is item sid ie numeric
                     int sid=Integer.parseInt(base.getB2xxuxxrbv51xxxxxxxxstepname());
                    }catch (Exception exc){
                     FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                      FacesMessage.SEVERITY_ERROR,bundle.getString("Type")+ " "+"SC/PC"+", "+bundle.getString("stepName")+" "+base.getB2xxuxxrbv51xxxxxxxxstepname()+" "+bundle.getString("not")+" "+bundle.getString("numeric"),""));
                     return null;
                    }

   this.instance.setB2xxuxxrbv51xxxxxxxxstepname(base.getB2xxuxxrbv51xxxxxxxxstepname());
   this.instance.setB3xxzxxrbvxxxxxxxxxxstep(base.getB3xxzxxrbvxxxxxxxxxxstep());
   this.instance.setH1xxcxxrbvxxxxxxxxxxeffdate(base.getH1xxcxxrbvxxxxxxxxxxeffdate());
   this.instance.setH2xxcxxrbvxxxxxxxxxxenddate(base.getH2xxcxxrbvxxxxxxxxxxenddate());

  try{
   superdotpersist();//dont loop by calling persist, came here from persist 
   i=i+1;
  }catch(Exception exc){
   e=e+1;
   if(e>10){
    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_WARN,bundle.getString("after")+" "+bundle.getString("count")+" "+ i +", "+bundle.getString("error")+" "+bundle.getString("in")+" "+bundle.getString("persist")+" "+ exc.getMessage(),""));
    return "";
   }
  }
 }//while
    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
     FacesMessage.SEVERITY_WARN,bundle.getString("Added")+" "+ i +" "+bundle.getString("random")+" "+bundle.getString("coupons"),""));

 return "";
} 
</#if>



<#if menuAttributesp2 == "1A"  ||  menuAttributesp2 == "19" >
    @Transactional
    public void addScanToOrder(String scanKey, BigDecimal quantity,String type) {
     //add logic to check scanned input to match item key,aliaskey and  barcode and get the entity
     if(${itemEntityName} == null){//should be already set by validate
      ${itemEntityName}=${itemEntityName}List.getKeyToEntity(scanKey);
     }
     if(${itemEntityName} == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("invalid")+ " "+bundle.getString("key")+ " "+scanKey,""));
      return;
     }
     this.addProductToOrder(${itemEntityName},quantity,type);
     this.clearInstance();// clear scan in field

    }

    @Transactional
    public String addScanToCart(String scanKey, BigDecimal quantity,String type) {
     //add logic to check scanned input to match item key,aliaskey and  barcode and get the entity
     if(${itemEntityName} == null){//should be already set by validate
      ${itemEntityName}=${itemEntityName}List.getKeyToEntity(scanKey);
     }
     if(${itemEntityName} == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("invalid")+ " "+bundle.getString("key")+ " "+scanKey,""));
      return "";
     }
      // reset scanKey to sid in case UPCCode was used in validation
      scanKey=""+fpxxfq1a5xwwqqhxxxxxitem.getA0xxuobxbxxxxxxxxxxxsid();  
      if(quantity.compareTo(BigDecimal.ZERO) == 0){
       fpxxfq1a5xwwqqhxxxxxitemHome.getInstance().setB0xxziqxlvxxsaxxxxxxquantity(BigDecimal.ONE);//each scan means qty 1
       quantity=BigDecimal.ONE;// make one for each scan/enter
      }  
                           if(${itemEntityName}.get${itemPriceField?cap_first}().compareTo(BigDecimal.ZERO)==0){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            FacesMessage.SEVERITY_WARN,bundle.getString("Price")+ " "+bundle.getString("is")+ " "+bundle.getString("ZERO"),""));
                           }     

     this.clearInstance();// clear scan in field 
     return "/cartPOS.wflow??faces-redirect=true&categoryJay="+scanKey;
   }
    /**
    * method is a gateway to call other methods to process order based on customer chosen PayBy value 
    * for paynow values pp and pd it calls r3cart/ShoppingCartBean for card processing and order status/terms update
    * for no paynow ie np and cd it calls updateOrderTermCode bypassing any card processing because no payment now
    * order type will be cart and terms initially null will be changed to as follows
    * pp > PrePay and Pickup, pd > PrePay and Delivery, np > ToPay and Pickup, cd > ToPay and Delivery
    * Based on customer ?? tbd or backoffice can change terms to dd/Pickup or dd/Deliv where dd days like 30/Deliv for 30 days 
    * @return null or empty 
    * @param arg cpoId not used for now null, payBy ie pd- paynow/deliver, pp- paynow/pickup, np- no paynow/pay at pickup, cd- no paynow/delivery time pay cash or credit 
    * itemList.getCurrentCartOrder(xx) is used later to get cpoId
    * @exception tbd
    */ 


    public String payByController(Integer cpoId, String code) {
     //call diff r3cart method based on code pp,pd,cd and np
     //pd:Make_payment_for_delivery pp:Make_payment_for_pickup. Customer pre pay using paypal. Goods are delivered or picked up
     //order/invoice auto created. backoffice invoice -> shipment. either calls calls/informs shipper or calls/informs customer
     //for pick up. invoice -> payment and capture money from paypal. no POS involved
     //
     //np:Pay_later_at_pickup cd:COD_payment_at_delivery
     //only order auto created. back office order ->shipment and either calls calls/informs shipper or calls/informs customer for pickup
     //For both raaspi POS screen is shown and either pays cash or via Square POS 
     //for now, enter item id and qty from shipment report into cartPOS and checkout to take payment. invoice auto created but payment manual ??
     // added a button to cartPOS to convert order (if shipment exists) to cartPOS entries   
     //find or create current pos order for the pos operator id/customer
     // check if shipment record exists for the order. if no give msg and exit
     // if yes,get the existing cart order details, update all setails order sid to current pos order sid 
     // then update existing order term as codcoppos for history.
     // the page should show the cart items under POS cart items
     // if pickup at store or employee at customer premise show raaspi checkoutPOS page.
     // customer will enter card and submit or give cash/chq or payment info like draft,email xfer ref# and employee
     // take cash/chq/draft payment.
     // if shipper delivers then they will take payment and settle later with the merchant. Employee will take it as cash/chq/draft paynent.
     // cart -> cartPOS and take card payment via Square POS terminal, cash or others (draft, settlement from post office) 
     // checkoutPOS creates invoice and can be printed or emailed. The invoice will act as receipt but 
     // backoffice need to follow up and use invoice>payment so that if card the money is captured and if cash etc mark as paid.
     //
     //if(r3Cart.getInSaleReady() && !r3Cart.getInConfirmed()){
     try{
      if(code.equals("pd")){
       // update order Terms later in shoppingCart to avoid premature exit via updateOrderTermCode
        r3Cart.saleNAproveRequest("PrePay and Delivery");//terms calls confirmPayment which takes order to invoice/shipment, emails
      }else{
       if(code.equals("pp")){
       // update order Terms later in shoppingCart
        r3Cart.saleNAproveRequest("PrePay and PickUp");
       }else{
        if(code.equals("np")){
          trexuq244xwwqqhxxxxxcuordersHome.updateOrderTermCode(fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart").get(0).getA0xxuobxbxxxxxxxxxxxsid(),"ToPay and PickUp");//cash/credit on pickup
          //needs back office followup 
        }else{
         if(code.equals("cd")){
          // need to mimic order to invoice/shipment and collect payment, check old logic
          // do not show unless loggedin and open  modal panel and collect addrress info if missing
          if(fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart")==null 
              || fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart").size()==0){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_ERROR,bundle.getString("Checkout")+" "+bundle.getString("error")+", "+bundle.getString("order")+" "+bundle.getString("not")+" "+bundle.getString("found")+" "+bundle.getString("for")+" "+bundle.getString("COD_payment_at_delivery") ,""));
            return "";
          }else{
           trexuq244xwwqqhxxxxxcuordersHome.updateOrderTermCode(fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder("cart").get(0).getA0xxuobxbxxxxxxxxxxxsid(),"ToPay and Delivery");
           //needs back office followup
          }
          //needs back office followup
         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Checkout")+" "+bundle.getString("error")+", "+bundle.getString("unknown")+" "+bundle.getString("options")+" "+bundle.getString("code")+" "+code ,""));
           return "";

         } 
        }
       }
      }//top
     } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_ERROR,bundle.getString("Checkout")+ " "+bundle.getString("error")+", "+ e.getMessage(),""));
           return "";
       }


     return "";
    }


    public String validateEmail(String email){
              try{
                       if(email == null || email.isEmpty()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+email+" "+bundle.getString("invalid"),""));
                        customIdentity.setImailaddr(null);// otherwise checkout will continue
                        return "''?faces-redirect=true&includeViewParams=true";
                       }

                       //get type from order > item itself, it can come here from each type ie cart, basket etc
                       
                       String type="cart";// can it be pos???  check for null
                       if(this.instance !=null && !this.instance.getC6xxusxrbv16xxxxxxxxtype().equals("SI-D")){
                        type="basket";// check for null
                       }
                       Pattern pattern = Pattern.compile("^.+@.+\\..+$");
                       Matcher matcher = pattern.matcher(email);
                       if(!matcher.matches()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+email+" "+bundle.getString("invalid"),""));
                        customIdentity.setImailaddr(null);// otherwise checkout will continue
                        return null;
                       }
                       // may need to update temp customer with email address, create order without email now allowed
                       Trexuq244xwwqqhxxxxxcuorders corder=fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type).size()==0?null:fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type).get(0);
                       // can come here before confirming order
                       if(corder == null){
                        return "''?faces-redirect=true&includeViewParams=true";
                       }
                       Jxxxuq201xwwqqhxxxxxcustomer customer=corder.getJxxxuq201xwwqqhxxxxxcustomer();
                       if ( customer!=null
                        && customer.getQ4xxhxxxbv24xxxxxxxximailaddr()==null
                         || customer.getQ4xxhxxxbv24xxxxxxxximailaddr().isEmpty()){
                        customer.setQ4xxhxxxbv24xxxxxxxximailaddr(email);
                        corder.setJxxxuq201xwwqqhxxxxxcustomer(customer);   
                       }           
                       //
                        jxxxuq201xwwqqhxxxxxcustomerHome.clearInstance();
                        jxxxuq201xwwqqhxxxxxcustomerHome.setInstance(customer);
                        jxxxuq201xwwqqhxxxxxcustomerHome.superUpdate();


  
                       //update temp user already created before email entered
                       if(yxxxuh566xwwqqwxxxxxuser == null){
                        yxxxuh566xwwqqwxxxxxuser=yxxxuh566xwwqqwxxxxxuserList.getKeyToEntity(customIdentity.getUsername());   
                       }
                       if(yxxxuh566xwwqqwxxxxxuser != null){
                        yxxxuh566xwwqqwxxxxxuser.setC1xxuxxxbvxxxxxxxxxxotherid(customIdentity.getImailaddr());
                        yxxxuh566xwwqqwxxxxxuserHome.clearInstance();
                        yxxxuh566xwwqqwxxxxxuserHome.setInstance(yxxxuh566xwwqqwxxxxxuser);
                        yxxxuh566xwwqqwxxxxxuserHome.superUpdate();
                       }
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+email+" "+bundle.getString("will")+" "+bundle.getString("be")+" "+bundle.getString("used")+" "+bundle.getString("to")+" "+bundle.getString("notify") ,""));

                       return "''?faces-redirect=true&includeViewParams=true";
             } catch (Exception e) {
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+email+" "+bundle.getString("validation")+" "+bundle.getString("error")+" "+ e.getMessage(),""));
                        customIdentity.setImailaddr(null);// otherwise checkout will continue
                        return null;
             }

    }    

    public String addProductToTrial(Fpxxfq1a5xwwqqhxxxxxitem product, BigDecimal quantity,String type) {
           // added trial instead of cart if miscode1 has trial1 or triala1 etc 1 or a1 is function
           //If trial+1,2,3,4 then existing 4 products like business,organization etc
           //If trial a1,a2,a3,a4 then addon products like stock count,ecommerce etc. Type here is type of request
           //item misccode1 trial or recur 5ch then 1 or 45 or a2 1 or 2ch then period 14 or 280 or 365 days
           //
           //item table misccode1 period is used if ratetable entry PC is used. If SC then each coupon value has period days
           //ratetable if type PC then maps item sid to function like ee or ef in incentive
           //ratetable if type DC then maps item sid to discount amt/% in step and coupn code in incentive
           //ratetable if type SC then maps item sid to period in value and coupn code in incentive
           //ratetable when creating random coupons put #random as incentive and number of coupons in step 
           // and period days in value. It will generate random coupon codes but replace incentive with coupon codes
           if(type.equals("trial")){
            String from=product.getY2xxuxxrbvxxxxxxxxxxmisccode1().substring(5);//skip trial prefix
            int period=14;//default 14 days trial period unless misccode1 overrides it
            if(from.length() > 1){// could a1 or a1xxx or 12 ie 2 days or 114 14 days trial or 4520 20 days trial
             // use a2 etc or 45 not 4 to allow using existing direct register via free trial link 
             try{
              if(from.substring(0,1).equals("a")||from.substring(0,1).equals("4")||from.substring(0,1).equals("6")||from.substring(0,1).equals("8")){
               if(from.length() > 2){
                period=Integer.parseInt(from.substring(2)); 
               }
               from=from.substring(0,2);
              }else{
               if(from.length() > 1){
                period=Integer.parseInt(from.substring(1)); 
               }
               from=from.substring(0,1);
              }
             } catch (Exception e) {
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,"invalid value for product subscription code,contact support " + e.getMessage(),""));
                bcontinue=false;
                return null;
             }
           }
            switch(from){
             case "a1":
              return "/trial.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=a1"+period+"&amp;faces-redirect=true";
             case "a2":
              return "/trial.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=a2"+period+"&amp;faces-redirect=true";
             case "a3":
              return "/trial.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=a3"+period+"&amp;faces-redirect=true";
             case "a4":
              return "/trial.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=a4"+period+"&amp;faces-redirect=true";
             case "1":
              return "/register.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=1"+period+"&amp;faces-redirect=true";
             case "2":
              return "/register.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=2"+period+"&amp;faces-redirect=true";
             case "3":
              return "/register.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=3"+period+"&amp;faces-redirect=true";
             case "45":
              return "/register.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=45"+period+"&amp;faces-redirect=true";
             case "67":
              return "/register.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=67"+period+"&amp;faces-redirect=true";
             case "89":
              return "/register.wflow?email=mail@yourdomain.com&amp;registrationName=name&amp;websiteName=sitename&amp;functionGroup=89"+period+"&amp;faces-redirect=true";
             default :
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("invalid")+ " "+bundle.getString("request")+ "- "+ from,""));
            }  
           }
               return "";    

    }

    @Transactional
/**
    * called by ItemDetailsBrowse by customer and ItemDetailsPOS by backOffice to process free trial for a product
    * calls addProductToTrial if type trial or addProductToOrder for other types
    * @param arg2-2 quantity, type(trial or others)
    * sid from item selected comes overRideValue and calling sidToEntity   
    * @see "addProductToOrder"
*/

    public String addProductToOrderParam(BigDecimal quantity,String type) {
     // via form post passRow parameter value available. passing row via method param not reliable if from iterator
     try{
      fpxxfq1a5xwwqqhxxxxxitemli=fpxxfq1a5xwwqqhxxxxxitemList.getSidToEntity(Integer.parseInt(overRideValue));
     } catch (Exception ex) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_WARN,bundle.getString("Matcode")+" "+bundle.getString("record")+" "+bundle.getString("number")+" "+overRideValue+" "+bundle.getString("invalid")+", "+ex.getMessage(),""));
       return null;
     }
   
     if(type.equals("trial")){
      return addProductToTrial(fpxxfq1a5xwwqqhxxxxxitemli, quantity, type);
     }else{
      addProductToOrder(fpxxfq1a5xwwqqhxxxxxitemli, quantity, type);
      return null;
     }
    }

    @Transactional
/**
    * called by ItemDetailsBrowse(via addProductToOrderParam) /ItemDetailsBrow-1/itemsReviewSelect/ItemDetailsFees/ItemsPaidSelect/ItemSITree
    * /ItemsGetQuote/BlogSITree/cart/cartItem/cartPOS  for a product.
    * shopping(SI-D)/case(CI-D)/fee item (FI-D) in cart/basket
    * quantity is always 1 if not SI-D (shopping)
    * in case of reviewSelect, product refers to CI-L1 item since SI-D not created yet and will be created further down 
    * quantity passed is 0  if type basket, affects dummyaddress create
    * 
    * method calls customerHome.persist(),userHomePersist(),itemHome persist ,cuordersHome.cartpersist()(which in turn calls cuorderHome.persist())
    * if called by user UH role then case item source is backoffice user, case item miscode1 holdvalue2/customer 
    * case order agent is assigned employee
    *  allows backoffice to open case on behalf of customers and assign case to employee
    * @param args -3 item,quantity, type cart,basket or cartInvoice. cart covers both cart and cart(pos) 
    * At this point if order type is cart then term is blank because payment/deliv option not chosen yet
    * @see "addProductToOrderParam"
*/
    public void addProductToOrder(${itemEntityName?cap_first} product, BigDecimal quantity,String type) {
                 // moved on top to allow query without email/login
                 // order check for pos
                 if (quantity.compareTo( new BigDecimal("0.0")) != 0  && product.get${itemQtyField?cap_first}().compareTo( new BigDecimal("1.0")) == -1){
                         // add logic to keep stat re out of stock
                          calendar.getTime();
                          if(product.getY5xxcxxrlxxxxxxxxxxxdatetorenew() !=null){
                           calendare.setTime(product.getY5xxcxxrlxxxxxxxxxxxdatetorenew());
                           if(calendare.before(calendar)){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("availibility")+ " "+bundle.getString("date"),""));

                           }else{
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("expected")+ " "+bundle.getString("availibility")+ " "+ sdf.format(calendare.getTime()),""));

                           }
                          }else{
                                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("availibility")+ " "+ bundle.getString("date"),""));

                          }
                         return;
                 } 

          String valueType="";
          if (!identity.isLoggedIn()){
                     //removed required and validation to allow email entries either at top or at bottom
                     // if imailAddr has value take it, otherwise take Alt and if none return
                     if(customIdentity.getImailaddr() !=null && !customIdentity.getImailaddr().isEmpty()){
                      //take it
                      // save this as attach in cuorder for later use in shopping cart 
                       Pattern pattern = Pattern.compile("^.+@.+\\..+$");
                       Matcher matcher = pattern.matcher(customIdentity.getImailaddr());
                       if(!matcher.matches()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+bundle.getString("invalid"),""));

                        return;
                       }

                     }else{

                       //return; alert msg addded in view
                     }  

          }
          // both logged in or temp user, clear prev error msg
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString(""),""));
          Integer sid=0;
	  Map<String,String> params = 
                FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
          /* 
          if (params.get("categoryJay") != null &&  !params.get("categoryJay").isEmpty()){ 
	   sid = Integer.parseInt(params.get("categoryJay"));
           // clear existing instance to force changing it, sometimes we want to get existing instance
           clearInstance();
           set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(sid);
           // jay are we not changing the product passed as parameter, debug and check
	   product=getDefinedInstance();

          }
      */

          // not logged in, so visitor shopping, not POS which is backoffice function
          if (!identity.isLoggedIn() && customIdentity.getOwner().equals("sss") ){
                     // bypass creating a new user, if continuing more purchase, overRideValue holds PO sid from checkOut
                     // return; use timestamp and ip to as owner, ip for analysis and timestamp with ms  to hide from some one else using same ip like in a cafe
                     // replace with real logon id later as part of payment or save as is but will stay as orphan for analysis and later purged  
                     // check same temp user or not, customIdentity is per session and values are for each session and is sss to start with
                     // check whether customIdent
           // put dummy address so that dummy shipment/pickup can be done for items to allow invoice etc
           String subKeyA=""; 
	   if (${addressEntityName} == null) {
	    ${addressEntityName}=${addressEntityName}Home.getInstance();
	   }
              if(${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1() == null){
               if(type.equals("basket")){//CI-D instance created further down no matcode yet
                ${addressEntityName}.setB1pxusa1bvxxxxxxxxxxaddrl1(notesToPass.length()>60?notesToPass.substring(0,60)+" address":notesToPass+" address");
               }else{
                ${addressEntityName}.setB1pxusa1bvxxxxxxxxxxaddrl1(this.instance.getA0xxukixbxxxxxxxxxxxmatcode()+" address");
               }
              }// city 20ch
              if(${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity() == null || fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity().isEmpty() ){
               if(type.equals("basket")){//CI-D instance created further down no matcode yet
                ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(notesToPass.length()>14?notesToPass.substring(0,14)+" City":notesToPass+" City");
               }else{
                if(this.instance.getA0xxukixbxxxxxxxxxxxmatcode().length()>14){      
                 ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukixbxxxxxxxxxxxmatcode().substring(0,14)+" City");
                }else{
                 ${addressEntityName}.setB3xxh2acbv11xxxxxxxxcity(this.instance.getA0xxukixbxxxxxxxxxxxmatcode()+" City");
                } 
               }
              }
              subKeyA=${addressEntityName}.getB1pxusa1bvxxxxxxxxxxaddrl1()+${addressEntityName}.getB3xxh2acbv11xxxxxxxxcity();
              if (subKeyA.length() !=0){
               String subKeyh=Integer.toString(subKeyA.hashCode());//
               if (subKeyA.length() > 9){
                subKeyA=subKeyA.substring(0,10)+subKeyh;
               }
               else {
                subKeyA=subKeyA+subKeyh;//
               }
               

               ${addressEntityName}.setA0xxukbxbxxxxxxxxxxxaddrescode(subKeyA);
               ${addressEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
               ${addressEntityName}Home.superdotpersist();// avoid persist recreates subkey etc);
               bcontinue=true;
              }else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("create")+" "+bundle.getString("address")+" "+subKey+" "+bundle.getString("error"),""));

               bcontinue=false;
              }
                      String ts=new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                      // use email as last name to help identify whose order
                      // same customer can buy multiple items in same session and be here again after a few secs, so reuse subkey 
                      if(subKey.isEmpty()){
                       subKey=ts.substring(17,19)+ts.substring(14,16)+ts.substring(11,13)+ts.substring(0,7)+userIP;
                       ownerCode=subKey+"sss";
                       customIdentity.setOwner(ownerCode);
                      }
                      // create temp customer record but needs to deleted later after stats, follow up etc
                      //viewscoped bean will retain values
 	              if (${customerEntityName} == null) {
 	               ${customerEntityName}=${customerEntityName}Home.getInstance();

                       ${customerEntityName}.setA0xxukxxbvxxxxxxxxxxcustomer(subKey);
                       ${customerEntityName}.setZdxxutoxlhxxxxxxxxxxowner(ownerCode);
                       ${customerEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                       ${customerEntityName}.setF2xxuwmxbv40xxxxxxxxintegrset("DEFAULT");
                       ${customerEntityName}.setC1xxuslnbvixxxxxxxxxlastname(customIdentity.getImailaddr());
                       ${customerEntityName}.setQ4xxhxxxbv24xxxxxxxximailaddr(customIdentity.getImailaddr());
                       if (bcontinue){
                        ${customerEntityName}.set${addressEntityName?cap_first}ByMailtocode(${addressEntityName});
                       }
                       // email can be empty, logic added in validateEmail to update customer
                       // make drop down list unique if same email and ip is reused
                       ${customerEntityName}.setY0xxuzsxbvxxxxxxxxxxdescript(ownerCode);
                       if(${customerEntityName}Home.superdotpersist()==null){//avoid persist recreates subkey etc
                        return;
                       }
                       // added logic to prompt for shipping address during checkout
	              }

                      // create temp user record , if temp user exists bypass creation 
 	              if (${userEntityName} == null) {
 	               ${userEntityName}=${userEntityName}Home.getInstance();
  
                       ${userEntityName}.setA0xxukuxbvxxxxxxxxxxid(subKey);
                       ${userEntityName}.set${customerEntityName?cap_first}(${customerEntityName});
                       ${userEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
                       ${userEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                       ${userEntityName}.setC1xxuxxxbvxxxxxxxxxxotherid(customIdentity.getImailaddr());
                       // not set yet, put logic in validateEmail to update temp user 
                       if(${userEntityName}Home.superdotpersist()==null){
                        return;
                       }
	              }
                      customIdentity.setOwner(ownerCode);
                      // set currentUserName to this temp user 
                      customIdentity.setUsername(subKey);
                      // update usagebyperiods record to capture username and ip
                      ${usagebyperiodsEntityName?cap_first} usagebyperiods=null;

                 try{
                 usagebyperiods =(${usagebyperiodsEntityName?cap_first}) entityManager
                  .createQuery(
                        "select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.usagetrackerid = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
                       .setParameter("nKeyName","visitstats3r")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
		} catch (Exception ex) {
                  //ignore will get caught in authenticator
		}
		if (usagebyperiods != null) {
                         usagebyperiods.setD5xxzc0rbxxxxxxxxxxxperiod0formulae(userIP);//current
                         if(!identity.isLoggedIn() && customIdentity.getOwner().equals("sss")){
                          if(customIdentity.getImailaddr().length()>10){
                           usagebyperiods.setD3xxul0rbvxxxxxxxxxxperiod0label(customIdentity.getImailaddr().substring(0,10));//current
                          }else{
                           usagebyperiods.setD3xxul0rbvxxxxxxxxxxperiod0label(customIdentity.getImailaddr());//current                        }
                           String lastVisitDt=new SimpleDateFormat("yyyy.MM.dd").format(Calendar.getInstance().getTime());
                           usagebyperiods.setE3xxul0rbvxxxxxxxxxxperiodtotalslabel(lastVisitDt);//current
                          }
                         }

                          fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.clearInstance();
                          fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.setInstance(usagebyperiods);
                          fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.superdotupdate();
                }

          }//end of not logged in
                 // loggedin/not logged in but customer exists/just created and user has a pointer for customer record
                 // for POS usage, user should have a customer record linked
	         if (${cuordersEntityName} == null) {
                      // getInstance() will create one  exclude orders of type COP/COD they are for backoffice
	              ${cuordersEntityName}=${cuordersEntityName}Home.getInstance();
	         }

                 if(fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type) !=null && !fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type).isEmpty()){
                  ${cuordersEntityName} =fpxxfq1a5xwwqqhxxxxxitemList.getCurrentCartOrder(type).get(0);//
                 }else{
                  ${cuordersEntityName} =null;
                 }
                 /* 
                  try{

			 trexuq244xwwqqhxxxxxcuorders = (Trexuq244xwwqqhxxxxxcuorders) entityManager
 					.createQuery(
 							"select cc from Trexuq244xwwqqhxxxxxcuorders cc where cc.y9xxcxxxbv10xxxxxxxxtype = :t AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl = :s and (c2xxcxxxbv09xxxxxxxxterms is  null or c2xxcxxxbv09xxxxxxxxterms = '' or (c2xxcxxxbv09xxxxxxxxterms !='COD' AND c2xxcxxxbv09xxxxxxxxterms !='COP' AND c2xxcxxxbv09xxxxxxxxterms !='POS')) and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :p AND cc.zexxutoxlhxxxxxxxxxxowner=:owner ")
 					.setParameter("t", type).setParameter("s", mordered).setParameter("p", owner2Code).setParameter("owner", ownerCode)
 					.getSingleResult();
                  */
	            if (${cuordersEntityName} == null) {
	              ${cuordersEntityName}=trexuq244xwwqqhxxxxxcuordersHome.getInstance();
	            }else{
                     currentCartedPO=trexuq244xwwqqhxxxxxcuorders.getA0xxuncobvxxxxxxxxxxpurchsno();
                     currentCartedPOSID=trexuq244xwwqqhxxxxxcuorders.getA0xxuobxbxxxxxxxxxxxsid();
                    } 
                 if(identity.isLoggedIn()){
                  // add logic for  (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
                  // jay add logic backoffice will handle POS for other users 
                 }

                ${userEntityName?cap_first} user=null;
                try{

                // do query against existing user or just created above  to get customer record and use that record below for customer
                // employee needs to be set up as customer if they want to buy
                // identity can have username from lastlogon, so use customIdentity.getOwner()
			user = (${userEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("username", customIdentity.getOwner().substring(0,ownerCode.length()-3))
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
                        if (user == null){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("null"),""));

                         return;
                        }
                        if(user.getC2xxuxuaiv38xxxxxxxxalevel() != null && user.getC2xxuxuaiv38xxxxxxxxalevel().equals("P")){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed"),""));

                         return;
                        }
                        if(user.get${customerEntityName?cap_first}()==null){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_ERROR,bundle.getString("user")+ " "+bundle.getString("need")+ " "+ bundle.getString("customer")+ " "+ bundle.getString("record"),""));

                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                          FacesMessage.SEVERITY_ERROR,bundle.getString("use")+ " "+bundle.getString("edit")+ " "+ bundle.getString("user"),""));

                         return;
                        }

			 ${customerEntityName} = (${customerEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${customerEntityName?cap_first} cc where cc.a0xxuobxbxxxxxxxxxxxsid = :customerId and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("customerId", user.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
                        if(${customerEntityName} !=null && ${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr()!=null){
                         this.setImailaddr(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
                        }

                } catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("user")+ " "+bundle.getString("or")+" "+bundle.getString("customer")+" "+bundle.getString("error")+ " "+ bundle.getString("record")+" "+e.getMessage(),""));

                  return;
                }

               if (identity.isLoggedIn()){
                // shipping address will come from paypal/payment service, just make sure email address exists or entered
                // if not paypal ship address may not be there, then print ship/pick up label and 
                // hold it for pick up or manually find it
                //if( !product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("P") && !product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("X") ){
                 //if(customIdentity.getImailaddr() !=null && customIdentity.getImailaddr().isEmpty()){  
                  //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  //                   FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+" "+bundle.getString("address"),""));

                 //} customIdentity.imail is for visitor only
               }else{
                //not logged in, allow pickup items, otherwise get shipping address from paypal
                // if shipping item but not via paypal, then print label, reduce qty and hold it and get ship address manually
                //if(!product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("P") && !product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("X") ){
                 if(customIdentity.getImailaddr() !=null && customIdentity.getImailaddr().isEmpty()){  
                  //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  // FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+" "+bundle.getString("address"),""));

                  //return; //check in checkout
                 }
               }    


 	          if (user != null && type.equals("basket") && product.getC6xxusxrbv16xxxxxxxxtype().equals("FI-D")) {
                   //if prepay option check against userprofl footer counter
                      BigDecimal paidLimit=new BigDecimal("0.0");
                      try{
                       ${userproflEntityName}=${userEntityName}List.getUserProfiles();
                       if (${userproflEntityName} != null && ${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter() != null){
                        paidLimit=${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter();
                       }
                      }catch (Exception ignore){
                      } 
                      if(paidLimit.compareTo(new BigDecimal("0.0")) == -1){
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                 FacesMessage.SEVERITY_ERROR,bundle.getString("prepaid")+ " "+bundle.getString("limit")+" "+bundle.getString("exceeded")+" "+bundle.getString("or")+" "+bundle.getString("not")+" "+bundle.getString("prepaid"),""));

                       return;
                      }
                     
	          }
      // handling cuuorder for CI-L1 and other item types
      // order number will be created or reused under cuorder persist logic which is called by cartpersist below
      // if item type case ie CI-L1, create a new case item (CI-D) and capture any new notes as its child item to keep
      // chronological history and allow tree viewing
      // look into doing for FI-D as well 
    try{
      if (product.getC6xxusxrbv16xxxxxxxxtype().equals("CI-L1")){
       // we do not need the original item, it was like a category, for FI-D we may need the original ? 
       ${itemEntityName}Home.clearInstance();
       ${itemEntityName}=${itemEntityName}Home.getInstance();
       String header=this.getNotesToPass().trim();
       header=header.length()>60?header.substring(0,60):header;
       if(identity.isLoggedIn() && (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
        //use item decription entered by backoffice
        String d120=bundle.getString("item")+": "+customIdentity.getHoldValue()+" "+bundle.getString("customer")+": "+customIdentity.getHoldValue2()+" " +bundle.getString("assigned")+": "+customIdentity.getHoldValue3()+", "+header;
        if(d120.length()>120){
         d120=d120.substring(0,120);
        }
        ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(d120);
       }else{
        //item is the case detail, if VH or PH use temp customer info
        ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${customerEntityName}.getC1xxuslnbvixxxxxxxxxlastname()+${customerEntityName}.getA0xxukxxbvxxxxxxxxxxcustomer()+header);
       }
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
       ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
       ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
       calendar.setTime(Calendar.getInstance().getTime());
       calendar.add(Calendar.MONTH, 3);
       ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
       if(identity.isLoggedIn() && (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
        ${itemEntityName}.setY2xxuxxrbvxxxxxxxxxxmisccode1(customIdentity.getHoldValue2());// holdvalue2
        //try getting customer info using holdvalue2 and use it 
        if(${customerEntityName}List.getSuggestList("keyWord").size() > 1){
          //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            //FacesMessage.SEVERITY_INFO,bundle.getString("name")+ " "+bundle.getString("entered")+ " "+bundle.getString("returning")+ " "+bundle.getString("multiple")+" "+bundle.getString("records")+ ", "+bundle.getString("continuing")+" "+bundle.getString("for")+" "+bundle.getString("now")+", "+bundle.getString("may")+" "+bundle.getString("edit")+" "+bundle.getString("later"),""));
        }else{
          //if not null , use it jay to be done       
        }
        //
        ${itemEntityName}Home.persist();
       }else{
        ${itemEntityName}Home.persist();
       }
       this.setNotesToPass("");//avoid reusing the same content
       ${cuordersEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
      }else{
        // update item tempqty with qty ordrrd
        product.setTempQuantity(quantity);
       ${cuordersEntityName}.set${itemEntityName?cap_first}(product);
      }
      ${cuordersEntityName}.set${customerEntityName?cap_first}(${customerEntityName});
      // make type basket if prepaid and/or for approval
      if(type.equals("basket")){
       ${cuordersEntityName}.setY9xxcxxxbv10xxxxxxxxtype("basket");
      }else{
       ${cuordersEntityName}.setY9xxcxxxbv10xxxxxxxxtype("cart");
       product.setTempQuantity(quantity);
       <#if menuAttributesp2 == "1A">
       // replace selprice with new if change enddate is not in future ie not temp change.
       couponValue=BigDecimal.ZERO;//deduction
       saleValue=BigDecimal.ZERO;//deduction not saleprice
       String stepNamekey=product.getA0xxuobxbxxxxxxxxxxxsid()+"";// use sidS not matcode
       if(stepNamekey.length()>32){
        stepNamekey=stepNamekey.substring(0,32);
       }
       couponValue=yxxxuq591xwwqqhxxxxxrate1fList.getCouponCodeValue(stepNamekey);//uses entered couponCode value  
       valueType=yxxxuq591xwwqqhxxxxxrate1fList.getCouponCodeValueType(stepNamekey);
       //if(couponValue.compareTo(new BigDecimal("-999.09")) == 0){
        //return; //error msg given by rate1flist, jay check if any db change then need to raise exception to roll back
       //} may not care about coupon  check for null
       if(product.getC1xxzxxxbhxxsxxxxxxxspricnew() != null && product.getC1xxzxxxbhxxsxxxxxxxspricnew().compareTo(BigDecimal.ZERO) > 0 
          && product.getH1xxcxxrbxxxxxxxxxxxeffdate() !=null && product.getH1xxcxxrbxxxxxxxxxxxeffdate().compareTo(Calendar.getInstance().getTime()) >0 ){//sale in effect
        //check sale and coupon
        saleValue=product.getB8fbzpxxbvxxxxxxxxxxselprice().subtract(product.getC1xxzxxxbhxxsxxxxxxxspricnew());
        if(valueType.equals("DC%")){
         couponValue=product.getB8fbzpxxbvxxxxxxxxxxselprice().multiply(couponValue).divide(new BigDecimal("100.00"));
        }else{
        }
        if((couponValue.compareTo(BigDecimal.ZERO) == 0) || (couponValue.compareTo(BigDecimal.ZERO) != 0 && saleValue.subtract(couponValue).compareTo(BigDecimal.ZERO)>0)){//sale is better than regular-coupon
         if(couponValue.compareTo(BigDecimal.ZERO) != 0){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("apply")+ " "+bundle.getString("to")+ " "+bundle.getString("regular")+ " "+bundle.getString("price")+ " "+bundle.getString("only"),""));
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Sale")+ " "+bundle.getString("price")+ " "+bundle.getString("saving")+ " "+saleValue+" "+bundle.getString("applied")+ ", "+bundle.getString("which")+ " "+bundle.getString("is")+ " "+bundle.getString("lower")+ " "+bundle.getString("than")+ " "+bundle.getString("coupon")+ " "+bundle.getString("saving")+" "+couponValue,""));
         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Sale")+ " "+bundle.getString("price")+ " "+bundle.getString("saving")+ " "+saleValue+" "+bundle.getString("applied"),""));
         }
         if(product.getC2fbcxxrehxxsxxxxxxxspriceffdt().compareTo(Calendar.getInstance().getTime()) <= 0 && product.getH1xxcxxrbxxxxxxxxxxxeffdate().compareTo(Calendar.getInstance().getTime()) >=0 ){
          discountValue=saleValue;//item selprice does not change, but order ordprice will be selprice-discountValue
         }
        }else{//coupon has value and regular price minus coupon better than sale price
         discountValue=couponValue;//item selprice does not change, but order ordprice will be selprice-discountValue 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("apply")+ " "+bundle.getString("to")+ " "+bundle.getString("regular")+ " "+bundle.getString("price")+ " "+bundle.getString("only"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("value")+ " "+bundle.getString("of")+ " "+couponValue+" "+bundle.getString("applied"),""));
        }
       }else{//no sale check coupon only
        if(valueType.equals("DC%")){
         couponValue=product.getB8fbzpxxbvxxxxxxxxxxselprice().multiply(couponValue).divide(new BigDecimal("100.00"));
        }else{
        }
        if(couponValue.compareTo(BigDecimal.ZERO) != 0){//no sale only coupon
         discountValue=couponValue;//item selprice does not change, but order ordprice will be selprice-discountValue 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("value")+ " "+bundle.getString("of")+ " "+couponValue+" "+bundle.getString("applied"),""));
        }else{//no sale or coupon , no change to price
         // ignore only if no coupon code entered
         if(couponCode !=null && !couponCode.isEmpty()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("value")+ " "+bundle.getString("of")+ " "+couponCode+" "+bundle.getString("not")+" "+bundle.getString("matching")+", "+bundle.getString("clear")+" "+bundle.getString("it")+" "+bundle.getString("to")+" "+bundle.getString("continue"),""));
          return;         
         }
        } 
       }
      }
      </#if> 
      customIdentity.setDiscountValue(discountValue);//save as session variable, value can be absolute or in %
      customIdentity.setDiscountType(valueType);  //DC or DC% 
      // discount value/type is calculted in itemHome but actual usage is in cuorders and passed via session variable
      ${cuordersEntityName}.setYbxxuxxrblxxxxxxxxxxattach(customIdentity.getImailaddr());
      // establish customer key from customer name key word and put item ordered involved  in misccode1 of new case item
      // user to act as misccode1 in new case item , user (UH) as agent in new case order 
      if(identity.isLoggedIn() && (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
        // case order agent field will have assigned to employee entity 
        ${cuordersEntityName}.set${employeeEntityName?cap_first}(${employeeEntityName}List.getKeyToEntity(customIdentity.getHoldValue3()));
      }
      ${cuordersEntityName}.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
      ${cuordersEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      if(type.equals("pos")){
       ${cuordersEntityName}.setC2xxcxxxbv09xxxxxxxxterms("POS");  
      }     
      // empty cart deletetes orderdetails but keeps the cuorder for reuse , cuorder should be close status (deleted via batch ) after shipment and payment
      // below will create/update cuorder and also create new orderdetails under createcdetails method 
      // where it copies item/customer info from cuorder instance
      // and calculate order details line cost and total order cost under persistrunt method 
      // parameter o tells that it came from shopping cart
      ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
      currentCartedPOSID=${cuordersEntityName}.getA0xxuobxbxxxxxxxxxxxsid();
      // cartpersist persists cuorder first and then cuodetails logic is complicated. createcdetails create details
      // debug and find a place to add default ship option and then also apply customer chosen ship option cost
      Integer currentDetailLine=0;
      if (${itemEntityName}List.getCartedList(type) != null){
       currentDetailLine = ${itemEntityName}List.getCartedList(type).size();
      }
      // call updatedetailsall 
      //-----------order final processing here via moreToCart or cartpersist----------------------------
      //
      if(currentDetailLine > 0){
          trexuq244xwwqqhxxxxxcuordersHome.setInstance(trexuq244xwwqqhxxxxxcuorders);
          trexuq244xwwqqhxxxxxcuordersHome.moreToCart();
          // more clears details but does not put new item may need to put this in txns logic
          xoxxuq2b4xwwqqhxxxxxcuodetailsHome.getInstance().setFpxxfq1a5xwwqqhxxxxxitem(product);
          trexuq244xwwqqhxxxxxcuordersHome.updateDetailsAll();               
      }else{
       trexuq244xwwqqhxxxxxcuordersHome.cartpersist(currentCartedPOSID,"o",currentDetailLine,quantity);
      }
       // error msg if any already produced in called method
       ${cuordersEntityName}Home.clearInstance();
       // after persist cartCnt should have a value but not sure why query is not doing flush
       //call keyvalue to force feching each time item added
       if (${itemEntityName}List.getCartedList(type) != null && ${itemEntityName}List.getCartedList(type).size()>0){
        ${cuordersEntityName}List.getKeyValue(${itemEntityName}List.getCartedList(type).get(0).get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
       } 
       if (${itemEntityName}List.getCartedList(type) != null){
        int cartCnt=${itemEntityName}List.getCartedList(type).size();
        if (cartCnt < 1){ 
         if (customIdentity.isDebug()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+product.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("added")+" "+bundle.getString("to")+" "+bundle.getString("cart"),""));
         }
         if(type.equals("basket")){
          //if (customIdentity.isDebug()){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("folder")+ " "+bundle.getString("to")+ " "+bundle.getString("continue")+ " / "+bundle.getString("submit"),""));
          //}
          customIdentity.setHoldValue("");
          customIdentity.setHoldValue2("");
          customIdentity.setHoldValue3("");

         }else{
              //if (customIdentity.isDebug()){ 
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("cart")+ " / "+bundle.getString("checkout")+ " "+bundle.getString("to")+ " "+bundle.getString("place")+ " "+bundle.getString("order")+ " "+bundle.getString("or")+ " "+bundle.getString("select")+ " "+bundle.getString("Next")+ " "+bundle.getString("Item"),""));
              //}
              customIdentity.setDiscountValue(BigDecimal.ZERO);
              customIdentity.setDiscountType("");//clear so that next cart/backoffice order does not use previous value

         } 
        }else{
         if (customIdentity.isDebug()){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("item")+" "+product.getA0xxukixbxxxxxxxxxxxmatcode()+ " "+bundle.getString("added"),""));
         }
         if(type.equals("basket")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("folder")+ " "+bundle.getString("to")+ " "+bundle.getString("continue")+ " / "+bundle.getString("submit"),""));

         }else{
          if (customIdentity.isDebug()){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("cart")+ " "+bundle.getString("to")+ " "+bundle.getString("place")+ " "+bundle.getString("order")+ " "+bundle.getString("or")+ " "+bundle.getString("select")+ " "+bundle.getString("Next")+ " "+bundle.getString("Item"),""));
          } 
         } 
        }
       }else{
         if(type.equals("basket")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("folder")+ " "+bundle.getString("to")+ " "+bundle.getString("continue")+ " / "+bundle.getString("submit"),""));

         }else{
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("cart")+ " "+bundle.getString("to")+ " "+bundle.getString("place")+ " "+bundle.getString("order")+ " "+bundle.getString("or")+ " "+bundle.getString("select")+ " "+bundle.getString("Next")+ " "+bundle.getString("Item"),""));

         } 
       } 
    } catch ( Exception e){
      if(type.equals("basket")){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("basket")+ " "+bundle.getString("submit")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
      }else{

       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("shopping")+ " "+bundle.getString("cart")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
                customIdentity.setDiscountValue(BigDecimal.ZERO);
                customIdentity.setDiscountType("");//clear so that next cart/backoffice order does not use previous value

      }
   }
  }

//----------------------------
    @Transactional
    public void addProductToQuote(${itemEntityName?cap_first} product, BigDecimal quantity,String type) {
/**
    * @param args -3
    * product ie item , this method is called by ItemDetailsBrowse for each
    * shopping(SI-(q)
    * type cart
    * method called customerHome.persist(),userHomePersist(),itemHome persist ,cuquoteHome.cartpersist()(which in turn calls cuorderHome.persist())
    * if called by user UH role then case item source is backoffice user, case item miscode1 holdvalue2/customer 
*/
          String valueType="";
          if (!identity.isLoggedIn()){
                     //removed required and validation to allow email entries either at top or at bottom
                     // if imailAddr has value take it, otherwise take Alt and if none return
                     if(customIdentity.getImailaddr() !=null && !customIdentity.getImailaddr().isEmpty()){
                      //take it
                     }else{
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+ " "+bundle.getString("address"),""));

                       return;
                     }  
                     // save this as attach in cuquote for later use in shopping cart 
                       Pattern pattern = Pattern.compile("^.+@.+\\..+$");
                       Matcher matcher = pattern.matcher(customIdentity.getImailaddr());
                       if(!matcher.matches()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                         FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+bundle.getString("invalid"),""));

                        return;
                       }

          }
          // for now just send email to client email as notify for manual entry
         
          String msg="@notify-"+product.getA0xxukixbxxxxxxxxxxxmatcode()+" qty "
           +quantity.setScale(2, RoundingMode.HALF_UP)+" type "+type+" for "+customIdentity.getImailaddr();
          if(!msg.isEmpty()){
           try{
            sqlSupport.emailRender(msg);
            // added email to customer as well
            msg="@notifC-"+customIdentity.getImailaddr()+", Quotation Request received for "+product.getB1xxuszsbvxxxxxxxxxxdescript()+" quantity "
            +quantity.setScale(2, RoundingMode.HALF_UP);
            sqlSupport.emailRender(msg);
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("Quotation")+ " "+bundle.getString("request")+ " "+bundle.getString("received")+", "+bundle.getString("email")+ " "+bundle.getString("sent"),""));

            return;
           } catch (Exception ex) {
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_ERROR,bundle.getString("quote")+ " "+product.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("email")+ " "+bundle.getString("failed")+ ", "+bundle.getString("notify")+ " "+bundle.getString("support"),""));
             log.severe("Error quotation "+ msg+" "+ex.getMessage());

            return;
                  
           }
          }

          // both logged in or temp user, clear prev error msg
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString(""),""));
          Integer sid=0;
	  Map<String,String> params = 
                FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
       /*
          if (params.get("categoryJay") != null &&  !params.get("categoryJay").isEmpty()){ 
	   sid = Integer.parseInt(params.get("categoryJay"));
           // clear existing instance to force changing it, sometimes we want to get existing instance
           clearInstance();
           set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(sid);
           // jay are we not changing the product passed as parameter, debug and check
	   product=getDefinedInstance();

          }
       */ 
                 if (quantity.compareTo( new BigDecimal("0.0")) != 0  && product.get${itemQtyField?cap_first}().compareTo( new BigDecimal("1.0")) == -1){
                         // add logic to keep stat re out of stock
                          calendar.getTime();
                          if(product.getY5xxcxxrlxxxxxxxxxxxdatetorenew() !=null){
                           calendare.setTime(product.getY5xxcxxrlxxxxxxxxxxxdatetorenew());
                           if(calendare.before(calendar)){
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("availibility")+ " "+bundle.getString("date"),""));

                           }else{
                            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                             FacesMessage.SEVERITY_INFO,bundle.getString("expected")+ " "+bundle.getString("availibility")+ " "+ sdf.format(calendare.getTime()),""));

                           }
                          }else{
                           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                            FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("availibility")+ " "+ bundle.getString("date"),""));

                          }
                         return;
                 } 
                 // not logged in 
                 if (!identity.isLoggedIn() && customIdentity.getOwner().equals("sss") ){
                     // bypass creating a new user, if continuing more purchase, overRideValue holds PO sid from checkOut
                     // return; use timestamp and ip to as owner, ip for analysis and timestamp with ms  to hide from some one else using same ip like in a cafe
                     // replace with real logon id later as part of payment or save as is but will stay as orphan for analysis and later purged  
                     // check same temp user or not, customIdentity is per session and values are for each session and is sss to start with
                     // check whether customIdent
                      String ts=new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                      // use email as last name to help identify whose order
                      // same customer can buy multiple items in same session and be here again after a few secs, so reuse subkey 
                      if(subKey.isEmpty()){
                       subKey=ts.substring(17,19)+ts.substring(14,16)+ts.substring(11,13)+ts.substring(0,7)+userIP;
                       ownerCode=subKey+"sss";
                       customIdentity.setOwner(ownerCode);
                      }
                      // create temp customer record but needs to deleted later after stats, follow up etc
                      //viewscoped bean will retain values
 	              if (${customerEntityName} == null) {
 	               ${customerEntityName}=${customerEntityName}Home.getInstance();

                       ${customerEntityName}.setA0xxukxxbvxxxxxxxxxxcustomer(subKey);
                       ${customerEntityName}.setZdxxutoxlhxxxxxxxxxxowner(ownerCode);
                       ${customerEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                       ${customerEntityName}.setF2xxuwmxbv40xxxxxxxxintegrset("DEFAULT");
                       ${customerEntityName}.setC1xxuslnbvixxxxxxxxxlastname(customIdentity.getImailaddr());
                       ${customerEntityName}.setQ4xxhxxxbv24xxxxxxxximailaddr(customIdentity.getImailaddr());
                       // make drop down list unique if same email and ip is reused
                       ${customerEntityName}.setY0xxuzsxbvxxxxxxxxxxdescript(ownerCode);
                       if(${customerEntityName}Home.persist()==null){
                        return;
                       }
                       // added logic to prompt for shipping address during checkout
	              }

                      // create temp user record , if temp user exists bypass creation 
 	              if (${userEntityName} == null) {
 	               ${userEntityName}=${userEntityName}Home.getInstance();
  
                       ${userEntityName}.setA0xxukuxbvxxxxxxxxxxid(subKey);
                       ${userEntityName}.set${customerEntityName?cap_first}(${customerEntityName});
                       ${userEntityName}.setZ5xxutoxlhxxxxxxxxxxowner(ownerCode);
                       ${userEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
                       ${userEntityName}.setC1xxuxxxbvxxxxxxxxxxotherid(customIdentity.getImailaddr());
                       if(${userEntityName}Home.persist()==null){
                        return;
                       }
	              }
                      customIdentity.setOwner(ownerCode);
                      // set currentUserName to this temp user 
                      customIdentity.setUsername(subKey);
                      // update usagebyperiods record to capture username and ip
                 ${usagebyperiodsEntityName?cap_first} usagebyperiods=null;

                 try{
                 usagebyperiods =(${usagebyperiodsEntityName?cap_first}) entityManager
					.createQuery(
							"select cc from ${usagebyperiodsEntityName?cap_first} cc where cc.usagetrackerid = :nKeyName and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
					.setParameter("nKeyName","visitstats3r")
					.setParameter("owner2", owner2Code)
					.getSingleResult();
		} catch (Exception ex) {
                  //ignore will get caught in authenticator
		}
		if (usagebyperiods != null) {
                         usagebyperiods.setD5xxzc0rbxxxxxxxxxxxperiod0formulae(userIP);//current
                         if(!identity.isLoggedIn() && customIdentity.getOwner().equals("sss")){
                          if(customIdentity.getImailaddr().length()>10){
                           usagebyperiods.setD3xxul0rbvxxxxxxxxxxperiod0label(customIdentity.getImailaddr().substring(0,10));//current
                          }else{
                           usagebyperiods.setD3xxul0rbvxxxxxxxxxxperiod0label(customIdentity.getImailaddr());//current                        }
                           String lastVisitDt=new SimpleDateFormat("yyyy.MM.dd").format(Calendar.getInstance().getTime());
                           usagebyperiods.setE3xxul0rbvxxxxxxxxxxperiodtotalslabel(lastVisitDt);//current
                          }
                         }

                          fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.clearInstance();
                          fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.setInstance(usagebyperiods);
                          fxxxuq1bhxwwqqhxxxxxusagebyperiodsHome.superdotupdate();


                }



                 }
                 // loggedin/not logged in but customer exists/just created and user has a pointer for customer record
	         if (${cuquoteEntityName} == null) {
                      // getInstance() will create one 
	              ${cuquoteEntityName}=${cuquoteEntityName}Home.getInstance();
	         }

                 try{
		  ${cuquoteEntityName} = (${cuquoteEntityName?cap_first}) entityManager
 		 .createQuery(
 		 "select cc from ${cuquoteEntityName?cap_first} cc where cc.b5xxuxxrbl10xxxxxxxxtype = :t AND cc.z5xxzzfxhhxxxxxxxxxxstatusfl = :s and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :p AND cc.zexxutoxlhxxxxxxxxxxowner=:owner ")
 		 .setParameter("t", type).setParameter("s", mordered).setParameter("p", owner2Code).setParameter("owner", ownerCode)
 		 .getSingleResult();
	            if (${cuquoteEntityName} == null) {
	              ${cuquoteEntityName}=${cuquoteEntityName}Home.getInstance();
	            }else{
                     currentCartedPO=${cuquoteEntityName}.getA0xxuncqbvxxxxxxxxxxpurchsno();
                     currentCartedPOSID=${cuquoteEntityName}.getA0xxuobxbxxxxxxxxxxxsid();
                    } 
                 }catch (Exception ignore){
                 }
                 if(identity.isLoggedIn()){
                  // add logic for  (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
                  // jay add logic backoffice will handle POS for other users 
                 }

                ${userEntityName?cap_first} user=null;
                try{

                // do query against existing user or just created above  to get customer record and use that record below for customer
                // employee needs to be set up as customer if they want to buy
                // identity can have username from lastlogon, so use customIdentity.getOwner()
			user = (${userEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("username", customIdentity.getOwner().substring(0,ownerCode.length()-3))
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
                        if (user == null){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("user")+" "+bundle.getString("null"),""));

                         return;
                        }
                        if(user.getC2xxuxuaiv38xxxxxxxxalevel() != null && user.getC2xxuxuaiv38xxxxxxxxalevel().equals("P")){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("not")+" "+bundle.getString("allowed"),""));

                         return;
                        }
                        if(user.get${customerEntityName?cap_first}()==null){
                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("user")+ " "+bundle.getString("need")+ " "+ bundle.getString("customer")+ " "+ bundle.getString("record"),""));

                         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("use")+ " "+bundle.getString("edit")+ " "+ bundle.getString("user"),""));

                         return;
                        }

			 ${customerEntityName} = (${customerEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${customerEntityName?cap_first} cc where cc.a0xxuobxbxxxxxxxxxxxsid = :customerId and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("customerId", user.get${customerEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid())
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
                        if(${customerEntityName} !=null && ${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr()!=null){
                         this.setImailaddr(${customerEntityName}.getQ4xxhxxxbv24xxxxxxxximailaddr());
                        }

                } catch ( Exception e){
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("user")+ " "+bundle.getString("or")+" "+bundle.getString("customer")+" "+bundle.getString("error")+ " "+ bundle.getString("record")+ e.getMessage(),""));

                  return;
                }

               if (identity.isLoggedIn()){
                // shipping address will come from paypal/payment service, just make sure email address exists or entered
                // if not paypal ship address may not be there, then print ship/pick up label and 
                // hold it for pick up or manually find it
                //if( !product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("P") && !product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("X") ){
                 //if(customIdentity.getImailaddr() !=null && customIdentity.getImailaddr().isEmpty()){  
                  //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                  //                   FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+" "+bundle.getString("address"),""));

                 //} customIdentity.imail is for visitor only
               }else{
                //not logged in, allow pickup items, otherwise get shipping address from paypal
                // if shipping item but not via paypal, then print label, reduce qty and hold it and get ship address manually
                //!if(product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("P") && !product.getC3fbuxscbvxxxxxxxxxxshipcode().substring(0,1).equals("X") ){
                 if(customIdentity.getImailaddr() !=null && customIdentity.getImailaddr().isEmpty()){  
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+" "+bundle.getString("address"),""));

                  return;
                 }
               }    


    try{
      if (product.getC6xxusxrbv16xxxxxxxxtype().equals("CI-L1")){
       // we do not need the original item, it was like a category, for FI-D we may need the original ? 
       ${itemEntityName}Home.clearInstance();
       ${itemEntityName}=${itemEntityName}Home.getInstance();
       String header=this.getNotesToPass().trim();
       header=header.length()>60?header.substring(0,60):header;
       if(identity.isLoggedIn() && (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
        //use item decription entered by backoffice
        String d120=bundle.getString("item")+": "+customIdentity.getHoldValue()+" "+bundle.getString("customer")+": "+customIdentity.getHoldValue2()+" " +bundle.getString("assigned")+": "+customIdentity.getHoldValue3()+", "+header;
        if(d120.length()>120){
         d120=d120.substring(0,120);
        }
        ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(d120);
       }else{
        //item is the case detail, if VH or PH use temp customer info
        ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${customerEntityName}.getC1xxuslnbvixxxxxxxxxlastname()+${customerEntityName}.getA0xxukxxbvxxxxxxxxxxcustomer()+header);
       }
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
       ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
       ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
       calendar.setTime(Calendar.getInstance().getTime());
       calendar.add(Calendar.MONTH, 3);
       ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
       if(identity.isLoggedIn() && (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
        ${itemEntityName}.setY2xxuxxrbvxxxxxxxxxxmisccode1(customIdentity.getHoldValue2());// holdvalue2
        //try getting customer info using holdvalue2 and use it 
        if(${customerEntityName}List.getSuggestList("keyWord").size() > 1){
          //FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            //FacesMessage.SEVERITY_INFO,bundle.getString("name")+ " "+bundle.getString("entered")+ " "+bundle.getString("returning")+ " "+bundle.getString("multiple")+" "+bundle.getString("records")+ ", "+bundle.getString("continuing")+" "+bundle.getString("for")+" "+bundle.getString("now")+", "+bundle.getString("may")+" "+bundle.getString("edit")+" "+bundle.getString("later"),""));
        }else{
          //if not null , use it jay to be done       
        }
        //
        ${itemEntityName}Home.persist();
       }else{
        ${itemEntityName}Home.persist();
       }
       this.setNotesToPass("");//avoid reusing the same content
       ${cuquoteEntityName}.set${itemEntityName?cap_first}(${itemEntityName});
      }else{
        //update item tempqty with qty ordrrd
        product.setTempQuantity(quantity);
       ${cuquoteEntityName}.set${itemEntityName?cap_first}(product);
      }
      ${cuquoteEntityName}.set${customerEntityName?cap_first}(${customerEntityName});
      // make type basket if prepaid and/or for approval
      if(type.equals("basket")){
       ${cuquoteEntityName}.setB5xxuxxrbl10xxxxxxxxtype("basket");
      }else{
       ${cuquoteEntityName}.setB5xxuxxrbl10xxxxxxxxtype("cart");
       product.setTempQuantity(quantity);
       <#if menuAttributesp2 == "1A">
       // replace selprice with new if change enddate is not in future ie not temp change.
       couponValue=BigDecimal.ZERO;//deduction
       saleValue=BigDecimal.ZERO;//deduction not saleprice
       String stepNamekey=product.getA0xxuobxbxxxxxxxxxxxsid()+"";// use sidS not matcode
       if(stepNamekey.length()>25){
        stepNamekey=stepNamekey.substring(0,25);
       }
       couponValue=yxxxuq591xwwqqhxxxxxrate1fList.getCouponCodeValue(stepNamekey);  
       valueType=yxxxuq591xwwqqhxxxxxrate1fList.getCouponCodeValueType(stepNamekey);
       //if(couponValue.compareTo(new BigDecimal("-999.09")) == 0){
        //return; //error msg given by rate1flist, jay check if any db change then need to raise exception to roll back
       //} may not care about coupon
       if(product.getC1xxzxxxbhxxsxxxxxxxspricnew().compareTo(BigDecimal.ZERO) > 0 
          && product.getH1xxcxxrbxxxxxxxxxxxeffdate().compareTo(Calendar.getInstance().getTime()) >0 ){//sale in effect
        saleValue=product.getB8fbzpxxbvxxxxxxxxxxselprice().subtract(product.getC1xxzxxxbhxxsxxxxxxxspricnew());
        if(valueType.equals("DC%")){
         couponValue=product.getB8fbzpxxbvxxxxxxxxxxselprice().multiply(couponValue).divide(new BigDecimal("100.00"));
        }else{
        }
        if((couponValue.compareTo(BigDecimal.ZERO) == 0) || (couponValue.compareTo(BigDecimal.ZERO) != 0 && saleValue.subtract(couponValue).compareTo(BigDecimal.ZERO)>0)){//sale is better than regular-coupon
         if(couponValue.compareTo(BigDecimal.ZERO) != 0){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("apply")+ " "+bundle.getString("to")+ " "+bundle.getString("regular")+ " "+bundle.getString("price")+ " "+bundle.getString("only"),""));
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Sale")+ " "+bundle.getString("price")+ " "+bundle.getString("saving")+ " "+saleValue+" "+bundle.getString("applied")+ ", "+bundle.getString("which")+ " "+bundle.getString("is")+ " "+bundle.getString("lower")+ " "+bundle.getString("than")+ " "+bundle.getString("coupon")+ " "+bundle.getString("saving")+" "+couponValue,""));
         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Sale")+ " "+bundle.getString("price")+ " "+bundle.getString("saving")+ " "+saleValue+" "+bundle.getString("applied"),""));
         }
         if(product.getC2fbcxxrehxxsxxxxxxxspriceffdt().compareTo(Calendar.getInstance().getTime()) <= 0 && product.getH1xxcxxrbxxxxxxxxxxxeffdate().compareTo(Calendar.getInstance().getTime()) >=0 ){
          discountValue=saleValue;//item selprice does not change, but order ordprice will be selprice-discountValue
         }
        }else{//coupon has value and regular price minus coupon better than sale price
         discountValue=couponValue;//item selprice does not change, but order ordprice will be selprice-discountValue 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("apply")+ " "+bundle.getString("to")+ " "+bundle.getString("regular")+ " "+bundle.getString("price")+ " "+bundle.getString("only"),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("value")+ " "+bundle.getString("of")+ " "+couponValue+" "+bundle.getString("applied"),""));
        }
       }else{//no sale
        if(valueType.equals("DC%")){
         couponValue=product.getB8fbzpxxbvxxxxxxxxxxselprice().multiply(couponValue).divide(new BigDecimal("100.00"));
        }else{
        }
        if(couponValue.compareTo(BigDecimal.ZERO) != 0){//no sale only coupon
         discountValue=couponValue;//item selprice does not change, but order ordprice will be selprice-discountValue 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("Coupon")+ " "+bundle.getString("value")+ " "+bundle.getString("of")+ " "+couponValue+" "+bundle.getString("applied"),""));
        }else{//no sale or coupon , no change to price
        }  
       }
      }
      </#if> 
      customIdentity.setDiscountValue(discountValue);//save as session variable, value can be absolute or in %
      customIdentity.setDiscountType(valueType);  //DC or DC% 
      // discount value/type is calculted in itemHome but actual usage is in cuquote and passed via session variable
      ${cuquoteEntityName}.setYaxxuxxrblxxxxxxxxxxattach(customIdentity.getImailaddr());
      // establish customer key from customer name key word and put item ordered involved  in misccode1 of new case item
      // user to act as misccode1 in new case item , user (UH) as agent in new case order 
      if(identity.isLoggedIn() && (customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ){
        // case order agent field will have assigned to employee entity 
        ${cuquoteEntityName}.set${employeeEntityName?cap_first}(${employeeEntityName}List.getKeyToEntity(customIdentity.getHoldValue3()));
      }
      ${cuquoteEntityName}.setZexxutoxlhxxxxxxxxxxowner(customIdentity.getOwner());
      ${cuquoteEntityName}.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
      // empty cart deletetes orderdetails but keeps the cuorder for reuse , cuorder should be close status (deleted via batch ) after shipment and payment
      // below will create/update cuorder and also create new orderdetails under createcdetails method 
      // where it copies item/customer info from cuorder instance
      // and calculate order details line cost and total order cost under persistrunt method 
      // parameter o tells that it came from shopping cart
      ${cuquoteEntityName}Home.setInstance(${cuquoteEntityName});
      currentCartedPOSID=${cuquoteEntityName}.getA0xxuobxbxxxxxxxxxxxsid();
      // cartpersist persists cuorder first and then cuodetails logic is complicated. createcdetails create details
      // debug and find a place to add default ship option and then also apply customer chosen ship option cost
      Integer currentDetailLine=0;
      if (${itemEntityName}List.getCartedList(type) != null){
       currentDetailLine = ${itemEntityName}List.getCartedList(type).size();
      }
      // call updatedetailsall 
      if(currentDetailLine > 0){
          ${cuquoteEntityName}Home.setInstance(${cuquoteEntityName});
          //${cuquoteEntityName}Home.moreToCart();
          // more clears details but does not put new item may need to put this in txns logic
          ${cuqdetailsEntityName}Home.getInstance().setFpxxfq1a5xwwqqhxxxxxitem(product);
          ${cuquoteEntityName}Home.updateDetailsAll();               
      }else{
       ${cuquoteEntityName}Home.cartpersist(currentCartedPOSID,"o",currentDetailLine,quantity);
      }
       // error msg if any already produced in called method
       ${cuquoteEntityName}Home.clearInstance();
       // after persist cartCnt should have a value but not sure why query is not doing flush
       //call keyvalue to force feching each time item added
       if (${itemEntityName}List.getCartedList(type) != null && ${itemEntityName}List.getCartedList(type).size()>0){
        //${cuquoteEntityName}List.getKeyValue(${itemEntityName}List.getCartedList(type).get(0).get${cuquoteEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
       } 
       if (${itemEntityName}List.getCartedList(type) != null){
        int cartCnt=${itemEntityName}List.getCartedList(type).size();
        if (cartCnt < 1){ 
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+${itemEntityName}.getA0xxukixbxxxxxxxxxxxmatcode()+" "+bundle.getString("added")+" "+bundle.getString("to")+" "+bundle.getString("cart"),""));
         if(type.equals("basket")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("folder")+ " "+bundle.getString("to")+ " "+bundle.getString("continue")+ " / "+bundle.getString("submit"),""));
          customIdentity.setHoldValue("");
          customIdentity.setHoldValue2("");
          customIdentity.setHoldValue3("");

         }else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("cart")+ " / "+bundle.getString("checkout")+ " "+bundle.getString("to")+ " "+bundle.getString("place")+ " "+bundle.getString("order")+ " "+bundle.getString("or")+ " "+bundle.getString("select")+ " "+bundle.getString("Next")+ " "+bundle.getString("Item"),""));
                customIdentity.setDiscountValue(BigDecimal.ZERO);
                customIdentity.setDiscountType("");//clear so that next cart/backoffice order does not use previous value

         } 
        }else{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("item")+ " "+${itemEntityName}.getA0xxukixbxxxxxxxxxxxmatcode()+ " "+bundle.getString("added"),""));

         if(type.equals("basket")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("folder")+ " "+bundle.getString("to")+ " "+bundle.getString("continue")+ " / "+bundle.getString("submit"),""));

         }else{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("cart")+ " "+bundle.getString("for")+ " "+bundle.getString("checkout")+ " "+bundle.getString("and")+ " "+bundle.getString("options")+ " "+bundle.getString("or")+ " "+bundle.getString("continue")+ " "+bundle.getString("shopping"),""));

         } 
        }
       }else{
         if(type.equals("basket")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("folder")+ " "+bundle.getString("to")+ " "+bundle.getString("continue")+ " / "+bundle.getString("submit"),""));

         }else{
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+ " "+bundle.getString("cart")+ " "+bundle.getString("to")+ " "+bundle.getString("place")+ " "+bundle.getString("order")+ " "+bundle.getString("or")+ " "+bundle.getString("select")+ " "+bundle.getString("Next")+ " "+bundle.getString("Item"),""));

         } 
       } 
    } catch ( Exception e){
      if(type.equals("basket")){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("basket")+ " "+bundle.getString("submit")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
      }else{

       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_ERROR,bundle.getString("shopping")+ " "+bundle.getString("cart")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));
                customIdentity.setDiscountValue(BigDecimal.ZERO);
                customIdentity.setDiscountType("");//clear so that next cart/backoffice order does not use previous value

      }
   }
  }


//---------------------------

    @Transactional
    public String addProductToPayment(${itemEntityName?cap_first} product, BigDecimal quantity,String type) {
/**
    * called by invoicecart to allow customer to pay by card for invoiced order
    * @param args -3
    * product ie item, this method is called by ItemDetailsBrowse/ItemDetailsFees/ for each shopping/case/fee item in cart/basket
    * quantity is always 1 if not SI-D (shopping)
    * if ci-L1 , quantity passed is 0
    * type cart or basket or cartInvoice
    * method called customerHome.persist(),userHomePersist(),cuordersHome.cartpersist()(which in turn calls cuorderHome.persist())
    * added type invoice
    * see xxx to allow invoiced carted items to take payment at POS terminal or via portable pos device for toPay and Delivery
*/
          if (!identity.isLoggedIn()){
                     //removed required and validation to allow email entries either at top or at bottom
                     // if imailAddr has value take it, otherwise take Alt and if none return
                     if(customIdentity.getImailaddr() !=null && !customIdentity.getImailaddr().isEmpty()){
                      //take it
                     }else{
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+ " "+bundle.getString("address"),""));

                       return "";
                     }  
                     // save this as attach in cuorder for later use in shopping cart 
                       Pattern pattern = Pattern.compile("^.+@.+\\..+$");
                       Matcher matcher = pattern.matcher(customIdentity.getImailaddr());
                       if(!matcher.matches()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+bundle.getString("invalid"),""));

                        return "";
                       }

          }
          // both logged in or temp user, clear prev error msg
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString(""),""));
          Integer sid=0;
	  Map<String,String> params = 
                FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
      /*
          if (params.get("categoryJay") != null &&  !params.get("categoryJay").isEmpty()){ 
	   sid = Integer.parseInt(params.get("categoryJay"));
           // clear existing instance to force changing it, sometimes we want to get existing instance
           clearInstance();
           set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(sid);
           // jay are we not changing the product passed as parameter, debug and check
	   product=getDefinedInstance();

          }
       */
          if(type.equals("invoicecart")){
           //check whether invoice exists and email matches a0xxuncibvxxxxxxxxxxinvoice
           // parse invoice number to 00...nn (7digits right justified)
             if (product != null ){
              prefix=product.getB3xxuxxrbvxxxxxxxxxxsource1();
             }

                   String msonorde=""+prefix;
                   int mponolen=7;
                   String padding = new String();
                   int padlen=-1;
                   int len = Math.abs(mponolen) - msonorde.length();
                   if (len < 1) {
                     msonorde=msonorde.toString();
                   }else{
                    for (int ii = 0 ; ii < len ; ++ii){
                     padding = padding + '0';
                    }
                     msonorde= (padlen < 0 ? padding + msonorde : msonorde + padding); 
                   }
            prefix=msonorde;     

            List<Trexuq266xwwqqhxxxxxcuinvoice> results=
             trexuq266xwwqqhxxxxxcuinvoiceList.getPaymentDueByCustomerList(prefix,true);
            //should be only one, if found update the record with type invoicecart
            if(results.size()==0){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("invoice")+ " "+prefix+ " "+ bundle.getString("not")+ " "+ bundle.getString("found"),""));
             return "";
            }else{
             if(results.get(0).getY7xxuxxrbv10xxxxxxxxtype() != null && results.get(0).getY7xxuxxrbv10xxxxxxxxtype().equals("invoicecart")){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("cart")+" "+bundle.getString("with")+" "+ bundle.getString("payment")+" "+ bundle.getString("already")+" "+ bundle.getString("exists")+", "+ bundle.getString("use")+" "+ bundle.getString("Pay")+" "+ bundle.getString("button")+" "+ bundle.getString("now"),""));
              return "";
             }
             BigDecimal invAmount=results.get(0).getZ1xxztprlxxxxxxxxxxxamounttotal().setScale(2, RoundingMode.HALF_UP);
             if(invAmount.compareTo(quantity.setScale(2, RoundingMode.HALF_UP)) !=0){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("entered")+" "+bundle.getString("amount")+" "+quantity.setScale(2, RoundingMode.HALF_UP)+", "+ bundle.getString("not")+" "+ bundle.getString("matching")+" "+ bundle.getString("any")+" "+ bundle.getString("invoice")+" "+ bundle.getString("total"),""));
              return "";
             }
            }
         
            //now update type to invoicecart
            results.get(0).setY7xxuxxrbv10xxxxxxxxtype("invoicecart");
            ${cuinvoiceEntityName}Home.setInstance(results.get(0));
            ${cuinvoiceEntityName}Home.superUpdate();
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("invoice")+ " "+product.getB3xxuxxrbvxxxxxxxxxxsource1()+" "+bundle.getString("added")+" "+bundle.getString("to")+" "+bundle.getString("payment")+" "+bundle.getString("cart"),""));
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("click")+ " "+bundle.getString("on")+" "+bundle.getString("Pay")+" "+bundle.getString("cart")+ " "+bundle.getString("to")+ " "+bundle.getString("make")+ " "+bundle.getString("payment")+ " "+bundle.getString("or")+ " "+bundle.getString("press")+ " "+bundle.getString("button")+ " "+bundle.getString("more")+ " "+bundle.getString("for")+ " "+bundle.getString("next")+ " "+bundle.getString("item"),""));


            return "";
          }
          return "";
       }

    @Transactional
    public String renderPaymentout(String invoice) {
/**
    * @param args 1
    * product ie item, this method is called by ItemDetailsBrowse/ItemDetailsFees/ for each shopping/case/fee item in cart/basket
    * quantity is always 1 if not SI-D (shopping)
    * if ci-L1 , quantity passed is 0
    * type cart or basket or cartInvoice
    * method called customerHome.persist(),userHomePersist(),cuordersHome.cartpersist()(which in turn calls cuorderHome.persist())
    * added type invoice
*/
          if (!identity.isLoggedIn()){
                     //removed required and validation to allow email entries either at top or at bottom
                     // if imailAddr has value take it, otherwise take Alt and if none return
                     if(customIdentity.getImailaddr() !=null && !customIdentity.getImailaddr().isEmpty()){
                      //take it
                     }else{
                       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("enter")+ " "+bundle.getString("email")+ " "+bundle.getString("address"),""));

                       return "";
                     }  
                     // save this as attach in cuorder for later use in shopping cart 
                       Pattern pattern = Pattern.compile("^.+@.+\\..+$");
                       Matcher matcher = pattern.matcher(customIdentity.getImailaddr());
                       if(!matcher.matches()){
                        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+bundle.getString("invalid"),""));

                        return "";
                       }

          }
          // both logged in or temp user, clear prev error msg
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString(""),""));
          Integer sid=0;
	  Map<String,String> params = 
                FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();

          if (params.get("categoryJay") != null &&  !params.get("categoryJay").isEmpty()){ 
           /* why this logic, invoice comes via method
	   sid = Integer.parseInt(params.get("categoryJay"));
           // clear existing instance to force changing it, sometimes we want to get existing instance
           clearInstance();
           set${itemEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(sid);
           */
          }
                 try{  
                   String msonorde=""+invoice;
                   int mponolen=7;
                   String padding = new String();
                   int padlen=-1;
                   int len = Math.abs(mponolen) - msonorde.length();
                   if (len < 1) {
                     msonorde=msonorde.toString();
                   }else{
                    for (int ii = 0 ; ii < len ; ++ii){
                     padding = padding + '0';
                    }
                     msonorde= (padlen < 0 ? padding + msonorde : msonorde + padding); 
                   }
                   prefix=msonorde;     
                  } catch (Exception e) {
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("ivalid")+" "+ bundle.getString("invoice")+" "+bundle.getString("record")+" "+e.getMessage(),""));
                    return "";
                  }
            List<Trexuq266xwwqqhxxxxxcuinvoice> results=
             trexuq266xwwqqhxxxxxcuinvoiceList.getPaymentDueByCustomerList(prefix,true);
            //should be only one, if found update the record with type invoicecart
            if(results.size()==0){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_ERROR,bundle.getString("invoice")+ " "+prefix+ " "+ bundle.getString("not")+ " "+ bundle.getString("found"),""));
             return "";
            }else{
             if(results.get(0).getY7xxuxxrbv10xxxxxxxxtype() !=null && results.get(0).getY7xxuxxrbv10xxxxxxxxtype().equals("invoicecart")){

              return "/paymentout.xhtml?faces-redirect=true&includeViewParams=true";
             }
            }
             return "";
         
       }



       private List<${cuordersEntityName?cap_first}> itemOrders;

    public String rejectProductsToOrder(${cuodetailsEntityName?cap_first} row) {
             // if already approved/rejected by higher up ie status 64/256 then return
             if(row.getZhxxzzfxhhxxxxxxxxxxstatusfl() == minvoiced || row.getZhxxzzfxhhxxxxxxxxxxstatusfl() == mdel){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+ " "+bundle.getString("change")+ " "+bundle.getString("now"),""));

                return " ";
             }

             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mreturn);
             ${cuodetailsEntityName}Home.allowUpdate();
             //update Order if ok
             Integer coSid=row.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();  
             Integer tempCount=0;
        
            if (${cuordersEntityName}List.entityDetailedList(coSid) != null){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(coSid)) {
              if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mreturn){
               tempCount=tempCount+1;
              }   
             }
             if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mreturn);//4 reject
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("rejected")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
             }

            }

             return "";
    }
    public String rejectProductsToOrderByVendor(${cuodetailsEntityName?cap_first} row) {
             // check when not to process ??

             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mdel);
             ${cuodetailsEntityName}Home.allowUpdate();
             //update Order if ok
             Integer coSid=row.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();  
             Integer tempCount=0;
        
            if (${cuordersEntityName}List.entityDetailedList(coSid) != null){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(coSid)) {
              if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mdel){
               tempCount=tempCount+1;
              }   
             }
             if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mdel);//8 final reject 
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("reject")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
             }

            }

             return "";
    }

    public String approveProductsToOrder(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
                 //input mpaid/for approval is 16 output details employee/manager mreturn/rejected=4 or mshipped/approved=32 or stays 16
                 // mclosed = 8 manager/vendor final approved minvoiced 64 manager/vendor final rejection mdel 256
                 // customer closed 128 ? or 2

             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             if(row.getZhxxzzfxhhxxxxxxxxxxstatusfl() == minvoiced || row.getZhxxzzfxhhxxxxxxxxxxstatusfl() == mdel){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+ " "+bundle.getString("change")+ " "+bundle.getString("now"),""));

                return " ";
             }
             ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mshipped);
             ${cuodetailsEntityName}Home.allowUpdate();
             // reduce item qty because qty 1 not available any more for fees

                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(row.get${itemEntityName?cap_first}());
                 ${itemEntityName}=row.get${itemEntityName?cap_first}();
                 String jay=fpxxfq1a5xwwqqhxxxxxitem.getC6xxusxrbv16xxxxxxxxtype();
                 if(!jay.equals("CI-D")) {
                  ${itemEntityName}Home.getInstance().set${itemQtyField?cap_first}(${itemEntityName}Home.getInstance().get${itemQtyField?cap_first}().subtract(row.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
                  ${itemEntityName}Home.allowUpdate();  
                 }
              //updateProductsToApprove('approveL1/approveL1CI');  put logic here and remove updateProductsToApprove
               Integer coSid=row.getTrexuq244xwwqqhxxxxxcuorders().getA0xxuobxbxxxxxxxxxxxsid();  
               Integer tempCount=0;
               if (trexuq244xwwqqhxxxxxcuordersList.entityDetailedList(coSid) != null){
                for (Xoxxuq2b4xwwqqhxxxxxcuodetails itemOrderDetail : trexuq244xwwqqhxxxxxcuordersList.entityDetailedList(coSid)) {
                 if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mshipped){
                  tempCount=tempCount+1;
                 }   
                }
                if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mshipped);//32 final approve
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("approved")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
             }

               }
       //add notes and attachments
       ${itemEntityName}Home.clearInstance();
       ${itemEntityName}=${itemEntityName}Home.getInstance();
       ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+"/"+${cuordersEntityName}.getJxxxuq201xwwqqhxxxxxcustomer().getC1xxuslnbvixxxxxxxxxlastname()+":"+this.getNotesToPass());
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
       ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
       ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
       calendar.setTime(Calendar.getInstance().getTime());
       calendar.add(Calendar.MONTH, 3);
       ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
       //make child of order item
       ${itemEntityName}.setFpxxfq1a5xwwqqhxxxxxitem(${cuordersEntityName}.getFpxxfq1a5xwwqqhxxxxxitem());
       ${itemEntityName}Home.persist();
       this.setNotesToPass("");//avoid reusing the same content

             return "";
    }

    public String closeProductsToOrder(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
             // used by employee  in future use diff mclosed/8
             //details entity already exists, so do getDefinedInstance to get it, parent instance is null so set it usind pointer in details
             // for new entity use clearInstance/setInstance pattern
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mclosed);//why was it mshipped
             ${cuodetailsEntityName}Home.allowUpdate();
             // reduce item qty because qty 1 not available any more
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(row.get${itemEntityName?cap_first}());
                 ${itemEntityName}=row.get${itemEntityName?cap_first}();
                 ${itemEntityName}Home.getInstance().set${itemQtyField?cap_first}(${itemEntityName}Home.getInstance().get${itemQtyField?cap_first}().subtract(row.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
                 ${itemEntityName}Home.allowUpdate();  
              // update order status here if no other detail
              // detail status can be approved or reject or waiting approval
              // order can be waiting approval (all details waiting) or incomplete (at least one waiting)  or complete (no waiting)             
             Integer coSid=row.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();  
             Integer tempCount=0;
        
            if (${cuordersEntityName}List.entityDetailedList(coSid) != null){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(coSid)) {
              if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mclosed){
               tempCount=tempCount+1;
              }   
             }
             // all details under this order closed, then close the order
             if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("closed")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
             }
            }


             return "";
    }

    public String approveProductsToOrderByVendor(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             if(row.getZhxxzzfxhhxxxxxxxxxxstatusfl() == mclosed ){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_WARN,bundle.getString("was") +" "+bundle.getString("closed")+" "+bundle.getString("status"),""));

             }
             ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
             ${cuodetailsEntityName}Home.allowUpdate();
              //updateProductsToApprove('approveFinal/approveFinalCI');  put logic here and remove updateProductsToApprove
               Integer coSid=row.getTrexuq244xwwqqhxxxxxcuorders().getA0xxuobxbxxxxxxxxxxxsid();  
               Integer tempCount=0;
               if (trexuq244xwwqqhxxxxxcuordersList.entityDetailedList(coSid) != null){
                for (Xoxxuq2b4xwwqqhxxxxxcuodetails itemOrderDetail : trexuq244xwwqqhxxxxxcuordersList.entityDetailedList(coSid)) {
                 if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=minvoiced){
                  tempCount=tempCount+1;
                 }   
                }
                if(tempCount == 0){
                 ${cuordersEntityName}Home.clearInstance();
                 ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
                 ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);//64 approved 
                 ${cuordersEntityName}Home.allowUpdate();
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("approved")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
                }

               }
       //add notes and attachments
       ${itemEntityName}Home.clearInstance();
       ${itemEntityName}=${itemEntityName}Home.getInstance();
       ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+"/"+${cuordersEntityName}.getJxxxuq201xwwqqhxxxxxcustomer().getC1xxuslnbvixxxxxxxxxlastname()+":"+this.getNotesToPass());
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
       ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
       ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
       calendar.setTime(Calendar.getInstance().getTime());
       calendar.add(Calendar.MONTH, 3);
       ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
       //make child of order item
       ${itemEntityName}.setFpxxfq1a5xwwqqhxxxxxitem(${cuordersEntityName}.getFpxxfq1a5xwwqqhxxxxxitem());
       ${itemEntityName}Home.persist();
       this.setNotesToPass("");//avoid reusing the same content

             return "";
    }

    public String closeProductsToOrderByVendor(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
             // called by mbasketin or vbasketin because both are final close
             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
             ${cuodetailsEntityName}Home.allowUpdate();
              // update order status here if no other detail
              // detail status can be approved or reject or waiting approval
              // order can be waiting approval (all details waiting) or incomplete (at least one waiting)  or complete (no waiting)             
             Integer coSid=row.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();  
             Integer tempCount=0;
        
            if (${cuordersEntityName}List.entityDetailedList(coSid) != null){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(coSid)) {
              if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mclosed){
               tempCount=tempCount+1;
              }   
             }
             if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("closed")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
             }
            }


             return "";
    }

    public String requestUpdateProductsToOrderByCustomer(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
             // used by basketoutcase (ci-d) and basketout (fi-d)
             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             if(row.getZhxxzzfxhhxxxxxxxxxxstatusfl() >= minvoiced){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_ERROR,bundle.getString("not")+ " "+bundle.getString("allowed")+ " "+bundle.getString("now"),""));

              return "";
             }
             ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
             ${cuodetailsEntityName}Home.allowUpdate();
              // update order status here if only one order
              // detail status can be approved or reject or waiting approval
              // order can be waiting approval (all details waiting) or incomplete (at least one waiting)  or complete (no waiting)             
             Integer coSid=row.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();  
             Integer tempCount=0;
        
            if (${cuordersEntityName}List.entityDetailedList(coSid) != null){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(coSid)) {
              if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mpaid){
               tempCount=tempCount+1;
              }   
             }
             if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mpaid); //16 submitted
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("submitted")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));
              if (!identity.isLoggedIn()){
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("you")+ " "+bundle.getString("will")+ " "+bundle.getString("get")+ " "+bundle.getString("email")+ " "+bundle.getString("for")+ " "+bundle.getString("status")+ " "+bundle.getString("change"),""));
              }else{
               FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_INFO,bundle.getString("you")+ " "+bundle.getString("can")+ " "+bundle.getString("use")+ " "+bundle.getString("check")+ " "+bundle.getString("status")+ " "+bundle.getString("button")+ " "+bundle.getString("for")+ " "+bundle.getString("status")+ " "+bundle.getString("change"),""));
              }
             }
            }
/*
       //add notes and attachments  commented out no need anymore, add notes button does this
       ${itemEntityName}Home.clearInstance();
       ${itemEntityName}=${itemEntityName}Home.getInstance();
       ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+"/"+${cuordersEntityName}.getJxxxuq201xwwqqhxxxxxcustomer().getC1xxuslnbvixxxxxxxxxlastname()+":"+this.getNotesToPass());
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
       ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
       if(${cuordersEntityName}.getFpxxfq1a5xwwqqhxxxxxitem().getC6xxusxrbv16xxxxxxxxtype().equals("CI-D")){
        ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
       }else{
        ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("FI-D");
       }  
       calendar.setTime(Calendar.getInstance().getTime());
       calendar.add(Calendar.MONTH, 3);
       ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
       //make child of order item
       ${itemEntityName}.setFpxxfq1a5xwwqqhxxxxxitem(${cuordersEntityName}.getFpxxfq1a5xwwqqhxxxxxitem());
       ${itemEntityName}Home.persist();
       this.setNotesToPass("");//avoid reusing the same content
*/


             return "";
    }

    public String closeProductsToOrderByCustomer(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             if(row.getZhxxzzfxhhxxxxxxxxxxstatusfl() >= 16){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("not")+ " "+bundle.getString("allowed")+ " "+bundle.getString("while")+" "+bundle.getString("submission")+ " "+bundle.getString("in")+ " "+bundle.getString("process")+ ", "+bundle.getString("press")+ " "+bundle.getString("return")+ " "+bundle.getString("to")+ " "+bundle.getString("leave"),""));
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("you")+ " "+bundle.getString("may")+ " "+bundle.getString("add")+ " "+bundle.getString("notes")+ " "+bundle.getString("to")+ " "+bundle.getString("request")+ " "+bundle.getString("close"),""));
              return "";
             }

             ${cuodetailsEntityName}Home.set${cuodetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(row.getA0xxuobxbxxxxxxxxxxxsid());
             ${cuodetailsEntityName}Home.setInstance(${cuodetailsEntityName}Home.getDefinedInstance());
             ${cuodetailsEntityName}Home.getInstance().setZhxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
             ${cuodetailsEntityName}Home.allowUpdate();
              // update order status here if only one order
              // detail status can be approved or reject or waiting approval
              // order can be waiting approval (all details waiting) or incomplete (at least one waiting)  or complete (no waiting)             
             Integer coSid=row.get${cuordersEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid();  
             Integer tempCount=0;
        
            if (${cuordersEntityName}List.entityDetailedList(coSid) != null){
             for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${cuordersEntityName}List.entityDetailedList(coSid)) {
              if(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mactive && itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() !=mclosed  ){
               tempCount=tempCount+1;
              }   
             }
             if(tempCount == 0){
              ${cuordersEntityName}Home.clearInstance();
              ${cuordersEntityName}Home.setInstance(row.get${cuordersEntityName?cap_first}());
              ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mclosed);
              ${cuordersEntityName}Home.allowUpdate();
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO," "+"${componentName?substring(eL)?cap_first}"+" "+${cuordersEntityName}Home.getInstance().getA0xxuncobvxxxxxxxxxxpurchsno()+"  "+bundle.getString("closed")+ " "+bundle.getString("status")+ " "+bundle.getString("now"),""));

             }
            }


             return "";
    }
    public String addNotesToPass(Xoxxuq2b4xwwqqhxxxxxcuodetails row) {
             // used by ebasketin,mbasketin or basketoutcase (ci-d) and basketout (fi-d)
             //entity already exists, so either do a query or getDefinedInstance to get it
             // for new entity use clearInstance/setInstance pattern
             if(row.getZhxxzzfxhhxxxxxxxxxxstatusfl() >= minvoiced){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_ERROR,bundle.getString("not")+ " "+bundle.getString("allowed")+ " "+bundle.getString("now"),""));

              return "";
             }
             ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
             if(this.getNotesToPass().trim().length() < 1){
              FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
               FacesMessage.SEVERITY_INFO,bundle.getString("notes")+ " "+bundle.getString("empty")+ ", "+bundle.getString("click")+ " "+bundle.getString("enter")+ " "+bundle.getString("notes")+ " "+bundle.getString("/")+ " "+bundle.getString("attachment")+ " "+bundle.getString("panel")+ " "+bundle.getString("first"),""));

              return "";
             }
       //add notes and attachments
       ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
       ${itemEntityName}Home.clearInstance();
       ${itemEntityName}=${itemEntityName}Home.getInstance();
       ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+"/"+${cuordersEntityName}.getJxxxuq201xwwqqhxxxxxcustomer().getC1xxuslnbvixxxxxxxxxlastname()+":"+this.getNotesToPass());
       timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
       ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
       if(${cuordersEntityName}.getFpxxfq1a5xwwqqhxxxxxitem().getC6xxusxrbv16xxxxxxxxtype().equals("CI-D")){
        ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
       }else{
        ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("FI-D");
       }  
       calendar.setTime(Calendar.getInstance().getTime());
       calendar.add(Calendar.MONTH, 3);
       ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
       //make child of order item
       ${itemEntityName}.setFpxxfq1a5xwwqqhxxxxxitem(${cuordersEntityName}.getFpxxfq1a5xwwqqhxxxxxitem());
       ${itemEntityName}Home.persist();//if any image uploaded it should get persisted
       this.setNotesToPass("");//empty so that the same notes doesnt get added again

             return "";
    }


    public String updateProductsToOrder(${cuodetailsEntityName?cap_first} row) {
     // partly used to pass cuorder sid to updatedetailsall for the main logic
     // used by shopping checkout only 
     // make a list items to be removed from the original carted list
     // when order is confirmed/completed the item and customer entities need update as well. there is already logic in save
     // flow is as follows
     // loops through order details ie lineitems, if checked for remove then subtract qty from item and remove from order details 
     // no logic for order itself ???
     // since no detail dont call updatecdetails
     // call cartpersist which will
     //  since no current detail wont call updatecdetails
     //  (1) showrunt
     //  (2) persistrunt
     //  (3) remove() detail 
     //  (4) update order  
     // if not ckecked, then call ordersHome cartpersist with currentCartedPO detail sid,change option and tempCount (1 means first call)
     // cartPersist will get the detail order and call
     //  (1) updatecdetails which updates the order detail qty based on itemTempQty (itemDetailsBrowse view has this)
     //  (2) showrunt which recalculates both details and order itself based on quantity or say tax value( a cart can be idle for days)
     //  (3) persistrunt which resets all the values for the order itself (detail values done in showrunt) using values calculated in showrunt
     //     each showrunt for a detail will recalculate both its own value and its master but persistrunt simply copies the variable values into properties
     //  (4) update() detail
     //  (5) update order      
     //@see 

     Integer tempCount=1;
     Integer tempRemoveCount=0;
     try{
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString(""),""));
        ${cuordersEntityName}=null;
        List<${cuodetailsEntityName?cap_first}> checkedItemOrders = new ArrayList<${cuodetailsEntityName?cap_first}>();
            // above checkedItemOrders list does not seem to be used, remove ??tyName}List.getCartedList("cart")) {
            if (checked.get(row.getA0xxuobxbxxxxxxxxxxxsid())) {
             //remove fron cuodetails, but leave cuorder values alone since cuorder values gets recalculated using the remaining details 
             // wrong what if only one detail and removed ???
             ${cuodetailsEntityName}Home.clearInstance();
             if (checked.get(row.getA0xxuobxbxxxxxxxxxxxsid())) {
                ${cuodetailsEntityName}Home.setInstance(row);
                ${cuodetailsEntityName} = ${cuodetailsEntityName}Home.getInstance();
                // add logic to adj cuorder dont forget misc,deliv tax etc
                // also item and customer order total need to be adjusted
                 ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
                 ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
                 currentCartedPOSID=row.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(row.get${itemEntityName?cap_first}());
                 ${itemEntityName}=row.get${itemEntityName?cap_first}();
                 ${itemEntityName}Home.getInstance().setZ7xxzxxxlvxxxxxxxxxxcuordqty(${itemEntityName}Home.getInstance().getZ7xxzxxxlvxxxxxxxxxxcuordqty().subtract(row.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()));
                 ${itemEntityName}Home.allowUpdate();               
                  //${cuodetailsEntityName}Home.remove(); remove after qty etc used in showrunt
                 // option u means detail removed but no need to update the order unless we are here last ????
                 // quantity passing is redundant because unlike addprodtoorder here details qty gets updated
                 // causing lazy error, move updating customer into cartpersist like C
                 //${customerEntityName}=trexuq244xwwqqhxxxxxcuorders.get${customerEntityName?cap_first}();   
                 ${cuordersEntityName}Home.cartpersist(currentCartedPOSID,"u",tempCount,row.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
                 tempRemoveCount=tempRemoveCount+1;
             }
            }else{
                 // row not being removed
                 // qty change gets persisted by hibernate but amount,tax etc needs to be manually done for details
                 // and order before persist
                 ${cuordersEntityName}=row.get${cuordersEntityName?cap_first}();
                 ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
                 currentCartedPOSID=row.getA0xxuobxbxxxxxxxxxxxsid();
                 ${itemEntityName}Home.clearInstance();
                 ${itemEntityName}Home.setInstance(row.get${itemEntityName?cap_first}());
                 ${itemEntityName}=row.get${itemEntityName?cap_first}();
                  // put detail sid not order sid because we need detail item and can also get order
                 // option c means change the order based on any qty change on the detail
                 ${cuordersEntityName}Home.setNextShow(true);// needed to update totals in showrunt
                 ${cuordersEntityName}Home.cartpersist(currentCartedPOSID,"c",tempCount,row.getZ3xxeqxxbvnxxxxxxxxxqtyordrd());
            }
/* line should not be overwritten anymore, updateparent can do this plus line value -1 is used for remove
                 tempCount=tempCount+1; // applicable to both "c" and "u" 
        // added logic to check whether any detail removed and if so just re lineNumber them because multiple can be removed
        // cartedList gets cuodetails for cart order  sid
        if (${itemEntityName}List.getCartedList("cart") != null && tempRemoveCount > 0){
         tempCount=0;
         for (${cuodetailsEntityName?cap_first} itemOrderDetail : ${itemEntityName}List.getCartedList("cart")) {
          tempCount=tempCount+1;
          itemOrderDetail.setB1xxzo11bvlxxxxxxxxxline(tempCount);
          ${cuodetailsEntityName}Home.update();
         }
        }
        // since qtyordprev logic has flaw, calculate master qty here as well
        if (${cuordersEntityName}List.entityLessStatusDetailedList(${cuordersEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),-1) != null ){
         qtyTotal=BigDecimal.ZERO;
         tempCount=0;
         for (${cuodetailsEntityName?cap_first} rowD : ${cuordersEntityName}List.entityLessStatusDetailedList(${cuordersEntityName}.getA0xxuobxbxxxxxxxxxxxsid(),-1)) {
          tempCount=tempCount+1;
          rowD.setB1xxzo11bvlxxxxxxxxxline(tempCount);
          if (tempRemoveCount > 0){
	   ${cuodetailsEntityName}Home.update();
          }
          qtyTotal=qtyTotal.add(rowD.getZ3xxeqxxbvnxxxxxxxxxqtyordrd()); 
         }
         //now a call a method in cuordersHome to update instance w recalculated quantity. update order from here did not work
         trexuq244xwwqqhxxxxxcuordersHome.resetOrderQty(trexuq244xwwqqhxxxxxcuorders.getA0xxuobxbxxxxxxxxxxxsid(),qtyTotal);   
        }
*/

        if(tempRemoveCount == 0){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                FacesMessage.SEVERITY_ERROR,bundle.getString("No")+ " "+bundle.getString("row")+ " "+bundle.getString("selected"),""));
        }
        //put recalculate logic here
        checked.clear(); // If necessary.
        

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("update")+ " "+bundle.getString("products")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));

       }
       return "";
    }

    public void updateProductsToApprove(String guid) {
    // not used any more except for email, change labels at calling web page

/**
    * sends order details for approval
    * @param args -1
    * param 1 guid can be  
    * @return none void type
    * @exception None.
    * @see 
    * in the table called options, column called value will have filter value which will dictate whether it will be hidden,visible or 
    * to use the specified value rather than value in column called options
    * to hide a value in column called options for say activity entity put h=1a. to hide for both item and activity put value= h=1a,18
    * to show a value in column called options for say activity entity put s=1a. to show for both item and activity put value= s=1a,18
    * to show based on locale put in pupose ca=manual-cheque us=manual-check  in value put ca=m us=m
    * to use value rather than whats in options colimn, use v=xxx where xxx is the value.
    */
     // guid can be email (cbasketin) ,reqapprove,reqapproveCI(basketOut,basketOutCase) or approveL1,approveL1CI(basketin,ebasketIn) or employeefinalApproveCI,managerfinalApprove(mbasketin,vbasketin)  
     // customer request makes it pending 16, manager approves to manager approved/recommended 32 or rejects to 4
     // vendor will only see 32 and up and can approve to 64 or reject to 256
     // based on updateProductsToShip(guid) used by shoppingcartbean when customer confirms and guid came from paypal
     // approveProductsToOrder method updates the cuorder detail as approved and reduces the offer count by one
     // the order itself was not updated
     // this method can send an Email with order approved status
     // or  
     // assume customer (cbasketin) does not deal with vendor directly
     // ivoked by customer (cbasketin) with guid as cemail to get status and an email will be sent to manager as a reminder 
     // invoked by vendor (vbasketin) guid being 'email' when vendor send status to Manager
     // invoked by manager (basketin) guid being 'jay' 
     // invoked by *customer or manager (itemdetailsPaidSelect -> basketout.xhtml) guid being 'jay' when vendor approval is           // requested by client manager for a customer. *Customer or not can be set via client table 
     // and email sent to vendor
     // if not email request
     // until customer requests approval order and detail status is 0 or 1 ie inactive or active but no request for approval yet
     // customer can add or update 
     // go through details and order itself to change status assume all items and order itself is for approval (16) pending and         approved(32) or rejected (4)
     // if prod service prepay then put usage counter in user allow3 as string value
     if(guid.equals("email")){
      // assume will be used by customer ie one basket
      if(${itemEntityName}List.getCurrentCartOrder("basket") == null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));

       return;
      }else{
       ${cuordersEntityName?cap_first} currentBasket=${itemEntityName}List.getCurrentCartOrder("basket").get(0);    
       ${cuordersEntityName}List.eSend("EMAIL",currentBasket.getA0xxuncobvxxxxxxxxxxpurchsno(),currentBasket.getA0xxuncobvxxxxxxxxxxpurchsno(),false,currentBasket.get${customerEntityName?cap_first}().getQ4xxhxxxbv24xxxxxxxximailaddr());
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("email")+ " "+bundle.getString("sent")+" "+bundle.getString("to")+ " "+currentBasket.get${customerEntityName?cap_first}().getQ4xxhxxxbv24xxxxxxxximailaddr()+" "+bundle.getString("for")+" "+bundle.getString("submission")+" "+currentBasket.getA0xxuncobvxxxxxxxxxxpurchsno(),""));

       return;
      }
     }
     // reqApprove/reqApproveCI
     Integer tempCount=0;
     Integer waiting=0;
     Integer approved=0;
     Integer elementsN=0;
     String  prevOrder="";
     List<${cuodetailsEntityName?cap_first}> dList=null;
     // order can be waiting approval (all details waiting) or incomplete (at least one waiting) or complete (no waiting)             
     try{
       // BasketedList returns status less than 64 ie not vendor aprroved/rejected and not closed
       if(guid.equals("reqApprove") || guid.equals("reqApproveCI")){
       if(guid.equals("reqApprove")){
        if(${itemEntityName}List.getBasketedList("basket") == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));

                return;
        }
        dList=${itemEntityName}List.getBasketedList("basket");
       }else{
        if(${itemEntityName}List.getBasketedList("basketCI") == null){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));
                return;
        }
        dList=${itemEntityName}List.getBasketedList("basketCI");
       }
        tempCount=0;
        waiting=0;
        approved=0;
        elementsN=0;
        ${userEntityName}Home.getInstance();
        ${userEntityName}=${userEntityName}Home.getInstance();

        for (${cuodetailsEntityName?cap_first} itemOrderDetail : dList) {
                 tempCount=tempCount+1;
                 //input active/1 or inactive/0 output  mpaid/for approval/16 for all details and corresponding orders 
                 // will come here if customer requests approval 
                 if (itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() < 16){
                  itemOrderDetail.setZhxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
	          ${cuodetailsEntityName}Home.setInstance(itemOrderDetail);
	          ${cuodetailsEntityName}Home.update();
                 }
                 ${cuordersEntityName}=itemOrderDetail.get${cuordersEntityName?cap_first}();
                 if (isBitSet(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl(),_mpaid)) {
                  waiting=waiting+1;
                 }
        }
        // for a customer there will be one cart/basket order
                 // now prepare order itself for update and check for customer allowed search quota
                 // jay update order B5xxztqrlxxxxxxxxxxxqtytotal??
                 // reduce user allow3 field if order status is less than 16, temporarily convert to bigDecimal and put back as string
                 // using userprofl footer (decimal) instead of user allow3 
                 if(${userEntityName}.getY6xxuxxxivxxxxxxxxxxallow3() !=null 
                     && ${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl() <16){
	          ${userEntityName} = (${userEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${userEntityName?cap_first} cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("username", customIdentity.getOwner().substring(0,ownerCode.length()-3))
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
                  reducedQty=new BigDecimal("0.0");
                  ${userproflEntityName}=${userEntityName}List.getUserProfiles();
                  if(${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter()!=null){
                   reducedQty= ${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter();
                  }
                  reducedQty=reducedQty.subtract(${cuordersEntityName}.getB5xxztqrlxxxxxxxxxxxqtytotal());
                  ${userproflEntityName}.setE4xxzxxxlvxxxxxxxxxxfooter(reducedQty);
                  ${userproflEntityName}Home.setInstance(${userproflEntityName});
                  ${userproflEntityName}Home.update();
                 }
        // now update order itself to customer approved
                 ${cuordersEntityName}.setZcxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
                 String longerNotes=notesToPass+${cuordersEntityName}.getYexxuznybvxxxxxxxxxxnotes();
                 if(longerNotes !=null){
                  if(longerNotes.length() >60){
                   longerNotes=longerNotes.substring(0,60);
                  }
                  ${cuordersEntityName}.setYexxuznybvxxxxxxxxxxnotes(longerNotes);
                 }
                 //note will be saved in a child item further down
                 ${cuordersEntityName}Home.clearInstance();
                 ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
                 ${cuordersEntityName}Home.superUpdate();
         //now create child item to save chronology of case handling
                 ${itemEntityName?cap_first} product=${cuordersEntityName}.get${itemEntityName?cap_first}();
                 if (product.getC6xxusxrbv16xxxxxxxxtype().equals("CI-D")){
                  ${itemEntityName}Home.clearInstance();
                  ${itemEntityName}=${itemEntityName}Home.getInstance();
                  ${itemEntityName}.setB1xxuszsbvxxxxxxxxxxdescript(${cuordersEntityName}.get${customerEntityName?cap_first}().getC1xxuslnbvixxxxxxxxxlastname()+${cuordersEntityName}.get${customerEntityName?cap_first}().getA0xxukxxbvxxxxxxxxxxcustomer()+this.getNotesToPass());
                  timeStamp = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss").format(new Date());
                  ${itemEntityName}.setW7xxuznxbvxxxxxxxxxxnotes(timeStamp+":"+this.getNotesToPass());
                  ${itemEntityName}.setC6xxusxrbv16xxxxxxxxtype("CI-D");
                  //make it a child item 
                  ${itemEntityName}.set${itemEntityName?cap_first}(product);
                  calendar.setTime(Calendar.getInstance().getTime());
                  calendar.add(Calendar.MONTH, 3);
                  ${itemEntityName}.setZ2xxcxxrlxxxxxxxxxxxdateexpiry(calendar.getTime());
                  ${itemEntityName}Home.persist();
                 }
        this.setNotesToPass("");//avoid reusing the same content

         //now save the selected attachments 
         //checkMapI[1],2 etc was set via checkBoxes
         if (checkMapI[1]){ 
          setMailingImage1(${blobdataEntityName}Home.getBlobdata("blobdata","B3R-ATTACHMENT-1-C","PIC",1) );
          setMailingImage1TypeMime(${blobdataEntityName}Home.getBlobdataTypeMime("blobdata","B3R-ATTACHMENT-1-C","PIC",1) );
         }  
         if (checkMapI[2]){ 
          setMailingImage2(${blobdataEntityName}Home.getBlobdata("blobdata","B3R-ATTACHMENT-1-C","PIC",2) );
          setMailingImage2TypeMime(${blobdataEntityName}Home.getBlobdataTypeMime("blobdata","B3R-ATTACHMENT-1-C","PIC",2) );
         }  
         if (checkMapI[3]){ 
          setMailingImage3(${blobdataEntityName}Home.getBlobdata("blobdata","B3R-ATTACHMENT-1-C","PIC",3) );
          setMailingImage3TypeMime(${blobdataEntityName}Home.getBlobdataTypeMime("blobdata","B3R-ATTACHMENT-1-C","PIC",3) );
         }  
         if (checkMapI[4]){ 
          setMailingImage4(${blobdataEntityName}Home.getBlobdata("blobdata","B3R-ATTACHMENT-1-C","PIC",4) );
          setMailingImage4TypeMime(${blobdataEntityName}Home.getBlobdataTypeMime("blobdata","B3R-ATTACHMENT-1-C","PIC",4) );
         }  
         if (checkMapI[5]){ 
          setMailingImage5(${blobdataEntityName}Home.getBlobdata("blobdata","B3R-ATTACHMENT-1-C","PIC",5) );
          setMailingImage5TypeMime(${blobdataEntityName}Home.getBlobdataTypeMime("blobdata","B3R-ATTACHMENT-1-C","PIC",5) );
         }  
         // mailingtext1,2 etc are saved as string but mailcontent converts to byte
         setMailingText(${clobdataEntityName}Home.getClobdata("clobdata","A3R-ATTACHMENT-1-C","TXT",0,1200) );

         if (checkMapT[1]){ 
          setMailingText1(${clobdataEntityName}Home.getClobdata("clobdata","A3R-ATTACHMENT-1-C","TXT",1,1200) );
         }  
         if (checkMapT[2]){ 
          setMailingText2(${clobdataEntityName}Home.getClobdata("clobdata","A3R-ATTACHMENT-1-C","TXT",2,1200) );
         }  
         if (checkMapT[3]){ 
          setMailingText3(${clobdataEntityName}Home.getClobdata("clobdata","A3R-ATTACHMENT-1-C","TXT",3,1200) );
         }  
         if (checkMapT[4]){ 
          setMailingText4(${clobdataEntityName}Home.getClobdata("clobdata","A3R-ATTACHMENT-1-C","TXT",4,1200) );
         }  

         if (checkMapT[5]){ 
          setMailingText5(${clobdataEntityName}Home.getClobdata("clobdata","A3R-ATTACHMENT-1-C","TXT",5,1200) );
         }  
         //



       }              
       if(guid.equals("approveL1") || guid.equals("approveL1CI")){
       if(guid.equals("approveL1")){
        if(${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket") == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));

                return;
        }
        dList=${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket");
        elementsN=${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket").size();
        prevOrder= ${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket").get(0).get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno();
       }else{
        if(${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket") == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));
                return;
        }
         dList=${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket");
         elementsN=${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket").size();
         prevOrder= ${itemEntityName}List.getCustomerRequestedAndUpCartedListCI("basket").get(0).get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno();
       }
        tempCount=0;
        waiting=0;
        approved=0;
        for (${cuodetailsEntityName?cap_first} itemOrderDetail : dList) {
            tempCount=tempCount+1;
            
                 //input mpaid/for approval is 16 output details mreturn/rejected=4 or mshipped/approved=32 or stays 16
                 // order status will depend on details
                 // will come here if manager presses process approvals and will show mixed status but only >16
                
                 if (itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() < 16){
                  //ignore since customer not given ok yet
                 }else{
                  // ignore since approve/reject for details was done via approve/reject button, only order status needs setting
                 }
                 ${cuordersEntityName}=itemOrderDetail.get${cuordersEntityName?cap_first}();
                 if (isBitSet(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl(),_mpaid)) {
                  waiting=waiting+1;
                 }
                 if (isBitSet(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl(),_mshipped)) {
                  approved=approved+1;
                 }
                 if(!itemOrderDetail.get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno().equals(prevOrder)
                     || elementsN == tempCount  ){
                  // manager can see many baskets now update the last basket order in the loop  
                  ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
                  // customer initiated 
                  if(waiting == tempCount){
                   // may already be set
                   ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
                  }else{
                   if (waiting == 0){
                    // means all set to either reject/approved by manager
                    if(approved == tempCount){ 
                     // all approved
                     ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mshipped);
                    }else{
                     // some rejected by manager and wont go to vendor approval
                     ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mreturn);
                    }
                   }else{
                    //skip since customer has not given ok to all 
                   }
                  }
                  ${cuordersEntityName}Home.superUpdate();
                  tempCount=0;
                  waiting=0;
                  approved=0;
                  prevOrder=itemOrderDetail.get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno();
                 }
        }

       }              
       if(guid.equals("approveFinal")||guid.equals("approveFinalCI")){
       if(guid.equals("approveFinal")){
        if(${itemEntityName}List.getManagerApprovedRejectedCartedList("basket") == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));
                return;
        }
         elementsN=${itemEntityName}List.getManagerApprovedRejectedCartedList("basket").size();
         prevOrder= ${itemEntityName}List.getManagerApprovedRejectedCartedList("basket").get(0).get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno();
         dList=${itemEntityName}List.getManagerApprovedRejectedCartedList("basket");
       }else{
        if(${itemEntityName}List.getEmployeeApprovedRejectedCartedListCI("basket") == null){
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("empty")+ " "+bundle.getString("list"),""));
                return;
        }
         elementsN=${itemEntityName}List.getEmployeeApprovedRejectedCartedListCI("basket").size();
         prevOrder= ${itemEntityName}List.getEmployeeApprovedRejectedCartedListCI("basket").get(0).get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno();
         dList=${itemEntityName}List.getEmployeeApprovedRejectedCartedListCI("basket");
       }
        tempCount=0;
        waiting=0;
        approved=0;
        for (${cuodetailsEntityName?cap_first} itemOrderDetail : dList) {
            tempCount=tempCount+1;
                 //input mshipped/approved=32 output either invoiced/Final approved(64) or deleted/Final rejected (256)
                 // or stays 32
                 // order status will depend on details
                 // will come here if vendor process approvals and will show only > 16 ie 32 (manager approved)
                 // manager rejectd ones will not be shown to next level ie vendor
                 // ignore detail status since approve/reject for details was done via approve/reject button,
                 // only order status needs setting
                 ${cuordersEntityName}=itemOrderDetail.get${cuordersEntityName?cap_first}();
                 if (itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl() < 64) {
                  waiting=waiting+1;
                 }
                 if (isBitSet(itemOrderDetail.getZhxxzzfxhhxxxxxxxxxxstatusfl(),_minvoiced)) {
                  // vendor/final approved
                  approved=approved+1;
                 }
                 if(!itemOrderDetail.get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno().equals(prevOrder)
                    || elementsN == tempCount){
                  // vendor can see many baskets now update the last basket order in the loop  
                   // all set to either reject/approved by vendor
                   if(approved == tempCount){ 
                    // all approved
                    ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
                   }else{
                    // some rejected by vendor 
                    ${cuordersEntityName}Home.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(mdel);
                   }
                  ${cuordersEntityName}Home.setInstance(${cuordersEntityName});
                  ${cuordersEntityName}Home.superUpdate();
                  tempCount=0;
                  waiting=0;
                  approved=0;
                  prevOrder=itemOrderDetail.get${cuordersEntityName?cap_first}().getA0xxuncobvxxxxxxxxxxpurchsno();
                 }
        }
       } 
                
     } catch ( Exception e){
		//log.severe( e.getMessage());
      FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("error")+ " "+bundle.getString("condition")+ ", "+bundle.getString("try")+ " "+bundle.getString("later"),""));

     }
    }



    public String updateInvoicesToPay(String key,String guid,String authId,Boolean authCapture) {
     // invoked by shoppingCartBean when paypal invoice payment is confirmed by customer , guid ref comes from paypal or cod if paypal not involved (pos cash payment?)
     //calls cartExtended_persist to create invoice
     // go through details and order it self to change status assume all items and order itself is paid and ready for shipment/pickup
     // if guid has @ symbol then save it temp customer record as email addr
     // if prod service prepay then put usage counter in user allow3 as string value
     Integer tempCount=0;
     String jayMat="";
     try{
        for (Xoxxuq2a4xwwqqhxxxxxcuidetails itemOrderDetail : ${itemEntityName}List.getInvoicedCartedListFor(key)) {
                 //itemOrderDetail.setZhxxzzfxhhxxxxxxxxxxstatusfl(mpaid); cuide no status use invoice itself
                 jayMat=itemOrderDetail.get${itemEntityName?cap_first}().getA0xxukixbxxxxxxxxxxxmatcode();
	         xoxxuq2a4xwwqqhxxxxxcuidetailsHome.setInstance(itemOrderDetail);
	         xoxxuq2a4xwwqqhxxxxxcuidetailsHome.update();
                 ${cuinvoiceEntityName}Home.clearInstance();
                 ${cuinvoiceEntityName}Home.set${cuinvoiceEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(itemOrderDetail.get${cuinvoiceEntityName?cap_first}().getA0xxuobxbxxxxxxxxxxxsid());
	         ${cuinvoiceEntityName}=${cuinvoiceEntityName}Home.getDefinedInstance();
        }
                 // now update invoice itself 
                 /// added accounting posting,convert the order to an invoice first, if not cod then convert invoice to payment
                 /// once cod payment received manually convert to payment 

                 if(guid.length() > 20){
                  ${cuinvoiceEntityName}.setYcxxuxxrbvxxxxxxxxxxattach(guid.substring(0,20));
                 }else{
                  ${cuinvoiceEntityName}.setYcxxuxxrbvxxxxxxxxxxattach(guid);
                 }
                 if(authId.length() > 60){
                  ${cuinvoiceEntityName}.setYdxxuznybvxxxxxxxxxxnotes(authId.substring(0,60));
                 }else{
                  ${cuinvoiceEntityName}.setYdxxuznybvxxxxxxxxxxnotes(authId);
                 }

                  ${cuinvoiceEntityName}.setZ5xxzzfxhhxxxxxxxxxxstatusfl(mpaid);
                  ${cuinvoiceEntityName}.setZ2xxzyprlxxxxxxxxxxxamountostndt(new BigDecimal("0.0"));
                
                 // change default 0 to 1 meaning paypal paid and shipment outstanding field removed
                 // delay persist of order to include new invoice
                 //trexuq244xwwqqhxxxxxcuordersHome.setInstance(trexuq244xwwqqhxxxxxcuorders);
                 //trexuq244xwwqqhxxxxxcuordersHome.superUpdate();
                 //account posting is done by xxxPosting in persist(), called by extened_persist logic which in turn is called by 
                 // below xxx.cartExtended_persist method, notice order instance with totals,deliv, tax cost etc are passed 
                 if (guid.equals("cod")){
                   //${cuinvoiceEntityName}=${cuinvoiceEntityName}Home.cartExtended_persist(trexuq244xwwqqhxxxxxcuorders);
                   //trexuq244xwwqqhxxxxxcuorders.setB4xxuxxrlxxxcxxxxxxxcinvoice(${cuinvoiceEntityName}.getA0xxuobxbxxxxxxxxxxxsid());
                   //trexuq244xwwqqhxxxxxcuordersHome.setInstance(trexuq244xwwqqhxxxxxcuorders);
                   //trexuq244xwwqqhxxxxxcuordersHome.superUpdate();
                   return null;
                 }else{
                   // check client re default authorize or capture, bypass posting in payment extemndeed if authorize
                   //${cuinvoiceEntityName}=${cuinvoiceEntityName}Home.cartExtended_persist(trexuq244xwwqqhxxxxxcuorders);
                   ${cuinvoiceEntityName}Home.superUpdate();
                   //dont call payment if only authorize
                   if (!authCapture){
                    ${cpaymentEntityName}=${cpaymentEntityName}Home.cartExtended_persist(${cuinvoiceEntityName});
                   }
                 }
                 //now update customer if non paypal payment, GUID will hold email
                 // email was already captured and saved in customer during addProductToOrder, use it for double check
                 // for paypal we can use paypal info as double check
                  //load customer manually to avoid lazyloading exception
               /*  may be we use payout for pos then may use following
                 try{
                  jxxxuq201xwwqqhxxxxxcustomer = (Jxxxuq201xwwqqhxxxxxcustomer) entityManager
 	.createQuery(
 	"select cc from Jxxxuq201xwwqqhxxxxxcustomer cc where cc.a0xxukxxbvxxxxxxxxxxcustomer = :customername and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 	.setParameter("customername", ${cuinvoiceEntityName}.getJxxxuq201xwwqqhxxxxxcustomer().getA0xxukxxbvxxxxxxxxxxcustomer())
 	.setParameter("owner2", owner2Code)
 	.getSingleResult();
                 } catch ( Exception e){
	  //log.severe( e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                   FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("getting")+ " "+bundle.getString("customer")+ " "+bundle.getString("record")+" "+e.getMessage(),""));
                   return null;
                  }
                  //jxxxuq201xwwqqhxxxxxcustomer.setC1xxuslnbvixxxxxxxxxlastname(yxxxuh566xwwqqwxxxxxuserHome.getClientName());
                  //jxxxuq201xwwqqhxxxxxcustomer.setC2xxu2fnbvixxxxxxxxxfirstname(yxxxuh566xwwqqwxxxxxuserHome.getA0xxukuxbvxxxxxxxxxxid2());

                  if (guid.contains("@") && guid.contains(".")){
                   if(!jxxxuq201xwwqqhxxxxxcustomer.getQ4xxhxxxbv24xxxxxxxximailaddr().equals(guid)){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+jxxxuq201xwwqqhxxxxxcustomer.getQ4xxhxxxbv24xxxxxxxximailaddr()+" "+bundle.getString("not")+ ", "+bundle.getString("equal")+ " "+ guid,""));

                    return null;
                   } 
                  }
                  jxxxuq201xwwqqhxxxxxcustomerHome.setInstance(jxxxuq201xwwqqhxxxxxcustomer);
                  jxxxuq201xwwqqhxxxxxcustomerHome.allowUpdate();   
                */
                 // update user allow3 field if needed ie if item type is SI-F 
                 // trexuq244xwwqqhxxxxxcuorders has the last item and in case of fees all items should be same type ie SI-F 
                try{ 
                 if (${cuinvoiceEntityName}.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-F")){
    			                yxxxuh566xwwqqwxxxxxuser = (Yxxxuh566xwwqqwxxxxxuser) entityManager
 					.createQuery(
 							"select cc from Yxxxuh566xwwqqwxxxxxuser cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("username", customIdentity.getOwner().substring(0,ownerCode.length()-3))
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
        
                  ${userproflEntityName}=${userEntityName}List.getUserProfiles();
                  if(${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter()!=null){
                   reducedQty= ${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter();
                  }
                  reducedQty=reducedQty.subtract(${cuinvoiceEntityName}.getZ3xxztqrlxxxxxxxxxxxqtytotal());
                  ${userproflEntityName}.setE4xxzxxxlvxxxxxxxxxxfooter(${cuinvoiceEntityName}.getZ3xxztqrlxxxxxxxxxxxqtytotal().multiply(new BigDecimal("3.0")));
                  ${userproflEntityName}Home.setInstance(${userproflEntityName});
                  ${userproflEntityName}Home.update();

                        //yxxxuh566xwwqqwxxxxxuser.setY6xxuxxxivxxxxxxxxxxallow3(trexuq244xwwqqhxxxxxcuorders.getB5xxztqrlxxxxxxxxxxxqtytotal().multiply(new BigDecimal("3.0")).toString()); 
                        //yxxxuh566xwwqqwxxxxxuserHome.setInstance(yxxxuh566xwwqqwxxxxxuser);

                 }
                } catch ( Exception e){
		  //log.severe( e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                    FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("getting")+ " "+bundle.getString("user")+ " "+bundle.getString("record")+" "+e.getMessage(),""));
                   return null;
                }


                //put recalculate logic here
                //checked.clear(); // If necessary.
                return "updated";

     } catch ( Exception e){
		//log.severe( e.getMessage());
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("condition")+ " "+e.getMessage()+" "+bundle.getString("try")+ " "+bundle.getString("later"),""));

                return null;
     }
    }

    public String updateProductsToShip(String guid,String authId,Boolean authCapture) {
     // invoked by shoppingCartBean when paypal payment is confirmed by customer , guid ref comes from paypal
     // or cod if paypal not involved. called by confirmPDPayment (non paypal pickup payment)
     // or confirmPayment (Paypal but can be be COD ie delivery with paypal authorization?? but no paypal payment ) 
     //calls cartExtended_persist to create invoice
     // go through details and order it self to change status assume all items and order itself is paid and ready for shipment/pickup
     // if guid has @ symbol then save it temp customer record as email addr
     // if prod service prepay then put usage counter in user allow3 as string value
     Integer tempCount=0;
     String jayMat="";
     try{
        for (Xoxxuq2b4xwwqqhxxxxxcuodetails itemOrderDetail : ${itemEntityName}List.getCartedList("cart")) {
            if (checked !=null && !checked.isEmpty() && checked.get(itemOrderDetail.getA0xxuobxbxxxxxxxxxxxsid())) {
             //should not be any checked now
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("detail")+" "+bundle.getString("item")+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
            }else{
                 itemOrderDetail.setZhxxzzfxhhxxxxxxxxxxstatusfl(mpaid);
                 jayMat=itemOrderDetail.get${itemEntityName?cap_first}().getA0xxukixbxxxxxxxxxxxmatcode();
                 xoxxuq2b4xwwqqhxxxxxcuodetailsHome.setInstance(itemOrderDetail);
                 xoxxuq2b4xwwqqhxxxxxcuodetailsHome.update();
            }
        }
                //not sure why checking for client here,may be as safegurad in case invoked out of raaspi context
                //client record key 01 holds api keys
                if(!authId.isEmpty() && yxxxch522xhhxxhxxxxxclientList.getKeyToEntity("01").getDaxxuzxdssxxxxxxxxxxapiclientid() ==null){
                  // 
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                   FacesMessage.SEVERITY_ERROR,bundle.getString("system")+ " "+bundle.getString("error")+ ", "+bundle.getString("site")+ " "+bundle.getString("record")+ " "+bundle.getString("access"),""));
                   return null;
                }
                 // now update order status and then get customrt/address etc and update
                 /// added accounting posting,convert the order to an invoice first, if not cod then convert invoice to payment
                 /// once cod payment received manually convert to payment 
                 trexuq244xwwqqhxxxxxcuorders=${itemEntityName}List.getCurrentCartOrder("cart").get(0);
                 if(guid.equals("cod")){
                  trexuq244xwwqqhxxxxxcuorders.setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
                 }else{
                  ///enhance by checking authorization to fund capture and delay invoice to payment as part of capture
                  trexuq244xwwqqhxxxxxcuordersHome.getInstance().setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
                  trexuq244xwwqqhxxxxxcuorders.setZcxxzzfxhhxxxxxxxxxxstatusfl(minvoiced);
                 }
                 if(guid.length() > 90){
                  trexuq244xwwqqhxxxxxcuorders.setYbxxuxxrblxxxxxxxxxxattach(guid.substring(0,90));
                 }else{
                  trexuq244xwwqqhxxxxxcuorders.setYbxxuxxrblxxxxxxxxxxattach(guid);
                 }
                 if(authId.length() > 60){
                  trexuq244xwwqqhxxxxxcuorders.setYexxuznybvxxxxxxxxxxnotes(authId.substring(0,60));
                 }else{
                  trexuq244xwwqqhxxxxxcuorders.setYexxuznybvxxxxxxxxxxnotes(authId);
                 }
                 
                 // change default 0 to 1 meaning paypal paid and shipment outstanding field removed
                 // delay persist of order to include new invoice and frompaymentprocessor address
                 //account posting is done by xxxPosting in persist(), called by extened_persist logic which in turn is called by 
                 // below xxx.cartExtended_persist method, notice order instance with totals,deliv, tax cost etc are passed 
                 // we need to persist the address which comes from payment processor and save in order
                 // this address may differ from customer address. customer address is null if temp, dummy or valid 
                 // if signedup or set by backoffice
                if (fxxxuq111xwwqqhxxxxxaddress == null) {
                   fxxxuq111xwwqqhxxxxxaddressHome.clearInstance();//
                   fxxxuq111xwwqqhxxxxxaddress=fxxxuq111xwwqqhxxxxxaddressHome.getInstance();// at this point it is null
                 }
                fxxxuq111xwwqqhxxxxxaddress.setB1pxusa1bvxxxxxxxxxxaddrl1(r3Cart.getLine1());
                fxxxuq111xwwqqhxxxxxaddress.setB2xxub2xbvxxxxxxxxxxaddrl2(r3Cart.getLine2());
                fxxxuq111xwwqqhxxxxxaddress.setB3xxh2acbv11xxxxxxxxcity(r3Cart.getCity());
                fxxxuq111xwwqqhxxxxxaddress.setB4xxhbpxbv12xxxxxxxxprovnstate(r3Cart.getState());
                fxxxuq111xwwqqhxxxxxaddress.setB6xxh3azbv14xxxxxxxxpzcode(r3Cart.getPostalCode());
                 //most of the time it need to be saved as new address and customer record updated and cuorder updated,
                 //unless the customer has the same address
                 //now update customer if non paypal payment like pickup, GUID will hold email and userHome has entered last name etc
                 // email was already captured and saved in customer during addProductToOrder, use it for double check
                 // for paypal we can use paypal info as double check
                  // delay to address change,jxxxuq201xwwqqhxxxxxcustomerHome.setInstance(jxxxuq201xwwqqhxxxxxcustomer);
                  //jxxxuq201xwwqqhxxxxxcustomerHome.allowUpdate();   
                 // update user allow3 field if needed ie if item type is SI-F 
                 // trexuq244xwwqqhxxxxxcuorders has the last item and in case of fees all items should be same type ie SI-F 

                  //load customer manually to avoid lazyloading exception  dupl key check how but also use sid to make unique
                 // where's check for non paypal, the logic below was wiping out customer info
                 try{
                    jxxxuq201xwwqqhxxxxxcustomer = (Jxxxuq201xwwqqhxxxxxcustomer) entityManager
 	.createQuery(
 	 "select cc from Jxxxuq201xwwqqhxxxxxcustomer cc where cc.a0xxukxxbvxxxxxxxxxxcustomer = :customername and a0xxuobxbxxxxxxxxxxxsid = :sid and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 	.setParameter("customername", trexuq244xwwqqhxxxxxcuorders.getJxxxuq201xwwqqhxxxxxcustomer().getA0xxukxxbvxxxxxxxxxxcustomer())
 	.setParameter("owner2", owner2Code).setParameter("sid", trexuq244xwwqqhxxxxxcuorders.getJxxxuq201xwwqqhxxxxxcustomer().getA0xxuobxbxxxxxxxxxxxsid())
 	.getSingleResult();
                 } catch ( Exception e){
	  //log.severe( e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                    FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("getting")+ " "+bundle.getString("customer")+ " "+trexuq244xwwqqhxxxxxcuorders.getJxxxuq201xwwqqhxxxxxcustomer().getA0xxukxxbvxxxxxxxxxxcustomer()+" "+bundle.getString("record")+" "+e.getMessage(),""));
                   return null;
                  }
                  //if nonpaypal payment then only guid has email
                  if (guid.contains("@") && guid.contains(".")){
                   if(!jxxxuq201xwwqqhxxxxxcustomer.getQ4xxhxxxbv24xxxxxxxximailaddr().equals(guid)){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                     FacesMessage.SEVERITY_ERROR,bundle.getString("email")+ " "+jxxxuq201xwwqqhxxxxxcustomer.getQ4xxhxxxbv24xxxxxxxximailaddr()+" "+bundle.getString("not")+ ", "+bundle.getString("equal")+ " "+ guid,""));
                    return null;
                   } 
                  }
                  // create or fetch existing shipment address,this address will be stored in order
                  //  and add to temp customer record. also for perm customer, add a flag in shopping cart
                  // if address differs use payment processor address but will get a chance to cancel and change
                  Fxxxuq111xwwqqhxxxxxaddress fxxxuq111xwwqqhxxxxxaddressC=null;
                  fxxxuq111xwwqqhxxxxxaddressC=fxxxuq111xwwqqhxxxxxaddressHome.getInstance(); 
                  //
                  if(jxxxuq201xwwqqhxxxxxcustomer.getFxxxuq111xwwqqhxxxxxaddressByShiptocode()!=null){
                   fxxxuq111xwwqqhxxxxxaddressC=fxxxuq111xwwqqhxxxxxaddressList.getSidToEntity(jxxxuq201xwwqqhxxxxxcustomer.getFxxxuq111xwwqqhxxxxxaddressByShiptocode().getA0xxuobxbxxxxxxxxxxxsid());
                  }else{
                        if(jxxxuq201xwwqqhxxxxxcustomer.getFxxxuq111xwwqqhxxxxxaddressByMailtocode()!=null){
                         fxxxuq111xwwqqhxxxxxaddressC=fxxxuq111xwwqqhxxxxxaddressList.getSidToEntity(jxxxuq201xwwqqhxxxxxcustomer.getFxxxuq111xwwqqhxxxxxaddressByMailtocode().getA0xxuobxbxxxxxxxxxxxsid());
                       }
                  }


                  // at this point address may be valid if existing customer or empty if temp user
                  // if temp user create address/update customer. 
                  if(fxxxuq111xwwqqhxxxxxaddressC == null){
                   fxxxuq111xwwqqhxxxxxaddressHome.clearInstance();
                   fxxxuq111xwwqqhxxxxxaddressHome.setInstance(fxxxuq111xwwqqhxxxxxaddress);//from paymentProcessor
                   fxxxuq111xwwqqhxxxxxaddressHome.persist();
                   trexuq244xwwqqhxxxxxcuorders.setFxxxuq111xwwqqhxxxxxaddressByShipcodefrompay(fxxxuq111xwwqqhxxxxxaddress);
                   //cuorders get updated further down
                   jxxxuq201xwwqqhxxxxxcustomer.setFxxxuq111xwwqqhxxxxxaddressByShiptocode(fxxxuq111xwwqqhxxxxxaddress);
                   jxxxuq201xwwqqhxxxxxcustomerHome.setInstance(jxxxuq201xwwqqhxxxxxcustomer);
                   jxxxuq201xwwqqhxxxxxcustomerHome.superUpdate();

                 } 
                 //if not temp ie existing customer there may be two shipment address, existing and paypal one
                 if(fxxxuq111xwwqqhxxxxxaddressC.getA0xxukbxbxxxxxxxxxxxaddrescode() != null 
                        && (fxxxuq111xwwqqhxxxxxaddressC.getB1pxusa1bvxxxxxxxxxxaddrl1() ==null 
                             || (fxxxuq111xwwqqhxxxxxaddressC.getB1pxusa1bvxxxxxxxxxxaddrl1() !=null 
                              && fxxxuq111xwwqqhxxxxxaddressC.getB1pxusa1bvxxxxxxxxxxaddrl1().contains(" address"))
                             )
                             && fxxxuq111xwwqqhxxxxxaddressC.getB3xxh2acbv11xxxxxxxxcity() == null){
                   //dummy customer address ,create PO address and update PO and update customer address to PO one
                   fxxxuq111xwwqqhxxxxxaddressHome.clearInstance();
                   fxxxuq111xwwqqhxxxxxaddressHome.setInstance(fxxxuq111xwwqqhxxxxxaddress);//from paymentProcessor
                   fxxxuq111xwwqqhxxxxxaddressHome.persist();
                   jxxxuq201xwwqqhxxxxxcustomer.setFxxxuq111xwwqqhxxxxxaddressByShiptocode(fxxxuq111xwwqqhxxxxxaddress);
                   if(jxxxuq201xwwqqhxxxxxcustomer.getQ4xxhxxxbv24xxxxxxxximailaddr() == null || jxxxuq201xwwqqhxxxxxcustomer.getQ4xxhxxxbv24xxxxxxxximailaddr().isEmpty()){
                    jxxxuq201xwwqqhxxxxxcustomer.setQ4xxhxxxbv24xxxxxxxximailaddr(r3Cart.getPayerEmail());//do not override existing
                   }
                   trexuq244xwwqqhxxxxxcuorders.setFxxxuq111xwwqqhxxxxxaddressByShipcodefrompay(fxxxuq111xwwqqhxxxxxaddress);
                   jxxxuq201xwwqqhxxxxxcustomerHome.setInstance(jxxxuq201xwwqqhxxxxxcustomer);
                   jxxxuq201xwwqqhxxxxxcustomerHome.superUpdate();

                 }else{
                  if(fxxxuq111xwwqqhxxxxxaddressC.getA0xxukbxbxxxxxxxxxxxaddrescode() != null 
                   && ( (fxxxuq111xwwqqhxxxxxaddressC.getB1pxusa1bvxxxxxxxxxxaddrl1() != null 
                     && fxxxuq111xwwqqhxxxxxaddressC.getB1pxusa1bvxxxxxxxxxxaddrl1().contains(fxxxuq111xwwqqhxxxxxaddress.getB1pxusa1bvxxxxxxxxxxaddrl1().trim()))
                      && (fxxxuq111xwwqqhxxxxxaddressC.getB3xxh2acbv11xxxxxxxxcity() != null
                      &&  fxxxuq111xwwqqhxxxxxaddressC.getB3xxh2acbv11xxxxxxxxcity().contains(fxxxuq111xwwqqhxxxxxaddress.getB3xxh2acbv11xxxxxxxxcity().trim()))
                      )){
                   //same address,skip creating new address and skip changing customer address but save customer Addr in PO
                    trexuq244xwwqqhxxxxxcuorders.setFxxxuq111xwwqqhxxxxxaddressByShipcodefrompay(fxxxuq111xwwqqhxxxxxaddressC);
                    //PO update further down
                  }else{
                   //not same address,create new address but skip changing customer address but save new address in PO
                   fxxxuq111xwwqqhxxxxxaddressHome.clearInstance();
                   fxxxuq111xwwqqhxxxxxaddressHome.setInstance(fxxxuq111xwwqqhxxxxxaddress);//from paymentProcessor
                   fxxxuq111xwwqqhxxxxxaddressHome.persist();
                   trexuq244xwwqqhxxxxxcuorders.setFxxxuq111xwwqqhxxxxxaddressByShipcodefrompay(fxxxuq111xwwqqhxxxxxaddress);
                   
                  }
                 } 
                 if (guid.equals("cod")){
                   ${cuinvoiceEntityName}=${cuinvoiceEntityName}Home.cartExtended_persist(trexuq244xwwqqhxxxxxcuorders);
                   if(${cuinvoiceEntityName}==null){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                    FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("creating")+ " "+bundle.getString("invoice")+ " "+bundle.getString("record"),""));
                    return null;
                   }
                   trexuq244xwwqqhxxxxxcuorders.setB4xxuxxrlxxxcxxxxxxxcinvoice(${cuinvoiceEntityName}.getA0xxuobxbxxxxxxxxxxxsid());
                   trexuq244xwwqqhxxxxxcuordersHome.setInstance(trexuq244xwwqqhxxxxxcuorders);
                   trexuq244xwwqqhxxxxxcuordersHome.superUpdate();
                   return null;
                 }else{
                   // check client re default authorize or capture, bypass posting in payment extemndeed if authorize
                   ${cuinvoiceEntityName}=${cuinvoiceEntityName}Home.cartExtended_persist(trexuq244xwwqqhxxxxxcuorders);
                   if(${cuinvoiceEntityName}==null){
                    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                    FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("creating")+ " "+bundle.getString("invoice")+ " "+bundle.getString("record"),""));
                    return null;
                   }
                   trexuq244xwwqqhxxxxxcuorders.setB4xxuxxrlxxxcxxxxxxxcinvoice(${cuinvoiceEntityName}.getA0xxuobxbxxxxxxxxxxxsid());
                   trexuq244xwwqqhxxxxxcuordersHome.setInstance(trexuq244xwwqqhxxxxxcuorders);
                   trexuq244xwwqqhxxxxxcuordersHome.superUpdate();
                   //dont call payment if only authorize
                   if (!authCapture){
                    ${cpaymentEntityName}=${cpaymentEntityName}Home.cartExtended_persist(${cuinvoiceEntityName});
                   }
                 }
                try{ 
                 if (trexuq244xwwqqhxxxxxcuorders.get${itemEntityName?cap_first}().getC6xxusxrbv16xxxxxxxxtype().equals("SI-F")){
    			                yxxxuh566xwwqqwxxxxxuser = (Yxxxuh566xwwqqwxxxxxuser) entityManager
 					.createQuery(
 							"select cc from Yxxxuh566xwwqqwxxxxxuser cc where cc.a0xxukuxbvxxxxxxxxxxid = :username and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("username", customIdentity.getOwner().substring(0,ownerCode.length()-3))
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
        
                  ${userproflEntityName}=${userEntityName}List.getUserProfiles();
                  if(${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter()!=null){
                   reducedQty= ${userproflEntityName}.getE4xxzxxxlvxxxxxxxxxxfooter();
                  }
                  reducedQty=reducedQty.subtract(${cuordersEntityName}.getB5xxztqrlxxxxxxxxxxxqtytotal());
                  ${userproflEntityName}.setE4xxzxxxlvxxxxxxxxxxfooter(trexuq244xwwqqhxxxxxcuorders.getB5xxztqrlxxxxxxxxxxxqtytotal().multiply(new BigDecimal("3.0")));
                  ${userproflEntityName}Home.setInstance(${userproflEntityName});
                  ${userproflEntityName}Home.update();

                        //yxxxuh566xwwqqwxxxxxuser.setY6xxuxxxivxxxxxxxxxxallow3(trexuq244xwwqqhxxxxxcuorders.getB5xxztqrlxxxxxxxxxxxqtytotal().multiply(new BigDecimal("3.0")).toString()); 
                        //yxxxuh566xwwqqwxxxxxuserHome.setInstance(yxxxuh566xwwqqwxxxxxuser);

                 }
                } catch ( Exception e){
		  //log.severe( e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                    FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("getting")+ " "+bundle.getString("user")+ " "+bundle.getString("record")+" "+e.getMessage(),""));
                   return null;
                }



                //put recalculate logic here
                checked.clear(); // If necessary.
                return "updated";

     } catch ( Exception e){
		//log.severe( e.getMessage());
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("error")+ " "+bundle.getString("condition")+ " "+e.getMessage()+" "+bundle.getString("try")+ " "+bundle.getString("later"),""));

                return null;
     }
    }

    public void emptyProductsToOrder(String type) {
     //comes from basketOut (fees/sponsor) or checkout or checkoutpos
     // jay need to add reversing update customer and updateitemecustomer
     // check for closed  check for type/terms to avoid false duplicate
     // terms are pp > PrePay and Pickup, pd > PrePay and Delivery, np > ToPay and Pickup, cd > ToPay and Delivery
     ${cuordersEntityName?cap_first} ${cuordersEntityName}=null;
     
     try{
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,"",""));
          if (type.equals("cart")){
		 ${cuordersEntityName}= (${cuordersEntityName?cap_first}) entityManager
		 .createQuery(
		  "select cc from ${cuordersEntityName?cap_first} cc where (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 AND cc.zexxutoxlhxxxxxxxxxxowner=:owner AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl < :s AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl <> :cl and (c2xxcxxxbv09xxxxxxxxterms is  null or c2xxcxxxbv09xxxxxxxxterms = '' or  c2xxcxxxbv09xxxxxxxxterms like 'PrePay and%' or c2xxcxxxbv09xxxxxxxxterms like 'ToPay and%' and c2xxcxxxbv09xxxxxxxxterms !='POS'  AND cc.y9xxcxxxbv10xxxxxxxxtype=:type)) order by cc.a0xxuobxbxxxxxxxxxxxsid")
		  .setParameter("owner", ownerCode).setParameter("s", mpaid).setParameter("cl", mclosed).setParameter("owner2", owner2Code).setParameter("type", "cart").getSingleResult();
         }else{
          if (type.equals("pos")){
                type="cart";
		 ${cuordersEntityName}= (${cuordersEntityName?cap_first}) entityManager
		 .createQuery(
		  "select cc from ${cuordersEntityName?cap_first} cc where (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 AND cc.zexxutoxlhxxxxxxxxxxowner=:owner AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl < :s AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl <> :cl  and (c2xxcxxxbv09xxxxxxxxterms is not  null and c2xxcxxxbv09xxxxxxxxterms != '' and c2xxcxxxbv09xxxxxxxxterms ='POS') AND cc.y9xxcxxxbv10xxxxxxxxtype=:type) order by cc.a0xxuobxbxxxxxxxxxxxsid")
		  .setParameter("owner", ownerCode).setParameter("s", mpaid).setParameter("cl", mclosed).setParameter("owner2", owner2Code).setParameter("type", "cart").getSingleResult();
          }else{

            if (type.equals("basket")){
		 ${cuordersEntityName}= (${cuordersEntityName?cap_first}) entityManager
		 .createQuery(
		  "select cc from ${cuordersEntityName?cap_first} cc where (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 AND  cc.zexxutoxlhxxxxxxxxxxowner=:owner AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl != :s  AND cc.y9xxcxxxbv10xxxxxxxxtype=:type AND cc.fpxxfq1a5xwwqqhxxxxxitem.c6xxusxrbv16xxxxxxxxtype=:mtype) order by cc.a0xxuobxbxxxxxxxxxxxsid")
		   .setParameter("owner", ownerCode).setParameter("owner2", owner2Code).setParameter("type", type).setParameter("mtype", "FI-D").setParameter("s", mclosed).getResultList();
            }else{
                // basketCI
		 ${cuordersEntityName}= (${cuordersEntityName?cap_first}) entityManager
		 .createQuery(
		  "select cc from ${cuordersEntityName?cap_first} cc where (cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 AND  cc.zexxutoxlhxxxxxxxxxxowner=:owner AND cc.zcxxzzfxhhxxxxxxxxxxstatusfl != :s  AND cc.y9xxcxxxbv10xxxxxxxxtype=:type AND cc.fpxxfq1a5xwwqqhxxxxxitem.c6xxusxrbv16xxxxxxxxtype=:mtype ) order by cc.a0xxuobxbxxxxxxxxxxxsid")
		   .setParameter("owner", ownerCode).setParameter("owner2", owner2Code).setParameter("type", "basket").setParameter("mtype", "CI-D").setParameter("s", mclosed).getResultList();
            }
           }
          }
          //if single found, continue below

       } catch (NoResultException nre) {
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("no")+ " "+bundle.getString("order")+ " "+bundle.getString("found"),""));

           return;
       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+ " "+bundle.getString("empty")+ " "+bundle.getString("order")+ ", "+bundle.getString("error")+" "+e.getMessage(),""));
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("possible")+ " "+bundle.getString("multiple")+ " "+bundle.getString("active")+ " "+bundle.getString("order")+"(s)"+ " "+bundle.getString("found")+ ", "+bundle.getString("should")+ " "+bundle.getString("be")+" "+bundle.getString("one"),""));
           return;
       }
       

     try{
         int deletedCount =  entityManager.createQuery("DELETE FROM ${cuodetailsEntityName?cap_first} a WHERE  a.${cuordersEntityName}.a0xxuobxbxxxxxxxxxxxsid=:sid and a.zzxxu2oxxhxxxxxxxxxxowner2 = :p" ).
           setParameter("sid", ${cuordersEntityName}.getA0xxuobxbxxxxxxxxxxxsid()).setParameter("p", owner2Code).executeUpdate();

       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+ " "+bundle.getString("delete")+ " "+bundle.getString("order")+ " "+bundle.getString("details")+ ", "+bundle.getString("error")+" "+e.getMessage(),""));

       }

     try{
           int deletedCount =  entityManager.createQuery("DELETE FROM ${cuordersEntityName?cap_first} a WHERE  a.a0xxuobxbxxxxxxxxxxxsid=:sid and a.zzxxu2oxxhxxxxxxxxxxowner2 = :p" ).
           setParameter("sid", ${cuordersEntityName}.getA0xxuobxbxxxxxxxxxxxsid()).setParameter("p", owner2Code).executeUpdate();
       } catch ( Exception e){
         FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
          FacesMessage.SEVERITY_INFO,bundle.getString("cannot")+ " "+bundle.getString("delete")+ " "+bundle.getString("order")+ ", "+bundle.getString("error")+" "+e.getMessage()+ " "+bundle.getString("remove")+ " "+bundle.getString("item"),""));

       }

   
    }
    public String newEntry(String type, String from) {
            ${itemEntityName?cap_first} current = null;
            try{
              this.clearInstance();
	         current=this.getInstance(); 
              current.set${documentField?cap_first}(null);
              current.setC6xxusxrbv16xxxxxxxxtype(type);
              current.set${statusFlagDField?cap_first}(Calendar.getInstance().getTime());
              current.setZexxutoxlhxxxxxxxxxxowner(ownerCode);
              current.setZzxxu2oxxhxxxxxxxxxxowner2(owner2Code);
              this.persist();
              //set${componentName?cap_first}From("homeMockUp");
              return "/${itemEntityName?substring(eL)}Edit.xhtml";
            }
            catch ( Exception e){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("create")+ " "+bundle.getString("new")+ " "+bundle.getString("error")+" "+e.getMessage(),""));

             return "";
            }  

    }




</#if>


<#if menuAttributesp2 == "65" >
     public void showNetValue(){
      bcontinue=true;
      //totalBaseAmount is shown as running Net Amount
      totalbaseamt=this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt().subtract(this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt());
      // user can put spaces/null
      if(totaldel==null){
       totaldel=BigDecimal.ZERO;
      }
      if(totalmis==null){
       totalmis=BigDecimal.ZERO;
      }
      totalbaseamt=totalbaseamt.add(totaldel.subtract(totalmis));
      return;
     }

    /**
    * The following method creates details (children)
    * @param args Unused.
    * @return whether detail was created true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean createGdetailsetValues() {
		if (!bcontinue){
                 return bcontinue;
                }
         
                ${gentriesDetailsEntityName}Home.clearInstance();
                ${gentriesDetailsEntityName}Home.setInstance(${gentriesDetailsEntityName});

                ${gentriesDetailsEntityName} = ${gentriesDetailsEntityName}Home.getInstance();	
	        if (${gentriesDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("details")+ " "+bundle.getString("create")+ " "+bundle.getString("failed"),""));

			bcontinue = false;
                 return bcontinue;
		} else {
	         ${gentriesDetailsEntityName}.set${entityName?cap_first}(this.instance);
                 if (${accountEntityName} == null) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			bcontinue = false;
                  return bcontinue;
                 } 
                 // update account being used now in gldetails
                 ${gentriesDetailsEntityName}.setYxxxch601xwwqqhxxxxxaccount(yxxxch601xwwqqhxxxxxaccount);
               }
           if(this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt() == null ){
            this.instance.setC4xxzxxxbvxxtxxxxxxxtdebitamt(new BigDecimal("0.0"));
           }
           if(this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt() == null ){
            this.instance.setC5xxzxxxbvxxxxxxxxxxtcreditamt(new BigDecimal("0.0"));
           }
           ${gentriesDetailsEntityName}.setC4xxzxxxbvxxxxxxxxxxdebitamt(totaldel);
           ${gentriesDetailsEntityName}.setC5xxzxxxbvxxxxxxxxxxcreditamt(totalmis);
           amountTotal=this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt();
           this.instance.setC4xxzxxxbvxxtxxxxxxxtdebitamt(amountTotal.add(${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt()));
           amountTotal=this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt();
           this.instance.setC5xxzxxxbvxxxxxxxxxxtcreditamt(amountTotal.add(${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt()));
           this.instance.setB5xxcxxrlxxxxxxxxxxxpostdate(currbusdate);
           if(this.instance.get${perioddatesEntityName?cap_first}() == null &&  acperiod != null ){
            //get perioddates record for current acperiod
           
       	 try {
			${perioddatesEntityName} = (${perioddatesEntityName?cap_first}) entityManager
			.createQuery(
					"select cc from Yxxxuq632xwwqqhxxxxxperioddates cc where cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 and a0xxukwpbv47xxxxxxxxperiod =:period ")
					.setParameter("period", acperiod.getA1xxuxwpbv47xxxxxxxxcurrperiod())
					.setParameter("owner2", owner2Code)
					.getSingleResult();

		 } catch (NoResultException nre) {
					// end of fiscal year or bad division dates
					bcontinue = false;
					return false;
		 }
            
            this.instance.set${perioddatesEntityName?cap_first}(${perioddatesEntityName});
           }
           if (!(${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt().compareTo(BigDecimal.ZERO)==0)){
            accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
            postingAmount=${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt();
            if (yxxxch601xwwqqhxxxxxaccount.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("L") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("Q") 
             || yxxxch601xwwqqhxxxxxaccount.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("I")){
             postingAmount=postingAmount.negate(); // for L or Q or I debit means -ve value           
            }
		 updateAccount();
           }
           if (!(${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt().compareTo(BigDecimal.ZERO)==0)){
            accountn=yxxxch601xwwqqhxxxxxaccount.getA0xxukwxbvxxxxxxxxxxaccount();
            postingAmount=${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt();
            if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("E")){
             postingAmount=postingAmount.negate(); // for A or E credit means -ve value   
            }       
		 updateAccount();
           }
	   ${gentriesDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());


	   return bcontinue;

	}

    /**
    * The following method updates details (children)
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateGdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
           }

           ${gentriesDetailsEntityName} = ${gentriesDetailsEntityName}Home.getInstance();	
		if (${gentriesDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("detail")+ " "+bundle.getString("record")+ " "+bundle.getString("not")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		} else {
	         ${gentriesDetailsEntityName}.set${entityName?cap_first}(this.instance);
                }
                setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                ${gentriesDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());
                if (${accountEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("account")+ " "+bundle.getString("not")+ " "+bundle.getString("selected")+ " "+bundle.getString("yet"),""));
			bcontinue = false;
                        return bcontinue;
                } 
              // update account being used now in gldetails
              ${gentriesDetailsEntityName}.set${accountEntityName?cap_first}(${accountEntityName});

           if(this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt() == null ){
            this.instance.setC4xxzxxxbvxxtxxxxxxxtdebitamt(new BigDecimal("0.0"));
           }
           if(this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt() == null ){
            this.instance.setC5xxzxxxbvxxxxxxxxxxtcreditamt(new BigDecimal("0.0"));
           }
           ${gentriesDetailsEntityName}.setC4xxzxxxbvxxxxxxxxxxdebitamt(totaldel);
           ${gentriesDetailsEntityName}.setC5xxzxxxbvxxxxxxxxxxcreditamt(totalmis);

           amountTotal=this.instance.getC4xxzxxxbvxxtxxxxxxxtdebitamt();
           this.instance.setC4xxzxxxbvxxtxxxxxxxtdebitamt(amountTotal.add(${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt()));
           amountTotal=this.instance.getC5xxzxxxbvxxxxxxxxxxtcreditamt();
           this.instance.setC5xxzxxxbvxxxxxxxxxxtcreditamt(amountTotal.add(${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt()));
           this.instance.setB5xxcxxrlxxxxxxxxxxxpostdate(currbusdate);
           if(this.instance.get${perioddatesEntityName?cap_first}() == null &&  acperiod != null ){
            //get perioddates record for current acperiod
           
       	 try {
			${perioddatesEntityName} = (${perioddatesEntityName?cap_first}) entityManager
			.createQuery(
					"select cc from ${perioddatesEntityName?cap_first} cc where cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 and a0xxukwpbv47xxxxxxxxperiod =:period ")
					.setParameter("period", acperiod.getA1xxuxwpbv47xxxxxxxxcurrperiod())
					.setParameter("owner2", owner2Code)
					.getSingleResult();

		 } catch (NoResultException nre) {
					// end of fiscal year or bad division dates
					bcontinue = false;
					return false;
		 }
            
            this.instance.set${perioddatesEntityName?cap_first}(${perioddatesEntityName});
           }
           if (!(${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt().compareTo(BigDecimal.ZERO)==0)){
            accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
            postingAmount=${gentriesDetailsEntityName}.getC4xxzxxxbvxxxxxxxxxxdebitamt();
            if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("L") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("Q") 
             || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("I")){
             postingAmount=postingAmount.negate(); // for L or Q or I debit means -ve value           
            }
		 updateAccount();
           }
           if (!(${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt().compareTo(BigDecimal.ZERO)==0)){
            accountn=${accountEntityName}.getA0xxukwxbvxxxxxxxxxxaccount();
            postingAmount=${gentriesDetailsEntityName}.getC5xxzxxxbvxxxxxxxxxxcreditamt();
            if (${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("A") || ${accountEntityName}.getB1xxuwgxbv01xxxxxxxxcategory().substring(0,1).equals("E")){
             postingAmount=postingAmount.negate(); // for A or E credit means -ve value   
            }       
		 updateAccount();
           }



	        return bcontinue;

	}


</#if>
<#if menuAttributesp2 == "89" >

    /**
    * The following method creates details (children)
    * @param args Unused.
    * @return whether detail was created true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean createSdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
           }
         
                 ${scheduleDetailsEntityName}Home.clearInstance();
                 ${scheduleDetailsEntityName}Home.setInstance(${scheduleDetailsEntityName});

                ${scheduleDetailsEntityName} = ${scheduleDetailsEntityName}Home.getInstance();	
		if (${scheduleDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("detail")+ " "+bundle.getString("record")+ " "+bundle.getString("not")+ " "+bundle.getString("created"),""));
			bcontinue = false;
                    return bcontinue;
		} else {
	         ${scheduleDetailsEntityName}.set${entityName?cap_first}(this.instance);
	         ${scheduleDetailsEntityName}.set${employeeEntityName?cap_first}(this.instance.get${employeeEntityName?cap_first}());
	         ${scheduleDetailsEntityName}.set${vendorEntityName?cap_first}(this.instance.get${vendorEntityName?cap_first}());
	         ${scheduleDetailsEntityName}.set${customerEntityName?cap_first}(this.instance.get${customerEntityName?cap_first}());
		 return bcontinue;
                }

	}

    /**
    * The following method updates details (children)
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateSdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
           }

           ${scheduleDetailsEntityName} = ${scheduleDetailsEntityName}Home.getInstance();	
		if (${scheduleDetailsEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("detail")+ " "+bundle.getString("not")+ " "+bundle.getString("found"),""));
			bcontinue = false;
                return bcontinue;
		} else {
	        ${scheduleDetailsEntityName}.set${entityName?cap_first}(this.instance);// update others
	         ${scheduleDetailsEntityName}.set${employeeEntityName?cap_first}(this.instance.get${employeeEntityName?cap_first}());
	         ${scheduleDetailsEntityName}.set${vendorEntityName?cap_first}(this.instance.get${vendorEntityName?cap_first}());
	         ${scheduleDetailsEntityName}.set${customerEntityName?cap_first}(this.instance.get${customerEntityName?cap_first}());
  
           }
                 setLastItemLine(new Integer(getLastItemLine().intValue()+1)); 
                 ${scheduleDetailsEntityName}.setB1xxzo11bvlxxxxxxxxxline(this.getLastItemLine());

		 return bcontinue;

	}


</#if>

<#if menuAttributesp2 == "9C" && (jobassignmentdetailsEntityName?? && jobassignmentdetailsEntityName?length > eL)  && (processattributesEntityName?? && processattributesEntityName?length > eL)>

    /**
    * The following method creates details (children)
    * @param args Unused.
    * @return whether detail was created true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean createAdetailsetValues() {
	   if (!bcontinue){
             return bcontinue;
           }
           ${processattributesEntityName?cap_first} configV;
                 ${processattributesEntityName}Home.clearInstance();
                 ${processattributesEntityName}Home.setInstance(${processattributesEntityName});
           ${processattributesEntityName} = ${processattributesEntityName}Home.getInstance();	
		if (${processattributesEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("detail")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("be")+ " "+bundle.getString("created"),""));
			bcontinue = false;
                    return bcontinue;
		} else {
                 // now get fixed values from rate rate table
                 configV = ${processdetailsEntityName}List.getAttributes(this.instance.getFpxxfq1a5xwwqqhxxxxxitem().getY3xxuxxrbvxxxxxxxxxxmisccode2());	
	         ${processattributesEntityName}.setA4xxuuxxbv19xxxxxxxxname(configV.getA4xxuuxxbv19xxxxxxxxname());
	         ${processattributesEntityName}.setA9xxtxsclxxxxxxxxxxxtype(configV.getA9xxtxsclxxxxxxxxxxxtype());
	         ${processattributesEntityName}.setA8xxuxxrlxxxxxxxxxxxrange(configV.getA8xxuxxrlxxxxxxxxxxxrange());
 	         ${processattributesEntityName}.set${entityName?cap_first}(this.instance);
	         ${processattributesEntityName}.setA9xxtxsolxxxxxxxxxxxvalue(""+this.getKeyedQuantity());
                 ${processattributesEntityName}Home.setInstance(${processattributesEntityName});          


		 return bcontinue;
                }

	}

    /**
    * The following method updates details (children)
    * @param args Unused.
    * @return whether detail was updated true or false.
    * @exception Application detail instance creation error.
    * @see 
    * 
    */
	public boolean updateAdetailsetValues() {
		if (!bcontinue){
             return bcontinue;
           }

           ${processattributesEntityName} = ${processattributesEntityName}Home.getInstance();	
		if (${processattributesEntityName} == null) {
                 FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("detail")+ " "+bundle.getString("could")+ " "+bundle.getString("not")+ " "+bundle.getString("created"),""));
			bcontinue = false;
                return bcontinue;
		} else {
                 ${processattributesEntityName} = ${processdetailsEntityName}List.getAttributes(this.instance.get${itemEntityName?cap_first}().getY3xxuxxrbvxxxxxxxxxxmisccode2());	
 	         ${processattributesEntityName}.set${entityName?cap_first}(this.instance);
	         ${processattributesEntityName}.setA9xxtxsolxxxxxxxxxxxvalue(""+this.getKeyedQuantity());
                 ${processattributesEntityName}Home.setInstance(${processattributesEntityName});          
           }

		 return bcontinue;

	}


</#if>

<#if menuAttributesp2 == "1F" >

     public void generateSerials(String prefix,String suffix,Integer howMany){
     /**
    * will create next set of serial no records which are meant to be printed as labels
    * labels are to be attached to items as they are received from vendor and its usage can be tracked   
    * @param args -option one is to pass clob key  
    * @return none void type
    * @exception None.
    * @see 
     */
               int startCount=0;
               int endCount=0;
               String sPrefix="";
               String sSufffix="";
               int i=0;
	       try {
                startCount=(int) (long) ${serialnumbersEntityName}List.getResultCount()+1;
                //jay add logic to return -1 to indicate many unused 
                endCount=startCount+howMany;
                for(i=(int) (long) startCount;i<endCount;i++){
     	         if (this.instance == null) {
	          this.instance=this.getInstance();
	         }
                 this.instance.setA0xxukxxbvxxxxxxxxxxserialno(sPrefix+i+sSufffix);
                 this.instance.setYcxxuxxrbvxxxxxxxxxxtype("s");// otherwise type null means type m
                 this.persist();
                 this.clearInstance();
                }
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("last")+ " "+bundle.getString("serial")+ " "+bundle.getString("now")+ " "+endCount,""));


	       } catch (Exception e) {
                FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                 FacesMessage.SEVERITY_INFO,bundle.getString("generate")+ " "+bundle.getString("serial")+ " "+bundle.getString("record")+ " "+i+" "+bundle.getString("saving")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));

                 return;
	       }
      
     }
</#if>

<#if menuAttributesp2 == "24" || menuAttributesp2 == "26" || menuAttributesp2 == "27" 
      || menuAttributesp2 == "60" || menuAttributesp2 == "56" || menuAttributesp2 == "68"
       || menuAttributesp2 == "28" || menuAttributesp2 == "2A" >
	public String getOwner2Code() {
		return owner2Code;
	}

	public void setOwner2Code(String owner2Code) {
                if(this.owner2Code.equals(masterSiteCode)){
		 this.owner2Code = owner2Code;//allow change for POS, only if the site is raaspi
                }
	}
</#if>

<#if menuAttributesp2 == "26" >

	public boolean isCurrConv() {
		return currConv;
	}
	public void setCurrConv(boolean currConv) {
		this.currConv= currConv;
	}
</#if>

/**
*  cartpersist can be used where detail items are iterated over as in shopping cart or back office order processing for one or more items
*  this method is called for one item at a time
*  it has 3 flavours- o if a new item is added, u if existing item is removed , c if some change like qty for any of the items
*  o a new item is added
*    Po null means say a new order as well
*    Po not null means a new item for say an existing order
*  u existing item removed from say order
*  c change existing item from say order or invoice ...
*   call update
*    updatecdetailsetValues
*    showrunt recalcultes and updates variables
*    persistrunt copies the variable values into instance property values
*    superdotupdate to persist
*see R3RestClient SyncDataOrders 
*
*/
<#if menuAttributesp2 == "23" || menuAttributesp2 == "24" || menuAttributesp2 == "25" || menuAttributesp2 == "26" || menuAttributesp2 == "27">
    Integer currentDetailLine=0;
    public String cartpersist(Integer cpoId,String cposts,Integer currentCount, BigDecimal quantity) {
     // cposts is o if add and currentCount holds last line #, u if remove, c if change for existing and for both c & u 
     // currentCount holds first time call or not to decide on initializing order totals to zeroes if first time
     // currentDetailline will be used to hold the value to pass to showrun()
     currentDetailLine=currentCount;
     cartPoStatus=cposts;
     if (cposts.equals("u")){
      //tempCount=tempCount-1;//  already done
      ${cuinvoiceEtcItemDetailsEntityName}Home.set${cuinvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${cuinvoiceEtcItemDetailsEntityName} = ${cuinvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      // couldnt get child remove from db working, need to try remove from collection as well
      // this may be better because there is history now and user may buy later
      // cant use statusfl because only cudetails have these fields, use line field with -1 to denote deleted
      //-1 means as if removed/deleted
      ${cuinvoiceEtcItemDetailsEntityName}.set${lineField?cap_first}(-1);
      ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
      ${cuinvoiceEtcItemDetailsEntityName}Home.setInstance(${cuinvoiceEtcItemDetailsEntityName});
      ${cuinvoiceEtcItemDetailsEntityName}Home.superdotupdate();
      // we need to populate amount variables and item entity
      // force parent to match to details because parent totals getting wrong values
      updateParentFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());

      return "updated";
     }
     if (cposts.equals("c") ){
      // c means changes like qty , ship code etc
      // call showrunt() 
      ${cuinvoiceEtcItemDetailsEntityName}Home.set${cuinvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${cuinvoiceEtcItemDetailsEntityName} = ${cuinvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      // cannot rely on lastItemLine because each call to here gets reset to 1 , use the persisted field line in detail
      // and use in showrunt
      // currentCount is used to indicate first in loop or not
      // totals can be all zeroes,if the order was created before, and need to be populated
      

      //update with new quantity
      ${cuinvoiceEtcItemDetailsEntityName}.set${cuinvoiceEtcItemDetailsQtyFieldName?cap_first}(quantity);


      // following needed to avoid lazy loading exception for customer and bypass actual update of order
   <#if menuAttributesp2 == "24">
    //can be cart or via transaction, jay means only owner can update and may fail because of multiple records
    try{
	${entityName} ${componentName} = (${entityName}) entityManager
 					.createQuery(
 							"select cc from ${entityName} cc where cc. zcxxzzfxhhxxxxxxxxxxstatusfl = :s and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :p AND cc.zexxutoxlhxxxxxxxxxxowner=:owner ")
 					.setParameter("s", mordered).setParameter("p", owner2Code).setParameter("owner", ownerCode)
 					.getSingleResult();
                   String jay=trexuq244xwwqqhxxxxxcuorders.getA0xxuncobvxxxxxxxxxxpurchsno();

                     this.clearInstance();
                     this.setInstance(trexuq244xwwqqhxxxxxcuorders);
    }catch (Exception e){
        // ignore

        //return "";

    }
   </#if>  


      String customerId= getCurrentUserFieldValue("c");
      try{
			                 ${customerEntityName} = (${customerEntityName?cap_first}) entityManager
 					.createQuery(
 							"select cc from ${customerEntityName?cap_first} cc where cc.a0xxukxxbvxxxxxxxxxxcustomer = :customerId and cc.zzxxu2oxxhxxxxxxxxxxowner2 = :owner2 ")
 					.setParameter("customerId", customerId)
 					.setParameter("owner2", owner2Code)
 					.getSingleResult();
    } catch ( Exception e){
        //return "";
    }

      ///need the update detail and associated entities based on qty change, but avoid bringing back detail line -1 back 
      // update affects details as well , so should not be used  for multi items do individual superdotupdate 
      //update();
      superdotupdate();//may be not needed, because next call also updates parent instance
      showrunt();// need to update detail linetotals etc because of any change, check nextshow value 
      ///call updateParent for all fns
 
      // force parent to match to details because parent totals getting wrong values
      updateParentFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
      // 
      showrunt();// removed comment, calls setParentFromDetails , no need updateParent does it
            if(!bcontinue){
             return "";
            }
      ${cuinvoiceEtcItemDetailsEntityName}.set${lineField?cap_first}(tempCount);
      ${cuinvoiceEtcItemDetailsEntityName}Home.clearInstance();
      ${cuinvoiceEtcItemDetailsEntityName}Home.setInstance(${cuinvoiceEtcItemDetailsEntityName});
      ${cuinvoiceEtcItemDetailsEntityName}Home.superdotupdate();


      return "updated";
     }
     // o means status open/add order/details but cpoId null means new order/details and not null means existing order bur new detailsold
     // new detail is like next item and clear out old detail values as in more()
     if (cposts.equals("o") && cpoId != null){
      <#if menuAttributesp2 == "26">
       ${cuordersEntityName}Home.set${cuordersEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
       ${cuordersEntityName}=${cuordersEntityName}Home.getDefinedInstance();
       if(${cuordersEntityName}.getZcxxzzfxhhxxxxxxxxxxstatusfl() != mshipped){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_WARN,bundle.getString("Before")+" "+bundle.getString("invoicing")+", "+bundle.getString("order")+" "+${cuordersEntityName}.getA0xxuncobvxxxxxxxxxxpurchsno()+" "+bundle.getString("neeeds")+" "+bundle.getString("to")+" "+bundle.getString("be")+" "+bundle.getString("in")+" "+bundle.getString("PickUp")+" / "+bundle.getString("shipped")+" "+bundle.getString("status"),""));
           return null;
       }
      </#if>
       qtyOrdPrev=new BigDecimal("0.0");
       detailLtO=new BigDecimal("0.0");
       detailbaseamtO=new BigDecimal("0.0");

       cartPoPicked=true;
       // load this po -> this.instance because details copies values from it, in backend operation ie if via transaction it stays as this.instance
       //this.setId(cpoId);
       // persist checks picked or not and reuses ie override old venorder but adds new to order details 
       // persist calls showtemprunt() which calls createcdetails followed by showrunt() which updates cdetails fields
       // use quantity entered value in createcDetails
       // it then will update customer and item and ends by updating order and details
       // calculate and set lastItemLine because each call to here gets latItemLine reset to 1. use query count against detail to find line count
       // and set lastItemLine
      }
      <#if menuAttributesp2 == "24">
       if ( this.instance.getY9xxcxxxbv10xxxxxxxxtype() != null && this.instance.getY9xxcxxxbv10xxxxxxxxtype().equals("cart") ){
        nextShow=true;
       }
      </#if>
       setLastItemLine(new Integer(currentDetailLine+1)); 
       persist();//this one line does lot of logic. CuordersHome persist creates new orderdetails under createcdetails method
       if(bcontinue){
    <#if entityKeyFieldName !="">
       if(customIdentity.getClientMsgLevel().contains("D")){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("as")+ " "+this.instance.get${entityKeyFieldName?cap_first}()+" "+"at"+" "+timeStamp,""));
       } 
    <#else>
      /* too much info, look into for back office only
       if(customIdentity.getClientMsgLevel().contains("D")){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+" "+"at"+" "+timeStamp,""));
       }
      */
    </#if>
        return "persisted";
       }else{
        return "";
       }
    }
<#elseif menuAttributesp2 == "33" || menuAttributesp2 == "34" || menuAttributesp2 == "37" || menuAttributesp2 == "38" || menuAttributesp2 == "3A">
    Integer currentDetailLine=0;
    public String cartpersist(Integer cpoId,String cposts,Integer currentCount, BigDecimal quantity) {
     // cposts is o if add and currentCount holds last line #, u if remove, c if change for existing and for both c & u 
     // currentCount holds first time call or not to decide on initializing order totals to zeroes if first time
     // currentDetailline will be used to hold the value to pass to showrun()
     currentDetailLine=currentCount;
     cartPoStatus=cposts;
     if (cposts.equals("u")){
      ${vendorInvoiceEtcItemDetailsEntityName}Home.set${vendorInvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      // couldnt get child remove from db working, need to try remove from collection as well
      // this may be better because there is history now and user may buy later
      ${vendorInvoiceEtcItemDetailsEntityName}.set${lineField?cap_first}(-1);
      ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();
      ${vendorInvoiceEtcItemDetailsEntityName}Home.setInstance(${vendorInvoiceEtcItemDetailsEntityName});
      ${vendorInvoiceEtcItemDetailsEntityName}Home.superdotupdate();
      // force parent to match to details because parent totals getting wrong values
      updateParentFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());

      return "updated";
     }
     if (cposts.equals("c")){
      // u means remove item but c means changes like qty , ship code etc
      // call showrunt() 
      ${vendorInvoiceEtcItemDetailsEntityName}Home.set${vendorInvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      // cannot rely on lastItemLine because each call to here gets reset to 1 , use the persisted field line in detail
      // and use in showrunt
      // currentCount is used to indicate first in loop or not
      //updateCdetailsetValues();
      //showrunt();
      //persistrunt();
      //${vendorInvoiceEtcItemDetailsEntityName}Home.update();
      //update has updateCdetailsetValues showruntt and persistrunt
      // force parent to match to details because parent totals getting wrong values
      // if clearInstance not done update does not work, also added check in getDefinedInstance(0)
      superdotupdate();// compare against cu
      updateParentFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
      showrunt();//
            if(!bcontinue){
             return "";
            }
      ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();
      ${vendorInvoiceEtcItemDetailsEntityName}Home.setInstance(${vendorInvoiceEtcItemDetailsEntityName});
      ${vendorInvoiceEtcItemDetailsEntityName}Home.superdotupdate();

      //update();
      return "updated";
     }
     // o means status open/add order/details but cpoId null means new order/details and not null means existing order bur new details
     if (cposts.equals("o") && cpoId != null){
       qtyOrdPrev=new BigDecimal("0.0");
       detailLtO=new BigDecimal("0.0");
       detailbaseamtO=new BigDecimal("0.0");

       cartPoPicked=true;
       // load this po -> this.instance because details copies values from it, in backend operation ie if via transaction it stays as this.instance
       //this.setId(cpoId);
       // persist checks picked or not and reuses ie override old cuorder but adds new to order details 
       // persist calls showtemprunt() which calls createcdetails followed by showrunt() which updates cdetails fields
       // use quantity entered value in createcDetails
       // it then will update vendor and item and ends by updating order and details
       // calculate and set lastItemLine because each call to here gets latItemLine reset to 1. use query count against detail to find line count
       // and set lastItemLine
      }
       setLastItemLine(new Integer(currentDetailLine+1)); 
       persist();
       if(bcontinue){
    <#if entityKeyFieldName !="">
       if(customIdentity.getClientMsgLevel().contains("D")){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("as")+ " "+this.instance.get${entityKeyFieldName?cap_first}()+" "+"at"+" "+timeStamp,""));
       }
    <#else>
      /* too much info, look into for back office only
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+" "+"at"+" "+timeStamp,""));
      */
    </#if>
        return "persisted";
       }else{
        return "";
       }
    }
<#elseif menuAttributesp2 == "44" >
    Integer currentDetailLine=0;
    public String cartpersist(Integer cpoId,String cposts,Integer currentCount, BigDecimal quantity) {
     // cposts is o if add and currentCount holds last line #, u if remove, c if change for existing and for both c & u 
     // currentCount holds first time call or not to decide on initializing order totals to zeroes if first time
     // currentDetailline will be used to hold the value to pass to showrun()
     currentDetailLine=currentCount;
     cartPoStatus=cposts;
     if (cposts.equals("u")){
      ${employeeInvoiceEtcItemDetailsEntityName}Home.set${employeeInvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${employeeInvoiceEtcItemDetailsEntityName} = ${employeeInvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      // couldnt get child remove from db working, need to try remove from collection as well
      // this may be better because there is history now and user may buy later
      ${employeeInvoiceEtcItemDetailsEntityName}.set${lineField?cap_first}(-1);
      ${employeeInvoiceEtcItemDetailsEntityName}Home.clearInstance();
      ${employeeInvoiceEtcItemDetailsEntityName}Home.setInstance(${employeeInvoiceEtcItemDetailsEntityName});
      ${employeeInvoiceEtcItemDetailsEntityName}Home.superdotupdate();
      // force parent to match to details because parent totals getting wrong values
      updateParentFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
      return "updated";
     }
     if (cposts.equals("c")){
      // u means remove item but c means changes like qty , ship code etc
      // call showrunt() 
      ${employeeInvoiceEtcItemDetailsEntityName}Home.set${employeeInvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${employeeInvoiceEtcItemDetailsEntityName} = ${employeeInvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      //update with new quantity
      ${employeeInvoiceEtcItemDetailsEntityName}.set${employeeInvoiceEtcItemDetailsQtyFieldName?cap_first}(quantity);
      // cannot rely on lastItemLine because each call to here gets reset to 1 , use the persisted field line in detail
      // and use in showrunt
      // currentCount is used to indicate first in loop or not
      //updateCdetailsetValues();
      //showrunt();
      //persistrunt();
      ${employeeInvoiceEtcItemDetailsEntityName}Home.update();
      //update has updateCdetailsetValues showruntt and persistrunt
      superdotupdate();//may be not needed, because next call also updates parent instance

      ///call updateParent for all fns
 
      // force parent to match to details because parent totals getting wrong values
      updateParentFromDetails(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
      // 
      //showrunt();//calls setParentFromDetails , no need updateParent does it
      ${employeeInvoiceEtcItemDetailsEntityName}.set${lineField?cap_first}(tempCount);
      ${employeeInvoiceEtcItemDetailsEntityName}Home.clearInstance();
      ${employeeInvoiceEtcItemDetailsEntityName}Home.setInstance(${employeeInvoiceEtcItemDetailsEntityName});
      ${employeeInvoiceEtcItemDetailsEntityName}Home.superdotupdate();

      return "updated";
     }
     // o means status open/add order/details but cpoId null means new order/details and not null means existing order bur new details
     if (cposts.equals("o") && cpoId != null){
       qtyOrdPrev=new BigDecimal("0.0");
       detailLtO=new BigDecimal("0.0");
       detailbaseamtO=new BigDecimal("0.0");
       cartPoPicked=true;
       // load this po -> this.instance because details copies values from it, in backend operation ie if via transaction it stays as this.instance
       //this.setId(cpoId);
       // persist checks picked or not and reuses ie override old cuorder but adds new to order details 
       // persist calls showtemprunt() which calls createcdetails followed by showrunt() which updates cdetails fields
       // use quantity entered value in createcDetails
       // it then will update employee and item and ends by updating order and details
       // calculate and set lastItemLine because each call to here gets latItemLine reset to 1. use query count against detail to find line count
       // and set lastItemLine
      }
       setLastItemLine(new Integer(currentDetailLine+1)); 
       persist();
       if(bcontinue){
    <#if entityKeyFieldName !="">
       if(customIdentity.getClientMsgLevel().contains("D")){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("as")+ " "+this.instance.get${entityKeyFieldName?cap_first}()+" "+"at"+" "+timeStamp,""));
       }
    <#else>
      /* too much info, look into for back office only
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+" "+"at"+" "+timeStamp,""));
      */
    </#if>
        return "persisted";
       }else{
        return "";
       }
    }
<#elseif menuAttributesp2 == "9A" || menuAttributesp2 == "65" || menuAttributesp2 == "89" || menuAttributesp2 == "9C">
    <#assign vendorInvoiceEtcItemDetailsEntityName="">
    <#if menuAttributesp2 == "9A" >
     <#assign vendorInvoiceEtcItemDetailsEntityName=jobassignmentdetailsEntityName>
    <#elseif menuAttributesp2 == "89">
     <#assign vendorInvoiceEtcItemDetailsEntityName=scheduleDetailsEntityName>
    <#elseif menuAttributesp2 == "9C" &&  processattributesEntityName??>
     <#assign vendorInvoiceEtcItemDetailsEntityName=processattributesEntityName>
    <#else> 
     <#assign vendorInvoiceEtcItemDetailsEntityName=gentriesDetailsEntityName>
    </#if>
    Integer currentDetailLine=0;
    public String cartpersist(Integer cpoId,String cposts,Integer currentCount, BigDecimal quantity) {
     // cposts is o if add and currentCount holds last line #, u if remove, c if change for existing and for both c & u 
     // currentCount holds first time call or not to decide on initializing order totals to zeroes if first time
     // currentDetailline will be used to hold the value to pass to showrun()
     currentDetailLine=currentCount;
     cartPoStatus=cposts;
     if (cposts.equals("u")){
      showrunt();
            if(!bcontinue){
             return "";
            }
      persistrunt();
     <#if vendorInvoiceEtcItemDetailsEntityName??>
       ${vendorInvoiceEtcItemDetailsEntityName}Home.remove();      
       ${vendorInvoiceEtcItemDetailsEntityName}Home.clearInstance();      
       superdotupdate();
    </#if>
      return "updated";
     }
     if (cposts.equals("c")){
      // u means remove item but c means changes like qty , ship code etc
      // call showrunt() 
      ${vendorInvoiceEtcItemDetailsEntityName}Home.set${vendorInvoiceEtcItemDetailsEntityName?cap_first}A0xxuobxbxxxxxxxxxxxsid(cpoId);
      ${vendorInvoiceEtcItemDetailsEntityName} = ${vendorInvoiceEtcItemDetailsEntityName}Home.getDefinedInstance();
      //update with new quantity
      // cannot rely on lastItemLine because each call to here gets reset to 1 , use the persisted field line in detail
      // and use in showrunt
      // currentCount is used to indicate first in loop or not
      //updateCdetailsetValues();
      //showrunt();
      //persistrunt();
      ${vendorInvoiceEtcItemDetailsEntityName}Home.update();
      //update has updateCdetailsetValues showruntt and persistrunt
      update();
      return "updated";
     }
     // o means status open/add order/details but cpoId null means new order/details and not null means existing order bur new details
     if (cposts.equals("o") && cpoId != null){
     <#if menuAttributesp2 == "9C">
       qtyOrdPrev=new BigDecimal("0.0");
       detailLtO=new BigDecimal("0.0");
       detailbaseamtO=new BigDecimal("0.0");
     </#if>
       cartPoPicked=true;
       // load this po -> this.instance because details copies values from it, in backend operation ie if via transaction it stays as this.instance
       //this.setId(cpoId);
       // persist checks picked or not and reuses ie override old cuorder but adds new to order details 
       // persist calls showtemprunt() which calls createcdetails followed by showrunt() which updates cdetails fields
       // use quantity entered value in createcDetails
       // it then will update vendor and item and ends by updating order and details
       // calculate and set lastItemLine because each call to here gets latItemLine reset to 1. use query count against detail to find line count
       // and set lastItemLine
      }

       setLastItemLine(new Integer(currentDetailLine+1)); 
       persist();
       if(bcontinue){
    <#if entityKeyFieldName !="">
       if(customIdentity.getClientMsgLevel().contains("D")){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+bundle.getString("as")+ " "+this.instance.get${entityKeyFieldName?cap_first}()+" "+"at"+" "+timeStamp,""));
       }
    <#else>
      /* too much info, look into for back office only
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_INFO,bundle.getString("saved")+" "+"${componentName?substring(eL)?cap_first}"+" "+" "+"at"+" "+timeStamp,""));
      */
    </#if>
        return "persisted";
       }else{
        return "";
       }
    }

<#else>
    Integer currentDetailLine=0;

    public String cartpersist(Integer cpoId,String cposts,Integer currentCount, BigDecimal quantity) {
       return "persisted";
    }
</#if>

<#if menuAttributesp2 == "24">
    public String resetOrderQty(Integer cpoId, BigDecimal quantity) {
      if(cpoId ==null || cpoId ==null){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("order")+" "+bundle.getString("id")+" "+cpoId+" "+bundle.getString("invalid"),""));
       return null;
      }
      this.setTrexuq244xwwqqhxxxxxcuordersA0xxuobxbxxxxxxxxxxxsid(cpoId);
      getDefinedInstance();
      this.instance.setB5xxztqrlxxxxxxxxxxxqtytotal(quantity);
      this.superUpdate();
      return "reset";
  
    }

    /***
    * called by checkout/(payByController method) CHECKOUT button after order was created in cart.xhtml by confirm to cart addProductToOrder method
    * updates order Term to COD and status to ordered so that shipment/invoice knows
    * COD delivery needs full address, so need to get it if address incomplete including temp user
    * updates address as needed
    * @param CPOId sid for order null if new order, code mapped to new value as aelected ie np,pp etc
    * pp > PrePay and Pickup, pd > PrePay and Delivery, np > ToPay and Pickup, cd > ToPay and Delivery
    * UI sends pp and backend method maps to PrePay and Pickup before coming here
    */
    public String updateOrderTermCode(Integer cpoId, String code) {
      if(cpoId ==null || code.isEmpty()){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("order")+" "+bundle.getString("id")+" "+cpoId+" "+bundle.getString("invalid"),""));
       return null;
      }
      this.setTrexuq244xwwqqhxxxxxcuordersA0xxuobxbxxxxxxxxxxxsid(cpoId);
      getDefinedInstance();
      if(this.instance ==null ){
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("order")+" "+bundle.getString("id")+" "+cpoId+" "+bundle.getString("not")+" "+bundle.getString("found"),""));
       return null;
      }
      //loop through order and if any non SI-D like SI-DG then return w message saying only pysical
      // items are elligible for COD payment, remove item xx from order and return for COD or pay online 
      // now
      //checkout r3cart (shoppingcart) action should prefill customer email/address info
      //get customer>get address if incomplete then update with keyed in info
            
      this.instance.setC2xxcxxxbv09xxxxxxxxterms(code);//pp > PrePay and PickUp, pd > PrePay and Delivery, np > ToPay and PickUp, cd > ToPay and Delivery
      if(code.contains("ToPay and") ){
       this.instance.setZcxxzzfxhhxxxxxxxxxxstatusfl(mtoPay);//
      }
      if(code.contains("ToPay and Delivery") ){
       BigDecimal totalCharge=this.instance.getZ1xxztprlxxxxxxxxxxxamounttotal().add(yxxxuq591xwwqqhxxxxxrate1fList.getCODCharge(null));
       this.instance.setZ1xxztprlxxxxxxxxxxxamounttotal(totalCharge);//
      }
      this.superUpdate();
      //now update customer and address if changes keyed in 
      Jxxxuq201xwwqqhxxxxxcustomer jxxxuq201xwwqqhxxxxxcustomer = this.instance.getJxxxuq201xwwqqhxxxxxcustomer();
      if(jxxxuq201xwwqqhxxxxxcustomer !=null){
        //entered values for customer
        jxxxuq201xwwqqhxxxxxcustomerHome.clearInstance();
        jxxxuq201xwwqqhxxxxxcustomerHome.getInstance();
        jxxxuq201xwwqqhxxxxxcustomerHome.setInstance(jxxxuq201xwwqqhxxxxxcustomer);
        jxxxuq201xwwqqhxxxxxcustomerHome.superUpdate();
        //address
        fxxxuq111xwwqqhxxxxxaddressByShipcode=jxxxuq201xwwqqhxxxxxcustomer.getFxxxuq111xwwqqhxxxxxaddressByMailtocode();
        if(fxxxuq111xwwqqhxxxxxaddressByShipcode !=null){
         fxxxuq111xwwqqhxxxxxaddressHome.clearInstance();
         fxxxuq111xwwqqhxxxxxaddressHome.getInstance();
         fxxxuq111xwwqqhxxxxxaddressHome.setInstance(fxxxuq111xwwqqhxxxxxaddressByShipcode);
         fxxxuq111xwwqqhxxxxxaddressHome.superUpdate();
        }
      }
      if(code.equals("PrePay and PickUp")){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
           FacesMessage.SEVERITY_INFO,bundle.getString("Please")+" "+bundle.getString("wait")+" "+bundle.getString("for")+" "+bundle.getString("our")+" "+bundle.getString("confirmation")+" "+bundle.getString("with")+" "+bundle.getString("Pickup")+" "+bundle.getString("details"),""));
      }else{
       if(code.equals("ToPay and Delivery")){
           FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
            FacesMessage.SEVERITY_INFO,bundle.getString("Please")+" "+bundle.getString("wait")+" "+bundle.getString("for")+" "+bundle.getString("our")+" "+bundle.getString("confirmation")+" "+bundle.getString("with")+" "+bundle.getString("payment")+" / "+bundle.getString("delivery")+" "+bundle.getString("details"),""));
       }else{
        if(code.equals("ToPay and PickUp")){
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_INFO,bundle.getString("Please")+" "+bundle.getString("wait")+" "+bundle.getString("for")+" "+bundle.getString("our")+" "+bundle.getString("confirmation")+" "+bundle.getString("with")+" "+bundle.getString("Pickup")+" / "+bundle.getString("Payment")+" "+bundle.getString("details"),""));
        }else{
         if(code.equals("PrePay and Delivery")){
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("Please")+" "+bundle.getString("wait")+" "+bundle.getString("for")+" "+bundle.getString("our")+" "+bundle.getString("confirmation")+" "+bundle.getString("with")+" "+bundle.getString("Shipment")+" / "+bundle.getString("Delivery")+" "+bundle.getString("details"),""));
         }else{
             FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
              FacesMessage.SEVERITY_INFO,bundle.getString("Unknown")+" "+bundle.getString("payment")+" "+bundle.getString("term")+" "+code+" "+bundle.getString("for")+" "+this.instance.getA0xxuncobvxxxxxxxxxxpurchsno(),""));
         }
        }
       }
      }

      if(customIdentity.isDebug()){
       String cpoKey=this.instance.getA0xxuncobvxxxxxxxxxxpurchsno();
       FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
        FacesMessage.SEVERITY_INFO,bundle.getString("order")+" "+bundle.getString("id")+" "+cpoKey+" "+bundle.getString("Term")+" "+bundle.getString("updated")+" "+bundle.getString("as")+" "+code,""));
      }
      return "reset";
  
    }

</#if>





     <#if (componentName=="nxxxiha2rgendb")>   
      private List<String> listFields;
     // generate reverse eng xml, generate table or marked tables script and then run  tables script to create them 
     // check/set status flags to sync with gendb,genapp
	public void genRXGSCT() {
 		String dbname = "";
           String tablenm="";
           String fieldname="";
           String datatype="";
           java.io.File buildFile = new java.io.File("..\\server\\default\\deploy\\genapp.ear\\genapp.war\\WEB-INF\\classes\\genrxgsct-injava-build.xml");
		try {
                List<${genfieldsEntityName?cap_first}> listofStatus=${genfieldsEntityName}List.getResultList() ;
			Iterator<${genfieldsEntityName?cap_first}> itr = listofStatus.iterator();
			while (itr.hasNext()) {
			  ${genfieldsEntityName}li = itr.next();
                  int mstatusfl=${genfieldsEntityName}li.get${statusFlagField?cap_first}(); 
                  if (!isBitSet(mstatusfl, _mactive) ){
            <#if keyAutoGen == "Y" >
                   // jay fix 
                   //dbname=${genfieldsEntityName}li.getA2xxudbxbvxxxxxxxxxxdbcode();
                   //tablenm=${genfieldsEntityName}li.getA1xxudssbxxxtablename();
                   fieldname=${genfieldsEntityName}li.getA0xxukxxbxxxfieldname();
            <#else> 
                   dbname=${genfieldsEntityName}li.getId().getA2xxudbxbvxxxxxxxxxxdbcode();
                   tablenm=${genfieldsEntityName}li.getId().getA1xxudssbxxxtablename();
                   fieldname=${genfieldsEntityName}li.getId().getA0xxukxxbxxxfieldname();
            </#if>
                   datatype=${genfieldsEntityName}li.getB2xxgxxxbvxxxxxxxxxxfieldtype();
		        int jay=tablenm.length();
		        if (jay > 0) {
                    try {
                     Project p = new Project();
                     p.setUserProperty("ant.file", buildFile.getAbsolutePath());
                     p.setProperty("r3deploy.dir","WEB-INF/r3deploy");
                     p.setProperty("sql.url","jdbc:hsqldb:hsql://localhost:1701");
                     p.setProperty("sql.pass","");
                     p.setProperty("sql.user","sa");
                     p.setProperty("sql.user","sa");
                     p.setProperty("sql.dbname",dbname);
                     p.setProperty("sql.tablename",tablenm);
                     p.setProperty("sql.fieldame",fieldname);
                     p.setProperty("sql.datatype",datatype);
                     p.init();
                     ProjectHelper helper = ProjectHelper.getProjectHelper();
                     p.addReference("ant.projectHelper", helper);
                     helper.parse(p, buildFile);
                     p.executeTarget(p.getDefaultTarget());
                     ${genfieldsEntityName}li.set${statusFlagField?cap_first}(${genfieldsEntityName}li.get${statusFlagField?cap_first}()|mactive);
       	         }catch (Exception e) {
		           log.severe("nxxxiha2rgendb" + " build execution error "
						+ e.getMessage());
                   FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_ERROR,bundle.getString("${componentName}") +" "+bundle.getString("table")+" "+bundle.getString("and")+" "+bundle.getString("fields")+" "+bundle.getString("build")+" "+bundle.getString("gen")+" "+bundle.getString("gen")+" "+bundle.getString("error")+" "+e.getMessage(),""));

		         }	
                   }
                  }
			}
		} catch (Exception e) {
                  FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("${componentName}")+ " "+bundle.getString("status")+ " "+bundle.getString("check")+ " "+bundle.getString("error")+ " "+e.getMessage(),""));


		}
 
            // gen reverse eng xml     
      	 // look into validateandSelect logic re initializing enteredValue , otherwise all records
		 String enteredValue = " ";
		 String enteredFvalue = " ";
		 String reverseEngXml = "";
		 List<Nxxxiha3rgentable> listTables = getEntityManager()
				.createQuery(
						"select cc from Nxxxiha3rgentable cc  where cc.a0xxukxxbvxxxxxxxxxxtablename >= :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredValue).getResultList();
		 Iterator t = listTables.iterator();
		 StringWriter stringWriter = new StringWriter();
		 String strin1Value = "x";
		 String strin2Value = "x";
		 String strin3Value = "x";
		String strin4Value = "x";
		String strin5Value = "x";
		String strin6Value = "x";
		String strin7Value = "x";
		String strin8Value = "x";
		if (t != null) {
			stringWriter.write("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
			stringWriter
					.write("\n"
							+ "<!DOCTYPE hibernate-reverse-engineering SYSTEM \"http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd\" >");
			stringWriter.write("\n" + "<hibernate-reverse-engineering>");
			reverseEngXml = stringWriter.toString();
		}
		while (t.hasNext()) {
			Nxxxiha3rgentable tableTags = (Nxxxiha3rgentable) t.next();
            <#if keyAutoGen == "Y" >
			String tableName = tableTags.getA0xxukxxbvxxxxxxxxxxtablename();
            <#else>
			String tableName = tableTags.getId().getA0xxukxxbvxxxxxxxxxxtablename();
            </#if> 
				log.info("next table name =" + tableName);

			Boolean inaddmenuValue = tableTags.getA2xxfxxxbvxxxxxxxxxxinaddmenu();
			Boolean inlistmenuValue = tableTags.getA3xxfxxxbvxxxxxxxxxxinlistmenu();
			Boolean intransactionmenuValue = tableTags
					.getA4xxfxxxbvxxxxxxxxxxintransactionmenu();
			Boolean inreportmenuValue = tableTags.getA5xxfxxrbvxxxxxxxxxxinreportmenu();
			Boolean ingraphsmenuValue = tableTags.getA6xxfxxrbvxxxxxxxxxxingraphsmenu();
			Boolean inmailingmenuValue = tableTags
					.getA7xxfxxrbvxxxxxxxxxxinmailingmenu();
			Boolean ingeneratemenuValue = tableTags
					.getA8xxfxxrbvxxxxxxxxxxingeneratemenu();
			Boolean inadminmenuValue = tableTags.getA9xxfxxrbvxxxxxxxxxxinadminmenu();
			Boolean inmaintenancemenuValue = tableTags
					.getAaxxfxxrbvxxxxxxxxxxinmaintenancemenu();
			Boolean inlabelsmenuValue = tableTags.getAbxxfxxrbvxxxxxxxxxxinlabelsmenu();
			Boolean inskipmenuValue = tableTags.getAcxxfxxrbvxxinskipmenu();
			Boolean incustom1menuValue = tableTags
					.getAdxxfxxrbvxxincustom1menu();
			String menulevelValue = tableTags.getB1xxgxxxbv01menulevel();
			String menuroleValue = tableTags.getC1xxgxxxbv02menurole();
			String menulabelgroupValue = tableTags
					.getD1xxgxxxbv03menulabelgroup();
			String submenusequenceValue = Integer.toString(tableTags
					.getD2xxgxxxbv04submenusequence());
			// 
			if (incustom1menuValue) {
				strin2Value = "v";
			}
			// slot 3 is shared by maintemance.generate,details (hide from menu like x jay is o same as x)
			if (inmaintenancemenuValue) {
				strin3Value = "y";
			}
			if (ingeneratemenuValue) {
				strin3Value = "n";
			}
			//slot 4 is shared by admin, transaction
			if (inadminmenuValue) {
				strin4Value = "s";
			}
			if (intransactionmenuValue) {
				strin4Value = "t";
			}
			if (inaddmenuValue && inlistmenuValue && inreportmenuValue
					&& inlabelsmenuValue && inmailingmenuValue) {
				strin1Value = "j";
			} else {
				if (inaddmenuValue && inlistmenuValue && inreportmenuValue
						&& inlabelsmenuValue) {
					strin1Value = "f";
				} else {
					if (inaddmenuValue && inlistmenuValue && inreportmenuValue) {
						strin1Value = "d";
					} else {
						if (inaddmenuValue && inlistmenuValue) {
							strin1Value = "c";
						}
					}
				}
			}
			if (strin1Value.equals("x")) {
				if (inaddmenuValue) {
					strin1Value = "a";
				} else {
					if (inlistmenuValue) {
						strin1Value = "l";
					} else {
						if (inreportmenuValue) {
							strin1Value = "r";
						} else {
							if (inlabelsmenuValue) {
								strin1Value = "b";
							} else {
								if (inmailingmenuValue) {
									strin1Value = "m";
								}
							}
						}
					}

				}
			}

			stringWriter.write("\n" + "<table name=" + "\\"
					+ tableName.toUpperCase()
					+ "\\" + "class="+"\\"+"${modelPackage}"+"."
					+ strin1Value.toUpperCase() + strin2Value.toLowerCase()
					+ strin3Value.toLowerCase() + strin4Value.toLowerCase()
					+ menulevelValue.toLowerCase() + menuroleValue
					+ menulabelgroupValue + submenusequenceValue +tableName.toLowerCase()+ "\\" + ">");
			reverseEngXml = stringWriter.toString();
                        enteredFvalue=tableName;
			log.info("xml content before any column =" + reverseEngXml);
		        List<Nxxxiha4rgenfields> listFields = getEntityManager().createQuery(
				"select cc from  Nxxxiha4rgenfields cc where cc.a1xxudssbxxxtablename >= :keyOfEntity AND cc.zzxxu2oxxhxxxxxxxxxxowner2=:owner2 order by cc.a0xxuobxbxxxxxxxxxxxsid asc")
				.setParameter("keyOfEntity", enteredFvalue).getResultList();

		          Iterator i = listFields.iterator();

			while (i.hasNext()) {
				Nxxxiha4rgenfields fieldTags = (Nxxxiha4rgenfields) i.next();
            <#if keyAutoGen == "Y" >
				//String ftableName = fieldTags.getA1xxudssbxxxtablename();
				String ftableName = " ";

            <#else>
				String ftableName = fieldTags.getId().getA1xxudssbxxxtablename();
            </#if>
				if (!(ftableName.equals(tableName))) {
					break;
				}
            <#if keyAutoGen == "Y" >
				String fieldName = fieldTags.getA0xxukxxbxxxfieldname();
            <#else>
				String fieldName = fieldTags.getId().getA0xxukxxbxxxfieldname();
            </#if>
				log.info("next field name in table =" + fieldName+ " in "+ tableName);
				String ingroupValue = fieldTags.getB2xxgxxxbv08ingroup();
				String seqwithingroupValue = Integer.toString(fieldTags
						.getB3xxgxxxbv09seqwithingroup());
				String focusseqValue = Integer.toString(fieldTags
						.getB4xxgxxxbv10focusseq());
				String future1 = fieldTags
						.getC1xxuxxxbvxxfuture1();
                     future1="x";
				String initialvalueValue = fieldTags
						.getC2xxgxxxbv12initialvalue();
				String keyoradditionalValue = fieldTags
						.getD1xxgxxxbv13keyoradditional();
				String keyoradditional2Value = fieldTags
						.getD2xxgxxxbv14keyoradditional2();
				String keyoradditional3Value = fieldTags
						.getD3xxgxxxbv15keyoradditional3();
				String showinmenuValue = fieldTags.getE1xxgxxxbv16showinmenu();
				String showinreportValue = fieldTags
						.getE2xxgxxxbv17showinreport();
				String processoption1Value = fieldTags
						.getF1xxgxxxbv18processoption1();
				String processoption2Value = fieldTags
						.getF2xxuxxxbvxxprocessoption2();
                                processoption2Value="x";
				stringWriter.write("\n" + "<column name=" + "\""
						+ fieldName.toUpperCase()+ "\"" + "  property= "
                                + "\""
						+ ingroupValue.toLowerCase()
						+ seqwithingroupValue.toLowerCase()
						+ focusseqValue.toLowerCase() 
						+ future1.toLowerCase() 
                                + initialvalueValue.toLowerCase() 
                                + keyoradditionalValue.toLowerCase() 
                                + keyoradditional2Value.toLowerCase() 
                                + keyoradditional3Value.toLowerCase() 
                                + showinmenuValue.toLowerCase() 
                                + showinreportValue.toLowerCase() 
                                + processoption1Value.toLowerCase() 
                                + processoption2Value.toLowerCase() 
                                + fieldName.toLowerCase()
                                + "\""
                                + "/>");
				reverseEngXml = stringWriter.toString();
				log.info("xml content if column =" + reverseEngXml);

			}
			if (t != null) {
				stringWriter.write("\n" + "</table>");
				reverseEngXml = stringWriter.toString();
  			     log.info("xml table end content =" + reverseEngXml);
			}

		}
		if (t != null) {
			stringWriter.write("\n" + "</" + "hibernate-reverse-engineering"
					+ ">");
			reverseEngXml = stringWriter.toString();
  			     log.info("xml all tables end content =" + reverseEngXml);
                try{
                 java.io.File newFile = new java.io.File ("..\\server\\default\\deploy\\genapp.ear\\genapp.war\\WEB-INF\\classes\\r3-gen.reveng-injava.xml");
                 boolean isCreated = newFile.createNewFile();
                 BufferedWriter out = new BufferedWriter(new FileWriter(newFile));
                 out.write(reverseEngXml);
                 out.close();
                }catch (Exception e) {
			log.severe("nxxxiha4rgenfields" + " file write  error "
					+ e.getMessage());
		     }
                
		}
	}
     </#if>


    public EntityManager getEntityManager()
    {
        //return emf.createEntityManager();
        return entityManager;
    }


    public String createValueExpression(String st){
     return st;
    }
    
    public void setId(Integer id){
      this.id=id;
    }
    public Integer getId(){
     //if(id==null){
      //id=0;// avoid null exception in edit viewparam, null is needed if new entity
     //}
     return id;
    }
    public ${entityName} getInstance(){
        if (instance == null) {
            if (id == null) {
                return createInstance();
            }
            else {
                instance=entityManager.find(${entityName}.class,id);
                return instance;
            }
        }
        else {
            return instance;
        }
   }

   /**
    * Set/change the entity being managed.
    */
   public void setInstance(${entityName} instance)
   {
      ///setDirty(this.instance, instance);
      this.instance = instance;
   }
   /**
    * Clear the managed entity (and id), allowing the {@link EntityHome} to be
    * reused.
    */
   public void clearInstance()
   {
      setInstance(null);
      setId(null);
   }
   /**
    * Load the instance if the id is defined otherwise create a new instance
    * <br />
    * Utility method called by {@link #getInstance()} to load the instance from 
    * the Persistence Context if the id is defined. Otherwise a new instance is 
    * created.
    * 
    * @see "#find()"
    * @see "#createInstance() at top of this source"
    */
   protected void initInstance()
   {
      if ( isIdDefined() )
      {
         if ( !isTransactionMarkedRollback() )
         {
            //we cache the instance so that it does not "disappear"
            //after remove() is called on the instance
            //is this really a Good Idea??
            //setInstance( find() );
            setInstance(null);
         }
      }
      else
      {
         setInstance( createInstance() );
      }
   }
   public boolean isTransactionMarkedRollback(){
    return false;
   }
   /**
    * Flush any changes made to the managed entity instance to the underlying
    * database. 
    * <br />
    * If the update is successful, a log message is printed, a 
    * {@link javax.faces.application.FacesMessage} is added and a transaction 
    * success event raised.
    * 
    * @see "Home#updatedMessage()"
    * @see "Home#raiseAfterTransactionSuccessEvent()"
    * 
    * @return "updated" if the update is successful
    */
   @Transactional
   public String superdotupdate()
   {
      ///joinTransaction();
      ///getEntityManager().flush();
      ///updatedMessage();
      ///raiseAfterTransactionSuccessEvent();
           // if SH or EH then log changes (except editlog changes) to Xxxxch82bxhhhhhxxxxxeditlog  
          <#if menuAttributesp2 !="82">
           if(customIdentity.hasRole("SH") ||customIdentity.hasRole("EH")){
            ${editlogEntityName}Home.clearInstance();
            ${editlogEntityName}=${editlogEntityName}Home.getInstance();
            ${editlogEntityName}.setA0xxukxxbvxxxxxxxxxxdatabasenm("${componentName?substring(eL)?cap_first}");
            ${editlogEntityName}.setZ1xxzxxrbvxxxxxxxxxxrecordno(this.instance.getA0xxuobxbxxxxxxxxxxxsid());
            ${editlogEntityName}.setZexxcxxrlxxxxxxxxxxxnewdate(Calendar.getInstance().getTime());
            ${editlogEntityName}Home.superdotupdate();
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("${componentName?substring(eL)?cap_first}")+" "+bundle.getString("updated")+" "+bundle.getString("and")+", "+bundle.getString("logged")+" "+bundle.getString("in")+" "+bundle.getString("editlog"),""));
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
             FacesMessage.SEVERITY_WARN,bundle.getString("Remember")+", "+bundle.getString("journal")+" "+bundle.getString("entries")+" "+bundle.getString("created")+", "+bundle.getString("need")+" "+bundle.getString("to")+" "+bundle.getString("be")+" "+bundle.getString("deleted"),""));
           }
          </#if>
      <#if menuAttributesp2 == "1M" >
      String uploadedText=this.instance.getB1xxuzaxbvxxxxxxxxxxdata();
      try{
       uploadedText=this.sanitize(uploadedText);//
      } catch ( Exception e){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
        return null;
      }
      </#if>
      this.instance=entityManager.merge(this.instance);
      ///id=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
      /// why ? jpa merge should be ok entityManager.persist(this.instance);
      return "updated";
   }

   /**
    * Persist unmanaged entity instance to the underlying database. 
    * If the persist is successful, a log message is printed, a 
    * {@link javax.faces.application.FacesMessage } is added and a transaction 
    * success event raised.
    * 
    * @see "Home#createdMessage()"
    * @see "Home#raiseAfterTransactionSuccessEvent()"
    * 
    * @return "persisted" if the persist is successful
    */
   @Transactional
   public String superdotpersist()
   {
      ///getEntityManager().persist( getInstance() );
      ///getEntityManager().flush();
      ///assignId( PersistenceProvider.instance().getId( getInstance(), getEntityManager() ) );
      ///createdMessage();
      ///raiseAfterTransactionSuccessEvent();
      //added sanitize if clob data
      <#if menuAttributesp2 == "1M" >
      String uploadedText=this.instance.getB1xxuzaxbvxxxxxxxxxxdata();
      try{
       uploadedText=this.sanitize(uploadedText);//
      } catch ( Exception e){
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
         FacesMessage.SEVERITY_ERROR," "+"invalid"+" "+" "+bundle.getString("content")+",  "+e.getMessage(),""));
        return null;
      }
      </#if>
      //duplicatexxxExists should be called, as needed, before calling this method to avoid duplicate keys     
      entityManager.persist(this.instance);
      id=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
      return "persisted";
   }
   
   /**
    * Remove managed entity instance from the Persistence Context and the 
    * underlying database.
    * If the remove is successful, a log message is printed, a 
    * {@link javax.faces.application.FacesMessage} is added and a transaction 
    * success event raised.
    * 
    * @see "Home#deletedMessage()"
    * @see "Home#raiseAfterTransactionSuccessEvent()"
    * 
    * @return "removed" if the remove is successful
    */
   @Transactional
   public String superdotremove()
   {
      ///getEntityManager().remove( getInstance() );
      ///getEntityManager().flush();
      ///deletedMessage();
      ///raiseAfterTransactionSuccessEvent();
     try{
      this.instance=entityManager.merge(this.instance);
      id=this.instance.getA0xxuobxbxxxxxxxxxxxsid();
      entityManager.remove(this.instance);
      // to catch runtime integrity violation exception, flush does immediate remove
      entityManager.flush();
      id=null;
     } catch ( Exception e){
          FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(
                                     FacesMessage.SEVERITY_INFO,bundle.getString("delete")+" "+ bundle.getString("error")+" "+e.getMessage(),""));
           bcontinue=false;
           return null;
     }

      return "removed";
   }
   /**
    * Returns true if the entity instance is managed
    */
   @Transactional
   public boolean isManaged()
   {
     /// return getInstance()!=null && 
     ///       getEntityManager().contains( getInstance() );
     return id != null;
   }

   /**
    * Invokes this action method via f:viewaction entry on a page, replaces seam pages.xml action 
    * called by web pages like login.xhtml, checkout, unsc etc, which in turns are invoked via activation link entries
    * in emails .
    * there is a takeAction method in r3cart bean(shopping cart ) to take care of checkout.xhtml viewAction
    * viewId is checked to pick the submethod and request parameters are  used to call appropriate action method. 
    * no method parameter but url parameters are used 
    * no exception caught here .
    * 
    * @return "null" 
    */
   public String takeAction(){
    // all pages invoke this method and there can be error pages when rq can be null
    if(req==null){
     return null;
    }

    String viewId = facesContext.getViewRoot().getViewId();
    <#if menuAttributesp2 == "56" >
    if (viewId.contains("login.") || viewId.contains("home.")){
     if (req.getParameter("act") != null ){
      ${userEntityName}Home.doActivate(req.getParameter("act"));
     }
     if (!viewId.contains("socialLogin.") && req.getParameter("social") != null ){
      String userKey=req.getParameter("userKey");
      //yxxxuh566xwwqqwxxxxxuserHome.onSocialAuthenticated(userKey);
      //make it optional via commandbutton in socialLogin invoking onSocialAuthenticated
      //button is rendered if userKey not Empty
     }
    }
    if (viewId.contains("imail.")){
     if (req.getParameter("imail") != null ){
      ${userEntityName}Home.doImail(req.getParameter("imail"));
     }
    }
    //doUnsc will check type, fetch record and update
    if (viewId.contains("unsc.")){
     if (req.getParameter("unsc") != null ){
      ${userEntityName}Home.doUnsc(req.getParameter("keyCode"),Integer.parseInt(req.getParameter("unsc")),Integer.parseInt(req.getParameter("type")));
     }
    }

    </#if>
/*
    if (viewId.contains("shoauthverify.")){
     if (req.getParameter("hmac") != null ){
      r3RestClient.shoauthverify(req.getParameter("code"),req.getParameter("hmac"),req.getParameter("shop"),req.getParameter("state"),req.getParameter("timestamp"));
     }
    }
    if (viewId.contains("shwebhook.")){
     if (req.getParameter("hmac") != null ){
      r3RestClient.shoauthverify(req.getParameter("code"),req.getParameter("hmac"),req.getParameter("shop"),req.getParameter("state"),req.getParameter("timestamp"));
     }
*/
     return null;
    }



   
    /**
    * The following method puts restrictions on bean access on top of menu render protection or url entered outside menue
    * @param none
    * @return none or error page
    * @exception none
    * @see 
    *  added logic to allow public schedule as calendar
    */ 
   public String restrict(){

    if (!identity.isLoggedIn()) {
     return "error.xhtml?faces-redirect=true";
    }
    String r2=customIdentity.getRestrict2();//forces to refresh hibernate query cache, usefl for debug
    String a1=customIdentity.getAllow1();
    String viewId = facesContext.getViewRoot().getViewId();
    // jay add logic to make sure these are not null and saved as lower case in useredit
    if (!customIdentity.getRestrict2().isEmpty() && customIdentity.getRestrict2().equals("all")){
     if ((!customIdentity.getAllow1().isEmpty() && viewId.contains(customIdentity.getAllow1())) 
          || (!customIdentity.getAllow2().isEmpty() && viewId.contains(customIdentity.getAllow2())) || 
          (!customIdentity.getAllow3().isEmpty() && viewId.contains(customIdentity.getAllow3())) ){
          return null;
         }else{
          return "error.xhtml?faces-redirect=true";
         }
    }
    if ((!customIdentity.getRestrict2().isEmpty() && viewId.contains(customIdentity.getRestrict2()))
          || (!customIdentity.getRestrict3().isEmpty() && viewId.contains(customIdentity.getRestrict3())) ){
          return "error.xhtml?faces-redirect=true";
    }
    // admin
    if ((viewId.contains("userList") || viewId.contains("userEdit")) && customIdentity.hasRole("IH")){
     return null;
    } 
    if (viewId.contains("SqlAdmin")){
     if (customIdentity.hasRole("UH")){
      if ( (viewId.contains("SqlAdmin.") && customIdentity.isMasterSite()) || viewId.contains("SqlAdmin-") ){
      /* if ((viewId.contains("SqlAdmin.") && ((req.getServerName().contains("raaspi.com") && !req.getServerName().contains(".raaspi.com") && !req.getServerName().contains(".lraaspi.com"))
                  || req.getServerName().contains(masterSiteCode)
                  ||  (req.getServerName().contains("www.raaspi.com") ||  req.getServerName().contains("raaspi.lraaspi.com")))) || viewId.contains("SqlAdmin-")){
      */   
    return null;
      }else{
       return "error.xhtml?faces-redirect=true";
      }
     }else{
      return "error.xhtml?faces-redirect=true";
     }
    }
    //quikfix later change clobdataentity name to use f instead of u
    if (viewId.contains("clobdataEdit") || viewId.contains("homeThemePreview")){
     if ((req.getServerName().startsWith("myflow") || req.getServerName().contains(masterSiteCode)) && (customIdentity.hasRole("PH") 
         || customIdentity.hasRole("UH") || customIdentity.hasRole("UQ"))) {
         return null;
     }else{
      if ((customIdentity.getProduct().equals("f") && customIdentity.getSubProduct().equals("s")) && (customIdentity.hasRole("PH") 
        || customIdentity.hasRole("VH") || customIdentity.hasRole("UH") || customIdentity.hasRole("UQ"))) {
         return null;
      }else{
        if ( customIdentity.hasRole("UH") || customIdentity.hasRole("UQ") ) {
         return null;
        }
      }
     }
     return "error.xhtml?faces-redirect=true";
    }
    // check for xxxedit. to avoid checking for editEasy
    // allow PH to delete/edit but own records, existing logic checks for own records unless UH
    if (viewId.contains("blobdataEdit.") ){
      if ((customIdentity.getProduct().equals("f") && customIdentity.getSubProduct().equals("s")) && (customIdentity.hasRole("PH") 
         || customIdentity.hasRole("VH") || customIdentity.hasRole("UH") || customIdentity.hasRole("UQ"))) {
         return null;
      }else{
        if ( customIdentity.hasRole("UH") || customIdentity.hasRole("UQ") || customIdentity.hasRole("PH")) {
         return null;
        }
      }
     return "error.xhtml?faces-redirect=true";
    }


    if (viewId.contains("blobdataEditEasy") ){
     //test for raaspi site, EditEasy does not allow edit/delete only in above edit 
     // check if master site, a subdomain serverName can also include master site name 
     if( customIdentity.isMasterSite() 
           && (customIdentity.hasRole("PH") || customIdentity.hasRole("UH") || customIdentity.hasRole("UQ")) ) {
         return null;
     }
     return "error.xhtml?faces-redirect=true";
    }
    // this overides menue Role/level only if url is directly typed in, since menue will not show if role/level wrong

    if ((!customIdentity.getAllow1().isEmpty() && viewId.contains(customIdentity.getAllow1())) 
          || (!customIdentity.getAllow2().isEmpty() && viewId.contains(customIdentity.getAllow2())) || 
          (!customIdentity.getAllow3().isEmpty() && viewId.contains(customIdentity.getAllow3())) ){
          return null;
    }
    // this overides menue Role/level only if url is directly typed in, since menue will not show if role/level wrong

    if ((!customIdentity.getAllow1().isEmpty() && viewId.contains(customIdentity.getAllow1())) 
          || (!customIdentity.getAllow2().isEmpty() && viewId.contains(customIdentity.getAllow2())) || 
          (!customIdentity.getAllow3().isEmpty() && viewId.contains(customIdentity.getAllow3())) ){
          return null;
    }

    //this checks menue rules to render or not
    <#assign rendered = "">
    <#assign pRenderString = "">
    <#assign menuAttributesp0 = entityName?substring(0,4)?upper_case>
    <#assign menuAttributesp1 = entityName?substring(4,5)?upper_case+entityName?substring(5,6)?upper_case>
<#if menuAttributesp0?contains("Y") || menuAttributesp0?contains("T") || menuAttributesp0?contains("A") || menuAttributesp0?contains("C") || menuAttributesp0?contains("D") || menuAttributesp0?contains("F") || menuAttributesp0?contains("J") >
                            <#if menuAttributesp1?contains("U") >
                             <#if menuAttributesp1?contains("W")>
                              // admin
                              <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"UQ\")||customIdentity.hasRole(\"UW\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("Q") >
                               <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("H") >
                              <#assign rendered="(customIdentity.hasRole(\"UH\") ) ${pRenderString}">
                             </#if>
                            <#elseif menuAttributesp1?contains("I") >
                             <#if menuAttributesp1?contains("W")>
                              <#assign rendered="(customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"IQ\")||customIdentity.hasRole(\"IW\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("Q") >
                              <#assign rendered="(customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"IQ\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("H") >
                              <#assign rendered="(customIdentity.hasRole(\"IH\") ) ${pRenderString}">
                             </#if>
                            <#elseif menuAttributesp1?contains("K")>
                             <#if menuAttributesp1?contains("W")>
                              <#assign rendered="(customIdentity.hasRole(\"KH\")||customIdentity.hasRole(\"KQ\")||customIdentity.hasRole(\"KW\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("Q") >
                              <#assign rendered="(customIdentity.hasRole(\"KH\")||customIdentity.hasRole(\"KQ\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("H") >
                              <#assign rendered="(customIdentity.hasRole(\"KH\") ) ${pRenderString}">
                             </#if>
                            <#elseif menuAttributesp1?contains("E")>
                             <#if menuAttributesp1?contains("W")>
                              <#assign rendered="(customIdentity.hasRole(\"EH\")||customIdentity.hasRole(\"EQ\")||customIdentity.hasRole(\"EW\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("Q") >
                              <#assign rendered="(customIdentity.hasRole(\"EH\")||customIdentity.hasRole(\"EQ\") ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("H") >
                              <#assign rendered="(customIdentity.hasRole(\"EH\") ) ${pRenderString}">
                             </#if>
                            <#elseif menuAttributesp1?contains("F") >
                             <#if menuAttributesp1?contains("W")>
                              <#assign rendered="customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\")||customIdentity.hasRole(\"UW\")
                               ||(customIdentity.hasRole(\"VH\")||customIdentity.hasRole(\"VQ\")||customIdentity.hasRole(\"VW\")
                                ${pRenderString}  and customIdentity.product =='f' and customIdentity.subProduct =='s\")">
                             <#elseif menuAttributesp1?contains("Q") >
                               <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"UQ\")
                               ||customIdentity.hasRole(\"VH\")||customIdentity.hasRole(\"PH\")||customIdentity.hasRole(\"VQ\")
                               ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("H") >
                              <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"VH\") ) ${pRenderString}">
                             </#if>
                            <#elseif menuAttributesp1?contains("V") >
                             <#if menuAttributesp1?contains("W")>
                              <#assign rendered="customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\")||customIdentity.hasRole(\"UW\")
                               ||(customIdentity.hasRole(\"VH\")||customIdentity.hasRole(\"VQ\")||customIdentity.hasRole(\"VW\")||customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"IQ\")||customIdentity.hasRole(\"IW\")
                                ${pRenderString}  )">
                             <#elseif menuAttributesp1?contains("Q") >
                               <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\")||customIdentity.hasRole(\"IH\")
                               ||customIdentity.hasRole(\"VH\")||customIdentity.hasRole(\"VQ\")||customIdentity.hasRole(\"IQ\")
                               ) ${pRenderString}">
                             <#elseif menuAttributesp1?contains("H") >
                              <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"VH\")||customIdentity.hasRole(\"IH\") ) ${pRenderString}">
                             </#if>
                            <#elseif menuAttributesp1?contains("B") >
                              <#if menuAttributesp1?contains("W")>
                               <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\")||customIdentity.hasRole(\"UW\")
                                || customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"IQ\")||customIdentity.hasRole(\"IW\")
                                || customIdentity.hasRole(\"BH\")||customIdentity.hasRole(\"BQ\")||customIdentity.hasRole(\"BW\")) ${pRenderString}">
                              <#elseif menuAttributesp1?contains("Q") >
                                <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\") 
                                || customIdentity.hasRole(\"IH\")||customIdentity.hasRole(\"IQ\")
                                || customIdentity.hasRole(\"BH\")||customIdentity.hasRole(\"BQ\")) ${pRenderString}">
                              <#elseif menuAttributesp1?contains("H") >
                               <#assign rendered="(customIdentity.hasRole(\"UH\")|| customIdentity.hasRole(\"IH\")|| customIdentity.hasRole(\"BH\") ) ${pRenderString}">
                              </#if>
                            <#elseif menuAttributesp1?contains("C") >
                              <#if menuAttributesp1?contains("W")>
                               <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\")||customIdentity.hasRole(\"UW\")
                                || customIdentity.hasRole(\"SH\")||customIdentity.hasRole(\"SQ\")||customIdentity.hasRole(\"SW\")
                                || customIdentity.hasRole(\"CH\")||customIdentity.hasRole(\"CQ\")||customIdentity.hasRole(\"CW\")) ${pRenderString}">
                              <#elseif menuAttributesp1?contains("Q") >
                                <#assign rendered="(customIdentity.hasRole(\"UH\")||customIdentity.hasRole(\"UQ\")  
                                || customIdentity.hasRole(\"SH\")||customIdentity.hasRole(\"SQ\")  
                                || customIdentity.hasRole(\"CH\")|| customIdentity.hasRole(\"CQ\")) ${pRenderString}">
                              <#elseif menuAttributesp1?contains("H") >
                               <#assign rendered="(customIdentity.hasRole(\"UH\") 
                                 || customIdentity.hasRole(\"SH\")|| customIdentity.hasRole(\"CH\")) ${pRenderString}">
                              </#if>
                            <#else>
                              <#assign rendered="(customIdentity.hasRole(\"EH\") ) ${pRenderString}">
                            </#if>
                            <#if rendered !="">
                             if(!(${rendered})){
                              return "error.xhtml?faces-redirect=true";
                             }else{
                              return null;
                             }
                            <#else>
                             return null;
                            </#if>
<#else>
  // plug the hole for entities not shown via menue, ex all xxxxx entities like details, editlog 
  // add logic to mimic menu exceptions logic to allow accounting reports
  if (viewId.contains("Reportjrnl") || viewId.contains("Reporttrial") || viewId.contains("Reportbala")
    || viewId.contains("Reportinco") || viewId.contains("scandate") && (customIdentity.hasRole("UH") || customIdentity.hasRole("EH")) ){
   return null;
  }
  if (viewId.contains("editlog")  && customIdentity.hasRole("UH") ){
   return null;
  }
  if (viewId.contains("journal")  && customIdentity.hasRole("EH") ){
   return null;
  }
  return "error.xhtml?faces-redirect=true";
</#if>
   }

<#foreach property in pojo.allPropertiesIterator>
<#assign getter = pojo.getGetterSignature(property)>
<#if c2h.isOneToManyCollection(property)>
<#assign childPojo = c2j.getPOJOClass(property.value.element.associatedClass)>
<#if (childPojo.shortName?length > eL)>
/*
 childpojo for onetoManyCollection ie Forign Table's ${childPojo}
*/

    public ${pojo.importType("java.util.List")}<${childPojo.shortName}> ${getter}() {
        return getInstance() == null ? 
            null : new ${pojo.importType("java.util.ArrayList")}<${childPojo.shortName}>( getInstance().${getter}() );
    }
</#if>
</#if>
</#foreach>

}

</#assign>
//assign is used to be able to add import dynamically
<#if pojo.packageName != "">
import ${pojo.packageName}.*;
</#if>


${classbody}
</#if>


